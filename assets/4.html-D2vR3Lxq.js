import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as l,c,a as n,b as s,w as t,d as i,e}from"./app-CvlAI_tu.js";const u="/VueDoc/assets/20221123213034-Cf2zR8ik.png",r="/VueDoc/assets/20221123213203-DCAb7HV5.png",k="/VueDoc/assets/20221123213231-B8WnwJlP.png",d="/VueDoc/assets/20221123213259-DSXqB3HC.png",m={},v={class:"hint-container details"},b=n("summary",null,"ç›®å½•",-1),S={class:"table-of-contents"},I=i(`<p>Java çš„ IO æ ‡å‡†åº“æä¾›çš„ InputStream æ ¹æ®æ¥æºå¯ä»¥åŒ…æ‹¬ï¼š</p><ul><li>FileInputStreamï¼šä»æ–‡ä»¶è¯»å–æ•°æ®ï¼Œæ˜¯æœ€ç»ˆæ•°æ®æºï¼›</li><li>ServletInputStreamï¼šä» HTTP è¯·æ±‚è¯»å–æ•°æ®ï¼Œæ˜¯æœ€ç»ˆæ•°æ®æºï¼›</li><li>Socket.getInputStream()ï¼šä» TCP è¿æ¥è¯»å–æ•°æ®ï¼Œæ˜¯æœ€ç»ˆæ•°æ®æºï¼›</li><li>...</li></ul><p>å¦‚æœæˆ‘ä»¬è¦ç»™ FileInputStream æ·»åŠ ç¼“å†²åŠŸèƒ½ï¼Œåˆ™å¯ä»¥ä» FileInputStream æ´¾ç”Ÿä¸€ä¸ªç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">BufferedFileInputStream</span> <span class="token keyword">extends</span> <span class="token class-name">FileInputStream</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœè¦ç»™ FileInputStream æ·»åŠ è®¡ç®—ç­¾åçš„åŠŸèƒ½ï¼Œç±»ä¼¼çš„ï¼Œä¹Ÿå¯ä»¥ä» FileInputStream æ´¾ç”Ÿä¸€ä¸ªç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">DigestFileInputStream</span> <span class="token keyword">extends</span> <span class="token class-name">FileInputStream</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœè¦ç»™ FileInputStream æ·»åŠ åŠ å¯† / è§£å¯†åŠŸèƒ½ï¼Œè¿˜æ˜¯å¯ä»¥ä» FileInputStream æ´¾ç”Ÿä¸€ä¸ªç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">CipherFileInputStream</span> <span class="token keyword">extends</span> <span class="token class-name">FileInputStream</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœè¦ç»™ FileInputStream æ·»åŠ ç¼“å†²å’Œç­¾åçš„åŠŸèƒ½ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿˜éœ€è¦æ´¾ç”Ÿ BufferedDigestFileInputStreamã€‚å¦‚æœè¦ç»™ FileInputStream æ·»åŠ ç¼“å†²å’ŒåŠ è§£å¯†çš„åŠŸèƒ½ï¼Œåˆ™éœ€è¦æ´¾ç”Ÿ BufferedCipherFileInputStreamã€‚</p><p>æˆ‘ä»¬å‘ç°ï¼Œç»™ FileInputStream æ·»åŠ  3 ç§åŠŸèƒ½ï¼Œè‡³å°‘éœ€è¦ 3 ä¸ªå­ç±»ã€‚è¿™ 3 ç§åŠŸèƒ½çš„ç»„åˆï¼Œåˆéœ€è¦æ›´å¤šçš„å­ç±»ï¼š</p><figure><img src="`+u+`" alt="20221123213034" tabindex="0" loading="lazy"><figcaption>20221123213034</figcaption></figure><p>è¿™è¿˜åªæ˜¯é’ˆå¯¹ FileInputStream è®¾è®¡ï¼Œå¦‚æœé’ˆå¯¹å¦ä¸€ç§ InputStream è®¾è®¡ï¼Œå¾ˆå¿«ä¼šå‡ºç°å­ç±»çˆ†ç‚¸çš„æƒ…å†µã€‚</p><p>å› æ­¤ï¼Œç›´æ¥ä½¿ç”¨ç»§æ‰¿ï¼Œä¸ºå„ç§ InputStream é™„åŠ æ›´å¤šçš„åŠŸèƒ½ï¼Œæ ¹æœ¬æ— æ³•æ§åˆ¶ä»£ç çš„å¤æ‚åº¦ï¼Œå¾ˆå¿«å°±ä¼šå¤±æ§ã€‚</p><p>ä¸ºäº†è§£å†³ä¾èµ–ç»§æ‰¿ä¼šå¯¼è‡´å­ç±»æ•°é‡å¤±æ§çš„é—®é¢˜ï¼ŒJDK é¦–å…ˆå°† InputStream åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p><p>ä¸€ç±»æ˜¯ç›´æ¥æä¾›æ•°æ®çš„åŸºç¡€ InputStream ï¼Œä¾‹å¦‚ï¼š</p><ul><li>FileInputStream</li><li>ByteArrayInputStream</li><li>ServletInputStream</li><li>...</li></ul><p>ä¸€ç±»æ˜¯æä¾›é¢å¤–é™„åŠ åŠŸèƒ½çš„ InputStreamï¼Œä¾‹å¦‚ï¼š</p><ul><li>BufferedInputStream</li><li>DigestInputStream</li><li>CipherInputStream</li><li>...</li></ul><p>å½“æˆ‘ä»¬éœ€è¦ç»™ä¸€ä¸ª â€œåŸºç¡€â€InputStream é™„åŠ å„ç§åŠŸèƒ½æ—¶ï¼Œæˆ‘ä»¬å…ˆç¡®å®šè¿™ä¸ªèƒ½æä¾›æ•°æ®æºçš„ InputStreamï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦çš„æ•°æ®æ€»å¾—æ¥è‡ªæŸä¸ªåœ°æ–¹ï¼Œä¾‹å¦‚ï¼ŒFileInputStreamï¼Œæ•°æ®æ¥æºè‡ªæ–‡ä»¶ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">InputStream</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test.gz&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç´§æ¥ç€ï¼Œæˆ‘ä»¬å¸Œæœ› FileInputStream èƒ½æä¾›ç¼“å†²çš„åŠŸèƒ½æ¥æé«˜è¯»å–çš„æ•ˆç‡ï¼Œå› æ­¤æˆ‘ä»¬ç”¨ BufferedInputStream åŒ…è£…è¿™ä¸ª InputStreamï¼Œå¾—åˆ°çš„åŒ…è£…ç±»å‹æ˜¯ BufferedInputStreamï¼Œä½†å®ƒä»ç„¶è¢«è§†ä¸ºä¸€ä¸ª InputStreamï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">InputStream</span> buffered <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æœ€åï¼Œå‡è®¾è¯¥æ–‡ä»¶å·²ç»ç”¨ gzip å‹ç¼©äº†ï¼Œæˆ‘ä»¬å¸Œæœ›ç›´æ¥è¯»å–è§£å‹ç¼©çš„å†…å®¹ï¼Œå°±å¯ä»¥å†åŒ…è£…ä¸€ä¸ª GZIPInputStreamï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">InputStream</span> gzip <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GZIPInputStream</span><span class="token punctuation">(</span>buffered<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ— è®ºæˆ‘ä»¬åŒ…è£…å¤šå°‘æ¬¡ï¼Œå¾—åˆ°çš„å¯¹è±¡å§‹ç»ˆæ˜¯ InputStreamï¼Œæˆ‘ä»¬ç›´æ¥ç”¨ InputStream æ¥å¼•ç”¨å®ƒï¼Œå°±å¯ä»¥æ­£å¸¸è¯»å–ï¼š</p><figure><img src="`+r+'" alt="20221123213203" tabindex="0" loading="lazy"><figcaption>20221123213203</figcaption></figure><p>ä¸Šè¿°è¿™ç§é€šè¿‡ä¸€ä¸ª â€œåŸºç¡€â€ ç»„ä»¶å†å åŠ å„ç§ â€œé™„åŠ â€ åŠŸèƒ½ç»„ä»¶çš„æ¨¡å¼ï¼Œç§°ä¹‹ä¸º Filter æ¨¡å¼ï¼ˆæˆ–è€…è£…é¥°å™¨æ¨¡å¼ï¼šDecoratorï¼‰ã€‚å®ƒå¯ä»¥è®©æˆ‘ä»¬é€šè¿‡å°‘é‡çš„ç±»æ¥å®ç°å„ç§åŠŸèƒ½çš„ç»„åˆï¼š</p><figure><img src="'+k+'" alt="20221123213231" tabindex="0" loading="lazy"><figcaption>20221123213231</figcaption></figure><p>ç±»ä¼¼çš„ï¼ŒOutputStream ä¹Ÿæ˜¯ä»¥è¿™ç§æ¨¡å¼æ¥æä¾›å„ç§åŠŸèƒ½ï¼š</p><figure><img src="'+d+`" alt="20221123213259" tabindex="0" loading="lazy"><figcaption>20221123213259</figcaption></figure><h2 id="ğŸ€-ç¼–å†™-filterinputstream" tabindex="-1"><a class="header-anchor" href="#ğŸ€-ç¼–å†™-filterinputstream" aria-hidden="true">#</a> ğŸ€ ç¼–å†™ FilterInputStream</h2><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±ç¼–å†™ FilterInputStreamï¼Œä»¥ä¾¿å¯ä»¥æŠŠè‡ªå·±çš„ FilterInputStreamâ€œå åŠ â€ åˆ°ä»»ä½•ä¸€ä¸ª InputStream ä¸­ã€‚</p><p>ä¸‹é¢çš„ä¾‹å­æ¼”ç¤ºäº†å¦‚ä½•ç¼–å†™ä¸€ä¸ª CountInputStreamï¼Œå®ƒçš„ä½œç”¨æ˜¯å¯¹è¾“å…¥çš„å­—èŠ‚è¿›è¡Œè®¡æ•°ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token string">&quot;hello, world!&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">CountInputStream</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CountInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> n<span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>n <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Total read &quot;</span> <span class="token operator">+</span> input<span class="token punctuation">.</span><span class="token function">getBytesRead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; bytes&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">CountInputStream</span> <span class="token keyword">extends</span> <span class="token class-name">FilterInputStream</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token class-name">CountInputStream</span><span class="token punctuation">(</span><span class="token class-name">InputStream</span> in<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getBytesRead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> b<span class="token punctuation">,</span> <span class="token keyword">int</span> off<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> off<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">+=</span> n<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„åˆ°åœ¨å åŠ å¤šä¸ª FilterInputStreamï¼Œæˆ‘ä»¬åªéœ€è¦æŒæœ‰æœ€å¤–å±‚çš„ InputStreamï¼Œå¹¶ä¸”ï¼Œå½“æœ€å¤–å±‚çš„ InputStream å…³é—­æ—¶ï¼ˆåœ¨ try(resource) å—çš„ç»“æŸå¤„è‡ªåŠ¨å…³é—­ï¼‰ï¼Œå†…å±‚çš„ InputStream çš„ close() æ–¹æ³•ä¹Ÿä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼Œå¹¶æœ€ç»ˆè°ƒç”¨åˆ°æœ€æ ¸å¿ƒçš„ â€œåŸºç¡€â€InputStreamï¼Œå› æ­¤ä¸å­˜åœ¨èµ„æºæ³„éœ²ã€‚</p><h2 id="ğŸ€-å°ç»“" tabindex="-1"><a class="header-anchor" href="#ğŸ€-å°ç»“" aria-hidden="true">#</a> ğŸ€ å°ç»“</h2><p>Java çš„ IO æ ‡å‡†åº“ä½¿ç”¨ Filter æ¨¡å¼ä¸º InputStream å’Œ OutputStream å¢åŠ åŠŸèƒ½ï¼š</p><ul><li>å¯ä»¥æŠŠä¸€ä¸ª InputStream å’Œä»»æ„ä¸ª FilterInputStream ç»„åˆï¼›</li><li>å¯ä»¥æŠŠä¸€ä¸ª OutputStream å’Œä»»æ„ä¸ª FilterOutputStream ç»„åˆã€‚</li></ul><p>Filter æ¨¡å¼å¯ä»¥åœ¨è¿è¡ŒæœŸåŠ¨æ€å¢åŠ åŠŸèƒ½ï¼ˆåˆç§° Decorator æ¨¡å¼ï¼‰ã€‚</p>`,39);function g(f,y){const a=o("router-link");return l(),c("div",null,[n("details",v,[b,n("nav",S,[n("ul",null,[n("li",null,[s(a,{to:"#ğŸ€-ç¼–å†™-filterinputstream"},{default:t(()=>[e("ğŸ€ ç¼–å†™ FilterInputStream")]),_:1})]),n("li",null,[s(a,{to:"#ğŸ€-å°ç»“"},{default:t(()=>[e("ğŸ€ å°ç»“")]),_:1})])])])]),I])}const F=p(m,[["render",g],["__file","4.html.vue"]]);export{F as default};
