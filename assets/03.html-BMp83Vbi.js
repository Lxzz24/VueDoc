import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as a,d as e}from"./app-CvlAI_tu.js";const t={},c=e(`<h1 id="ä¸»æœºçš„ç»†éƒ¨æƒé™è§„åˆ’-acl-çš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#ä¸»æœºçš„ç»†éƒ¨æƒé™è§„åˆ’-acl-çš„ä½¿ç”¨" aria-hidden="true">#</a> ä¸»æœºçš„ç»†éƒ¨æƒé™è§„åˆ’ï¼šACL çš„ä½¿ç”¨</h1><p>ä»ç¬¬ 5 ç« å¼€å§‹ï¼Œåœ¨å¼ºè°ƒ Linux çš„æƒé™æ¦‚å¿µéå¸¸é‡è¦ï¼Œä¼ ç»Ÿçš„æƒé™ä»…æœ‰ä¸‰ç§èº«ä»½ï¼ˆownerã€groupã€othersï¼‰æ­é…ä¸‰ç§æƒé™ï¼ˆrã€wã€xï¼‰ï¼Œæ— æ³•å•çº¯çš„é’ˆå¯¹æŸä¸€ä¸ªä½¿ç”¨è€…æˆ–æŸä¸€ä¸ªç¾¤ç»„æ¥è®¾ç½®è®¾ç½®ç‰¹æ®Šçš„æƒé™éœ€æ±‚ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±éœ€è¦ä½¿ç”¨ ACl è¿™ä¸ªæœºåˆ¶äº†</p><h2 id="ğŸ€-ä»€ä¹ˆæ˜¯-acl-ä¸å¦‚ä½•æ”¯æŒå¯åŠ¨-acl" tabindex="-1"><a class="header-anchor" href="#ğŸ€-ä»€ä¹ˆæ˜¯-acl-ä¸å¦‚ä½•æ”¯æŒå¯åŠ¨-acl" aria-hidden="true">#</a> ğŸ€ ä»€ä¹ˆæ˜¯ ACl ä¸å¦‚ä½•æ”¯æŒå¯åŠ¨ ACl</h2><p>ACl ï¼ˆAccess Control Listï¼‰ï¼Œä¸»è¦ç›®çš„æ˜¯æä¾›ä¼ ç»Ÿçš„ ownerã€groupã€others çš„ readã€writeã€execute æƒé™ä¹‹å¤–çš„ç‰¹æ®Šæƒé™éœ€æ±‚è®¾ç½®ã€‚ACL å¯ä»¥é’ˆå¯¹å•ä¸€ä½¿ç”¨è€…ã€å•ä¸€æ–‡ä»¶æˆ–ç›®å½•æ¥è¿›è¡Œ rã€wã€x çš„æƒé™è§„èŒƒï¼Œå¯¹äºéœ€è¦ç‰¹æ®Šæƒé™çš„ä½¿ç”¨çŠ¶å†µéå¸¸æœ‰å¸®åŠ©</p><p>ACl ä¸»è¦é’ˆå¯¹ä»¥ä¸‹æ–¹é¢æ¥æ§åˆ¶æƒé™ï¼š</p><ul><li>ä½¿ç”¨è€… user</li><li>ç¾¤ç»„ group</li><li>é»˜è®¤å±æ€§ maskï¼šé’ˆå¯¹åœ¨è¯¥ç›®å½•ä¸‹åœ¨å»ºç«‹æ–°æ–‡ä»¶/ç›®å½•æ—¶ï¼Œè§„èŒƒæ–°æ•°æ®çš„é»˜è®¤æƒé™</li></ul><p>ç®€å•è¯´ï¼Œæœ‰ä¸€ä¸ªç›®å½•ï¼Œç»™ä¸€å †äººä½¿ç”¨ï¼Œæ¯ä¸ªäººæˆ–æ¯ä¸ªç¾¤ç»„æ‰€éœ€è¦çš„æƒé™å¹¶ä¸ç›¸åŒï¼Œä½¿ç”¨ä¼ ç»Ÿ Linux ä¸‰ç§èº«ä»½çš„ä¸‰ç§æƒé™æ˜¯æ— æ³•è¾¾åˆ°çš„ï¼Œå› æ­¤åŸºæœ¬ä¸Šï¼Œä¼ ç»Ÿçš„ Linux æƒé™åªèƒ½é’ˆå¯¹ä¸€ä¸ªç”¨æˆ·ã€ä¸€ä¸ªç¾¤ç»„ä»¥åŠéæ­¤ç¾¤ç»„çš„å…¶ä»–äººè®¾ç½®æƒé™ã€‚æ— æ³•é’ˆå¯¹å•ä¸€ç”¨æˆ·æˆ–ä¸ªäººæ¥è®¾è®¡æƒé™ã€‚</p><h3 id="å¦‚ä½•å¯åŠ¨-acl" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•å¯åŠ¨-acl" aria-hidden="true">#</a> å¦‚ä½•å¯åŠ¨ ACl</h3><p>åŸæœ¬ ACL æ˜¯ unix-like æ“ä½œç³»ç»Ÿé¢å¤–æ”¯æŒçš„é¡¹ç›®ï¼Œå› ä¸ºè¿‘å¹´æ¥å¯¹æƒé™éœ€æ±‚æ—¥ç›Šå¢å¤§ï¼Œå› æ­¤ç›®å‰ ACl å‡ ä¹å·²ç»é¢„è®¾åŠ å…¥æ‰€æœ‰åœºæ™¯çš„ Linux æ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½å‚æ•°ä¸­ï¼ˆext2\\3\\4ã€xfs ç­‰ï¼‰ï¼Œæ‰€ä»¥æ— éœ€ä»»ä½•æ“ä½œã€‚å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼æ¥æ£€æµ‹æ˜¯å¦æ”¯æŒ ACL</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@study mrcode<span class="token punctuation">]</span><span class="token comment"># dmesg | grep -i acl</span>
<span class="token comment"># è¿™é‡Œ +ACl</span>
<span class="token punctuation">[</span>    <span class="token number">1.329361</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: systemd <span class="token number">219</span> running <span class="token keyword">in</span> system mode. <span class="token punctuation">(</span>+PAM +AUDIT +SELINUX +IMA <span class="token parameter variable">-APPARMOR</span> +SMACK +SYSVINIT +UTMP +LIBCRYPTSETUP +GCRYPT +GNUTLS +ACL +XZ +LZ4 <span class="token parameter variable">-SECCOMP</span> +BLKID +ELFUTILS +KMOD +IDN<span class="token punctuation">)</span>
<span class="token comment"># è¿™é‡Œ SGI XFS with ACLs</span>
<span class="token punctuation">[</span>    <span class="token number">2.978756</span><span class="token punctuation">]</span> SGI XFS with ACLs, security attributes, no debug enabled
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬”è€…ç–‘é—®ï¼šæ€ä¹ˆç¡®å®š xfs æ”¯æŒï¼Ÿéš¾é“æ˜¯å› ä¸ºæˆ‘è‡ªå·±çŸ¥é“æ˜¯åœ¨ xfs ç³»ç»Ÿä¸Šï¼Ÿ</p><h2 id="ğŸ€-acl-çš„è®¾ç½®æŠ€å·§-getfaclã€setfacl" tabindex="-1"><a class="header-anchor" href="#ğŸ€-acl-çš„è®¾ç½®æŠ€å·§-getfaclã€setfacl" aria-hidden="true">#</a> ğŸ€ ACL çš„è®¾ç½®æŠ€å·§ï¼šgetfaclã€setfacl</h2><ul><li>getfaclï¼šå–å¾—æŸä¸ªæ–‡ä»¶/ç›®å½•çš„ ACL è®¾ç½®ä¿¡æ¯</li><li>setfaclï¼šè®¾ç½®æŸä¸ªæ–‡ä»¶/ç›®å½•çš„ ACl</li></ul><h3 id="setfacl-æŒ‡ä»¤ç”¨æ³•ä»‹ç»ä»¥åŠæœ€ç®€å•çš„-u-è´¦æˆ·-æƒé™-è®¾ç½®" tabindex="-1"><a class="header-anchor" href="#setfacl-æŒ‡ä»¤ç”¨æ³•ä»‹ç»ä»¥åŠæœ€ç®€å•çš„-u-è´¦æˆ·-æƒé™-è®¾ç½®" aria-hidden="true">#</a> setfacl æŒ‡ä»¤ç”¨æ³•ä»‹ç»ä»¥åŠæœ€ç®€å•çš„ <code>u:è´¦æˆ·:æƒé™</code> è®¾ç½®</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>setfacl <span class="token punctuation">[</span>-bkRd<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>-ml -x<span class="token punctuation">}</span> acl å‚æ•°<span class="token punctuation">]</span> ç›®æ ‡æ–‡ä»¶å

é€‰é¡¹ä¸å‚æ•°ï¼š
	-mï¼šè®¾ç½®åç»­çš„ acl å‚æ•°ç»™æ–‡ä»¶ä½¿ç”¨ï¼Œä¸å¯ä¸ <span class="token parameter variable">-x</span> åˆç”¨
	-xï¼šåˆ é™¤åç»­çš„ acl å‚æ•°ï¼Œä¸å¯ä¸ <span class="token parameter variable">-m</span> åˆç”¨
	-bï¼šç§»é™¤ æ‰€æœ‰çš„ ACL è®¾ç½®å‚æ•°
	-kï¼šç§»é™¤ é¢„è®¾çš„ ACL å‚æ•°ï¼›ï¼ˆå…³äºæ‰€è°“çš„é¢„è®¾å‚æ•°åç»­ä»‹ç»ï¼‰
	-Rï¼šé€’å½’è®¾ç½® aclï¼ŒåŒ…æ‹¬æ­¤ç›®å½•ä¹Ÿä¼šè¢«è®¾ç½®
	-dï¼šè®¾ç½® ã€Œé¢„è®¾ acl å‚æ•°ã€çš„æ„æ€ï¼Œåªå¯¹ç›®å½•æœ‰æ•ˆï¼Œåœ¨è¯¥ç›®å½•æ–°å»ºçš„æ•°æ®ä¼šå¼•ç”¨æ­¤é»˜è®¤å€¼
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢æ˜¯ acl çš„é€‰é¡¹åŠŸèƒ½ï¼Œä¸‹é¢æ¥ä»‹ç»ä¸€äº›ç‰¹æ®Šæƒé™çš„è®¾ç½®æ–¹å¼ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 1. é’ˆå¯¹ç‰¹å®šä½¿ç”¨è€…çš„æ–¹å¼</span>
<span class="token comment"># è®¾ç½®è§„èŒƒï¼šã€Œu:[ä½¿ç”¨è€…è´¦æˆ·åˆ—è¡¨]:[rwx]ã€</span>
<span class="token comment"># ä¾‹å¦‚ é’ˆå¯¹ mrcode1 çš„æƒé™è®¾ç½®ä¸º rx</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># touch acl_test1</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># ll acl_test1 </span>
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">0</span> <span class="token number">2</span>æœˆ  <span class="token number">24</span> <span class="token number">16</span>:47 acl_test1
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># setfacl -m u:mrcode1:rx acl_test1 </span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># ll acl_test1 </span>
-rw-r-xr--+ <span class="token number">1</span> root root <span class="token number">0</span> <span class="token number">2</span>æœˆ  <span class="token number">24</span> <span class="token number">16</span>:47 acl_test1
<span class="token comment"># æƒé™éƒ¨åˆ†å¤šäº†ä¸€ä¸ª +ï¼Œä¸”ä¸åŸæœ¬çš„æƒé™ 644 çœ‹èµ·æ¥å·®å¼‚å¾ˆå¤§ã€‚</span>

<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># setfacl -m u::rwx acl_test1 </span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># ll acl_test1 </span>
-rwxr-xr--+ <span class="token number">1</span> root root <span class="token number">0</span> <span class="token number">2</span>æœˆ  <span class="token number">24</span> <span class="token number">16</span>:47 acl_test1
<span class="token comment"># è®¾ç½® u åé¢æ— ä½¿ç”¨è€…åˆ—è¡¨ï¼Œä»£è¡¨è®¾ç½®è¯¥æ–‡ä»¶æ‹¥æœ‰è€…ï¼Œæ‰€ä»¥ä¸Šçº¿æ˜¾ç¤º root çš„å…¨æ–‡ä¸º rwx äº†</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢æ˜¯è®¾ç½®ï¼Œæƒé™éƒ¨åˆ†ä¼šå¤šå‡ºä¸€ä¸ª + å·ï¼Œä¼ ç»Ÿçš„ ll æ˜¯ä¸çŸ¥é“è®¾ç½®äº†ä»€ä¹ˆçš„ï¼Œå¯ä»¥é€šè¿‡ getfacl æ¥æŸ¥é˜…</p><h3 id="getfacl-æŒ‡ä»¤ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#getfacl-æŒ‡ä»¤ç”¨æ³•" aria-hidden="true">#</a> getfacl æŒ‡ä»¤ç”¨æ³•</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>getfacl filename

é€‰é¡¹ä¸å‚æ•°ï¼šå‡ ä¹ä¸ setfacl ç›¸åŒï¼Œè¿™é‡Œä¸è´´äº†
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># åˆ—å‡ºåˆšåˆšè®¾ç½®çš„ acl_test1 çš„æƒé™å†…å®¹</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># getfacl acl_test1 </span>
<span class="token comment"># file: acl_test1			# æ–‡ä»¶å</span>
<span class="token comment"># owner: root				# æ‹¥æœ‰è€…ï¼Œls -l çœ‹åˆ°çš„ç¬¬ 3 å­—æ®µ</span>
<span class="token comment"># group: root				# è¯¥æ–‡ä»¶æ‰€å±ç¾¤ç»„ï¼Œls -l çœ‹åˆ°çš„ç¬¬ 4 å­—æ®µ</span>
user::rwx					<span class="token comment"># ä½¿ç”¨è€…åˆ—è¡¨æ æ˜¯ç©ºçš„ï¼Œæ ‡è¯†è¯¥æƒé™è®¾ç½®é’ˆå¯¹çš„æ˜¯æ–‡ä»¶çš„æ‹¥æœ‰è€…</span>
user:mrcode1:r-x			<span class="token comment"># é’ˆå¯¹ mrcode1 çš„æƒé™è®¾ç½®ä¸º rxï¼Œä¸æ‹¥æœ‰è€…ä¸åŒ</span>
group::r--					<span class="token comment"># ç¾¤ç»„çš„è®¾ç½®</span>
mask::r-x					<span class="token comment"># æ­¤æ–‡ä»¶é¢„è®¾çš„æœ‰æ•ˆæƒé™ mask</span>
other::r--					<span class="token comment"># å…¶ä»–äººæ‹¥æœ‰çš„æƒé™</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç‰¹å®šçš„å•ä¸€ç¾¤ç»„çš„æƒé™è®¾ç½®-g-ç¾¤ç»„å-æƒé™" tabindex="-1"><a class="header-anchor" href="#ç‰¹å®šçš„å•ä¸€ç¾¤ç»„çš„æƒé™è®¾ç½®-g-ç¾¤ç»„å-æƒé™" aria-hidden="true">#</a> ç‰¹å®šçš„å•ä¸€ç¾¤ç»„çš„æƒé™è®¾ç½®ï¼š<code>g:ç¾¤ç»„å:æƒé™</code></h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 2. é’ˆå¯¹ç‰¹å®šç¾¤ç»„çš„æ–¹å¼</span>
<span class="token comment"># è®¾ç½®è§„èŒƒï¼šã€Œg:[ç¾¤ç»„åˆ—è¡¨]:[rwx]ã€</span>
<span class="token comment"># é’ˆå¯¹ mygroup1 çš„æƒé™è®¾ç½®ä¸º rx</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># setfacl -m g:mygroup1:rx acl_test1 </span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># getfacl acl_test1 </span>
<span class="token comment"># file: acl_test1</span>
<span class="token comment"># owner: root</span>
<span class="token comment"># group: root</span>
user::rwx
user:mrcode1:r-x
group::r--
group:mygroup1:r-x				<span class="token comment"># å¤šäº†è¿™ä¸ªæƒé™è®¾ç½®</span>
mask::r-x
other::r--
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é’ˆå¯¹æœ‰æ•ˆæƒé™è®¾ç½®-m-æƒé™" tabindex="-1"><a class="header-anchor" href="#é’ˆå¯¹æœ‰æ•ˆæƒé™è®¾ç½®-m-æƒé™" aria-hidden="true">#</a> é’ˆå¯¹æœ‰æ•ˆæƒé™è®¾ç½®ï¼š<code>m:æƒé™</code></h3><p>ç¾¤ç»„ä¸ä½¿ç”¨è€…è®¾ç½®ç±»ä¼¼ï¼Œä½†æ˜¯é‚£ä¸ª mask æœ‰ç‚¹åƒæ˜¯ã€Œæœ‰æ•ˆæƒé™ã€çš„æ„æ€ï¼šä½¿ç”¨è€…æˆ–ç¾¤ç»„æ‰€è®¾ç½®çš„æƒé™å¿…é¡»è¦å­˜åœ¨ä¸ mask çš„æƒé™è®¾ç½®èŒƒå›´å†…æ‰ä¼šç”Ÿæ•ˆï¼Œä¹Ÿå°±æ˜¯æœ‰æ•ˆæƒé™ effective permission</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 3. é’ˆå¯¹æœ‰æ•ˆå…¨æ˜¯ mask çš„è®¾ç½®æ–¹å¼</span>
<span class="token comment"># è®¾ç½®è§„èŒƒï¼šã€Œm:[rwx]ã€</span>
<span class="token comment"># é’ˆå¯¹åˆšåˆšçš„æ–‡ä»¶è§„èŒƒä»…æœ‰ r</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># setfacl -m m:r acl_test1 </span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># getfacl acl_test1 </span>
<span class="token comment"># file: acl_test1</span>
<span class="token comment"># owner: root</span>
<span class="token comment"># group: root</span>
user::rwx
user:mrcode1:r-x		<span class="token comment">#effective:r--		# æœ‰æ•ˆæƒé™åªæœ‰ r</span>
group::r--
group:mygroup1:r-x		<span class="token comment">#effective:r--</span>
mask::r--
other::r--

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯¥åŠŸèƒ½å¯ä»¥é€šè¿‡ mask æ¥è§„èŒƒæœ€å¤§å…è®¸çš„æƒé™ï¼Œå°±èƒ½é¿å…ä¸å°å¿ƒå¼€æ”¾æŸäº›æƒé™ç»™å…¶ä»–ä½¿ç”¨è€…æˆ–è€…ç¾¤ç»„äº†ã€‚ä¸è¿‡ï¼Œé€šå¸¸éƒ½æ˜¯å°† mask è®¾ç½®ä¸º rwxï¼Œå†åˆ†åˆ«ä¾æ®ä¸åŒçš„ä½¿ç”¨è€…ã€ç¾¤ç»„å»è§„èŒƒä»–ä»¬çš„æƒé™</p><h3 id="ä¾‹é¢˜" tabindex="-1"><a class="header-anchor" href="#ä¾‹é¢˜" aria-hidden="true">#</a> ä¾‹é¢˜</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># èŒƒä¾‹ 1ï¼š å°†å‰ä¸€å°èŠ‚ä»»åŠ¡äºŒä¸­ /srv/projecta ç›®å½•ï¼Œè®© myuser1 å¯ä»¥è¿›å…¥æŸ¥é˜…ï¼Œä½†æ˜¯ myuser1 ä¸å…·æœ‰ä¿®æ”¹çš„æƒé™</span>
<span class="token comment"># ç”±äº myuser1 æ˜¯ç‹¬ç«‹çš„ä½¿ç”¨è€…ä¸ç¾¤ç»„ï¼Œå› æ­¤æ— æ³•ä½¿ç”¨ä¼ ç»Ÿçš„ Linux æƒé™è®¾ç½®ï¼Œæ­¤æ—¶åº”è¯¥ä½¿ç”¨ ACL çš„è®¾ç½®</span>

<span class="token comment"># 1. å…ˆæµ‹è¯•ä½¿ç”¨ myuser1 èƒ½å¦è¿›å…¥è¯¥ç›®å½•</span>
<span class="token punctuation">[</span>myuser1@study ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">cd</span> /srv/projecta/
-bash: cd: /srv/projecta/: Permission denied

<span class="token comment"># 2. ä¿®æ”¹ ACL æƒé™ä¸ºè¯»å’Œæ‰§è¡Œ</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># setfacl -m u:myuser1:rx /srv/projecta/</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># getfacl /srv/projecta/</span>
getfacl: Removing leading <span class="token string">&#39;/&#39;</span> from absolute path names
<span class="token comment"># file: srv/projecta/</span>
<span class="token comment"># owner: root</span>
<span class="token comment"># group: projecta</span>
<span class="token comment"># flags: -s-</span>
user::rwx
user:myuser1:r-x		<span class="token comment"># è®¾ç½®äº†æƒé™</span>
group::rwx
mask::rwx
other::---

<span class="token comment"># 3. æµ‹è¯•æ˜¯å¦æˆåŠŸè¿›å…¥</span>
<span class="token punctuation">[</span>myuser1@study ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">cd</span> /srv/projecta/
<span class="token punctuation">[</span>myuser1@study projecta<span class="token punctuation">]</span>$ ll <span class="token parameter variable">-a</span>
total <span class="token number">0</span>
drwxrws---+ <span class="token number">2</span> root projecta  <span class="token number">6</span> Feb <span class="token number">24</span> <span class="token number">15</span>:04 <span class="token builtin class-name">.</span>
drwxr-xr-x. <span class="token number">3</span> root root     <span class="token number">22</span> Feb <span class="token number">24</span> <span class="token number">15</span>:04 <span class="token punctuation">..</span>
<span class="token comment"># æµ‹è¯•å†™å…¥ï¼Œç¼ºå°‘ä¸å¯å†™å…¥</span>
<span class="token punctuation">[</span>myuser1@study projecta<span class="token punctuation">]</span>$ <span class="token function">touch</span> testing
touch: cannot <span class="token function">touch</span> <span class="token string">&#39;testing&#39;</span><span class="token builtin class-name">:</span> Permission denied

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä¾‹å­å®Œæˆäº†ä¹‹å‰ä»»åŠ¡äºŒçš„åç»­éœ€æ±‚ï¼Œä¸‹é¢æ¥ä»‹ç»ä¸‹é»˜è®¤æƒé™ï¼Œä¹Ÿå°±æ˜¯åˆ›å»ºæ–°æ–‡ä»¶æ˜¯å¦èƒ½ç»§æ‰¿ ACl è®¾ç½®ï¼Ÿ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># ä½¿ç”¨ root è´¦æˆ·å–åˆ›å»ºç›®å½•å¯æ–‡ä»¶ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰ç»§æ‰¿ acl è®¾ç½®</span>
<span class="token punctuation">[</span>root@study projecta<span class="token punctuation">]</span><span class="token comment"># touch abc1</span>
<span class="token punctuation">[</span>root@study projecta<span class="token punctuation">]</span><span class="token comment"># mkdir abc2</span>
<span class="token punctuation">[</span>root@study projecta<span class="token punctuation">]</span><span class="token comment"># ll -d abc*;</span>
-rw-r--r--. <span class="token number">1</span> root projecta <span class="token number">0</span> Feb <span class="token number">25</span> 09:32 abc1
drwxr-sr-x. <span class="token number">2</span> root projecta <span class="token number">6</span> Feb <span class="token number">25</span> 09:32 abc2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°æƒé™åé¢æ²¡æœ‰ <code>+</code> å·å‡ºç°ï¼Œæ ‡è¯†è¿™ä¸ª acl å±æ€§æ²¡æœ‰è¢«ç»§æ‰¿</p><h3 id="ä½¿ç”¨é»˜è®¤æƒé™è®¾ç½®ç›®å½•æœªæ¥æ–‡ä»¶çš„-acl-æƒé™ç»§æ‰¿-d-u-g-user-group-æƒé™" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨é»˜è®¤æƒé™è®¾ç½®ç›®å½•æœªæ¥æ–‡ä»¶çš„-acl-æƒé™ç»§æ‰¿-d-u-g-user-group-æƒé™" aria-hidden="true">#</a> ä½¿ç”¨é»˜è®¤æƒé™è®¾ç½®ç›®å½•æœªæ¥æ–‡ä»¶çš„ ACL æƒé™ç»§æ‰¿ <code>d:[u|g]:[user|group]:æƒé™</code></h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># è®¾ç½®è§„èŒƒï¼šd:[u|g]:[user|group ä½¿ç”¨è€…åˆ—è¡¨]:[æƒé™ rwx]</span>
<span class="token comment"># è®© myuser1 åœ¨ /srv/projeecta ç›®å½•ä¸‹ä¸€ç›´å…·æœ‰ rx çš„é¢„è®¾æƒé™</span>
<span class="token punctuation">[</span>root@study projecta<span class="token punctuation">]</span><span class="token comment"># setfacl -m d:myuser1:rx /srv/projecta/</span>
<span class="token punctuation">[</span>root@study projecta<span class="token punctuation">]</span><span class="token comment"># getfacl /srv/projecta</span>
getfacl: Removing leading <span class="token string">&#39;/&#39;</span> from absolute path names
<span class="token comment"># file: srv/projecta</span>
<span class="token comment"># owner: root</span>
<span class="token comment"># group: projecta</span>
<span class="token comment"># flags: -s-</span>
user::rwx
user:myuser1:r-x
group::rwx
mask::rwx
other::---
default:user::rwx
default:user:myuser1:r-x			<span class="token comment"># å¯ä»¥çœ‹åˆ°è¿™é‡Œå·²ç»è¢«è®¾ç½®ä¸Šäº†</span>
default:group::rwx
default:mask::rwx
default:other::---
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è®¾ç½®ä¹‹åï¼Œè¿˜å‡ºç°äº†å…¶ä»–é’ˆå¯¹æ‹¥æœ‰è€…çš„ default é…ç½®ã€‚æ‰€ä»¥è¿™é‡Œå†æ¬¡ä½¿ç”¨ root è´¦æˆ·å–åˆ›å»ºï¼Œä¹Ÿèƒ½çœ‹åˆ°ç»§æ‰¿æ•ˆæœäº†</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@study projecta<span class="token punctuation">]</span><span class="token comment"># touch abc1</span>
<span class="token punctuation">[</span>root@study projecta<span class="token punctuation">]</span><span class="token comment"># mkdir abc2</span>
<span class="token punctuation">[</span>root@study projecta<span class="token punctuation">]</span><span class="token comment"># ll -d abc*</span>
-rw-rw----+ <span class="token number">1</span> root projecta <span class="token number">0</span> Feb <span class="token number">25</span> 09:40 abc1
drwxrws---+ <span class="token number">2</span> root projecta <span class="token number">6</span> Feb <span class="token number">25</span> 09:40 abc2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœéœ€è¦è®© ACL å±æ€§å…¨éƒ¨æ¶ˆå¤±ï¼Œå¯ä»¥é€šè¿‡ <code>setfacl -b æ–‡ä»¶å</code> è¾¾åˆ°æ•ˆæœ</p><h3 id="ä¾‹é¢˜ç»ƒä¹ " tabindex="-1"><a class="header-anchor" href="#ä¾‹é¢˜ç»ƒä¹ " aria-hidden="true">#</a> ä¾‹é¢˜ç»ƒä¹ </h3><h4 id="ç¬¬ä¸€é¢˜" tabindex="-1"><a class="header-anchor" href="#ç¬¬ä¸€é¢˜" aria-hidden="true">#</a> ç¬¬ä¸€é¢˜</h4><p>é’ˆå¯¹ <code>/srv/projecta</code> ç›®å½•çš„æƒé™è®¾ç½®ä¸­ï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹éœ€æ±‚ï¼š</p><ol><li>å–æ¶ˆ myuser1 çš„è®¾ç½®ï¼ˆåŒ…æ‹¬é»˜è®¤å€¼ï¼‰</li><li>ä¸èƒ½è®© pro3 è¿™ä¸ªç”¨æˆ·ä½¿ç”¨è¯¥ç›®å½•ï¼Œä¹Ÿå°±æ˜¯ pro3 åœ¨è¯¥ç›®å½•ä¸‹æ²¡æœ‰ä»»ä½•æƒé™</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 1. å–æ¶ˆ myuser1 çš„è®¾ç½®å’Œé»˜è®¤å€¼</span>
<span class="token comment"># å…ˆæŸ¥è¯¢åˆ°é…ç½®äº†å“ªäº›å±æ€§</span>
<span class="token punctuation">[</span>root@study projecta<span class="token punctuation">]</span><span class="token comment"># getfacl /srv/projecta/ | grep myuser1</span>
getfacl: Removing leading <span class="token string">&#39;/&#39;</span> from absolute path names
user:myuser1:r-x
default:user:myuser1:r-x
<span class="token comment"># é€šè¿‡ -x å‚æ•°æ¥å–æ¶ˆï¼Œå–æ¶ˆçš„æ—¶å€™ï¼Œä¸éœ€è¦å†™æƒé™ï¼Œç›´æ¥å†™å‰é¢å®šä½éƒ¨ä½</span>
<span class="token punctuation">[</span>root@study projecta<span class="token punctuation">]</span><span class="token comment"># setfacl -x u:myuser1 /srv/projecta/</span>
<span class="token punctuation">[</span>root@study projecta<span class="token punctuation">]</span><span class="token comment"># setfacl -x d:myuser1 /srv/projecta/</span>
<span class="token punctuation">[</span>root@study projecta<span class="token punctuation">]</span><span class="token comment"># getfacl /srv/projecta/ | grep myuser1</span>


<span class="token comment"># 2.è®© pro3 è¿™ä¸ªç”¨æˆ·æ— æ³•ä½¿ç”¨è¯¥ç›®å½•</span>
<span class="token punctuation">[</span>root@study projecta<span class="token punctuation">]</span><span class="token comment"># setfacl -m u:pro3:- /srv/projecta/</span>
<span class="token punctuation">[</span>root@study projecta<span class="token punctuation">]</span><span class="token comment"># getfacl /srv/projecta/ | grep pro3   </span>
getfacl: Removing leading <span class="token string">&#39;/&#39;</span> from absolute path names
user:pro3:---			<span class="token comment"># è¿™æ ·ä¸€æ¥å°±æ²¡æœ‰ä»»ä½•æƒé™äº†</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,42),l=[c];function i(o,p){return s(),a("div",null,l)}const u=n(t,[["render",i],["__file","03.html.vue"]]);export{u as default};
