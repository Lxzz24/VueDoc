import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as c,o,c as l,a as n,b as a,w as e,d as i,e as t}from"./app-CvlAI_tu.js";const u="/VueDoc/assets/image-20231128153414751-DbNRReXy.png",d="/VueDoc/assets/image-20231128153649340-BTr9dyPQ.png",k="/VueDoc/assets/image-20231128153708359-Bz_LReSW.png",r={},m={class:"hint-container details"},v=n("summary",null,"ç›®å½•",-1),b={class:"table-of-contents"},h=i('<p>Java è¯­è¨€è™½ç„¶å†…ç½®äº†å¤šçº¿ç¨‹æ”¯æŒï¼Œå¯åŠ¨ä¸€ä¸ªæ–°çº¿ç¨‹éå¸¸æ–¹ä¾¿ï¼Œä½†æ˜¯ï¼Œåˆ›å»ºçº¿ç¨‹éœ€è¦æ“ä½œç³»ç»Ÿèµ„æºï¼ˆçº¿ç¨‹èµ„æºï¼Œæ ˆç©ºé—´ç­‰ï¼‰ï¼Œé¢‘ç¹åˆ›å»ºå’Œé”€æ¯å¤§é‡çº¿ç¨‹éœ€è¦æ¶ˆè€—å¤§é‡æ—¶é—´ã€‚</p><p>å¦‚æœå¯ä»¥å¤ç”¨ä¸€ç»„çº¿ç¨‹ï¼š</p><figure><img src="'+u+`" alt="image-20231128153414751" tabindex="0" loading="lazy"><figcaption>image-20231128153414751</figcaption></figure><p>é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŠŠå¾ˆå¤šå°ä»»åŠ¡è®©ä¸€ç»„çº¿ç¨‹æ¥æ‰§è¡Œï¼Œè€Œä¸æ˜¯ä¸€ä¸ªä»»åŠ¡å¯¹åº”ä¸€ä¸ªæ–°çº¿ç¨‹ã€‚è¿™ç§èƒ½æ¥æ”¶å¤§é‡å°ä»»åŠ¡å¹¶è¿›è¡Œåˆ†å‘å¤„ç†çš„å°±æ˜¯çº¿ç¨‹æ± ã€‚</p><p>ç®€å•åœ°è¯´ï¼Œçº¿ç¨‹æ± å†…éƒ¨ç»´æŠ¤äº†è‹¥å¹²ä¸ªçº¿ç¨‹ï¼Œæ²¡æœ‰ä»»åŠ¡çš„æ—¶å€™ï¼Œè¿™äº›çº¿ç¨‹éƒ½å¤„äºç­‰å¾…çŠ¶æ€ã€‚å¦‚æœæœ‰æ–°ä»»åŠ¡ï¼Œå°±åˆ†é…ä¸€ä¸ªç©ºé—²çº¿ç¨‹æ‰§è¡Œã€‚å¦‚æœæ‰€æœ‰çº¿ç¨‹éƒ½å¤„äºå¿™ç¢ŒçŠ¶æ€ï¼Œæ–°ä»»åŠ¡è¦ä¹ˆæ”¾å…¥é˜Ÿåˆ—ç­‰å¾…ï¼Œè¦ä¹ˆå¢åŠ ä¸€ä¸ªæ–°çº¿ç¨‹è¿›è¡Œå¤„ç†ã€‚</p><p>Java æ ‡å‡†åº“æä¾›äº† <code>ExecutorService</code> æ¥å£è¡¨ç¤ºçº¿ç¨‹æ± ï¼Œå®ƒçš„å…¸å‹ç”¨æ³•å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// åˆ›å»ºå›ºå®šå¤§å°çš„çº¿ç¨‹æ± :</span>
<span class="token class-name">ExecutorService</span> executor <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æäº¤ä»»åŠ¡:</span>
executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>task1<span class="token punctuation">)</span><span class="token punctuation">;</span>
executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>task2<span class="token punctuation">)</span><span class="token punctuation">;</span>
executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>task3<span class="token punctuation">)</span><span class="token punctuation">;</span>
executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>task4<span class="token punctuation">)</span><span class="token punctuation">;</span>
executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>task5<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› ä¸º <code>ExecutorService</code> åªæ˜¯æ¥å£ï¼ŒJava æ ‡å‡†åº“æä¾›çš„å‡ ä¸ªå¸¸ç”¨å®ç°ç±»æœ‰ï¼š</p><ul><li>FixedThreadPoolï¼šçº¿ç¨‹æ•°å›ºå®šçš„çº¿ç¨‹æ± ï¼›</li><li>CachedThreadPoolï¼šçº¿ç¨‹æ•°æ ¹æ®ä»»åŠ¡åŠ¨æ€è°ƒæ•´çš„çº¿ç¨‹æ± ï¼›</li><li>SingleThreadExecutorï¼šä»…å•çº¿ç¨‹æ‰§è¡Œçš„çº¿ç¨‹æ± ã€‚</li></ul><p>åˆ›å»ºè¿™äº›çº¿ç¨‹æ± çš„æ–¹æ³•éƒ½è¢«å°è£…åˆ° <code>Executors</code> è¿™ä¸ªç±»ä¸­ã€‚æˆ‘ä»¬ä»¥ <code>FixedThreadPool</code> ä¸ºä¾‹ï¼Œçœ‹çœ‹çº¿ç¨‹æ± çš„æ‰§è¡Œé€»è¾‘ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// thread-pool</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// åˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°çš„çº¿ç¨‹æ± :</span>
        <span class="token class-name">ExecutorService</span> es <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            es<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Task</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// å…³é—­çº¿ç¨‹æ± :</span>
        es<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Task</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Task</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;start task&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;end task&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬è§‚å¯Ÿæ‰§è¡Œç»“æœï¼Œä¸€æ¬¡æ€§æ”¾å…¥ 6 ä¸ªä»»åŠ¡ï¼Œç”±äºçº¿ç¨‹æ± åªæœ‰å›ºå®šçš„ 4 ä¸ªçº¿ç¨‹ï¼Œå› æ­¤ï¼Œå‰ 4 ä¸ªä»»åŠ¡ä¼šåŒæ—¶æ‰§è¡Œï¼Œç­‰åˆ°æœ‰çº¿ç¨‹ç©ºé—²åï¼Œæ‰ä¼šæ‰§è¡Œåé¢çš„ä¸¤ä¸ªä»»åŠ¡ã€‚</p><p>çº¿ç¨‹æ± åœ¨ç¨‹åºç»“æŸçš„æ—¶å€™è¦å…³é—­ã€‚ä½¿ç”¨ <code>shutdown()</code> æ–¹æ³•å…³é—­çº¿ç¨‹æ± çš„æ—¶å€™ï¼Œå®ƒä¼šç­‰å¾…æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡å…ˆå®Œæˆï¼Œç„¶åå†å…³é—­ã€‚<code>shutdownNow()</code> ä¼šç«‹åˆ»åœæ­¢æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œ<code>awaitTermination()</code> åˆ™ä¼šç­‰å¾…æŒ‡å®šçš„æ—¶é—´è®©çº¿ç¨‹æ± å…³é—­ã€‚</p><p>å¦‚æœæˆ‘ä»¬æŠŠçº¿ç¨‹æ± æ”¹ä¸º <code>CachedThreadPool</code>ï¼Œç”±äºè¿™ä¸ªçº¿ç¨‹æ± çš„å®ç°ä¼šæ ¹æ®ä»»åŠ¡æ•°é‡åŠ¨æ€è°ƒæ•´çº¿ç¨‹æ± çš„å¤§å°ï¼Œæ‰€ä»¥ 6 ä¸ªä»»åŠ¡å¯ä¸€æ¬¡æ€§å…¨éƒ¨åŒæ—¶æ‰§è¡Œã€‚</p><p>å¦‚æœæˆ‘ä»¬æƒ³æŠŠçº¿ç¨‹æ± çš„å¤§å°é™åˆ¶åœ¨ 4ï½10 ä¸ªä¹‹é—´åŠ¨æ€è°ƒæ•´æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬æŸ¥çœ‹ <code>Executors.newCachedThreadPool()</code> æ–¹æ³•çš„æºç ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ExecutorService</span> <span class="token function">newCachedThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">,</span>
                                    <span class="token number">60L</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">,</span>
                                    <span class="token keyword">new</span> <span class="token class-name">SynchronousQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› æ­¤ï¼Œæƒ³åˆ›å»ºæŒ‡å®šåŠ¨æ€èŒƒå›´çš„çº¿ç¨‹æ± ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">int</span> min <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> max <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token class-name">ExecutorService</span> es <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span>min<span class="token punctuation">,</span> max<span class="token punctuation">,</span>
        <span class="token number">60L</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SynchronousQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ€-scheduledthreadpool" tabindex="-1"><a class="header-anchor" href="#ğŸ€-scheduledthreadpool" aria-hidden="true">#</a> ğŸ€ ScheduledThreadPool</h2><p>è¿˜æœ‰ä¸€ç§ä»»åŠ¡ï¼Œéœ€è¦å®šæœŸåå¤æ‰§è¡Œï¼Œä¾‹å¦‚ï¼Œæ¯ç§’åˆ·æ–°è¯åˆ¸ä»·æ ¼ã€‚è¿™ç§ä»»åŠ¡æœ¬èº«å›ºå®šï¼Œéœ€è¦åå¤æ‰§è¡Œçš„ï¼Œå¯ä»¥ä½¿ç”¨ <code>ScheduledThreadPool</code>ã€‚æ”¾å…¥ <code>ScheduledThreadPool</code> çš„ä»»åŠ¡å¯ä»¥å®šæœŸåå¤æ‰§è¡Œã€‚</p><p>åˆ›å»ºä¸€ä¸ª <code>ScheduledThreadPool</code> ä»ç„¶æ˜¯é€šè¿‡ <code>Executors</code> ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ScheduledExecutorService</span> ses <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newScheduledThreadPool</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆ‘ä»¬å¯ä»¥æäº¤ä¸€æ¬¡æ€§ä»»åŠ¡ï¼Œå®ƒä¼šåœ¨æŒ‡å®šå»¶è¿Ÿååªæ‰§è¡Œä¸€æ¬¡ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// 1 ç§’åæ‰§è¡Œä¸€æ¬¡æ€§ä»»åŠ¡:</span>
ses<span class="token punctuation">.</span><span class="token function">schedule</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Task</span><span class="token punctuation">(</span><span class="token string">&quot;one-time&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä»»åŠ¡ä»¥å›ºå®šçš„æ¯ 3 ç§’æ‰§è¡Œï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// 2 ç§’åå¼€å§‹æ‰§è¡Œå®šæ—¶ä»»åŠ¡ï¼Œæ¯ 3 ç§’æ‰§è¡Œ:</span>
ses<span class="token punctuation">.</span><span class="token function">scheduleAtFixedRate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Task</span><span class="token punctuation">(</span><span class="token string">&quot;fixed-rate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä»»åŠ¡ä»¥å›ºå®šçš„ 3 ç§’ä¸ºé—´éš”æ‰§è¡Œï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// 2 ç§’åå¼€å§‹æ‰§è¡Œå®šæ—¶ä»»åŠ¡ï¼Œä»¥ 3 ç§’ä¸ºé—´éš”æ‰§è¡Œ:</span>
ses<span class="token punctuation">.</span><span class="token function">scheduleWithFixedDelay</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Task</span><span class="token punctuation">(</span><span class="token string">&quot;fixed-delay&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ FixedRate å’Œ FixedDelay çš„åŒºåˆ«ã€‚FixedRate æ˜¯æŒ‡ä»»åŠ¡æ€»æ˜¯ä»¥å›ºå®šæ—¶é—´é—´éš”è§¦å‘ï¼Œä¸ç®¡ä»»åŠ¡æ‰§è¡Œå¤šé•¿æ—¶é—´ï¼š</p><figure><img src="`+d+'" alt="image-20231128153649340" tabindex="0" loading="lazy"><figcaption>image-20231128153649340</figcaption></figure><p>è€Œ FixedDelay æ˜¯æŒ‡ï¼Œä¸Šä¸€æ¬¡ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œç­‰å¾…å›ºå®šçš„æ—¶é—´é—´éš”ï¼Œå†æ‰§è¡Œä¸‹ä¸€æ¬¡ä»»åŠ¡ï¼š</p><figure><img src="'+k+`" alt="image-20231128153708359" tabindex="0" loading="lazy"><figcaption>image-20231128153708359</figcaption></figure><p>å› æ­¤ï¼Œä½¿ç”¨ <code>ScheduledThreadPool</code> æ—¶ï¼Œæˆ‘ä»¬è¦æ ¹æ®éœ€è¦é€‰æ‹©æ‰§è¡Œä¸€æ¬¡ã€FixedRate æ‰§è¡Œè¿˜æ˜¯ FixedDelay æ‰§è¡Œã€‚</p><p>ç»†å¿ƒçš„ç«¥é‹è¿˜å¯ä»¥æ€è€ƒä¸‹é¢çš„é—®é¢˜ï¼š</p><ul><li>åœ¨ FixedRate æ¨¡å¼ä¸‹ï¼Œå‡è®¾æ¯ç§’è§¦å‘ï¼Œå¦‚æœæŸæ¬¡ä»»åŠ¡æ‰§è¡Œæ—¶é—´è¶…è¿‡ 1 ç§’ï¼Œåç»­ä»»åŠ¡ä¼šä¸ä¼šå¹¶å‘æ‰§è¡Œï¼Ÿ</li><li>å¦‚æœä»»åŠ¡æŠ›å‡ºäº†å¼‚å¸¸ï¼Œåç»­ä»»åŠ¡æ˜¯å¦ç»§ç»­æ‰§è¡Œï¼Ÿ</li></ul><p>Java æ ‡å‡†åº“è¿˜æä¾›äº†ä¸€ä¸ª <code>java.util.Timer</code> ç±»ï¼Œè¿™ä¸ªç±»ä¹Ÿå¯ä»¥å®šæœŸæ‰§è¡Œä»»åŠ¡ï¼Œä½†æ˜¯ï¼Œä¸€ä¸ª <code>Timer</code> ä¼šå¯¹åº”ä¸€ä¸ª <code>Thread</code>ï¼Œæ‰€ä»¥ï¼Œä¸€ä¸ª <code>Timer</code> åªèƒ½å®šæœŸæ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œå¤šä¸ªå®šæ—¶ä»»åŠ¡å¿…é¡»å¯åŠ¨å¤šä¸ª <code>Timer</code>ï¼Œè€Œä¸€ä¸ª <code>ScheduledThreadPool</code> å°±å¯ä»¥è°ƒåº¦å¤šä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ç”¨ <code>ScheduledThreadPool</code> å–ä»£æ—§çš„ <code>Timer</code>ã€‚</p><h2 id="ğŸ€-ç»ƒä¹ " tabindex="-1"><a class="header-anchor" href="#ğŸ€-ç»ƒä¹ " aria-hidden="true">#</a> ğŸ€ ç»ƒä¹ </h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itranswarp<span class="token punctuation">.</span>learnjava</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutorService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">ExecutorService</span> es <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			es<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Task</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		es<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Task</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

	<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">Task</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;start task &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;end task &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ€-å°ç»“" tabindex="-1"><a class="header-anchor" href="#ğŸ€-å°ç»“" aria-hidden="true">#</a> ğŸ€ å°ç»“</h2><p>JDK æä¾›äº† <code>ExecutorService</code> å®ç°äº†çº¿ç¨‹æ± åŠŸèƒ½ï¼š</p><ul><li>çº¿ç¨‹æ± å†…éƒ¨ç»´æŠ¤ä¸€ç»„çº¿ç¨‹ï¼Œå¯ä»¥é«˜æ•ˆæ‰§è¡Œå¤§é‡å°ä»»åŠ¡ï¼›</li><li><code>Executors</code> æä¾›äº†é™æ€æ–¹æ³•åˆ›å»ºä¸åŒç±»å‹çš„ <code>ExecutorService</code>ï¼›</li><li>å¿…é¡»è°ƒç”¨ <code>shutdown()</code> å…³é—­ <code>ExecutorService</code>ï¼›</li><li><code>ScheduledThreadPool</code> å¯ä»¥å®šæœŸè°ƒåº¦å¤šä¸ªä»»åŠ¡ã€‚</li></ul>`,41);function g(w,y){const s=c("router-link");return o(),l("div",null,[n("details",m,[v,n("nav",b,[n("ul",null,[n("li",null,[a(s,{to:"#ğŸ€-scheduledthreadpool"},{default:e(()=>[t("ğŸ€ ScheduledThreadPool")]),_:1})]),n("li",null,[a(s,{to:"#ğŸ€-ç»ƒä¹ "},{default:e(()=>[t("ğŸ€ ç»ƒä¹ ")]),_:1})]),n("li",null,[a(s,{to:"#ğŸ€-å°ç»“"},{default:e(()=>[t("ğŸ€ å°ç»“")]),_:1})])])])]),h])}const S=p(r,[["render",g],["__file","17.html.vue"]]);export{S as default};
