import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as t,o as p,c as o,a as n,e as s,b as c,w as l,d as i}from"./app-CvlAI_tu.js";const u="/VueDoc/assets/image-20231220100158844-DAmQrE5O.png",d={},r=n("blockquote",null,[n("p",null,"åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œç›¸æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚")],-1),k=n("p",null,"è£…é¥°å™¨ï¼ˆDecoratorï¼‰æ¨¡å¼ï¼Œæ˜¯ä¸€ç§åœ¨è¿è¡ŒæœŸåŠ¨æ€ç»™æŸä¸ªå¯¹è±¡çš„å®ä¾‹å¢åŠ åŠŸèƒ½çš„æ–¹æ³•ã€‚",-1),m=n("code",null,"InputStream",-1),v=n("code",null,"FileInputStream",-1),b=n("code",null,"ServletInputStream",-1),g=n("code",null,"Socket.getInputStream()",-1),w=n("code",null,"InputStream",-1),x=i(`<p>ç°åœ¨ï¼Œå¦‚æœè¦ç»™ä¸åŒçš„æœ€ç»ˆæ•°æ®æºå¢åŠ ç¼“å†²åŠŸèƒ½ã€è®¡ç®—ç­¾ååŠŸèƒ½ã€åŠ å¯†è§£å¯†åŠŸèƒ½ï¼Œé‚£ä¹ˆï¼Œ3 ä¸ªæœ€ç»ˆæ•°æ®æºã€3 ç§åŠŸèƒ½ä¸€å…±éœ€è¦ 9 ä¸ªå­ç±»ã€‚å¦‚æœç»§ç»­å¢åŠ æœ€ç»ˆæ•°æ®æºï¼Œæˆ–è€…å¢åŠ æ–°åŠŸèƒ½ï¼Œå­ç±»ä¼šçˆ†ç‚¸å¼å¢é•¿ï¼Œè¿™ç§è®¾è®¡æ–¹å¼æ˜¾ç„¶æ˜¯ä¸å¯å–çš„ã€‚</p><p>Decorator æ¨¡å¼çš„ç›®çš„å°±æ˜¯æŠŠä¸€ä¸ªä¸€ä¸ªçš„é™„åŠ åŠŸèƒ½ï¼Œç”¨ Decorator çš„æ–¹å¼ç»™ä¸€å±‚ä¸€å±‚åœ°ç´¯åŠ åˆ°åŸå§‹æ•°æ®æºä¸Šï¼Œæœ€ç»ˆï¼Œé€šè¿‡ç»„åˆè·å¾—æˆ‘ä»¬æƒ³è¦çš„åŠŸèƒ½ã€‚</p><p>ä¾‹å¦‚ï¼šç»™ <code>FileInputStream</code> å¢åŠ ç¼“å†²å’Œè§£å‹ç¼©åŠŸèƒ½ï¼Œç”¨ Decorator æ¨¡å¼å†™å‡ºæ¥å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// åˆ›å»ºåŸå§‹çš„æ•°æ®æº:</span>
<span class="token class-name">InputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test.gz&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å¢åŠ ç¼“å†²åŠŸèƒ½:</span>
<span class="token class-name">InputStream</span> bis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span>fis<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å¢åŠ è§£å‹ç¼©åŠŸèƒ½:</span>
<span class="token class-name">InputStream</span> gis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GZIPInputStream</span><span class="token punctuation">(</span>bis<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€…ä¸€æ¬¡æ€§å†™æˆè¿™æ ·ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">InputStream</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GZIPInputStream</span><span class="token punctuation">(</span> <span class="token comment">// ç¬¬äºŒå±‚è£…é¥°</span>
                        <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span> <span class="token comment">// ç¬¬ä¸€å±‚è£…é¥°</span>
                            <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test.gz&quot;</span><span class="token punctuation">)</span> <span class="token comment">// æ ¸å¿ƒåŠŸèƒ½</span>
                        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è§‚å¯Ÿ <code>BufferedInputStream</code> å’Œ <code>GZIPInputStream</code>ï¼Œå®ƒä»¬å®é™…ä¸Šéƒ½æ˜¯ä» <code>FilterInputStream</code> ç»§æ‰¿çš„ï¼Œè¿™ä¸ª <code>FilterInputStream</code> å°±æ˜¯ä¸€ä¸ªæŠ½è±¡çš„ Decoratorã€‚æˆ‘ä»¬ç”¨å›¾æŠŠ Decorator æ¨¡å¼ç”»å‡ºæ¥å¦‚ä¸‹ï¼š</p><figure><img src="`+u+`" alt="image-20231220100158844" tabindex="0" loading="lazy"><figcaption>image-20231220100158844</figcaption></figure><p>æœ€é¡¶å±‚çš„ Component æ˜¯æ¥å£ï¼Œå¯¹åº”åˆ° IO çš„å°±æ˜¯ <code>InputStream</code> è¿™ä¸ªæŠ½è±¡ç±»ã€‚ComponentAã€ComponentB æ˜¯å®é™…çš„å­ç±»ï¼Œå¯¹åº”åˆ° IO çš„å°±æ˜¯ <code>FileInputStream</code>ã€<code>ServletInputStream</code> è¿™äº›æ•°æ®æºã€‚Decorator æ˜¯ç”¨äºå®ç°å„ä¸ªé™„åŠ åŠŸèƒ½çš„æŠ½è±¡è£…é¥°å™¨ï¼Œå¯¹åº”åˆ° IO çš„å°±æ˜¯ <code>FilterInputStream</code>ã€‚è€Œä» Decorator æ´¾ç”Ÿçš„å°±æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„è£…é¥°å™¨ï¼Œå®ƒä»¬æ¯ä¸ªéƒ½æœ‰ç‹¬ç«‹çš„åŠŸèƒ½ï¼Œå¯¹åº”åˆ° IO çš„å°±æ˜¯ <code>BufferedInputStream</code>ã€<code>GZIPInputStream</code> ç­‰ã€‚</p><p>Decorator æ¨¡å¼æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿå®ƒå®é™…ä¸ŠæŠŠæ ¸å¿ƒåŠŸèƒ½å’Œé™„åŠ åŠŸèƒ½ç»™åˆ†å¼€äº†ã€‚æ ¸å¿ƒåŠŸèƒ½æŒ‡ <code>FileInputStream</code> è¿™äº›çœŸæ­£è¯»æ•°æ®çš„æºå¤´ï¼Œé™„åŠ åŠŸèƒ½æŒ‡åŠ ç¼“å†²ã€å‹ç¼©ã€è§£å¯†è¿™äº›åŠŸèƒ½ã€‚å¦‚æœæˆ‘ä»¬è¦æ–°å¢æ ¸å¿ƒåŠŸèƒ½ï¼Œå°±å¢åŠ  Component çš„å­ç±»ï¼Œä¾‹å¦‚ <code>ByteInputStream</code>ã€‚å¦‚æœæˆ‘ä»¬è¦å¢åŠ é™„åŠ åŠŸèƒ½ï¼Œå°±å¢åŠ  Decorator çš„å­ç±»ï¼Œä¾‹å¦‚ <code>CipherInputStream</code>ã€‚ä¸¤éƒ¨åˆ†éƒ½å¯ä»¥ç‹¬ç«‹åœ°æ‰©å±•ï¼Œè€Œå…·ä½“å¦‚ä½•é™„åŠ åŠŸèƒ½ï¼Œç”±è°ƒç”¨æ–¹è‡ªç”±ç»„åˆï¼Œä»è€Œæå¤§åœ°å¢å¼ºäº†çµæ´»æ€§ã€‚</p><p>å¦‚æœæˆ‘ä»¬è¦è‡ªå·±è®¾è®¡å®Œæ•´çš„ Decorator æ¨¡å¼ï¼Œåº”è¯¥å¦‚ä½•è®¾è®¡ï¼Ÿ</p><p>æˆ‘ä»¬è¿˜æ˜¯ä¸¾ä¸ªæ —å­ï¼šå‡è®¾æˆ‘ä»¬éœ€è¦æ¸²æŸ“ä¸€ä¸ª HTML çš„æ–‡æœ¬ï¼Œä½†æ˜¯æ–‡æœ¬è¿˜å¯ä»¥é™„åŠ ä¸€äº›æ•ˆæœï¼Œæ¯”å¦‚åŠ ç²—ã€å˜æ–œä½“ã€åŠ ä¸‹åˆ’çº¿ç­‰ã€‚ä¸ºäº†å®ç°åŠ¨æ€é™„åŠ æ•ˆæœï¼Œå¯ä»¥é‡‡ç”¨ Decorator æ¨¡å¼ã€‚</p><p>é¦–å…ˆï¼Œä»ç„¶éœ€è¦å®šä¹‰é¡¶å±‚æ¥å£ <code>TextNode</code>ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TextNode</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®¾ç½® text:</span>
    <span class="token keyword">void</span> <span class="token function">setText</span><span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å– text:</span>
    <span class="token class-name">String</span> <span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹äºæ ¸å¿ƒèŠ‚ç‚¹ï¼Œä¾‹å¦‚ <code>&lt;span&gt;</code>ï¼Œå®ƒéœ€è¦ä» <code>TextNode</code> ç›´æ¥ç»§æ‰¿ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpanNode</span> <span class="token keyword">implements</span> <span class="token class-name">TextNode</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> text<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setText</span><span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> text<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&lt;span&gt;&quot;</span> <span class="token operator">+</span> text <span class="token operator">+</span> <span class="token string">&quot;&lt;/span&gt;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç´§æ¥ç€ï¼Œä¸ºäº†å®ç° Decorator æ¨¡å¼ï¼Œéœ€è¦æœ‰ä¸€ä¸ªæŠ½è±¡çš„ Decorator ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">NodeDecorator</span> <span class="token keyword">implements</span> <span class="token class-name">TextNode</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token class-name">TextNode</span> target<span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token class-name">NodeDecorator</span><span class="token punctuation">(</span><span class="token class-name">TextNode</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setText</span><span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ª <code>NodeDecorator</code> ç±»çš„æ ¸å¿ƒæ˜¯æŒæœ‰ä¸€ä¸ª <code>TextNode</code>ï¼Œå³å°†è¦æŠŠåŠŸèƒ½é™„åŠ åˆ°çš„ <code>TextNode</code> å®ä¾‹ã€‚æ¥ä¸‹æ¥å°±å¯ä»¥å†™ä¸€ä¸ªåŠ ç²—åŠŸèƒ½ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BoldDecorator</span> <span class="token keyword">extends</span> <span class="token class-name">NodeDecorator</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">BoldDecorator</span><span class="token punctuation">(</span><span class="token class-name">TextNode</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&lt;b&gt;&quot;</span> <span class="token operator">+</span> target<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;/b&gt;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç±»ä¼¼çš„ï¼Œå¯ä»¥ç»§ç»­åŠ  <code>ItalicDecorator</code>ã€<code>UnderlineDecorator</code> ç­‰ã€‚å®¢æˆ·ç«¯å¯ä»¥è‡ªç”±ç»„åˆè¿™äº› Decoratorï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">TextNode</span> n1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpanNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">TextNode</span> n2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BoldDecorator</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">UnderlineDecorator</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SpanNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">TextNode</span> n3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ItalicDecorator</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BoldDecorator</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SpanNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
n1<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
n2<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;Decorated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
n3<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>n1<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è¾“å‡º &lt;span&gt;Hello&lt;/span&gt;</span>

<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>n2<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è¾“å‡º &lt;b&gt;&lt;u&gt;&lt;span&gt;Decorated&lt;/span&gt;&lt;/u&gt;&lt;/b&gt;</span>

<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>n3<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è¾“å‡º &lt;i&gt;&lt;b&gt;&lt;span&gt;World&lt;/span&gt;&lt;/b&gt;&lt;/i&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ€-ç»ƒä¹ " tabindex="-1"><a class="header-anchor" href="#ğŸ€-ç»ƒä¹ " aria-hidden="true">#</a> ğŸ€ ç»ƒä¹ </h2><p>ä½¿ç”¨ Decorator æ·»åŠ ä¸€ä¸ª <code>&lt;del&gt;</code> æ ‡ç­¾è¡¨ç¤ºåˆ é™¤ã€‚</p><h2 id="ğŸ€-å°ç»“" tabindex="-1"><a class="header-anchor" href="#ğŸ€-å°ç»“" aria-hidden="true">#</a> ğŸ€ å°ç»“</h2><p>ä½¿ç”¨ Decorator æ¨¡å¼ï¼Œå¯ä»¥ç‹¬ç«‹å¢åŠ æ ¸å¿ƒåŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ç‹¬ç«‹å¢åŠ é™„åŠ åŠŸèƒ½ï¼ŒäºŒè€…äº’ä¸å½±å“ï¼›</p><p>å¯ä»¥åœ¨è¿è¡ŒæœŸåŠ¨æ€åœ°ç»™æ ¸å¿ƒåŠŸèƒ½å¢åŠ ä»»æ„ä¸ªé™„åŠ åŠŸèƒ½ã€‚</p>`,27);function y(S,f){const a=t("RouterLink");return p(),o("div",null,[r,k,n("p",null,[s("æˆ‘ä»¬åœ¨ IO çš„ "),c(a,{to:"/1-Java/8_IO/4.html"},{default:l(()=>[s("Filter æ¨¡å¼")]),_:1}),s(" ä¸€èŠ‚ä¸­å…¶å®å·²ç»è®²è¿‡è£…é¥°å™¨æ¨¡å¼äº†ã€‚åœ¨ Java æ ‡å‡†åº“ä¸­ï¼Œ"),m,s(" æ˜¯æŠ½è±¡ç±»ï¼Œ"),v,s("ã€"),b,s("ã€"),g,s(" è¿™äº› "),w,s(" éƒ½æ˜¯æœ€ç»ˆæ•°æ®æºã€‚")]),x])}const h=e(d,[["render",y],["__file","2_4.html.vue"]]);export{h as default};
