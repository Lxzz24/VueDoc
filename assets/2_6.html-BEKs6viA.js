import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as p,o as c,c as o,a as n,e as s,b as t,d as l}from"./app-CvlAI_tu.js";const i={},u=l(`<blockquote><p>è¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ã€‚</p></blockquote><p>äº«å…ƒï¼ˆ Flyweight ï¼‰çš„æ ¸å¿ƒæ€æƒ³å¾ˆç®€å•ï¼šå¦‚æœä¸€ä¸ªå¯¹è±¡å®ä¾‹ä¸€ç»åˆ›å»ºå°±ä¸å¯å˜ï¼Œé‚£ä¹ˆåå¤åˆ›å»ºç›¸åŒçš„å®ä¾‹å°±æ²¡æœ‰å¿…è¦ï¼Œç›´æ¥å‘è°ƒç”¨æ–¹è¿”å›ä¸€ä¸ªå…±äº«çš„å®ä¾‹å°±è¡Œï¼Œè¿™æ ·å³èŠ‚çœå†…å­˜ï¼Œåˆå¯ä»¥å‡å°‘åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ï¼Œæé«˜è¿è¡Œé€Ÿåº¦ã€‚</p><p>äº«å…ƒæ¨¡å¼åœ¨ Java æ ‡å‡†åº“ä¸­æœ‰å¾ˆå¤šåº”ç”¨ã€‚æˆ‘ä»¬çŸ¥é“ï¼ŒåŒ…è£…ç±»å‹å¦‚ <code>Byte</code>ã€<code>Integer</code> éƒ½æ˜¯ä¸å˜ç±»ï¼Œå› æ­¤ï¼Œåå¤åˆ›å»ºåŒä¸€ä¸ªå€¼ç›¸åŒçš„åŒ…è£…ç±»å‹æ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚ä»¥ <code>Integer</code> ä¸ºä¾‹ï¼Œå¦‚æœæˆ‘ä»¬é€šè¿‡ <code>Integer.valueOf()</code> è¿™ä¸ªé™æ€å·¥å‚æ–¹æ³•åˆ›å»º <code>Integer</code> å®ä¾‹ï¼Œå½“ä¼ å…¥çš„ <code>int</code> èŒƒå›´åœ¨ <code>-128</code>~<code>+127</code> ä¹‹é—´æ—¶ï¼Œä¼šç›´æ¥è¿”å›ç¼“å­˜çš„ <code>Integer</code> å®ä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// äº«å…ƒæ¨¡å¼</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> n1 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> n2 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>n1 <span class="token operator">==</span> n2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹äº <code>Byte</code> æ¥è¯´ï¼Œå› ä¸ºå®ƒä¸€å…±åªæœ‰ 256 ä¸ªçŠ¶æ€ï¼Œæ‰€ä»¥ï¼Œé€šè¿‡ <code>Byte.valueOf()</code> åˆ›å»ºçš„ <code>Byte</code> å®ä¾‹ï¼Œå…¨éƒ¨éƒ½æ˜¯ç¼“å­˜å¯¹è±¡ã€‚</p><p>å› æ­¤ï¼Œäº«å…ƒæ¨¡å¼å°±æ˜¯é€šè¿‡å·¥å‚æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼Œåœ¨å·¥å‚æ–¹æ³•å†…éƒ¨ï¼Œå¾ˆå¯èƒ½è¿”å›ç¼“å­˜çš„å®ä¾‹ï¼Œè€Œä¸æ˜¯æ–°åˆ›å»ºå®ä¾‹ï¼Œä»è€Œå®ç°ä¸å¯å˜å®ä¾‹çš„å¤ç”¨ã€‚</p><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>æ€»æ˜¯ä½¿ç”¨å·¥å‚æ–¹æ³•è€Œä¸æ˜¯ new æ“ä½œç¬¦åˆ›å»ºå®ä¾‹ï¼Œå¯è·å¾—äº«å…ƒæ¨¡å¼çš„å¥½å¤„ã€‚</p></div><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œäº«å…ƒæ¨¡å¼ä¸»è¦åº”ç”¨äºç¼“å­˜ï¼Œå³å®¢æˆ·ç«¯å¦‚æœé‡å¤è¯·æ±‚æŸäº›å¯¹è±¡ï¼Œä¸å¿…æ¯æ¬¡æŸ¥è¯¢æ•°æ®åº“æˆ–è€…è¯»å–æ–‡ä»¶ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›å†…å­˜ä¸­ç¼“å­˜çš„æ•°æ®ã€‚</p><p>æˆ‘ä»¬ä»¥ <code>Student</code> ä¸ºä¾‹ï¼Œè®¾è®¡ä¸€ä¸ªé™æ€å·¥å‚æ–¹æ³•ï¼Œå®ƒåœ¨å†…éƒ¨å¯ä»¥è¿”å›ç¼“å­˜çš„å¯¹è±¡ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
    <span class="token comment">// æŒæœ‰ç¼“å­˜:</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// é™æ€å·¥å‚æ–¹æ³•:</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Student</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> key <span class="token operator">=</span> id <span class="token operator">+</span> <span class="token string">&quot;\\n&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
        <span class="token comment">// å…ˆæŸ¥æ‰¾ç¼“å­˜:</span>
        <span class="token class-name">Student</span> std <span class="token operator">=</span> cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>std <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// æœªæ‰¾åˆ°, åˆ›å»ºæ–°å¯¹è±¡:</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;create new Student(%s, %s)&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            std <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// æ”¾å…¥ç¼“å­˜:</span>
            cache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> std<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// ç¼“å­˜ä¸­å­˜åœ¨:</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;return cached Student(%s, %s)&quot;</span><span class="token punctuation">,</span> std<span class="token punctuation">.</span>id<span class="token punctuation">,</span> std<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> std<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10),k={href:"https://github.com/google/guava",target:"_blank",rel:"noopener noreferrer"},d={href:"https://github.com/google/guava/blob/master/guava/src/com/google/common/cache/Cache.java",target:"_blank",rel:"noopener noreferrer"},r=n("h2",{id:"ğŸ€-ç»ƒä¹ ",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ğŸ€-ç»ƒä¹ ","aria-hidden":"true"},"#"),s(" ğŸ€ ç»ƒä¹ ")],-1),m=n("p",null,"ä½¿ç”¨äº«å…ƒæ¨¡å¼å®ç°ç¼“å­˜",-1),v=n("h2",{id:"ğŸ€-å°ç»“",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ğŸ€-å°ç»“","aria-hidden":"true"},"#"),s(" ğŸ€ å°ç»“")],-1),b=n("p",null,"äº«å…ƒæ¨¡å¼çš„è®¾è®¡æ€æƒ³æ˜¯å°½é‡å¤ç”¨å·²åˆ›å»ºçš„å¯¹è±¡ï¼Œå¸¸ç”¨äºå·¥å‚æ–¹æ³•å†…éƒ¨çš„ä¼˜åŒ–ã€‚",-1);function g(h,y){const a=p("ExternalLinkIcon");return c(),o("div",null,[u,n("p",null,[s("åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨æˆç†Ÿçš„ç¼“å­˜åº“ï¼Œä¾‹å¦‚ "),n("a",k,[s("Guava"),t(a)]),s(" çš„ "),n("a",d,[s("Cache"),t(a)]),s(" ï¼Œå› ä¸ºå®ƒæä¾›äº†æœ€å¤§ç¼“å­˜æ•°é‡é™åˆ¶ã€å®šæ—¶è¿‡æœŸç­‰å®ç”¨åŠŸèƒ½ã€‚")]),r,m,v,b])}const _=e(i,[["render",g],["__file","2_6.html.vue"]]);export{_ as default};
