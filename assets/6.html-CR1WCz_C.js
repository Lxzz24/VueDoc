import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as e,o as p,c as t,a as n,b as o,w as c,d as l,e as i}from"./app-CvlAI_tu.js";const u={},k={class:"hint-container details"},d=n("summary",null,"ç›®å½•",-1),r={class:"table-of-contents"},m=l(`<p>æˆ‘ä»¬æ¥æ¯”è¾ƒ Java çš„ <code>class</code> å’Œ <code>interface</code> çš„åŒºåˆ«ï¼š</p><ul><li><mark>å¯ä»¥å®ä¾‹åŒ–</mark> <code>class</code> ï¼ˆé <code>abstract</code> ï¼‰</li><li><mark>ä¸èƒ½å®ä¾‹åŒ–</mark> <code>interface</code></li></ul><p>æ‰€æœ‰ <code>interface</code> ç±»å‹çš„å˜é‡æ€»æ˜¯é€šè¿‡æŸä¸ªå®ä¾‹å‘ä¸Šè½¬å‹å¹¶èµ‹å€¼ç»™æ¥å£ç±»å‹å˜é‡çš„ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">CharSequence</span> cs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æœ‰æ²¡æœ‰å¯èƒ½ä¸ç¼–å†™å®ç°ç±»ï¼Œç›´æ¥åœ¨è¿è¡ŒæœŸåˆ›å»ºæŸä¸ª <code>interface</code> çš„å®ä¾‹å‘¢ï¼Ÿ</p><p>è¿™æ˜¯å¯èƒ½çš„ï¼Œå› ä¸º Java æ ‡å‡†åº“æä¾›äº†ä¸€ç§ <strong>åŠ¨æ€ä»£ç†ï¼ˆDynamic Proxyï¼‰</strong> çš„æœºåˆ¶ï¼š<em>å¯ä»¥åœ¨è¿è¡ŒæœŸåŠ¨æ€åˆ›å»ºæŸä¸ª <code>interface</code> çš„å®ä¾‹</em>ã€‚</p><p>ä»€ä¹ˆå«è¿è¡ŒæœŸåŠ¨æ€åˆ›å»ºï¼Ÿå¬èµ·æ¥å¥½åƒå¾ˆå¤æ‚ã€‚æ‰€è°“åŠ¨æ€ä»£ç†ï¼Œæ˜¯å’Œé™æ€ç›¸å¯¹åº”çš„ã€‚æˆ‘ä»¬æ¥çœ‹é™æ€ä»£ç æ€ä¹ˆå†™ï¼š</p><p>å®šä¹‰æ¥å£ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Hello</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">morning</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¼–å†™å®ç°ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">implements</span> <span class="token class-name">Hello</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">morning</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Good morning,&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»ºå®ä¾‹ï¼Œè½¬å‹ä¸ºæ¥å£å¹¶è°ƒç”¨ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Hello</span> hello <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HelloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hello<span class="token punctuation">.</span><span class="token function">morning</span><span class="token punctuation">(</span><span class="token string">&quot;Bob&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§æ–¹å¼å°±æ˜¯æˆ‘ä»¬é€šå¸¸ç¼–å†™ä»£ç çš„æ–¹å¼ã€‚</p><p>è¿˜æœ‰ä¸€ç§æ–¹å¼æ˜¯åŠ¨æ€ä»£ç ï¼Œæˆ‘ä»¬ä»ç„¶å…ˆå®šä¹‰äº†æ¥å£ <code>Hello</code>ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸å»ç¼–å†™å®ç°ç±»ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡ JDK æä¾›çš„ä¸€ä¸ª <strong><code>Proxy.newProxyInstance()</code></strong> åˆ›å»ºäº†ä¸€ä¸ª <code>Hello</code> æ¥å£å¯¹è±¡ã€‚è¿™ç§æ²¡æœ‰å®ç°ç±»ä½†æ˜¯åœ¨è¿è¡ŒæœŸåŠ¨æ€åˆ›å»ºäº†ä¸€ä¸ªæ¥å£å¯¹è±¡çš„æ–¹å¼ï¼Œæˆ‘ä»¬ç§°ä¸ºåŠ¨æ€ä»£ç ã€‚<em>JDK æä¾›çš„åŠ¨æ€åˆ›å»ºæ¥å£å¯¹è±¡çš„æ–¹å¼ï¼Œå°±å«åŠ¨æ€ä»£ç†ã€‚</em></p><p>ä¸€ä¸ªæœ€ç®€å•çš„åŠ¨æ€ä»£ç†å®ç°å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Proxy</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">InvocationHandler</span> handler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;morning&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Good morning, &quot;</span> <span class="token operator">+</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token class-name">Hello</span> hello <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Hello</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>
            <span class="token class-name">Hello</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// ä¼ å…¥ ClassLoader</span>
            <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token class-name">Hello</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// ä¼ å…¥è¦å®ç°çš„æ¥å£</span>
            handler<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¼ å…¥å¤„ç†è°ƒç”¨æ–¹æ³•çš„ InvocationHandler</span>
        hello<span class="token punctuation">.</span><span class="token function">morning</span><span class="token punctuation">(</span><span class="token string">&quot;Bob&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Hello</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">morning</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿è¡ŒæœŸåŠ¨æ€åˆ›å»ºä¸€ä¸ª <code>interface</code> å®ä¾‹çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p><ol><li>å®šä¹‰ä¸€ä¸ª <code>InvocationHandler</code> å®ä¾‹ï¼Œå®ƒè´Ÿè´£å®ç°æ¥å£çš„æ–¹æ³•è°ƒç”¨ï¼›</li><li>é€šè¿‡ <code>Proxy.newProxyInstance()</code> åˆ›å»º <code>interface</code> å®ä¾‹ï¼Œå®ƒéœ€è¦ 3 ä¸ªå‚æ•°ï¼š <ul><li>ä½¿ç”¨çš„ <code>ClassLoader</code>ï¼Œé€šå¸¸å°±æ˜¯æ¥å£ç±»çš„ <code>ClassLoader</code> ï¼›</li><li>éœ€è¦å®ç°çš„æ¥å£æ•°ç»„ï¼Œè‡³å°‘éœ€è¦ä¼ å…¥ä¸€ä¸ªæ¥å£è¿›å»ï¼›</li><li>ç”¨æ¥å¤„ç†æ¥å£æ–¹æ³•è°ƒç”¨çš„ <code>InvocationHandler</code> å®ä¾‹ã€‚</li></ul></li><li>å°†è¿”å›çš„ <code>Object</code> å¼ºåˆ¶è½¬å‹ä¸ºæ¥å£ã€‚</li></ol><p>åŠ¨æ€ä»£ç†å®é™…ä¸Šæ˜¯ JVM åœ¨è¿è¡ŒæœŸåŠ¨æ€åˆ›å»º <code>class</code> å­—èŠ‚ç å¹¶åŠ è½½çš„è¿‡ç¨‹ï¼Œå®ƒå¹¶æ²¡æœ‰ä»€ä¹ˆé»‘é­”æ³•ï¼ŒæŠŠä¸Šé¢çš„åŠ¨æ€ä»£ç†æ”¹å†™ä¸ºé™æ€å®ç°ç±»å¤§æ¦‚é•¿è¿™æ ·ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloDynamicProxy</span> <span class="token keyword">implements</span> <span class="token class-name">Hello</span> <span class="token punctuation">{</span>
    <span class="token class-name">InvocationHandler</span> handler<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">HelloDynamicProxy</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> handler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>handler <span class="token operator">=</span> handler<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">morning</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        handler<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>
           <span class="token keyword">this</span><span class="token punctuation">,</span>
           <span class="token class-name">Hello</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;morning&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
           <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> name<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶å®å°±æ˜¯ JVM å¸®æˆ‘ä»¬è‡ªåŠ¨ç¼–å†™äº†ä¸€ä¸ªä¸Šè¿°ç±»ï¼ˆä¸éœ€è¦æºç ï¼Œå¯ä»¥ç›´æ¥ç”Ÿæˆå­—èŠ‚ç ï¼‰ï¼Œå¹¶ä¸å­˜åœ¨å¯ä»¥ç›´æ¥å®ä¾‹åŒ–æ¥å£çš„é»‘é­”æ³•ã€‚</p><h2 id="ğŸ€-å°ç»“" tabindex="-1"><a class="header-anchor" href="#ğŸ€-å°ç»“" aria-hidden="true">#</a> ğŸ€ å°ç»“</h2><ul><li>Java æ ‡å‡†åº“æä¾›äº†åŠ¨æ€ä»£ç†åŠŸèƒ½ï¼Œå…è®¸åœ¨è¿è¡ŒæœŸåŠ¨æ€åˆ›å»ºä¸€ä¸ªæ¥å£çš„å®ä¾‹ï¼›</li><li>åŠ¨æ€ä»£ç†æ˜¯é€šè¿‡ <code>Proxy</code> åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œç„¶åå°†æ¥å£æ–¹æ³• â€œä»£ç†â€ ç»™ <code>InvocationHandler</code> å®Œæˆçš„ã€‚</li></ul>`,24);function v(b,g){const s=e("router-link");return p(),t("div",null,[n("details",k,[d,n("nav",r,[n("ul",null,[n("li",null,[o(s,{to:"#ğŸ€-å°ç»“"},{default:c(()=>[i("ğŸ€ å°ç»“")]),_:1})])])])]),m])}const h=a(u,[["render",v],["__file","6.html.vue"]]);export{h as default};
