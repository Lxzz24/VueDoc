import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as t,o as p,c as e,a as n,b as o,w as c,d as l,e as u}from"./app-CvlAI_tu.js";const i={},k={class:"hint-container details"},r=n("summary",null,"ç›®å½•",-1),d={class:"table-of-contents"},m=l(`<p>åœ¨å‰é¢è®²åˆ°å“ˆå¸Œç®—æ³•æ—¶ï¼Œæˆ‘ä»¬è¯´ï¼Œå­˜å‚¨ç”¨æˆ·çš„å“ˆå¸Œå£ä»¤æ—¶ï¼Œè¦åŠ ç›å­˜å‚¨ï¼Œç›®çš„å°±åœ¨äºæŠµå¾¡å½©è™¹è¡¨æ”»å‡»ã€‚</p><p>æˆ‘ä»¬å›é¡¾ä¸€ä¸‹å“ˆå¸Œç®—æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>digest <span class="token operator">=</span> <span class="token function">hash</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ­£æ˜¯å› ä¸ºç›¸åŒçš„è¾“å…¥ä¼šäº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼Œæˆ‘ä»¬åŠ ç›çš„ç›®çš„å°±åœ¨äºï¼Œä½¿å¾—è¾“å…¥æœ‰æ‰€å˜åŒ–ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>digest <span class="token operator">=</span> <span class="token function">hash</span><span class="token punctuation">(</span>salt <span class="token operator">+</span> input<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ä¸ª salt å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªé¢å¤–çš„ â€œè®¤è¯ç â€ï¼ŒåŒæ ·çš„è¾“å…¥ï¼Œä¸åŒçš„è®¤è¯ç ï¼Œä¼šäº§ç”Ÿä¸åŒçš„è¾“å‡ºã€‚å› æ­¤ï¼Œè¦éªŒè¯è¾“å‡ºçš„å“ˆå¸Œï¼Œå¿…é¡»åŒæ—¶æä¾› â€œè®¤è¯ç â€ã€‚</p><p>Hmac ç®—æ³•å°±æ˜¯ä¸€ç§åŸºäºå¯†é’¥çš„æ¶ˆæ¯è®¤è¯ç ç®—æ³•ï¼Œå®ƒçš„å…¨ç§°æ˜¯ Hash-based Message Authentication Codeï¼Œæ˜¯ä¸€ç§æ›´å®‰å…¨çš„æ¶ˆæ¯æ‘˜è¦ç®—æ³•ã€‚</p><p>Hmac ç®—æ³•æ€»æ˜¯å’ŒæŸç§å“ˆå¸Œç®—æ³•é…åˆèµ·æ¥ç”¨çš„ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨ MD5 ç®—æ³•ï¼Œå¯¹åº”çš„å°±æ˜¯ HmacMD5 ç®—æ³•ï¼Œå®ƒç›¸å½“äº â€œåŠ ç›â€ çš„ MD5ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>HmacMD5 â‰ˆ md5(secure_random_key, input)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å› æ­¤ï¼ŒHmacMD5 å¯ä»¥çœ‹ä½œå¸¦æœ‰ä¸€ä¸ªå®‰å…¨çš„ key çš„ MD5ã€‚ä½¿ç”¨ HmacMD5 è€Œä¸æ˜¯ç”¨ MD5 åŠ  saltï¼Œæœ‰å¦‚ä¸‹å¥½å¤„ï¼š</p><ul><li>HmacMD5 ä½¿ç”¨çš„ key é•¿åº¦æ˜¯ 64 å­—èŠ‚ï¼Œæ›´å®‰å…¨ï¼›</li><li>Hmac æ˜¯æ ‡å‡†ç®—æ³•ï¼ŒåŒæ ·é€‚ç”¨äº SHA-1 ç­‰å…¶ä»–å“ˆå¸Œç®—æ³•ï¼›</li><li>Hmac è¾“å‡ºå’ŒåŸæœ‰çš„å“ˆå¸Œç®—æ³•é•¿åº¦ä¸€è‡´ã€‚</li></ul><p>å¯è§ï¼ŒHmac æœ¬è´¨ä¸Šå°±æ˜¯æŠŠ key æ··å…¥æ‘˜è¦çš„ç®—æ³•ã€‚éªŒè¯æ­¤å“ˆå¸Œæ—¶ï¼Œé™¤äº†åŸå§‹çš„è¾“å…¥æ•°æ®ï¼Œè¿˜è¦æä¾› keyã€‚</p><p>ä¸ºäº†ä¿è¯å®‰å…¨ï¼Œæˆ‘ä»¬ä¸ä¼šè‡ªå·±æŒ‡å®š keyï¼Œè€Œæ˜¯é€šè¿‡ Java æ ‡å‡†åº“çš„ KeyGenerator ç”Ÿæˆä¸€ä¸ªå®‰å…¨çš„éšæœºçš„ keyã€‚ä¸‹é¢æ˜¯ä½¿ç”¨ HmacMD5 çš„ä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigInteger</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">KeyGenerator</span> keyGen <span class="token operator">=</span> <span class="token class-name">KeyGenerator</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">&quot;HmacMD5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SecretKey</span> key <span class="token operator">=</span> keyGen<span class="token punctuation">.</span><span class="token function">generateKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ‰“å°éšæœºç”Ÿæˆçš„ key:</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> skey <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">getEncoded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> skey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Mac</span> mac <span class="token operator">=</span> <span class="token class-name">Mac</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">&quot;HmacMD5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mac<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mac<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">&quot;HelloWorld&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> result <span class="token operator">=</span> mac<span class="token punctuation">.</span><span class="token function">doFinal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å’Œ MD5 ç›¸æ¯”ï¼Œä½¿ç”¨ HmacMD5 çš„æ­¥éª¤æ˜¯ï¼š</p><ol><li>é€šè¿‡åç§° <code>HmacMD5</code> è·å– <code>KeyGenerator</code> å®ä¾‹ï¼›</li><li>é€šè¿‡ <code>KeyGenerator</code> åˆ›å»ºä¸€ä¸ª <code>SecretKey</code> å®ä¾‹ï¼›</li><li>é€šè¿‡åç§° <code>HmacMD5</code> è·å– <code>Mac</code> å®ä¾‹ï¼›</li><li>ç”¨ <code>SecretKey</code> åˆå§‹åŒ– <code>Mac</code> å®ä¾‹ï¼›</li><li>å¯¹ <code>Mac</code> å®ä¾‹åå¤è°ƒç”¨ <code>update(byte[])</code> è¾“å…¥æ•°æ®ï¼›</li><li>è°ƒç”¨ <code>Mac</code> å®ä¾‹çš„ <code>doFinal()</code> è·å–æœ€ç»ˆçš„å“ˆå¸Œå€¼ã€‚</li></ol><p>æˆ‘ä»¬å¯ä»¥ç”¨ Hmac ç®—æ³•å–ä»£åŸæœ‰çš„è‡ªå®šä¹‰çš„åŠ ç›ç®—æ³•ï¼Œå› æ­¤ï¼Œå­˜å‚¨ç”¨æˆ·åå’Œå£ä»¤çš„æ•°æ®åº“ç»“æ„å¦‚ä¸‹ï¼š</p><table><thead><tr><th style="text-align:left;">username</th><th style="text-align:left;">secret_key (64 bytes)</th><th style="text-align:left;">password</th></tr></thead><tbody><tr><td style="text-align:left;">bob</td><td style="text-align:left;">a8c06e05f92e...5e16</td><td style="text-align:left;">7e0387872a57c85ef6dddbaa12f376de</td></tr><tr><td style="text-align:left;">alice</td><td style="text-align:left;">e6a343693985...f4be</td><td style="text-align:left;">c1f929ac2552642b302e739bc0cdbaac</td></tr><tr><td style="text-align:left;">tim</td><td style="text-align:left;">f27a973dfdc0...6003</td><td style="text-align:left;">af57651c3a8a73303515804d4af43790</td></tr></tbody></table><p>æœ‰äº† Hmac è®¡ç®—çš„å“ˆå¸Œå’Œ <code>SecretKey</code>ï¼Œæˆ‘ä»¬æƒ³è¦éªŒè¯æ€ä¹ˆåŠï¼Ÿè¿™æ—¶ï¼Œ<code>SecretKey</code> ä¸èƒ½ä» <code>KeyGenerator</code> ç”Ÿæˆï¼Œè€Œæ˜¯ä»ä¸€ä¸ª <code>byte[]</code> æ•°ç»„æ¢å¤ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>spec<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hkey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token number">106</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">125</span><span class="token punctuation">,</span> <span class="token number">39</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">52</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">19</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">72</span><span class="token punctuation">,</span> <span class="token number">52</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">53</span><span class="token punctuation">,</span> <span class="token number">52</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">45</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">119</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">63</span><span class="token punctuation">,</span>
                <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">83</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">109</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">121</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">106</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">74</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">107</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">114</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">104</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">104</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">121</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span>
                <span class="token number">97</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">63</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">125</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">103</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">46</span><span class="token punctuation">,</span> <span class="token number">113</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">68</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">46</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">116</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">104</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">81</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">122</span><span class="token punctuation">,</span>
                <span class="token number">89</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">106</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">109</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token class-name">SecretKey</span> key <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecretKeySpec</span><span class="token punctuation">(</span>hkey<span class="token punctuation">,</span> <span class="token string">&quot;HmacMD5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Mac</span> mac <span class="token operator">=</span> <span class="token class-name">Mac</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">&quot;HmacMD5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mac<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mac<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">&quot;HelloWorld&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> result <span class="token operator">=</span> mac<span class="token punctuation">.</span><span class="token function">doFinal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// [126, 59, 37, 63, 73, 90, 111, -96, -77, 15, 82, -74, 122, -55, -67, 54]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¢å¤ <code>SecretKey</code> çš„è¯­å¥å°±æ˜¯ <code>new SecretKeySpec(hkey, &quot;HmacMD5&quot;)</code>ã€‚</p><h2 id="ğŸ€-å°ç»“" tabindex="-1"><a class="header-anchor" href="#ğŸ€-å°ç»“" aria-hidden="true">#</a> ğŸ€ å°ç»“</h2><p>Hmac ç®—æ³•æ˜¯ä¸€ç§æ ‡å‡†çš„åŸºäºå¯†é’¥çš„å“ˆå¸Œç®—æ³•ï¼Œå¯ä»¥é…åˆ MD5ã€SHA-1 ç­‰å“ˆå¸Œç®—æ³•ï¼Œè®¡ç®—çš„æ‘˜è¦é•¿åº¦å’ŒåŸæ‘˜è¦ç®—æ³•é•¿åº¦ç›¸åŒã€‚</p>`,23);function b(v,y){const s=t("router-link");return p(),e("div",null,[n("details",k,[r,n("nav",d,[n("ul",null,[n("li",null,[o(s,{to:"#ğŸ€-å°ç»“"},{default:c(()=>[u("ğŸ€ å°ç»“")]),_:1})])])])]),m])}const h=a(i,[["render",b],["__file","4.html.vue"]]);export{h as default};
