import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as c,c as l,a as n,b as a,w as t,d as u,e as p}from"./app-CvlAI_tu.js";const i="/VueDoc/assets/image-20231219165412170-xDjmskXU.png",k="/VueDoc/assets/image-20231219165553434-DUcIUrq-.png",r="/VueDoc/assets/image-20231219170426989-BjnDKFf_.png",d={},m={class:"hint-container details"},v=n("summary",null,"ç›®å½•",-1),g={class:"table-of-contents"},b=u(`<p>Java ä» 8 å¼€å§‹ï¼Œä¸ä½†å¼•å…¥äº† Lambda è¡¨è¾¾å¼ï¼Œè¿˜å¼•å…¥äº†ä¸€ä¸ªå…¨æ–°çš„æµå¼ APIï¼šStream APIã€‚å®ƒä½äº <code>java.util.stream</code> åŒ…ä¸­ã€‚</p><p><em>åˆ’é‡ç‚¹</em>ï¼šè¿™ä¸ª <code>Stream</code> ä¸åŒäº <code>java.io</code> çš„ <code>InputStream</code> å’Œ <code>OutputStream</code>ï¼Œå®ƒä»£è¡¨çš„æ˜¯ä»»æ„ Java å¯¹è±¡çš„åºåˆ—ã€‚ä¸¤è€…å¯¹æ¯”å¦‚ä¸‹ï¼š</p><table><thead><tr><th style="text-align:left;"></th><th style="text-align:left;">java.io</th><th style="text-align:left;">java.util.stream</th></tr></thead><tbody><tr><td style="text-align:left;">å­˜å‚¨</td><td style="text-align:left;">é¡ºåºè¯»å†™çš„ <code>byte</code> æˆ– <code>char</code></td><td style="text-align:left;">é¡ºåºè¾“å‡ºçš„ä»»æ„ Java å¯¹è±¡å®ä¾‹</td></tr><tr><td style="text-align:left;">ç”¨é€”</td><td style="text-align:left;">åºåˆ—åŒ–è‡³æ–‡ä»¶æˆ–ç½‘ç»œ</td><td style="text-align:left;">å†…å­˜è®¡ç®—ï¼ä¸šåŠ¡é€»è¾‘</td></tr></tbody></table><p>æœ‰åŒå­¦ä¼šé—®ï¼šä¸€ä¸ªé¡ºåºè¾“å‡ºçš„ Java å¯¹è±¡åºåˆ—ï¼Œä¸å°±æ˜¯ä¸€ä¸ª <code>List</code> å®¹å™¨å—ï¼Ÿ</p><p><em>å†æ¬¡åˆ’é‡ç‚¹</em>ï¼šè¿™ä¸ª <code>Stream</code> å’Œ <code>List</code> ä¹Ÿä¸ä¸€æ ·ï¼Œ<code>List</code> å­˜å‚¨çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å·²ç»å­˜å‚¨åœ¨å†…å­˜ä¸­çš„æŸä¸ª Java å¯¹è±¡ï¼Œè€Œ <code>Stream</code> è¾“å‡ºçš„å…ƒç´ å¯èƒ½å¹¶æ²¡æœ‰é¢„å…ˆå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œè€Œæ˜¯å®æ—¶è®¡ç®—å‡ºæ¥çš„ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œ<code>List</code> çš„ç”¨é€”æ˜¯æ“ä½œä¸€ç»„å·²å­˜åœ¨çš„ Java å¯¹è±¡ï¼Œè€Œ <code>Stream</code> å®ç°çš„æ˜¯æƒ°æ€§è®¡ç®—ï¼Œä¸¤è€…å¯¹æ¯”å¦‚ä¸‹ï¼š</p><table><thead><tr><th style="text-align:left;"></th><th style="text-align:left;">java.util.List</th><th style="text-align:left;">java.util.stream</th></tr></thead><tbody><tr><td style="text-align:left;">å…ƒç´ </td><td style="text-align:left;">å·²åˆ†é…å¹¶å­˜å‚¨åœ¨å†…å­˜</td><td style="text-align:left;">å¯èƒ½æœªåˆ†é…ï¼Œå®æ—¶è®¡ç®—</td></tr><tr><td style="text-align:left;">ç”¨é€”</td><td style="text-align:left;">æ“ä½œä¸€ç»„å·²å­˜åœ¨çš„ Java å¯¹è±¡</td><td style="text-align:left;">æƒ°æ€§è®¡ç®—</td></tr></tbody></table><p><code>Stream</code> çœ‹ä¸Šå»æœ‰ç‚¹ä¸å¥½ç†è§£ï¼Œä½†æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­å°±æ˜ç™½äº†ã€‚</p><p>å¦‚æœæˆ‘ä»¬è¦è¡¨ç¤ºä¸€ä¸ªå…¨ä½“è‡ªç„¶æ•°çš„é›†åˆï¼Œæ˜¾ç„¶ï¼Œç”¨ <code>List</code> æ˜¯ä¸å¯èƒ½å†™å‡ºæ¥çš„ï¼Œå› ä¸ºè‡ªç„¶æ•°æ˜¯æ— é™çš„ï¼Œå†…å­˜å†å¤§ä¹Ÿæ²¡æ³•æ”¾åˆ° <code>List</code> ä¸­ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BigInteger</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">?</span> <span class="token comment">// å…¨ä½“è‡ªç„¶æ•°?</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä½†æ˜¯ï¼Œç”¨ <code>Stream</code> å¯ä»¥åšåˆ°ã€‚å†™æ³•å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BigInteger</span><span class="token punctuation">&gt;</span></span> naturals <span class="token operator">=</span> <span class="token function">createNaturalStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å…¨ä½“è‡ªç„¶æ•°</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆ‘ä»¬å…ˆä¸è€ƒè™‘ <code>createNaturalStream()</code> è¿™ä¸ªæ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„ï¼Œæˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨è¿™ä¸ª <code>Stream</code>ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¯ä¸ªè‡ªç„¶æ•°åšä¸€ä¸ªå¹³æ–¹ï¼Œè¿™æ ·æˆ‘ä»¬å°±æŠŠè¿™ä¸ª <code>Stream</code> è½¬æ¢æˆäº†å¦ä¸€ä¸ª <code>Stream</code>ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BigInteger</span><span class="token punctuation">&gt;</span></span> naturals <span class="token operator">=</span> <span class="token function">createNaturalStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å…¨ä½“è‡ªç„¶æ•°</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BigInteger</span><span class="token punctuation">&gt;</span></span> streamNxN <span class="token operator">=</span> naturals<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> n<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å…¨ä½“è‡ªç„¶æ•°çš„å¹³æ–¹</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å› ä¸ºè¿™ä¸ª <code>streamNxN</code> ä¹Ÿæœ‰æ— é™å¤šä¸ªå…ƒç´ ï¼Œè¦æ‰“å°å®ƒï¼Œå¿…é¡»é¦–å…ˆæŠŠæ— é™å¤šä¸ªå…ƒç´ å˜æˆæœ‰é™ä¸ªå…ƒç´ ï¼Œå¯ä»¥ç”¨ <code>limit()</code> æ–¹æ³•æˆªå–å‰ 100 ä¸ªå…ƒç´ ï¼Œæœ€åç”¨ <code>forEach()</code> å¤„ç†æ¯ä¸ªå…ƒç´ ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±æ‰“å°å‡ºäº†å‰ 100 ä¸ªè‡ªç„¶æ•°çš„å¹³æ–¹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BigInteger</span><span class="token punctuation">&gt;</span></span> naturals <span class="token operator">=</span> <span class="token function">createNaturalStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
naturals<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> n<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1, 4, 9, 16, 25...</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ <code>Stream</code> çš„ç‰¹ç‚¹ï¼šå®ƒå¯ä»¥ â€œå­˜å‚¨â€ æœ‰é™ä¸ªæˆ–æ— é™ä¸ªå…ƒç´ ã€‚è¿™é‡Œçš„å­˜å‚¨æ‰“äº†ä¸ªå¼•å·ï¼Œæ˜¯å› ä¸ºå…ƒç´ æœ‰å¯èƒ½å·²ç»å…¨éƒ¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯æ ¹æ®éœ€è¦å®æ—¶è®¡ç®—å‡ºæ¥çš„ã€‚</p><p><code>Stream</code> çš„å¦ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼Œä¸€ä¸ª <code>Stream</code> å¯ä»¥è½»æ˜“åœ°è½¬æ¢ä¸ºå¦ä¸€ä¸ª <code>Stream</code>ï¼Œè€Œä¸æ˜¯ä¿®æ”¹åŸ <code>Stream</code> æœ¬èº«ã€‚</p><p>æœ€åï¼ŒçœŸæ­£çš„è®¡ç®—é€šå¸¸å‘ç”Ÿåœ¨æœ€åç»“æœçš„è·å–ï¼Œä¹Ÿå°±æ˜¯æƒ°æ€§è®¡ç®—ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BigInteger</span><span class="token punctuation">&gt;</span></span> naturals <span class="token operator">=</span> <span class="token function">createNaturalStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸è®¡ç®—</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BigInteger</span><span class="token punctuation">&gt;</span></span> s2 <span class="token operator">=</span> naturals<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">BigInteger</span><span class="token operator">::</span><span class="token function">multiply</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸è®¡ç®—</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BigInteger</span><span class="token punctuation">&gt;</span></span> s3 <span class="token operator">=</span> s2<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸è®¡ç®—</span>
s3<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¡ç®—</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æƒ°æ€§è®¡ç®—çš„ç‰¹ç‚¹æ˜¯ï¼šä¸€ä¸ª <code>Stream</code> è½¬æ¢ä¸ºå¦ä¸€ä¸ª <code>Stream</code> æ—¶ï¼Œå®é™…ä¸Šåªå­˜å‚¨äº†è½¬æ¢è§„åˆ™ï¼Œå¹¶æ²¡æœ‰ä»»ä½•è®¡ç®—å‘ç”Ÿã€‚</p><p>ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªå…¨ä½“è‡ªç„¶æ•°çš„ <code>Stream</code>ï¼Œä¸ä¼šè¿›è¡Œè®¡ç®—ï¼ŒæŠŠå®ƒè½¬æ¢ä¸ºä¸Šè¿° <code>s2</code> è¿™ä¸ª <code>Stream</code>ï¼Œä¹Ÿä¸ä¼šè¿›è¡Œè®¡ç®—ã€‚å†æŠŠ <code>s2</code> è¿™ä¸ªæ— é™ <code>Stream</code> è½¬æ¢ä¸º <code>s3</code> è¿™ä¸ªæœ‰é™çš„ <code>Stream</code>ï¼Œä¹Ÿä¸ä¼šè¿›è¡Œè®¡ç®—ã€‚åªæœ‰æœ€åï¼Œè°ƒç”¨ <code>forEach</code> ç¡®å®éœ€è¦ <code>Stream</code> è¾“å‡ºçš„å…ƒç´ æ—¶ï¼Œæ‰è¿›è¡Œè®¡ç®—ã€‚æˆ‘ä»¬é€šå¸¸æŠŠ <code>Stream</code> çš„æ“ä½œå†™æˆé“¾å¼æ“ä½œï¼Œä»£ç æ›´ç®€æ´ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token function">createNaturalStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">BigInteger</span><span class="token operator">::</span><span class="token function">multiply</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› æ­¤ï¼ŒStream API çš„åŸºæœ¬ç”¨æ³•å°±æ˜¯ï¼šåˆ›å»ºä¸€ä¸ª <code>Stream</code>ï¼Œç„¶ååšè‹¥å¹²æ¬¡è½¬æ¢ï¼Œæœ€åè°ƒç”¨ä¸€ä¸ªæ±‚å€¼æ–¹æ³•è·å–çœŸæ­£è®¡ç®—çš„ç»“æœï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">createNaturalStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// åˆ›å»º Stream</span>
             <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> n <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// ä»»æ„ä¸ªè½¬æ¢</span>
             <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> n <span class="token operator">*</span> n<span class="token punctuation">)</span> <span class="token comment">// ä»»æ„ä¸ªè½¬æ¢</span>
             <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token comment">// ä»»æ„ä¸ªè½¬æ¢</span>
             <span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æœ€ç»ˆè®¡ç®—ç»“æœ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Stream API çš„ç‰¹ç‚¹æ˜¯ï¼š</strong></p><ul><li>Stream API æä¾›äº†ä¸€å¥—æ–°çš„æµå¼å¤„ç†çš„æŠ½è±¡åºåˆ—ï¼›</li><li>Stream API æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹å’Œé“¾å¼æ“ä½œï¼›</li><li>Stream å¯ä»¥è¡¨ç¤ºæ— é™åºåˆ—ï¼Œå¹¶ä¸”å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯æƒ°æ€§æ±‚å€¼çš„ã€‚</li></ul><h2 id="ğŸ€-åˆ›å»º-stream" tabindex="-1"><a class="header-anchor" href="#ğŸ€-åˆ›å»º-stream" aria-hidden="true">#</a> ğŸ€ åˆ›å»º Stream</h2><p>è¦ä½¿ç”¨ <code>Stream</code>ï¼Œå°±å¿…é¡»å…ˆåˆ›å»ºå®ƒã€‚åˆ›å»º <code>Stream</code> æœ‰å¾ˆå¤šç§æ–¹æ³•ï¼Œæˆ‘ä»¬æ¥ä¸€ä¸€ä»‹ç»ã€‚</p><h3 id="stream-of" tabindex="-1"><a class="header-anchor" href="#stream-of" aria-hidden="true">#</a> Stream.of()</h3><p>åˆ›å»º <code>Stream</code> æœ€ç®€å•çš„æ–¹å¼æ˜¯ç›´æ¥ç”¨ <code>Stream.of()</code> é™æ€æ–¹æ³•ï¼Œä¼ å…¥å¯å˜å‚æ•°å³åˆ›å»ºäº†ä¸€ä¸ªèƒ½è¾“å‡ºç¡®å®šå…ƒç´ çš„ <code>Stream</code>ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">Stream</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stream <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;D&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// forEach() æ–¹æ³•ç›¸å½“äºå†…éƒ¨å¾ªç¯è°ƒç”¨ï¼Œ</span>
        <span class="token comment">// å¯ä¼ å…¥ç¬¦åˆ Consumer æ¥å£çš„ void accept(T t) çš„æ–¹æ³•å¼•ç”¨ï¼š</span>
        stream<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è™½ç„¶è¿™ç§æ–¹å¼åŸºæœ¬ä¸Šæ²¡å•¥å®è´¨æ€§ç”¨é€”ï¼Œä½†æµ‹è¯•çš„æ—¶å€™å¾ˆæ–¹ä¾¿ã€‚</p><h3 id="åŸºäºæ•°ç»„æˆ–-collection" tabindex="-1"><a class="header-anchor" href="#åŸºäºæ•°ç»„æˆ–-collection" aria-hidden="true">#</a> åŸºäºæ•°ç»„æˆ– Collection</h3><p>ç¬¬äºŒç§åˆ›å»º <code>Stream</code> çš„æ–¹æ³•æ˜¯åŸºäºä¸€ä¸ªæ•°ç»„æˆ–è€… <code>Collection</code>ï¼Œè¿™æ ·è¯¥ <code>Stream</code> è¾“å‡ºçš„å…ƒç´ å°±æ˜¯æ•°ç»„æˆ–è€… <code>Collection</code> æŒæœ‰çš„å…ƒç´ ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stream1 <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stream2 <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;X&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Y&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stream1<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stream2<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŠŠæ•°ç»„å˜æˆ <code>Stream</code> ä½¿ç”¨ <code>Arrays.stream()</code> æ–¹æ³•ã€‚å¯¹äº <code>Collection</code>ï¼ˆ<code>List</code>ã€<code>Set</code>ã€<code>Queue</code> ç­‰ï¼‰ï¼Œç›´æ¥è°ƒç”¨ <code>stream()</code> æ–¹æ³•å°±å¯ä»¥è·å¾— <code>Stream</code>ã€‚</p><p>ä¸Šè¿°åˆ›å»º <code>Stream</code> çš„æ–¹æ³•éƒ½æ˜¯æŠŠä¸€ä¸ªç°æœ‰çš„åºåˆ—å˜ä¸º <code>Stream</code>ï¼Œå®ƒçš„å…ƒç´ æ˜¯å›ºå®šçš„ã€‚</p><h3 id="åŸºäº-supplier" tabindex="-1"><a class="header-anchor" href="#åŸºäº-supplier" aria-hidden="true">#</a> åŸºäº Supplier</h3><p>åˆ›å»º <code>Stream</code> è¿˜å¯ä»¥é€šè¿‡ <code>Stream.generate()</code> æ–¹æ³•ï¼Œå®ƒéœ€è¦ä¼ å…¥ä¸€ä¸ª <code>Supplier</code> å¯¹è±¡ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> s <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> sp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åŸºäº <code>Supplier</code> åˆ›å»ºçš„ <code>Stream</code> ä¼šä¸æ–­è°ƒç”¨ <code>Supplier.get()</code> æ–¹æ³•æ¥ä¸æ–­äº§ç”Ÿä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œè¿™ç§ <code>Stream</code> ä¿å­˜çš„ä¸æ˜¯å…ƒç´ ï¼Œè€Œæ˜¯ç®—æ³•ï¼Œå®ƒå¯ä»¥ç”¨æ¥è¡¨ç¤ºæ— é™åºåˆ—ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªèƒ½ä¸æ–­ç”Ÿæˆè‡ªç„¶æ•°çš„ <code>Supplier</code>ï¼Œå®ƒçš„ä»£ç éå¸¸ç®€å•ï¼Œæ¯æ¬¡è°ƒç”¨ <code>get()</code> æ–¹æ³•ï¼Œå°±ç”Ÿæˆä¸‹ä¸€ä¸ªè‡ªç„¶æ•°ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> natual <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">NatualSupplier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ³¨æ„ï¼šæ— é™åºåˆ—å¿…é¡»å…ˆå˜æˆæœ‰é™åºåˆ—å†æ‰“å°:</span>
        natual<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">NatualSupplier</span> <span class="token keyword">implements</span> <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        n<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°ä»£ç æˆ‘ä»¬ç”¨ä¸€ä¸ª <code>Supplier&lt;Integer&gt;</code> æ¨¡æ‹Ÿäº†ä¸€ä¸ªæ— é™åºåˆ—ï¼ˆå½“ç„¶å— <code>int</code> èŒƒå›´é™åˆ¶ä¸æ˜¯çœŸçš„æ— é™å¤§ï¼‰ã€‚å¦‚æœç”¨ <code>List</code> è¡¨ç¤ºï¼Œå³ä¾¿åœ¨ <code>int</code> èŒƒå›´å†…ï¼Œä¹Ÿä¼šå ç”¨å·¨å¤§çš„å†…å­˜ï¼Œè€Œ <code>Stream</code> å‡ ä¹ä¸å ç”¨ç©ºé—´ï¼Œå› ä¸ºæ¯ä¸ªå…ƒç´ éƒ½æ˜¯å®æ—¶è®¡ç®—å‡ºæ¥çš„ï¼Œç”¨çš„æ—¶å€™å†ç®—ã€‚</p><p>å¯¹äºæ— é™åºåˆ—ï¼Œå¦‚æœç›´æ¥è°ƒç”¨ <code>forEach()</code> æˆ–è€… <code>count()</code> è¿™äº›æœ€ç»ˆæ±‚å€¼æ“ä½œï¼Œä¼šè¿›å…¥æ­»å¾ªç¯ï¼Œå› ä¸ºæ°¸è¿œæ— æ³•è®¡ç®—å®Œè¿™ä¸ªåºåˆ—ï¼Œæ‰€ä»¥æ­£ç¡®çš„æ–¹æ³•æ˜¯å…ˆæŠŠæ— é™åºåˆ—å˜æˆæœ‰é™åºåˆ—ï¼Œä¾‹å¦‚ï¼Œç”¨ <code>limit()</code> æ–¹æ³•å¯ä»¥æˆªå–å‰é¢è‹¥å¹²ä¸ªå…ƒç´ ï¼Œè¿™æ ·å°±å˜æˆäº†ä¸€ä¸ªæœ‰é™åºåˆ—ï¼Œå¯¹è¿™ä¸ªæœ‰é™åºåˆ—è°ƒç”¨ <code>forEach()</code> æˆ–è€… <code>count()</code> æ“ä½œå°±æ²¡æœ‰é—®é¢˜ã€‚</p><h3 id="å…¶ä»–æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#å…¶ä»–æ–¹æ³•" aria-hidden="true">#</a> å…¶ä»–æ–¹æ³•</h3><p>åˆ›å»º <code>Stream</code> çš„ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯é€šè¿‡ä¸€äº› API æä¾›çš„æ¥å£ï¼Œç›´æ¥è·å¾— <code>Stream</code>ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>Files</code> ç±»çš„ <code>lines()</code> æ–¹æ³•å¯ä»¥æŠŠä¸€ä¸ªæ–‡ä»¶å˜æˆä¸€ä¸ª <code>Stream</code>ï¼Œæ¯ä¸ªå…ƒç´ ä»£è¡¨æ–‡ä»¶çš„ä¸€è¡Œå†…å®¹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> lines <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/path/to/file.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ–¹æ³•å¯¹äºæŒ‰è¡Œéå†æ–‡æœ¬æ–‡ä»¶ååˆ†æœ‰ç”¨ã€‚</p><p>å¦å¤–ï¼Œæ­£åˆ™è¡¨è¾¾å¼çš„ <code>Pattern</code> å¯¹è±¡æœ‰ä¸€ä¸ª <code>splitAsStream()</code> æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥æŠŠä¸€ä¸ªé•¿å­—ç¬¦ä¸²åˆ†å‰²æˆ <code>Stream</code> åºåˆ—è€Œä¸æ˜¯æ•°ç»„ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Pattern</span> p <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;\\\\s+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> s <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">splitAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;The quick brown fox jumps over the lazy dog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
s<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åŸºæœ¬ç±»å‹" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬ç±»å‹" aria-hidden="true">#</a> åŸºæœ¬ç±»å‹</h3><p>å› ä¸º Java çš„èŒƒå‹ä¸æ”¯æŒåŸºæœ¬ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•ç”¨ <code>Stream&lt;int&gt;</code> è¿™æ ·çš„ç±»å‹ï¼Œä¼šå‘ç”Ÿç¼–è¯‘é”™è¯¯ã€‚ä¸ºäº†ä¿å­˜ <code>int</code>ï¼Œåªèƒ½ä½¿ç”¨ <code>Stream&lt;Integer&gt;</code>ï¼Œä½†è¿™æ ·ä¼šäº§ç”Ÿé¢‘ç¹çš„è£…ç®±ã€æ‹†ç®±æ“ä½œã€‚ä¸ºäº†æé«˜æ•ˆç‡ï¼ŒJava æ ‡å‡†åº“æä¾›äº† <code>IntStream</code>ã€<code>LongStream</code> å’Œ <code>DoubleStream</code> è¿™ä¸‰ç§ä½¿ç”¨åŸºæœ¬ç±»å‹çš„ <code>Stream</code>ï¼Œå®ƒä»¬çš„ä½¿ç”¨æ–¹æ³•å’ŒèŒƒå‹ <code>Stream</code> æ²¡æœ‰å¤§çš„åŒºåˆ«ï¼Œè®¾è®¡è¿™ä¸‰ä¸ª <code>Stream</code> çš„ç›®çš„æ˜¯æé«˜è¿è¡Œæ•ˆç‡ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// å°† int[] æ•°ç»„å˜ä¸º IntStream:</span>
<span class="token class-name">IntStream</span> is <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å°† Stream&lt;String&gt; è½¬æ¢ä¸º LongStream:</span>
<span class="token class-name">LongStream</span> ls <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mapToLong</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token operator">::</span><span class="token function">parseLong</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç»ƒä¹ " tabindex="-1"><a class="header-anchor" href="#ç»ƒä¹ " aria-hidden="true">#</a> ç»ƒä¹ </h3><p>ç¼–å†™ä¸€ä¸ªèƒ½è¾“å‡ºæ–æ³¢æ‹‰å¥‘æ•°åˆ—ï¼ˆFibonacciï¼‰çš„ <code>LongStream</code>ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>1, 1, 2, 3, 5, 8, 13, 21, 34, ...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="å°ç»“" tabindex="-1"><a class="header-anchor" href="#å°ç»“" aria-hidden="true">#</a> å°ç»“</h3><p>åˆ›å»º <code>Stream</code> çš„æ–¹æ³•æœ‰ ï¼š</p><ul><li>é€šè¿‡æŒ‡å®šå…ƒç´ ã€æŒ‡å®šæ•°ç»„ã€æŒ‡å®š <code>Collection</code> åˆ›å»º <code>Stream</code>ï¼›</li><li>é€šè¿‡ <code>Supplier</code> åˆ›å»º <code>Stream</code>ï¼Œå¯ä»¥æ˜¯æ— é™åºåˆ—ï¼›</li><li>é€šè¿‡å…¶ä»–ç±»çš„ç›¸å…³æ–¹æ³•åˆ›å»ºã€‚</li></ul><p>åŸºæœ¬ç±»å‹çš„ <code>Stream</code> æœ‰ <code>IntStream</code>ã€<code>LongStream</code> å’Œ <code>DoubleStream</code>ã€‚</p><h2 id="ğŸ€-ä½¿ç”¨-map" tabindex="-1"><a class="header-anchor" href="#ğŸ€-ä½¿ç”¨-map" aria-hidden="true">#</a> ğŸ€ ä½¿ç”¨ map</h2><p><code>Stream.map()</code> æ˜¯ <code>Stream</code> æœ€å¸¸ç”¨çš„ä¸€ä¸ªè½¬æ¢æ–¹æ³•ï¼Œå®ƒæŠŠä¸€ä¸ª <code>Stream</code> è½¬æ¢ä¸ºå¦ä¸€ä¸ª <code>Stream</code>ã€‚</p><p>æ‰€è°“ <code>map</code> æ“ä½œï¼Œå°±æ˜¯æŠŠä¸€ç§æ“ä½œè¿ç®—ï¼Œæ˜ å°„åˆ°ä¸€ä¸ªåºåˆ—çš„æ¯ä¸€ä¸ªå…ƒç´ ä¸Šã€‚ä¾‹å¦‚ï¼Œå¯¹ <code>x</code> è®¡ç®—å®ƒçš„å¹³æ–¹ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•° <code>f(x) = x * x</code>ã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªå‡½æ•°æ˜ å°„åˆ°ä¸€ä¸ªåºåˆ— 1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5 ä¸Šï¼Œå°±å¾—åˆ°äº†å¦ä¸€ä¸ªåºåˆ— 1ï¼Œ4ï¼Œ9ï¼Œ16ï¼Œ25ï¼š</p><figure><img src="`+i+`" alt="image-20231219165412170" tabindex="0" loading="lazy"><figcaption>image-20231219165412170</figcaption></figure><p>å¯è§ï¼Œ<code>map</code> æ“ä½œï¼ŒæŠŠä¸€ä¸ª <code>Stream</code> çš„æ¯ä¸ªå…ƒç´ ä¸€ä¸€å¯¹åº”åˆ°åº”ç”¨äº†ç›®æ ‡å‡½æ•°çš„ç»“æœä¸Šã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> s <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> s2 <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> n <span class="token operator">*</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæˆ‘ä»¬æŸ¥çœ‹ <code>Stream</code> çš„æºç ï¼Œä¼šå‘ç° <code>map()</code> æ–¹æ³•æ¥æ”¶çš„å¯¹è±¡æ˜¯ <code>Function</code> æ¥å£å¯¹è±¡ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ª <code>apply()</code> æ–¹æ³•ï¼Œè´Ÿè´£æŠŠä¸€ä¸ª <code>T</code> ç±»å‹è½¬æ¢æˆ <code>R</code> ç±»å‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> mapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å…¶ä¸­ï¼Œ<code>Function</code> çš„å®šä¹‰æ˜¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// å°† T ç±»å‹è½¬æ¢ä¸º R:</span>
    <span class="token class-name">R</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token class-name">T</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ©ç”¨ <code>map()</code>ï¼Œä¸ä½†èƒ½å®Œæˆæ•°å­¦è®¡ç®—ï¼Œå¯¹äºå­—ç¬¦ä¸²æ“ä½œï¼Œä»¥åŠä»»ä½• Java å¯¹è±¡éƒ½æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ä¾‹å¦‚ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pear&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ORANGE&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;BaNaNa&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">trim</span><span class="token punctuation">)</span> <span class="token comment">// å»ç©ºæ ¼</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">toLowerCase</span><span class="token punctuation">)</span> <span class="token comment">// å˜å°å†™</span>
                <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰“å°</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è‹¥å¹²æ­¥ <code>map</code> è½¬æ¢ï¼Œå¯ä»¥å†™å‡ºé€»è¾‘ç®€å•ã€æ¸…æ™°çš„ä»£ç ã€‚</p><h3 id="ç»ƒä¹ -1" tabindex="-1"><a class="header-anchor" href="#ç»ƒä¹ -1" aria-hidden="true">#</a> ç»ƒä¹ </h3><p>ä½¿ç”¨ <code>map()</code> æŠŠä¸€ç»„ <code>String</code> è½¬æ¢ä¸º <code>LocalDate</code> å¹¶æ‰“å°ã€‚</p><h3 id="å°ç»“-1" tabindex="-1"><a class="header-anchor" href="#å°ç»“-1" aria-hidden="true">#</a> å°ç»“</h3><p><code>map()</code> æ–¹æ³•ç”¨äºå°†ä¸€ä¸ª <code>Stream</code> çš„æ¯ä¸ªå…ƒç´ æ˜ å°„æˆå¦ä¸€ä¸ªå…ƒç´ å¹¶è½¬æ¢æˆä¸€ä¸ªæ–°çš„ <code>Stream</code>ï¼›</p><p>å¯ä»¥å°†ä¸€ç§å…ƒç´ ç±»å‹è½¬æ¢æˆå¦ä¸€ç§å…ƒç´ ç±»å‹ã€‚</p><h2 id="ğŸ€-ä½¿ç”¨-filter" tabindex="-1"><a class="header-anchor" href="#ğŸ€-ä½¿ç”¨-filter" aria-hidden="true">#</a> ğŸ€ ä½¿ç”¨ filter</h2><p><code>Stream.filter()</code> æ˜¯ <code>Stream</code> çš„å¦ä¸€ä¸ªå¸¸ç”¨è½¬æ¢æ–¹æ³•ã€‚</p><p>æ‰€è°“ <code>filter()</code> æ“ä½œï¼Œå°±æ˜¯å¯¹ä¸€ä¸ª <code>Stream</code> çš„æ‰€æœ‰å…ƒç´ ä¸€ä¸€è¿›è¡Œæµ‹è¯•ï¼Œä¸æ»¡è¶³æ¡ä»¶çš„å°±è¢« â€œæ»¤æ‰â€ äº†ï¼Œå‰©ä¸‹çš„æ»¡è¶³æ¡ä»¶çš„å…ƒç´ å°±æ„æˆäº†ä¸€ä¸ªæ–°çš„ <code>Stream</code>ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯¹ 1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5 è¿™ä¸ª <code>Stream</code> è°ƒç”¨ <code>filter()</code>ï¼Œä¼ å…¥çš„æµ‹è¯•å‡½æ•° <code>f(x) = x % 2 != 0</code> ç”¨æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦æ˜¯å¥‡æ•°ï¼Œè¿™æ ·å°±è¿‡æ»¤æ‰å¶æ•°ï¼Œåªå‰©ä¸‹å¥‡æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¾—åˆ°äº†å¦ä¸€ä¸ªåºåˆ— 1ï¼Œ3ï¼Œ5ï¼š</p><figure><img src="`+k+`" alt="image-20231219165553434" tabindex="0" loading="lazy"><figcaption>image-20231219165553434</figcaption></figure><p>ç”¨ IntStream å†™å‡ºä¸Šè¿°é€»è¾‘ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">IntStream</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> n <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»ç»“æœå¯çŸ¥ï¼Œç»è¿‡ <code>filter()</code> åç”Ÿæˆçš„ <code>Stream</code> å…ƒç´ å¯èƒ½å˜å°‘ã€‚</p><p><code>filter()</code> æ–¹æ³•æ¥æ”¶çš„å¯¹è±¡æ˜¯ <code>Predicate</code> æ¥å£å¯¹è±¡ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ª <code>test()</code> æ–¹æ³•ï¼Œè´Ÿè´£åˆ¤æ–­å…ƒç´ æ˜¯å¦ç¬¦åˆæ¡ä»¶ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆ¤æ–­å…ƒç´  t æ˜¯å¦ç¬¦åˆæ¡ä»¶:</span>
    <span class="token keyword">boolean</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">T</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>filter()</code> é™¤äº†å¸¸ç”¨äºæ•°å€¼å¤–ï¼Œä¹Ÿå¯åº”ç”¨äºä»»ä½• Java å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œä»ä¸€ç»„ç»™å®šçš„ <code>LocalDate</code> ä¸­è¿‡æ»¤æ‰å·¥ä½œæ—¥ï¼Œä»¥ä¾¿å¾—åˆ°ä¼‘æ¯æ—¥ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LocalDateSupplier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">31</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>ldt <span class="token operator">-&gt;</span> ldt<span class="token punctuation">.</span><span class="token function">getDayOfWeek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">DayOfWeek</span><span class="token punctuation">.</span><span class="token constant">SATURDAY</span> <span class="token operator">||</span> ldt<span class="token punctuation">.</span><span class="token function">getDayOfWeek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">DayOfWeek</span><span class="token punctuation">.</span><span class="token constant">SUNDAY</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">LocalDateSupplier</span> <span class="token keyword">implements</span> <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LocalDate</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">LocalDate</span> start <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">LocalDate</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        n<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> start<span class="token punctuation">.</span><span class="token function">plusDays</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç»ƒä¹ -2" tabindex="-1"><a class="header-anchor" href="#ç»ƒä¹ -2" aria-hidden="true">#</a> ç»ƒä¹ </h3><p>è¯·ä½¿ç”¨ <code>filter()</code> è¿‡æ»¤å‡ºæˆç»©åŠæ ¼çš„åŒå­¦ï¼Œå¹¶æ‰“å°å‡ºåå­—ã€‚</p><h3 id="å°ç»“-2" tabindex="-1"><a class="header-anchor" href="#å°ç»“-2" aria-hidden="true">#</a> å°ç»“</h3><p>ä½¿ç”¨ <code>filter()</code> æ–¹æ³•å¯ä»¥å¯¹ä¸€ä¸ª <code>Stream</code> çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œæµ‹è¯•ï¼Œé€šè¿‡æµ‹è¯•çš„å…ƒç´ è¢«è¿‡æ»¤åç”Ÿæˆä¸€ä¸ªæ–°çš„ <code>Stream</code>ã€‚</p><h2 id="ğŸ€-ä½¿ç”¨-reduce" tabindex="-1"><a class="header-anchor" href="#ğŸ€-ä½¿ç”¨-reduce" aria-hidden="true">#</a> ğŸ€ ä½¿ç”¨ reduce</h2><p><code>map()</code> å’Œ <code>filter()</code> éƒ½æ˜¯ <code>Stream</code> çš„è½¬æ¢æ–¹æ³•ï¼Œè€Œ <code>Stream.reduce()</code> åˆ™æ˜¯ <code>Stream</code> çš„ä¸€ä¸ªèšåˆæ–¹æ³•ï¼Œå®ƒå¯ä»¥æŠŠä¸€ä¸ª <code>Stream</code> çš„æ‰€æœ‰å…ƒç´ æŒ‰ç…§èšåˆå‡½æ•°èšåˆæˆä¸€ä¸ªç»“æœã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„èšåˆæ–¹æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>acc<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> acc <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 45</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>reduce()</code> æ–¹æ³•ä¼ å…¥çš„å¯¹è±¡æ˜¯ <code>BinaryOperator</code> æ¥å£ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ª <code>apply()</code> æ–¹æ³•ï¼Œè´Ÿè´£æŠŠä¸Šæ¬¡ç´¯åŠ çš„ç»“æœå’Œæœ¬æ¬¡çš„å…ƒç´  è¿›è¡Œè¿ç®—ï¼Œå¹¶è¿”å›ç´¯åŠ çš„ç»“æœï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BinaryOperator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// Bi æ“ä½œï¼šä¸¤ä¸ªè¾“å…¥ï¼Œä¸€ä¸ªè¾“å‡º</span>
    <span class="token class-name">T</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token class-name">T</span> t<span class="token punctuation">,</span> <span class="token class-name">T</span> u<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°ä»£ç çœ‹ä¸Šå»ä¸å¥½ç†è§£ï¼Œä½†æˆ‘ä»¬ç”¨ <code>for</code> å¾ªç¯æ”¹å†™ä¸€ä¸‹ï¼Œå°±å®¹æ˜“ç†è§£äº†ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> stream <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>n <span class="token operator">:</span> stream<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sum <span class="token operator">=</span> <span class="token punctuation">(</span>sum<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> sum <span class="token operator">+</span> n<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯è§ï¼Œ<code>reduce()</code> æ“ä½œé¦–å…ˆåˆå§‹åŒ–ç»“æœä¸ºæŒ‡å®šå€¼ï¼ˆè¿™é‡Œæ˜¯ 0ï¼‰ï¼Œç´§æ¥ç€ï¼Œ<code>reduce()</code> å¯¹æ¯ä¸ªå…ƒç´ ä¾æ¬¡è°ƒç”¨ <code>(acc, n) -&gt; acc + n</code>ï¼Œå…¶ä¸­ï¼Œ<code>acc</code> æ˜¯ä¸Šæ¬¡è®¡ç®—çš„ç»“æœï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// è®¡ç®—è¿‡ç¨‹:</span>
acc <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// åˆå§‹åŒ–ä¸ºæŒ‡å®šå€¼</span>
acc <span class="token operator">=</span> acc <span class="token operator">+</span> n <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// n = 1</span>
acc <span class="token operator">=</span> acc <span class="token operator">+</span> n <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">// n = 2</span>
acc <span class="token operator">=</span> acc <span class="token operator">+</span> n <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">3</span> <span class="token operator">=</span> <span class="token number">6</span> <span class="token comment">// n = 3</span>
acc <span class="token operator">=</span> acc <span class="token operator">+</span> n <span class="token operator">=</span> <span class="token number">6</span> <span class="token operator">+</span> <span class="token number">4</span> <span class="token operator">=</span> <span class="token number">10</span> <span class="token comment">// n = 4</span>
acc <span class="token operator">=</span> acc <span class="token operator">+</span> n <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token number">5</span> <span class="token operator">=</span> <span class="token number">15</span> <span class="token comment">// n = 5</span>
acc <span class="token operator">=</span> acc <span class="token operator">+</span> n <span class="token operator">=</span> <span class="token number">15</span> <span class="token operator">+</span> <span class="token number">6</span> <span class="token operator">=</span> <span class="token number">21</span> <span class="token comment">// n = 6</span>
acc <span class="token operator">=</span> acc <span class="token operator">+</span> n <span class="token operator">=</span> <span class="token number">21</span> <span class="token operator">+</span> <span class="token number">7</span> <span class="token operator">=</span> <span class="token number">28</span> <span class="token comment">// n = 7</span>
acc <span class="token operator">=</span> acc <span class="token operator">+</span> n <span class="token operator">=</span> <span class="token number">28</span> <span class="token operator">+</span> <span class="token number">8</span> <span class="token operator">=</span> <span class="token number">36</span> <span class="token comment">// n = 8</span>
acc <span class="token operator">=</span> acc <span class="token operator">+</span> n <span class="token operator">=</span> <span class="token number">36</span> <span class="token operator">+</span> <span class="token number">9</span> <span class="token operator">=</span> <span class="token number">45</span> <span class="token comment">// n = 9</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› æ­¤ï¼Œå®é™…ä¸Šè¿™ä¸ª <code>reduce()</code> æ“ä½œæ˜¯ä¸€ä¸ªæ±‚å’Œã€‚</p><p>å¦‚æœå»æ‰åˆå§‹å€¼ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ª <code>Optional&lt;Integer&gt;</code>ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> opt <span class="token operator">=</span> stream<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> acc <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>opt<span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ˜¯å› ä¸º <code>Stream</code> çš„å…ƒç´ æœ‰å¯èƒ½æ˜¯ 0 ä¸ªï¼Œè¿™æ ·å°±æ²¡æ³•è°ƒç”¨ <code>reduce()</code> çš„èšåˆå‡½æ•°äº†ï¼Œå› æ­¤è¿”å› <code>Optional</code> å¯¹è±¡ï¼Œéœ€è¦è¿›ä¸€æ­¥åˆ¤æ–­ç»“æœæ˜¯å¦å­˜åœ¨ã€‚</p><p>åˆ©ç”¨ reduce()ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ±‚å’Œæ”¹æˆæ±‚ç§¯ï¼Œä»£ç ä¹Ÿååˆ†ç®€å•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> s <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>acc<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> acc <span class="token operator">*</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 362880</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼šè®¡ç®—æ±‚ç§¯æ—¶ï¼Œåˆå§‹å€¼å¿…é¡»è®¾ç½®ä¸º <code>1</code>ã€‚</p><p>é™¤äº†å¯ä»¥å¯¹æ•°å€¼è¿›è¡Œç´¯ç§¯è®¡ç®—å¤–ï¼Œçµæ´»è¿ç”¨ <code>reduce()</code> ä¹Ÿå¯ä»¥å¯¹ Java å¯¹è±¡è¿›è¡Œæ“ä½œã€‚ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•å°†é…ç½®æ–‡ä»¶çš„æ¯ä¸€è¡Œé…ç½®é€šè¿‡ <code>map()</code> å’Œ <code>reduce()</code> æ“ä½œèšåˆæˆä¸€ä¸ª <code>Map&lt;String, String&gt;</code>ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æŒ‰è¡Œè¯»å–é…ç½®æ–‡ä»¶:</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> props <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;profile=native&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;debug=true&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;logging=warn&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;interval=500&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> props<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment">// æŠŠ k=v è½¬æ¢ä¸º Map[k]=v:</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>kv <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ss <span class="token operator">=</span> kv<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;\\\\=&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>ss<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ss<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token comment">// æŠŠæ‰€æœ‰ Map èšåˆåˆ°ä¸€ä¸ª Map:</span>
                <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>m<span class="token punctuation">,</span> kv<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                    m<span class="token punctuation">.</span><span class="token function">putAll</span><span class="token punctuation">(</span>kv<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> m<span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ‰“å°ç»“æœ:</span>
        map<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span> <span class="token operator">+</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å°ç»“-3" tabindex="-1"><a class="header-anchor" href="#å°ç»“-3" aria-hidden="true">#</a> å°ç»“</h3><p><code>reduce()</code> æ–¹æ³•å°†ä¸€ä¸ª <code>Stream</code> çš„æ¯ä¸ªå…ƒç´ ä¾æ¬¡ä½œç”¨äº <code>BinaryOperator</code>ï¼Œå¹¶å°†ç»“æœåˆå¹¶ã€‚</p><p><code>reduce()</code> æ˜¯èšåˆæ–¹æ³•ï¼Œèšåˆæ–¹æ³•ä¼šç«‹åˆ»å¯¹ <code>Stream</code> è¿›è¡Œè®¡ç®—ã€‚</p><hr><h2 id="ğŸ€-è¾“å‡ºé›†åˆ" tabindex="-1"><a class="header-anchor" href="#ğŸ€-è¾“å‡ºé›†åˆ" aria-hidden="true">#</a> ğŸ€ è¾“å‡ºé›†åˆ</h2><p>æˆ‘ä»¬ä»‹ç»äº† <code>Stream</code> çš„å‡ ä¸ªå¸¸è§æ“ä½œï¼š<code>map()</code>ã€<code>filter()</code>ã€<code>reduce()</code>ã€‚è¿™äº›æ“ä½œå¯¹ <code>Stream</code> æ¥è¯´å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯è½¬æ¢æ“ä½œï¼Œå³æŠŠä¸€ä¸ª <code>Stream</code> è½¬æ¢ä¸ºå¦ä¸€ä¸ª <code>Stream</code>ï¼Œä¾‹å¦‚ <code>map()</code> å’Œ <code>filter()</code>ï¼Œå¦ä¸€ç±»æ˜¯èšåˆæ“ä½œï¼Œå³å¯¹ <code>Stream</code> çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°ä¸€ä¸ªç¡®å®šçš„ç»“æœï¼Œä¾‹å¦‚ <code>reduce()</code>ã€‚</p><p>åŒºåˆ†è¿™ä¸¤ç§æ“ä½œæ˜¯éå¸¸é‡è¦çš„ï¼Œå› ä¸ºå¯¹äº <code>Stream</code> æ¥è¯´ï¼Œå¯¹å…¶è¿›è¡Œè½¬æ¢æ“ä½œ *** å¹¶ä¸ä¼šè§¦å‘ä»»ä½•è®¡ç®— *** ï¼æˆ‘ä»¬å¯ä»¥åšä¸ªå®éªŒï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token class-name">Supplier</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">Stream</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>     <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> s1 <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">NatualSupplier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> s2 <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> n <span class="token operator">*</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> s3 <span class="token operator">=</span> s2<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// java.util.stream.ReferencePipeline$3@49476842</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">NatualSupplier</span> <span class="token keyword">implements</span> <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">long</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        n<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› ä¸º <code>s1</code> æ˜¯ä¸€ä¸ª <code>Long</code> ç±»å‹çš„åºåˆ—ï¼Œå®ƒçš„å…ƒç´ é«˜è¾¾ 922 äº¿äº¿ä¸ªï¼Œä½†æ‰§è¡Œä¸Šè¿°ä»£ç ï¼Œæ—¢ä¸ä¼šæœ‰ä»»ä½•å†…å­˜å¢é•¿ï¼Œä¹Ÿä¸ä¼šæœ‰ä»»ä½•è®¡ç®—ï¼Œå› ä¸ºè½¬æ¢æ“ä½œåªæ˜¯ä¿å­˜äº†è½¬æ¢è§„åˆ™ï¼Œæ— è®ºæˆ‘ä»¬å¯¹ä¸€ä¸ª <code>Stream</code> è½¬æ¢å¤šå°‘æ¬¡ï¼Œéƒ½ä¸ä¼šæœ‰ä»»ä½•å®é™…è®¡ç®—å‘ç”Ÿã€‚</p><p>è€Œèšåˆæ“ä½œåˆ™ä¸ä¸€æ ·ï¼Œèšåˆæ“ä½œä¼šç«‹åˆ»ä¿ƒä½¿ <code>Stream</code> è¾“å‡ºå®ƒçš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶ä¾æ¬¡çº³å…¥è®¡ç®—ï¼Œä»¥è·å¾—æœ€ç»ˆç»“æœã€‚æ‰€ä»¥ï¼Œå¯¹ä¸€ä¸ª <code>Stream</code> è¿›è¡Œèšåˆæ“ä½œï¼Œä¼šè§¦å‘ä¸€ç³»åˆ—è¿é”ååº”ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> s1 <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">NatualSupplier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> s2 <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> n <span class="token operator">*</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> s3 <span class="token operator">=</span> s2<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> s4 <span class="token operator">=</span> s3<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
s4<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>acc<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> acc <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å¯¹ <code>s4</code> è¿›è¡Œ <code>reduce()</code> èšåˆè®¡ç®—ï¼Œä¼šä¸æ–­è¯·æ±‚ <code>s4</code> è¾“å‡ºå®ƒçš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚å› ä¸º <code>s4</code> çš„ä¸Šæ¸¸æ˜¯ <code>s3</code>ï¼Œå®ƒåˆä¼šå‘ <code>s3</code> è¯·æ±‚å…ƒç´ ï¼Œå¯¼è‡´ <code>s3</code> å‘ <code>s2</code> è¯·æ±‚å…ƒç´ ï¼Œ<code>s2</code> å‘ <code>s1</code> è¯·æ±‚å…ƒç´ ï¼Œæœ€ç»ˆï¼Œ<code>s1</code> ä» <code>Supplier</code> å®ä¾‹ä¸­è¯·æ±‚åˆ°çœŸæ­£çš„å…ƒç´ ï¼Œå¹¶ç»è¿‡ä¸€ç³»åˆ—è½¬æ¢ï¼Œæœ€ç»ˆè¢« <code>reduce()</code> èšåˆå‡ºç»“æœã€‚</p><p>å¯è§ï¼Œèšåˆæ“ä½œæ˜¯çœŸæ­£éœ€è¦ä» <code>Stream</code> è¯·æ±‚æ•°æ®çš„ï¼Œå¯¹ä¸€ä¸ª <code>Stream</code> åšèšåˆè®¡ç®—åï¼Œç»“æœå°±ä¸æ˜¯ä¸€ä¸ª <code>Stream</code>ï¼Œè€Œæ˜¯ä¸€ä¸ªå…¶ä»–çš„ Java å¯¹è±¡ã€‚</p><h3 id="è¾“å‡ºä¸º-list" tabindex="-1"><a class="header-anchor" href="#è¾“å‡ºä¸º-list" aria-hidden="true">#</a> è¾“å‡ºä¸º List</h3><p><code>reduce()</code> åªæ˜¯ä¸€ç§èšåˆæ“ä½œï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›æŠŠ <code>Stream</code> çš„å…ƒç´ ä¿å­˜åˆ°é›†åˆï¼Œä¾‹å¦‚ <code>List</code>ï¼Œå› ä¸º <code>List</code> çš„å…ƒç´ æ˜¯ç¡®å®šçš„ Java å¯¹è±¡ï¼Œå› æ­¤ï¼ŒæŠŠ <code>Stream</code> å˜ä¸º <code>List</code> ä¸æ˜¯ä¸€ä¸ªè½¬æ¢æ“ä½œï¼Œè€Œæ˜¯ä¸€ä¸ªèšåˆæ“ä½œï¼Œå®ƒä¼šå¼ºåˆ¶ <code>Stream</code> è¾“å‡ºæ¯ä¸ªå…ƒç´ ã€‚</p><p>ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•å°†ä¸€ç»„ <code>String</code> å…ˆè¿‡æ»¤æ‰ç©ºå­—ç¬¦ä¸²ï¼Œç„¶åæŠŠéç©ºå­—ç¬¦ä¸²ä¿å­˜åˆ° <code>List</code> ä¸­ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stream <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">&quot;Pear&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;  &quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Orange&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> stream<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>s<span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŠŠ <code>Stream</code> çš„æ¯ä¸ªå…ƒç´ æ”¶é›†åˆ° <code>List</code> çš„æ–¹æ³•æ˜¯è°ƒç”¨ <code>collect()</code> å¹¶ä¼ å…¥ <code>Collectors.toList()</code> å¯¹è±¡ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ª <code>Collector</code> å®ä¾‹ï¼Œé€šè¿‡ç±»ä¼¼ <code>reduce()</code> çš„æ“ä½œï¼ŒæŠŠæ¯ä¸ªå…ƒç´ æ·»åŠ åˆ°ä¸€ä¸ªæ”¶é›†å™¨ä¸­ï¼ˆå®é™…ä¸Šæ˜¯ <code>ArrayList</code>ï¼‰ã€‚</p><p>ç±»ä¼¼çš„ï¼Œ<code>collect(Collectors.toSet())</code> å¯ä»¥æŠŠ <code>Stream</code> çš„æ¯ä¸ªå…ƒç´ æ”¶é›†åˆ° <code>Set</code> ä¸­ã€‚</p><h3 id="è¾“å‡ºä¸ºæ•°ç»„" tabindex="-1"><a class="header-anchor" href="#è¾“å‡ºä¸ºæ•°ç»„" aria-hidden="true">#</a> è¾“å‡ºä¸ºæ•°ç»„</h3><p>æŠŠ Stream çš„å…ƒç´ è¾“å‡ºä¸ºæ•°ç»„å’Œè¾“å‡ºä¸º List ç±»ä¼¼ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨ <code>toArray()</code> æ–¹æ³•ï¼Œå¹¶ä¼ å…¥æ•°ç»„çš„ â€œæ„é€ æ–¹æ³•â€ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Banana&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Orange&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„åˆ°ä¼ å…¥çš„ â€œæ„é€ æ–¹æ³•â€ æ˜¯ <code>String[]::new</code>ï¼Œå®ƒçš„ç­¾åå®é™…ä¸Šæ˜¯ <code>IntFunction&lt;String[]&gt;</code> å®šä¹‰çš„ <code>String[] apply(int)</code>ï¼Œå³ä¼ å…¥ <code>int</code> å‚æ•°ï¼Œè·å¾— <code>String[]</code> æ•°ç»„çš„è¿”å›å€¼ã€‚</p><h3 id="è¾“å‡ºä¸º-map" tabindex="-1"><a class="header-anchor" href="#è¾“å‡ºä¸º-map" aria-hidden="true">#</a> è¾“å‡ºä¸º Map</h3><p>å¦‚æœæˆ‘ä»¬è¦æŠŠ Stream çš„å…ƒç´ æ”¶é›†åˆ° Map ä¸­ï¼Œå°±ç¨å¾®éº»çƒ¦ä¸€ç‚¹ã€‚å› ä¸ºå¯¹äºæ¯ä¸ªå…ƒç´ ï¼Œæ·»åŠ åˆ° Map æ—¶éœ€è¦ key å’Œ valueï¼Œå› æ­¤ï¼Œæˆ‘ä»¬è¦æŒ‡å®šä¸¤ä¸ªæ˜ å°„å‡½æ•°ï¼Œåˆ†åˆ«æŠŠå…ƒç´ æ˜ å°„ä¸º key å’Œ valueï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stream <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;APPL:Apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;MSFT:Microsoft&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> stream
                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span>
                        <span class="token comment">// æŠŠå…ƒç´  s æ˜ å°„ä¸º key:</span>
                        s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token char">&#39;:&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token comment">// æŠŠå…ƒç´  s æ˜ å°„ä¸º value:</span>
                        s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token char">&#39;:&#39;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åˆ†ç»„è¾“å‡º" tabindex="-1"><a class="header-anchor" href="#åˆ†ç»„è¾“å‡º" aria-hidden="true">#</a> åˆ†ç»„è¾“å‡º</h3><p><code>Stream</code> è¿˜æœ‰ä¸€ä¸ªå¼ºå¤§çš„åˆ†ç»„åŠŸèƒ½ï¼Œå¯ä»¥æŒ‰ç»„è¾“å‡ºã€‚æˆ‘ä»¬çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Banana&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Blackberry&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Coconut&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Avocado&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Cherry&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Apricots&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> groups <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">groupingBy</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>groups<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ†ç»„è¾“å‡ºä½¿ç”¨ <code>Collectors.groupingBy()</code>ï¼Œå®ƒéœ€è¦æä¾›ä¸¤ä¸ªå‡½æ•°ï¼šä¸€ä¸ªæ˜¯åˆ†ç»„çš„ keyï¼Œè¿™é‡Œä½¿ç”¨ <code>s -&gt; s.substring(0, 1)</code>ï¼Œè¡¨ç¤ºåªè¦é¦–å­—æ¯ç›¸åŒçš„ <code>String</code> åˆ†åˆ°ä¸€ç»„ï¼Œç¬¬äºŒä¸ªæ˜¯åˆ†ç»„çš„ valueï¼Œè¿™é‡Œç›´æ¥ä½¿ç”¨ <code>Collectors.toList()</code>ï¼Œè¡¨ç¤ºè¾“å‡ºä¸º <code>List</code>ï¼Œä¸Šè¿°ä»£ç è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">{</span>
    <span class="token assign-left variable">A</span><span class="token operator">=</span><span class="token punctuation">[</span>Apple, Avocado, Apricots<span class="token punctuation">]</span>,
    <span class="token assign-left variable">B</span><span class="token operator">=</span><span class="token punctuation">[</span>Banana, Blackberry<span class="token punctuation">]</span>,
    <span class="token assign-left variable">C</span><span class="token operator">=</span><span class="token punctuation">[</span>Coconut, Cherry<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯è§ï¼Œç»“æœä¸€å…±æœ‰ 3 ç»„ï¼ŒæŒ‰ <code>&quot;A&quot;</code>ï¼Œ<code>&quot;B&quot;</code>ï¼Œ<code>&quot;C&quot;</code> åˆ†ç»„ï¼Œæ¯ä¸€ç»„éƒ½æ˜¯ä¸€ä¸ª <code>List</code>ã€‚</p><p>å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ª <code>Student</code> ç±»ï¼ŒåŒ…å«å­¦ç”Ÿå§“åã€ç­çº§å’Œæˆç»©ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> gradeId<span class="token punctuation">;</span> <span class="token comment">// å¹´çº§</span>
    <span class="token keyword">int</span> classId<span class="token punctuation">;</span> <span class="token comment">// ç­çº§</span>
    <span class="token class-name">String</span> name<span class="token punctuation">;</span> <span class="token comment">// åå­—</span>
    <span class="token keyword">int</span> score<span class="token punctuation">;</span> <span class="token comment">// åˆ†æ•°</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ª <code>Stream&lt;Student&gt;</code>ï¼Œåˆ©ç”¨åˆ†ç»„è¾“å‡ºï¼Œå¯ä»¥éå¸¸ç®€å•åœ°æŒ‰å¹´çº§æˆ–ç­çº§æŠŠ <code>Student</code> å½’ç±»ã€‚</p><h3 id="å°ç»“-4" tabindex="-1"><a class="header-anchor" href="#å°ç»“-4" aria-hidden="true">#</a> å°ç»“</h3><p><code>Stream</code> å¯ä»¥è¾“å‡ºä¸ºé›†åˆï¼š</p><p><code>Stream</code> é€šè¿‡ <code>collect()</code> æ–¹æ³•å¯ä»¥æ–¹ä¾¿åœ°è¾“å‡ºä¸º <code>List</code>ã€<code>Set</code>ã€<code>Map</code>ï¼Œè¿˜å¯ä»¥åˆ†ç»„è¾“å‡ºã€‚</p><hr><h2 id="ğŸ€-å…¶ä»–æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#ğŸ€-å…¶ä»–æ“ä½œ" aria-hidden="true">#</a> ğŸ€ å…¶ä»–æ“ä½œ</h2><p>æˆ‘ä»¬æŠŠ <code>Stream</code> æä¾›çš„æ“ä½œåˆ†ä¸ºä¸¤ç±»ï¼šè½¬æ¢æ“ä½œå’Œèšåˆæ“ä½œã€‚é™¤äº†å‰é¢ä»‹ç»çš„å¸¸ç”¨æ“ä½œå¤–ï¼Œ<code>Stream</code> è¿˜æä¾›äº†ä¸€ç³»åˆ—éå¸¸æœ‰ç”¨çš„æ–¹æ³•ã€‚</p><h3 id="æ’åº" tabindex="-1"><a class="header-anchor" href="#æ’åº" aria-hidden="true">#</a> æ’åº</h3><p>å¯¹ <code>Stream</code> çš„å…ƒç´ è¿›è¡Œæ’åºååˆ†ç®€å•ï¼Œåªéœ€è°ƒç”¨ <code>sorted()</code> æ–¹æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Orange&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Banana&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ–¹æ³•è¦æ±‚ <code>Stream</code> çš„æ¯ä¸ªå…ƒç´ å¿…é¡»å®ç° <code>Comparable</code> æ¥å£ã€‚å¦‚æœè¦è‡ªå®šä¹‰æ’åºï¼Œä¼ å…¥æŒ‡å®šçš„ <code>Comparator</code> å³å¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Orange&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Banana&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">compareToIgnoreCase</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ <code>sorted()</code> åªæ˜¯ä¸€ä¸ªè½¬æ¢æ“ä½œï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªæ–°çš„ <code>Stream</code>ã€‚</p><h3 id="å»é‡" tabindex="-1"><a class="header-anchor" href="#å»é‡" aria-hidden="true">#</a> å»é‡</h3><p>å¯¹ä¸€ä¸ª <code>Stream</code> çš„å…ƒç´ è¿›è¡Œå»é‡ï¼Œæ²¡å¿…è¦å…ˆè½¬æ¢ä¸º <code>Set</code>ï¼Œå¯ä»¥ç›´æ¥ç”¨ <code>distinct()</code>ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;D&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [A, B, C, D]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æˆªå–" tabindex="-1"><a class="header-anchor" href="#æˆªå–" aria-hidden="true">#</a> æˆªå–</h3><p>æˆªå–æ“ä½œå¸¸ç”¨äºæŠŠä¸€ä¸ªæ— é™çš„ <code>Stream</code> è½¬æ¢æˆæœ‰é™çš„ <code>Stream</code>ï¼Œ<code>skip()</code> ç”¨äºè·³è¿‡å½“å‰ <code>Stream</code> çš„å‰ N ä¸ªå…ƒç´ ï¼Œ<code>limit()</code> ç”¨äºæˆªå–å½“å‰ <code>Stream</code> æœ€å¤šå‰ N ä¸ªå…ƒç´ ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;D&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;E&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;F&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// è·³è¿‡ A, B</span>
    <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// æˆªå– C, D, E</span>
    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [C, D, E]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆªå–æ“ä½œä¹Ÿæ˜¯ä¸€ä¸ªè½¬æ¢æ“ä½œï¼Œå°†è¿”å›æ–°çš„ <code>Stream</code>ã€‚</p><h3 id="åˆå¹¶" tabindex="-1"><a class="header-anchor" href="#åˆå¹¶" aria-hidden="true">#</a> åˆå¹¶</h3><p>å°†ä¸¤ä¸ª <code>Stream</code> åˆå¹¶ä¸ºä¸€ä¸ª <code>Stream</code> å¯ä»¥ä½¿ç”¨ <code>Stream</code> çš„é™æ€æ–¹æ³• <code>concat()</code>ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> s1 <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> s2 <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;D&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;E&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// åˆå¹¶:</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> s <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [A, B, C, D, E]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="flatmap" tabindex="-1"><a class="header-anchor" href="#flatmap" aria-hidden="true">#</a> flatMap</h3><p>å¦‚æœ <code>Stream</code> çš„å…ƒç´ æ˜¯é›†åˆï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> s <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è€Œæˆ‘ä»¬å¸Œæœ›æŠŠä¸Šè¿° <code>Stream</code> è½¬æ¢ä¸º <code>Stream&lt;Integer&gt;</code>ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>flatMap()</code>ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> i <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>list <span class="token operator">-&gt;</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å› æ­¤ï¼Œæ‰€è°“ <code>flatMap()</code>ï¼Œæ˜¯æŒ‡æŠŠ <code>Stream</code> çš„æ¯ä¸ªå…ƒç´ ï¼ˆè¿™é‡Œæ˜¯ <code>List</code>ï¼‰æ˜ å°„ä¸º <code>Stream</code>ï¼Œç„¶ååˆå¹¶æˆä¸€ä¸ªæ–°çš„ <code>Stream</code>ï¼š</p><figure><img src="`+r+`" alt="image-20231219170426989" tabindex="0" loading="lazy"><figcaption>image-20231219170426989</figcaption></figure><h3 id="å¹¶è¡Œ" tabindex="-1"><a class="header-anchor" href="#å¹¶è¡Œ" aria-hidden="true">#</a> å¹¶è¡Œ</h3><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯¹ <code>Stream</code> çš„å…ƒç´ è¿›è¡Œå¤„ç†æ˜¯å•çº¿ç¨‹çš„ï¼Œå³ä¸€ä¸ªä¸€ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ã€‚ä½†æ˜¯å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥å¹¶è¡Œå¤„ç† <code>Stream</code> çš„å…ƒç´ ï¼Œå› ä¸ºåœ¨å…ƒç´ æ•°é‡éå¸¸å¤§çš„æƒ…å†µï¼Œå¹¶è¡Œå¤„ç†å¯ä»¥å¤§å¤§åŠ å¿«å¤„ç†é€Ÿåº¦ã€‚</p><p>æŠŠä¸€ä¸ªæ™®é€š <code>Stream</code> è½¬æ¢ä¸ºå¯ä»¥å¹¶è¡Œå¤„ç†çš„ <code>Stream</code> éå¸¸ç®€å•ï¼Œåªéœ€è¦ç”¨ <code>parallel()</code> è¿›è¡Œè½¬æ¢ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> s <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> result <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å˜æˆä¸€ä¸ªå¯ä»¥å¹¶è¡Œå¤„ç†çš„ Stream</span>
                   <span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å¯ä»¥è¿›è¡Œå¹¶è¡Œæ’åº</span>
                   <span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç»è¿‡ <code>parallel()</code> è½¬æ¢åçš„ <code>Stream</code> åªè¦å¯èƒ½ï¼Œå°±ä¼šå¯¹åç»­æ“ä½œè¿›è¡Œå¹¶è¡Œå¤„ç†ã€‚æˆ‘ä»¬ä¸éœ€è¦ç¼–å†™ä»»ä½•å¤šçº¿ç¨‹ä»£ç å°±å¯ä»¥äº«å—åˆ°å¹¶è¡Œå¤„ç†å¸¦æ¥çš„æ‰§è¡Œæ•ˆç‡çš„æå‡ã€‚</p><h3 id="å…¶ä»–èšåˆæ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#å…¶ä»–èšåˆæ–¹æ³•" aria-hidden="true">#</a> å…¶ä»–èšåˆæ–¹æ³•</h3><p>é™¤äº† <code>reduce()</code> å’Œ <code>collect()</code> å¤–ï¼Œ<code>Stream</code> è¿˜æœ‰ä¸€äº›å¸¸ç”¨çš„èšåˆæ–¹æ³•ï¼š</p><ul><li><code>count()</code>ï¼šç”¨äºè¿”å›å…ƒç´ ä¸ªæ•°ï¼›</li><li><code>max(Comparator&lt;? super T&gt; cp)</code>ï¼šæ‰¾å‡ºæœ€å¤§å…ƒç´ ï¼›</li><li><code>min(Comparator&lt;? super T&gt; cp)</code>ï¼šæ‰¾å‡ºæœ€å°å…ƒç´ ã€‚</li></ul><p>é’ˆå¯¹ <code>IntStream</code>ã€<code>LongStream</code> å’Œ <code>DoubleStream</code>ï¼Œè¿˜é¢å¤–æä¾›äº†ä»¥ä¸‹èšåˆæ–¹æ³•ï¼š</p><ul><li><code>sum()</code>ï¼šå¯¹æ‰€æœ‰å…ƒç´ æ±‚å’Œï¼›</li><li><code>average()</code>ï¼šå¯¹æ‰€æœ‰å…ƒç´ æ±‚å¹³å‡æ•°ã€‚</li></ul><p>è¿˜æœ‰ä¸€äº›æ–¹æ³•ï¼Œç”¨æ¥æµ‹è¯• <code>Stream</code> çš„å…ƒç´ æ˜¯å¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p><ul><li><code>boolean allMatch(Predicate&lt;? super T&gt;)</code>ï¼šæµ‹è¯•æ˜¯å¦æ‰€æœ‰å…ƒç´ å‡æ»¡è¶³æµ‹è¯•æ¡ä»¶ï¼›</li><li><code>boolean anyMatch(Predicate&lt;? super T&gt;)</code>ï¼šæµ‹è¯•æ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ æ»¡è¶³æµ‹è¯•æ¡ä»¶ã€‚</li></ul><p>æœ€åä¸€ä¸ªå¸¸ç”¨çš„æ–¹æ³•æ˜¯ <code>forEach()</code>ï¼Œå®ƒå¯ä»¥å¾ªç¯å¤„ç† <code>Stream</code> çš„æ¯ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬ç»å¸¸ä¼ å…¥ <code>System.out::println</code> æ¥æ‰“å° <code>Stream</code> çš„å…ƒç´ ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Stream&lt;String&gt; s = ...
s.forEach(str -&gt; {
    System.out.println(&quot;Hello,&quot; + str);
});
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å°ç»“-5" tabindex="-1"><a class="header-anchor" href="#å°ç»“-5" aria-hidden="true">#</a> å°ç»“</h3><p><code>Stream</code> æä¾›çš„å¸¸ç”¨æ“ä½œæœ‰ï¼š</p><p>è½¬æ¢æ“ä½œï¼š<code>map()</code>ï¼Œ<code>filter()</code>ï¼Œ<code>sorted()</code>ï¼Œ<code>distinct()</code>ï¼›</p><p>åˆå¹¶æ“ä½œï¼š<code>concat()</code>ï¼Œ<code>flatMap()</code>ï¼›</p><p>å¹¶è¡Œå¤„ç†ï¼š<code>parallel()</code>ï¼›</p><p>èšåˆæ“ä½œï¼š<code>reduce()</code>ï¼Œ<code>collect()</code>ï¼Œ<code>count()</code>ï¼Œ<code>max()</code>ï¼Œ<code>min()</code>ï¼Œ<code>sum()</code>ï¼Œ<code>average()</code>ï¼›</p><p>å…¶ä»–æ“ä½œï¼š<code>allMatch()</code>, <code>anyMatch()</code>, <code>forEach()</code>ã€‚</p>`,202);function f(S,h){const s=o("router-link");return c(),l("div",null,[n("details",m,[v,n("nav",g,[n("ul",null,[n("li",null,[a(s,{to:"#ğŸ€-åˆ›å»º-stream"},{default:t(()=>[p("ğŸ€ åˆ›å»º Stream")]),_:1}),n("ul",null,[n("li",null,[a(s,{to:"#stream-of"},{default:t(()=>[p("Stream.of()")]),_:1})]),n("li",null,[a(s,{to:"#åŸºäºæ•°ç»„æˆ–-collection"},{default:t(()=>[p("åŸºäºæ•°ç»„æˆ– Collection")]),_:1})]),n("li",null,[a(s,{to:"#åŸºäº-supplier"},{default:t(()=>[p("åŸºäº Supplier")]),_:1})]),n("li",null,[a(s,{to:"#å…¶ä»–æ–¹æ³•"},{default:t(()=>[p("å…¶ä»–æ–¹æ³•")]),_:1})]),n("li",null,[a(s,{to:"#åŸºæœ¬ç±»å‹"},{default:t(()=>[p("åŸºæœ¬ç±»å‹")]),_:1})]),n("li",null,[a(s,{to:"#ç»ƒä¹ "},{default:t(()=>[p("ç»ƒä¹ ")]),_:1})]),n("li",null,[a(s,{to:"#å°ç»“"},{default:t(()=>[p("å°ç»“")]),_:1})])])]),n("li",null,[a(s,{to:"#ğŸ€-ä½¿ç”¨-map"},{default:t(()=>[p("ğŸ€ ä½¿ç”¨ map")]),_:1}),n("ul",null,[n("li",null,[a(s,{to:"#ç»ƒä¹ -1"},{default:t(()=>[p("ç»ƒä¹ ")]),_:1})]),n("li",null,[a(s,{to:"#å°ç»“-1"},{default:t(()=>[p("å°ç»“")]),_:1})])])]),n("li",null,[a(s,{to:"#ğŸ€-ä½¿ç”¨-filter"},{default:t(()=>[p("ğŸ€ ä½¿ç”¨ filter")]),_:1}),n("ul",null,[n("li",null,[a(s,{to:"#ç»ƒä¹ -2"},{default:t(()=>[p("ç»ƒä¹ ")]),_:1})]),n("li",null,[a(s,{to:"#å°ç»“-2"},{default:t(()=>[p("å°ç»“")]),_:1})])])]),n("li",null,[a(s,{to:"#ğŸ€-ä½¿ç”¨-reduce"},{default:t(()=>[p("ğŸ€ ä½¿ç”¨ reduce")]),_:1}),n("ul",null,[n("li",null,[a(s,{to:"#å°ç»“-3"},{default:t(()=>[p("å°ç»“")]),_:1})])])]),n("li",null,[a(s,{to:"#ğŸ€-è¾“å‡ºé›†åˆ"},{default:t(()=>[p("ğŸ€ è¾“å‡ºé›†åˆ")]),_:1}),n("ul",null,[n("li",null,[a(s,{to:"#è¾“å‡ºä¸º-list"},{default:t(()=>[p("è¾“å‡ºä¸º List")]),_:1})]),n("li",null,[a(s,{to:"#è¾“å‡ºä¸ºæ•°ç»„"},{default:t(()=>[p("è¾“å‡ºä¸ºæ•°ç»„")]),_:1})]),n("li",null,[a(s,{to:"#è¾“å‡ºä¸º-map"},{default:t(()=>[p("è¾“å‡ºä¸º Map")]),_:1})]),n("li",null,[a(s,{to:"#åˆ†ç»„è¾“å‡º"},{default:t(()=>[p("åˆ†ç»„è¾“å‡º")]),_:1})]),n("li",null,[a(s,{to:"#å°ç»“-4"},{default:t(()=>[p("å°ç»“")]),_:1})])])]),n("li",null,[a(s,{to:"#ğŸ€-å…¶ä»–æ“ä½œ"},{default:t(()=>[p("ğŸ€ å…¶ä»–æ“ä½œ")]),_:1}),n("ul",null,[n("li",null,[a(s,{to:"#æ’åº"},{default:t(()=>[p("æ’åº")]),_:1})]),n("li",null,[a(s,{to:"#å»é‡"},{default:t(()=>[p("å»é‡")]),_:1})]),n("li",null,[a(s,{to:"#æˆªå–"},{default:t(()=>[p("æˆªå–")]),_:1})]),n("li",null,[a(s,{to:"#åˆå¹¶"},{default:t(()=>[p("åˆå¹¶")]),_:1})]),n("li",null,[a(s,{to:"#flatmap"},{default:t(()=>[p("flatMap")]),_:1})]),n("li",null,[a(s,{to:"#å¹¶è¡Œ"},{default:t(()=>[p("å¹¶è¡Œ")]),_:1})]),n("li",null,[a(s,{to:"#å…¶ä»–èšåˆæ–¹æ³•"},{default:t(()=>[p("å…¶ä»–èšåˆæ–¹æ³•")]),_:1})]),n("li",null,[a(s,{to:"#å°ç»“-5"},{default:t(()=>[p("å°ç»“")]),_:1})])])])])])]),b])}const w=e(d,[["render",f],["__file","3.html.vue"]]);export{w as default};
