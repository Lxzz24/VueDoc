import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as a,d as e}from"./app-CvlAI_tu.js";const t={},p=e(`<h2 id="ğŸ€-ç‰¹æ®Šæ–‡ä»¶ä¸è¿›ç¨‹" tabindex="-1"><a class="header-anchor" href="#ğŸ€-ç‰¹æ®Šæ–‡ä»¶ä¸è¿›ç¨‹" aria-hidden="true">#</a> ğŸ€ ç‰¹æ®Šæ–‡ä»¶ä¸è¿›ç¨‹</h2><p>åœ¨ç¬¬ 6 ç« ä¸­è®²åˆ°ç‰¹æ®Šæƒé™ SUIDã€SGIDã€SBITï¼Œé‚£ä¹ˆè¿™äº›æƒé™å¯¹äºä½ çš„ <strong>è¿›ç¨‹</strong> æ˜¯å¦‚ä½•å½±å“çš„ï¼Ÿè¿›ç¨‹ç”¨åˆ°çš„ç³»ç»Ÿèµ„æºï¼Œæ¯”å¦‚ç¡¬ç›˜èµ„æºï¼Œä½¿ç”¨ umount ç¡¬ç›˜æ—¶ï¼Œå‡ºç°æç¤º ã€Œdevice is busyã€çš„æç¤ºæ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ</p><h2 id="ğŸ€-å…·æœ‰-suidã€sgid-æƒé™çš„æŒ‡ä»¤æ‰§è¡ŒçŠ¶æ€" tabindex="-1"><a class="header-anchor" href="#ğŸ€-å…·æœ‰-suidã€sgid-æƒé™çš„æŒ‡ä»¤æ‰§è¡ŒçŠ¶æ€" aria-hidden="true">#</a> ğŸ€ å…·æœ‰ SUIDã€SGID æƒé™çš„æŒ‡ä»¤æ‰§è¡ŒçŠ¶æ€</h2><p>SUID çš„æƒé™ä¸è¿›ç¨‹çš„ç›¸å…³æ€§éå¸¸å¤§ï¼ŒSUID çš„ç¨‹åºæ˜¯å¦‚ä½•è¢«ä¸€èˆ¬ç”¨æˆ·æ‰§è¡Œï¼Œå…·æœ‰ä»€ä¹ˆç‰¹è‰²ï¼Ÿ</p><ul><li>SUID æƒé™ä»…å¯¹äºŒè¿›åˆ¶ç¨‹åºï¼ˆbinary programï¼‰æœ‰æ•ˆ</li><li>æ‰§è¡Œè€…å¯¹äºè¯¥è¿›ç¨‹éœ€è¦å…·æœ‰ x çš„å¯æ‰§è¡Œæƒé™</li><li>æœ¬æƒé™ä»…åœ¨æ‰§è¡Œç¨‹åºçš„è¿‡ç¨‹ä¸­æœ‰æ•ˆï¼ˆrun-timeï¼‰</li><li>æ‰§è¡Œè€…å°†å…·æœ‰è¯¥ç¨‹åºæ‹¥æœ‰è€…ï¼ˆownerï¼‰çš„æƒé™</li></ul><p>æ‰€ä»¥ï¼Œæ•´ä¸ª SUID çš„æƒé™ä¼šç”Ÿæ•ˆæ˜¯ç”±äº<strong>å…·æœ‰è¯¥æƒé™çš„ç¨‹åºè¢«è§¦å‘</strong>ï¼Œä¸€ä¸ªè¿›ç¨‹è¡¨ç¤ºä¸€ä¸ªç¨‹åºçš„è¿è¡Œï¼Œæ‰€ä»¥æ‰§è¡Œè€…å¯ä»¥å…·æœ‰ç¨‹åºæ‹¥æœ‰è€…çš„æƒé™å°±æ˜¯åœ¨è¯¥ç¨‹åºå˜æˆè¿›ç¨‹çš„æ—¶å€™</p><p>æ¯”å¦‚æ‰§è¡Œäº† passwd åä½ å°±å…·æœ‰ root çš„æƒé™ï¼Ÿæ˜¯å› ä¸ºä½ å†è§¦å‘ passwd åï¼Œä¼šå–å¾—ä¸€ä¸ªæ–°çš„è¿›ç¨‹ä¸ PIDï¼Œè¯¥ PID äº§ç”Ÿæ—¶é€šè¿‡ SUID æ¥ç»™äºˆè¯¥ PID ç‰¹æ®Šçš„æƒé™è®¾ç½®</p><p>ä¸‹é¢ä½¿ç”¨ mrcode ç™»å½•ç³»ç»Ÿå¹¶æ‰§è¡Œ passwd åï¼Œé€šè¿‡å·¥ä½œæ§åˆ¶æ¥ç†è§£</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>mrcode@study ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">LANG</span></span><span class="token operator">=</span>C
<span class="token punctuation">[</span>mrcode@study ~<span class="token punctuation">]</span>$ <span class="token function">passwd</span>
Changing password <span class="token keyword">for</span> user mrcode.
Changing password <span class="token keyword">for</span> mrcode.
<span class="token punctuation">(</span>current<span class="token punctuation">)</span> UNIX password: 		<span class="token comment"># è¿™é‡ŒæŒ‰ä¸‹ ctrl + zï¼Œå¹¶æŒ‰ä¸‹ enter é”®</span>

<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>+  Stopped                 <span class="token function">passwd</span>
<span class="token punctuation">[</span>mrcode@study ~<span class="token punctuation">]</span>$ pstree <span class="token parameter variable">-uA</span>
systemd-+-ModemManager---2*<span class="token punctuation">[</span><span class="token punctuation">{</span>ModemManager<span class="token punctuation">}</span><span class="token punctuation">]</span>
        <span class="token operator">|</span>-sshd-+-sshd---sshd<span class="token punctuation">(</span>mrcode<span class="token punctuation">)</span>-+-bash---su<span class="token punctuation">(</span>root<span class="token punctuation">)</span>---bash
        <span class="token operator">|</span>      <span class="token operator">|</span>                     <span class="token operator">|</span>-bash---top
        <span class="token operator">|</span>      <span class="token operator">|</span>                     <span class="token operator">|</span>-bash---sleep
        <span class="token operator">|</span>      <span class="token operator">|</span>                     <span class="token variable"><span class="token variable">\`</span>-sftp-server
        <span class="token operator">|</span>      <span class="token variable">\`</span></span>-sshd---sshd<span class="token punctuation">(</span>mrcode<span class="token punctuation">)</span>-+-bash-+-passwd<span class="token punctuation">(</span>root<span class="token punctuation">)</span>
        <span class="token operator">|</span>                            <span class="token operator">|</span>      <span class="token variable"><span class="token variable">\`</span><span class="token parameter variable">-pstree</span>
        <span class="token operator">|</span>                            <span class="token operator">|</span>-bash---top
        <span class="token operator">|</span>                            <span class="token operator">|</span>-bash---sleep
        <span class="token operator">|</span>                            <span class="token variable">\`</span></span>-sftp-server

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»ä¸Šé¢çš„è¿›ç¨‹æ¥çœ‹ï¼Œåœ¨æ‰§è¡Œ passwd å‰æ˜¯ mrcode çš„æƒé™ï¼Œpasswd åˆ™æ˜¯ root æƒé™ï¼Œpasswd æ˜¯ç”± bash è¡ç”Ÿå‡ºæ¥çš„ï¼Œä½†æ˜¯æƒé™ä¸ä¸€æ ·ï¼Œè¿™æ ·ä¸€æ¥å°±èƒ½ç†è§£ä¸ºä»€ä¹ˆä¸åŒç¨‹åºæ‰€äº§ç”Ÿçš„æƒé™ä¸åŒäº†ï¼Œæ˜¯ç”±äº SUID ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„è¿›ç¨‹çš„å…³ç³»</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>mrcode@study ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">type</span> <span class="token function">passwd</span>
<span class="token function">passwd</span> is hashed <span class="token punctuation">(</span>/usr/bin/passwd<span class="token punctuation">)</span>
<span class="token punctuation">[</span>mrcode@study ~<span class="token punctuation">]</span>$ ll /usr/bin/passwd
-rwsr-xr-x. <span class="token number">1</span> root root <span class="token number">27856</span> Aug  <span class="token number">9</span>  <span class="token number">2019</span> /usr/bin/passwd
<span class="token comment">#å¯ä»¥çœ‹åˆ°ï¼Œçš„ç¡®è¯¥æŒ‡ä»¤ä¹Ÿæœ‰ s æƒé™</span>

<span class="token comment"># è¿˜å¯ä»¥é€šè¿‡ä»¥ä¸‹æŒ‡ä»¤æŸ¥æ‰¾ SUID/SGID çš„æ–‡ä»¶</span>
<span class="token function">find</span> / <span class="token parameter variable">-perm</span> /6000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ€-proc-ä»£è¡¨çš„æ„ä¹‰" tabindex="-1"><a class="header-anchor" href="#ğŸ€-proc-ä»£è¡¨çš„æ„ä¹‰" aria-hidden="true">#</a> ğŸ€ <code>/proc/*</code> ä»£è¡¨çš„æ„ä¹‰</h2><p>è¿›ç¨‹åœ¨å†…å­˜ä¸­ï¼Œå†…å­˜ä¸­çš„æ•°æ®éƒ½æ˜¯å†™å…¥åˆ° <code>/proc/*</code> ç›®å½•ä¸‹çš„ï¼Œå¯ä»¥ç›´æ¥æŸ¥çœ‹è¯¥ç›®å½•</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>mrcode@study ~<span class="token punctuation">]</span>$ ll /proc/
total <span class="token number">0</span>
dr-xr-xr-x.  <span class="token number">9</span> root           root                         <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">20</span>:13 <span class="token number">1</span>
dr-xr-xr-x.  <span class="token number">9</span> root           root                         <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">20</span>:13 <span class="token number">10</span>
dr-xr-xr-x.  <span class="token number">9</span> root           root                         <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">20</span>:13 <span class="token number">11</span>
<span class="token punctuation">..</span>.
dr-xr-xr-x.  <span class="token number">2</span> root           root                         <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">20</span>:54 sysvipc
-r--r--r--.  <span class="token number">1</span> root           root                         <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">20</span>:54 timer_list
-rw-r--r--.  <span class="token number">1</span> root           root                         <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">20</span>:54 timer_stats
dr-xr-xr-x.  <span class="token number">4</span> root           root                         <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">20</span>:54 <span class="token function">tty</span>
-r--r--r--.  <span class="token number">1</span> root           root                         <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">20</span>:16 <span class="token function">uptime</span>
-r--r--r--.  <span class="token number">1</span> root           root                         <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">20</span>:54 version
-r--------.  <span class="token number">1</span> root           root                         <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">20</span>:54 vmallocinfo
-r--r--r--.  <span class="token number">1</span> root           root                         <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">20</span>:54 <span class="token function">vmstat</span>
-r--r--r--.  <span class="token number">1</span> root           root                         <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">20</span>:54 zoneinfo

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŸºæœ¬ä¸Šï¼Œç›®å‰ä¸»æœºä¸Šé¢çš„å„ä¸ªè¿›ç¨‹çš„ PID éƒ½æ˜¯ä»¥ç›®å½•çš„å½¢æ€å­˜åœ¨è¯¥ç›®å½•ä¸­ã€‚å¦‚ç¬¬ 1 è¡Œçš„ PID ä¸º 1ï¼Œå®ƒæ˜¯å¼€æœºæ‰§è¡Œçš„ç¬¬ä¸€ä¸ªç¨‹åº systemdï¼Œè¯¥ PID çš„æ‰€æœ‰ç›¸å…³ä¿¡æ¯éƒ½å†™å…¥åœ¨ <code>/proc/1/*</code> ä¸‹é¢</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># ll /proc/1</span>
total <span class="token number">0</span>
dr-xr-xr-x. <span class="token number">2</span> root root <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">20</span>:48 attr
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">20</span>:53 autogroup
-r--------. <span class="token number">1</span> root root <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">20</span>:53 auxv
-r--r--r--. <span class="token number">1</span> root root <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">20</span>:13 cgroup
-r--r--r--. <span class="token number">1</span> root root <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">20</span>:13 cmdline			<span class="token comment"># æŒ‡ä»¤ä¸²</span>
-r--------. <span class="token number">1</span> root root <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">20</span>:13 environ			<span class="token comment"># ä¸€äº›ç¯èŠ‚å˜é‡</span>
lrwxrwxrwx. <span class="token number">1</span> root root <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">20</span>:13 exe -<span class="token operator">&gt;</span> /usr/lib/systemd/systemd

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‡Œé¢æ•°æ®å¾ˆå¤šï¼Œå¯ä»¥æŸ¥è¯¢ä¸‹ cmdline çš„å†…å®¹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># cat /proc/1/cmdline</span>
/usr/lib/systemd/systemd--switched-root--system--deserialize22
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢æŒ‡ä»¤æ˜¾ç¤ºäº†æ˜¯ä»¥ä»€ä¹ˆå‚æ•°å¯åŠ¨çš„ systemd æŒ‡ä»¤ï¼Œè¿™ä¸ªæ˜¯é’ˆå¯¹ PID æœ‰å…³çš„å†…å®¹ï¼Œä¸‹é¢æ˜¯é’ˆå¯¹æ•´ä¸ª Linux ç³»ç»Ÿç›¸å…³çš„å‚æ•°ï¼Œå¯¹åº”ä¸ /proc ç›®å½•ä¸‹çš„æ–‡ä»¶å¦‚ä¸‹</p><table><thead><tr><th>æ–‡ä»¶å</th><th>æ–‡ä»¶å†…å®¹</th></tr></thead><tbody><tr><td><code>/proc/cmdline</code></td><td>åŠ è½½ kernel æ—¶æ‰€ä¸‹è¾¾çš„ç›¸å…³æŒ‡ä»¤ä¸å‚æ•°ï¼ŒæŸ¥è¯¢æ­¤æ–‡ä»¶ï¼Œå¯äº†è§£æŒ‡ä»¤æ˜¯å¦‚ä½•å¯åŠ¨çš„</td></tr><tr><td><code>/proc/cpuinfo</code></td><td>æœ¬æœºçš„ CPU ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…å«é¢‘ç‡ã€ç±»å‹ä¸è®¡ç®—åŠŸèƒ½ç­‰</td></tr><tr><td><code>/proc/devices</code></td><td>ç³»ç»Ÿå„ä¸ªä¸»è¦è£…ç½®çš„ä¸»è¦è£…ç½®ä»£å·ï¼Œä¸ mknod æœ‰å…³</td></tr><tr><td><code>/proc/filesystems</code></td><td>ç›®å‰ç³»ç»Ÿå·²ç»åŠ è½½çš„æ–‡ä»¶ç³»ç»Ÿ</td></tr><tr><td><code>/proc/interrupts</code></td><td>ç›®å‰ç³»ç»Ÿä¸Š IRQ åˆ†é…çŠ¶æ€</td></tr><tr><td><code>/proc/ioports</code></td><td>ç›®å‰ç³»ç»Ÿä¸Šå„ä¸ªè£…ç½®æ‰€é…ç½®çš„ I/O åœ°å€</td></tr><tr><td><code>/proc/kcore</code></td><td>å†…å­˜å¤§å°ï¼Œå¾ˆå¤§ï¼Ÿä¸è¦è¯»å–è¯¥æ–‡ä»¶</td></tr><tr><td><code>/proc/loadavg</code></td><td>top ä»¥åŠ uptime çš„ä¸‰ä¸ªå¹³å‡æ•°å€¼å°±æ˜¯è®°å½•åœ¨è¿™é‡Œçš„</td></tr><tr><td><code>/proc/meminfo</code></td><td>ä½¿ç”¨ free åˆ—å‡ºçš„å†…å­˜ä¿¡æ¯ï¼Œåœ¨è¿™é‡Œä¹Ÿå¯ä»¥æŸ¥è¯¢åˆ°</td></tr><tr><td><code>/proc/modules</code></td><td>ç›®å‰æˆ‘ä»¬ LInux å·²ç»åŠ è½½çš„æ¨¡å—åˆ—è¡¨ï¼Œå¯ä»¥çœ‹æˆæ˜¯é©±åŠ¨ç¨‹åº</td></tr><tr><td><code>/proc/mounts</code></td><td>ç³»ç»Ÿå·²ç»æŒ‚è½½çš„æ•°æ®ï¼Œå°±æ˜¯ç”¨ mount æŒ‡ä»¤æŸ¥è¯¢å‡ºæ¥çš„æ•°æ®</td></tr><tr><td><code>/proc/swaps</code></td><td>ç³»ç»ŸæŒ‚è½½çš„å†…å­˜åœ¨å“ªé‡Œï¼Ÿä½¿ç”¨æ‰çš„ partition è®°å½•åœ¨è¿™é‡Œ</td></tr><tr><td><code>/proc/partitions</code></td><td>ä½¿ç”¨ fsidk -l ä¼šå‡ºç°ç›®å‰æ‰€æœ‰çš„ partitionï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­ä¹Ÿæœ‰è®°å½•</td></tr><tr><td><code>/proc/uptime</code></td><td>ä½¿ç”¨ uptime å‡ºç°çš„ä¿¡æ¯</td></tr><tr><td><code>/proc/version</code></td><td>æ ¸å¿ƒçš„ç‰ˆæœ¬ï¼Œä½¿ç”¨ uname -a æ˜¾ç¤ºçš„ä¿¡æ¯</td></tr><tr><td><code>/proc/bus/*</code></td><td>ä¸€äº›æ€»çº¿çš„è£…ç½®ï¼Œè¿˜æœ‰ USB çš„è£…ç½®ä¹Ÿè®°å½•åœ¨è¿™é‡Œ</td></tr></tbody></table><p>è¿™äº›æ–‡ä»¶å†…å®¹å»ºè®®ä½¿ç”¨ cat å»æŸ¥é˜…çœ‹çœ‹ï¼Œä¸å¿…æ·±å…¥äº†è§£ï¼Œå¦‚æœæœªæ¥ä½ è¦å†™æŸäº›å·¥å…·è½¯ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªç›®å½•ä¸‹ç›¸å…³æ–‡ä»¶å¯èƒ½ä¼šå¯¹ä½ æœ‰ç‚¹å¸®åŠ©</p><h2 id="ğŸ€-æŸ¥è¯¢å·²å¼€å¯æ–‡ä»¶æˆ–å·²æ‰§è¡Œè¿›ç¨‹å¼€å¯ä¹‹æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#ğŸ€-æŸ¥è¯¢å·²å¼€å¯æ–‡ä»¶æˆ–å·²æ‰§è¡Œè¿›ç¨‹å¼€å¯ä¹‹æ–‡ä»¶" aria-hidden="true">#</a> ğŸ€ æŸ¥è¯¢å·²å¼€å¯æ–‡ä»¶æˆ–å·²æ‰§è¡Œè¿›ç¨‹å¼€å¯ä¹‹æ–‡ä»¶</h2><p>è¿˜æœ‰ä¸€äº›ä¸è¿›ç¨‹ç›¸å…³çš„æŒ‡ä»¤å¯ä»¥å‚è€ƒä¸åº”ç”¨</p><h3 id="fuser-ç”±æ–‡ä»¶-æˆ–æ–‡ä»¶ç³»ç»Ÿ-æ‰¾å‡ºæ­£åœ¨ä½¿ç”¨è¯¥æ–‡ä»¶çš„è¿›ç¨‹" tabindex="-1"><a class="header-anchor" href="#fuser-ç”±æ–‡ä»¶-æˆ–æ–‡ä»¶ç³»ç»Ÿ-æ‰¾å‡ºæ­£åœ¨ä½¿ç”¨è¯¥æ–‡ä»¶çš„è¿›ç¨‹" aria-hidden="true">#</a> fuserï¼šç”±æ–‡ä»¶ï¼ˆæˆ–æ–‡ä»¶ç³»ç»Ÿï¼‰æ‰¾å‡ºæ­£åœ¨ä½¿ç”¨è¯¥æ–‡ä»¶çš„è¿›ç¨‹</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">fuser</span> <span class="token punctuation">[</span>-umv<span class="token punctuation">]</span> <span class="token punctuation">[</span>-k <span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">[</span>signal<span class="token punctuation">]</span><span class="token punctuation">]</span> file/dir

é€‰é¡¹ä¸å‚æ•°ï¼š
	-uï¼šé™¤äº†è¿›ç¨‹çš„ PID ä¹‹å¤–ï¼ŒåŒæ—¶åˆ—å‡ºè¯¥è¿›ç¨‹çš„æ‹¥æœ‰è€…
	-mï¼šåé¢æ¥çš„æ–‡ä»¶åä¼šä¸»åŠ¨çš„ä¸Šæåˆ°è¯¥æ–‡ä»¶ç³»ç»Ÿçš„æœ€é¡¶å±‚ï¼Œå¯¹ <span class="token function">umount</span> ä¸æˆåŠŸå¾ˆæœ‰æ•ˆ
	-vï¼šå¯ä»¥åˆ—å‡ºæ¯ä¸ªæ–‡ä»¶ä¸è¿›ç¨‹è¿˜æœ‰æŒ‡ä»¤çš„å®Œæ•´ç›¸å…³æ€§
	-kï¼šæ‰¾å‡ºä½¿ç”¨è¯¥æ–‡ä»¶/ç›®å½•çš„ PIDï¼Œå¹¶è¯•å›¾ä»¥ SIGKILL è¿™ä¸ªä¿¡å·ç»™äºˆè¯¥ PID
	-iï¼šå¿…é¡»ä¸ <span class="token parameter variable">-k</span> é…åˆä½¿ç”¨ï¼Œåœ¨åˆ é™¤ PID ä¹‹å‰ä¼šå…ˆè¯¢é—®ä½¿ç”¨è€…
	-signalï¼šä¾‹å¦‚ <span class="token parameter variable">-1</span> <span class="token parameter variable">-15</span> ç­‰ï¼Œè‹¥ä¸åŠ çš„è¯ï¼Œé¢„è®¾æ˜¯ -9ï¼šSIGKILL
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># èŒƒä¾‹ 1ï¼šæ‰¾å‡ºç›®å‰æ‰€åœ¨ç›®å½•çš„ä½¿ç”¨ PIDã€æ‰€å±è´¦æˆ·ã€æƒé™</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># fuser -uv .</span>
                     <span class="token environment constant">USER</span>        PID ACCESS COMMAND
/root:               root       <span class="token number">2604</span> <span class="token punctuation">..</span>c<span class="token punctuation">..</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span>bash

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ‰ä¸€ä¸ªè¿›ç¨‹å±äº rootï¼Œè€Œ ACCESS é¡¹åˆ™ç•¥ä¸ºå¤æ‚ä¸€ç‚¹ï¼š</p><ul><li>cï¼šæ­¤è¿›ç¨‹åœ¨å½“å‰çš„ç›®å½•ä¸‹ï¼ˆéæ¬¡ç›®å½•ï¼‰</li><li>eï¼šå¯è¢«è§¦å‘ä¸ºæ‰§è¡ŒçŠ¶æ€</li><li>fï¼šæ˜¯ä¸€ä¸ªè¢«å¼€å¯çš„æ–‡ä»¶</li><li>rï¼šä»£è¡¨é¡¶å±‚ç›®å½•ï¼ˆroot directoryï¼‰</li><li>Fï¼šè¯¥æ–‡ä»¶è¢«å¼€å¯äº†ï¼Œä¸è¿‡åœ¨ç­‰å¾…å›åº”ä¸­</li><li>mï¼šå¯èƒ½ä¸ºåˆ†äº«çš„åŠ¨æ€å‡½æ•°åº“</li></ul><p>å¦‚æœæƒ³çŸ¥é“æŸä¸ªæ–‡ä»¶ç³»ç»Ÿä¸‹åˆå¤šå°‘è¿›ç¨‹æ­£åœ¨å ç”¨è¯¥æ–‡ä»¶ç³»ç»Ÿæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>-m</code> é€‰é¡¹</p><p>ä¸‹é¢åšå‡ ä¸ªç®€å•æµ‹è¯•ï¼ŒåŒ…æ‹¬å®ä½“æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ä¸ /proc è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿçš„å†…å®¹ï¼Œçœ‹çœ‹æœ‰å¤šå°‘çš„è¿›ç¨‹å¯¹è¿™äº›æŒ‚è½½ç‚¹æˆ–å…¶ä»–ç›®å½•çš„ä½¿ç”¨çŠ¶æ€</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># èŒƒä¾‹ 2ï¼šæ‰¾åˆ°æ‰€æœ‰ä½¿ç”¨åˆ° /proc è¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„è¿›ç¨‹</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># fuser -uv /proc/</span>
                     <span class="token environment constant">USER</span>        PID ACCESS COMMAND
/proc:               root     kernel <span class="token function">mount</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span>/proc
                     rtkit       <span class="token number">834</span> .rc<span class="token punctuation">..</span> <span class="token punctuation">(</span>rtkit<span class="token punctuation">)</span>rtkit-daemon

<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># fuser -muv /proc/</span>
                     <span class="token environment constant">USER</span>        PID ACCESS COMMAND
/proc:               root     kernel <span class="token function">mount</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span>/proc
                     root          <span class="token number">1</span> f<span class="token punctuation">..</span><span class="token punctuation">..</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span>systemd
                     root        <span class="token number">589</span> f<span class="token punctuation">..</span><span class="token punctuation">..</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span>systemd-journal
                     rtkit       <span class="token number">834</span> .rc<span class="token punctuation">..</span> <span class="token punctuation">(</span>rtkit<span class="token punctuation">)</span>rtkit-daemon
                     root        <span class="token number">844</span> f<span class="token punctuation">..</span><span class="token punctuation">..</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span>udisksd
                     root        <span class="token number">929</span> f<span class="token punctuation">..</span><span class="token punctuation">..</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span>NetworkManager
                     root       <span class="token number">1277</span> F<span class="token punctuation">..</span><span class="token punctuation">..</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span>libvirtd
                     root       <span class="token number">1638</span> F<span class="token punctuation">..</span><span class="token punctuation">..</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span>X
                     gdm        <span class="token number">1693</span> f<span class="token punctuation">..</span><span class="token punctuation">..</span> <span class="token punctuation">(</span>gdm<span class="token punctuation">)</span>gnome-shell
                     root       <span class="token number">1759</span> f<span class="token punctuation">..</span><span class="token punctuation">..</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span>packagekitd
                     mrcode     <span class="token number">2280</span> f<span class="token punctuation">..</span><span class="token punctuation">..</span> <span class="token punctuation">(</span>mrcode<span class="token punctuation">)</span>top
                     mrcode     <span class="token number">7722</span> f<span class="token punctuation">..</span><span class="token punctuation">..</span> <span class="token punctuation">(</span>mrcode<span class="token punctuation">)</span>top
<span class="token comment"># è¿™å°±èƒ½çœ‹åˆ°æœ‰å‡ ä¸ªç¨‹åºåœ¨å¯¹è¯¥ç›®å½•è¿›è¡Œå­˜å–</span>


<span class="token comment"># èŒƒä¾‹ 3ï¼šæ‰¾åˆ°æ‰€æœ‰ä½¿ç”¨åˆ° /home è¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„è¿›ç¨‹</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># echo $$</span>
<span class="token number">2604</span>				<span class="token comment"># å…ˆç¡®å®šä¸‹è‡ªå·±çš„ bash çš„è¿›ç¨‹ PID</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment">#  cd /home/</span>
<span class="token punctuation">[</span>root@study home<span class="token punctuation">]</span><span class="token comment"># fuser -muv .</span>
                     <span class="token environment constant">USER</span>        PID ACCESS COMMAND
/home:               root     kernel <span class="token function">mount</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span>/home
                     mrcode     <span class="token number">1346</span> <span class="token punctuation">..</span>c<span class="token punctuation">..</span> <span class="token punctuation">(</span>mrcode<span class="token punctuation">)</span>bash
                     mrcode     <span class="token number">1371</span> <span class="token punctuation">..</span>c<span class="token punctuation">..</span> <span class="token punctuation">(</span>mrcode<span class="token punctuation">)</span>bash
                     mrcode     <span class="token number">1378</span> <span class="token punctuation">..</span>c<span class="token punctuation">..</span> <span class="token punctuation">(</span>mrcode<span class="token punctuation">)</span>sleep
                     mrcode     <span class="token number">1399</span> <span class="token punctuation">..</span>c<span class="token punctuation">..</span> <span class="token punctuation">(</span>mrcode<span class="token punctuation">)</span>sleep
                     mrcode     <span class="token number">1958</span> <span class="token punctuation">..</span>c<span class="token punctuation">..</span> <span class="token punctuation">(</span>mrcode<span class="token punctuation">)</span>bash
                     mrcode     <span class="token number">1991</span> <span class="token punctuation">..</span>c<span class="token punctuation">..</span> <span class="token punctuation">(</span>mrcode<span class="token punctuation">)</span>sftp-server
                     mrcode     <span class="token number">1992</span> <span class="token punctuation">..</span>c<span class="token punctuation">..</span> <span class="token punctuation">(</span>mrcode<span class="token punctuation">)</span>bash
                     mrcode     <span class="token number">2280</span> <span class="token punctuation">..</span>c<span class="token punctuation">..</span> <span class="token punctuation">(</span>mrcode<span class="token punctuation">)</span>top
                     root       <span class="token number">2604</span> <span class="token punctuation">..</span>c<span class="token punctuation">..</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span>bash			<span class="token comment"># çœ‹è¿™é‡Œï¼Œè‡ªå·±çš„ bash å­˜åœ¨åˆ—è¡¨ä¸­</span>
                     mrcode     <span class="token number">7294</span> <span class="token punctuation">..</span>c<span class="token punctuation">..</span> <span class="token punctuation">(</span>mrcode<span class="token punctuation">)</span>bash
                     mrcode     <span class="token number">7358</span> <span class="token punctuation">..</span>c<span class="token punctuation">..</span> <span class="token punctuation">(</span>mrcode<span class="token punctuation">)</span>sftp-server
                     mrcode     <span class="token number">7362</span> <span class="token punctuation">..</span>c<span class="token punctuation">..</span> <span class="token punctuation">(</span>mrcode<span class="token punctuation">)</span>bash
                     mrcode     <span class="token number">7722</span> <span class="token punctuation">..</span>c<span class="token punctuation">..</span> <span class="token punctuation">(</span>mrcode<span class="token punctuation">)</span>top
                     root       <span class="token number">8884</span> <span class="token punctuation">..</span>c<span class="token punctuation">..</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span>passwd

<span class="token punctuation">[</span>root@study home<span class="token punctuation">]</span><span class="token comment"># cd ~</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># umount /home/</span>
umount: /home: target is busy.
        <span class="token punctuation">(</span>In some cases useful info about processes that use
         the device is found by lsof<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> or fuser<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">))</span>
<span class="token comment"># é€šè¿‡ fuser çŸ¥é“æœ‰å¥½å‡ ä¸ªè¿›ç¨‹åœ¨è¯¥ç›®å½•ä¸‹è¿è¡Œï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹å¼ä¸€ä¸ªä¸€ä¸ªåˆ é™¤</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># fuser -mki /home/</span>
/home:                7294c  7358c  7362c  7722c  8884c 19238c 19289c 19291c 19601c 25650c 25674c 25685c 25746c
Kill process <span class="token number">7294</span> ? <span class="token punctuation">(</span>y/N<span class="token punctuation">)</span>
<span class="token comment"># ä»¥ä¸ŠæŒ‡ä»¤æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œé¢‡ä¸ºæ£˜æ‰‹ï¼Œå°±æ˜¯å¾ˆå®¹æ˜“æ€åˆ°è‡ªå·± bash çš„è¿›ç¨‹ï¼Œé‚£ä¹ˆä¹…ç›´æ¥æŠŠç›´æ¥è¸¢æ‰äº†</span>
<span class="token comment"># ä¸çŸ¥é“è¿™ä¸ªè¿™ä¹ˆæ’é™¤æ‰æ˜¯å‡ºæ–¹ä¾¿çš„</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢å¯ä»¥é’ˆå¯¹æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå…¶å®ä¹Ÿå¯ä»¥é’ˆå¯¹å•ä¸€æ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># èŒƒä¾‹ 4ï¼šæ‰¾åˆ° /run ä¸‹å±äº FIFO ç±»å‹çš„æ–‡ä»¶ï¼Œå¹¶æ‰¾å‡ºå­˜å–è¯¥æ–‡ä»¶çš„è¿›ç¨‹</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># find /run -type p</span>
/run/dmeventd-client
/run/dmeventd-server
/run/systemd/inhibit/7.ref
/run/systemd/inhibit/6.ref
/run/systemd/inhibit/5.ref
/run/systemd/inhibit/4.ref
/run/systemd/inhibit/2.ref
/run/systemd/inhibit/1.ref
/run/systemd/sessions/13.ref
/run/systemd/sessions/5.ref
/run/systemd/sessions/c1.ref
/run/systemd/initctl/fifo

<span class="token comment"># éšä¾¿æ‰¾åˆ°æ–‡ä»¶æµ‹è¯•</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># fuser -uv /run/systemd/sessions/c1.ref</span>
                     <span class="token environment constant">USER</span>        PID ACCESS COMMAND
/run/systemd/sessions/c1.ref:
                     root        <span class="token number">842</span> f<span class="token punctuation">..</span><span class="token punctuation">..</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span>systemd-logind
                     root       <span class="token number">1649</span> F<span class="token punctuation">..</span><span class="token punctuation">..</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span>gdm-session-wor
<span class="token comment"># é€šå¸¸ç³»ç»Ÿçš„ FIFO æ–‡ä»¶éƒ½ä¼šæ”¾ç½®åˆ° /run ä¸‹ï¼Œé€šè¿‡è¯¥æ–¹å¼æ¥è¿½è¸ªè¯¥æ–‡ä»¶å­˜å–çš„ process</span>
<span class="token comment"># åŒæ ·ä¹Ÿèƒ½å¤Ÿçœ‹åˆ°ç³»ç»Ÿæœ‰å¤šå¿™ç¢Œï¼ˆè¿›ç¨‹å¤šå½“ç„¶å°±å¿™ç¢Œï¼‰</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>fuser çš„é‡ç‚¹æ˜¯å¯ä»¥è®©æˆ‘ä»¬äº†è§£åˆ°æŸä¸ªæ–‡ä»¶ç³»ç»Ÿæˆ–æ–‡ä»¶ç›®å‰æ­£åœ¨è¢«å“ªäº›è¿›ç¨‹æ‰€ä½¿ç”¨</p><h3 id="lsof-åˆ—å‡ºè¢«è¿›ç¨‹æ‰€å¼€å¯çš„æ–‡ä»¶å" tabindex="-1"><a class="header-anchor" href="#lsof-åˆ—å‡ºè¢«è¿›ç¨‹æ‰€å¼€å¯çš„æ–‡ä»¶å" aria-hidden="true">#</a> lsofï¼šåˆ—å‡ºè¢«è¿›ç¨‹æ‰€å¼€å¯çš„æ–‡ä»¶å</h3><p>fuser æ˜¯é€šè¿‡æ–‡ä»¶æˆ–åˆ™è£…ç½®åå»æ‰¾ä½¿ç”¨å®ƒçš„è¿›ç¨‹ï¼Œè€Œ lsof åˆ™æ˜¯é€šè¿‡æŸä¸ªè¿›ç¨‹å»æ‰¾å®ƒå¼€å¯æˆ–ä½¿ç”¨çš„æ–‡ä»¶ä¸è£…ç½®</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">lsof</span> <span class="token punctuation">[</span>-aUu<span class="token punctuation">]</span> <span class="token punctuation">[</span>+d<span class="token punctuation">]</span>

é€‰é¡¹ä¸å‚æ•°ï¼š
	-aï¼šå¤šæƒ³æ•°æ®éœ€è¦åŒæ—¶æˆç«‹æ‰æ˜¾ç¤ºå‡ºç»“æœæ—¶
	-Uï¼šä»…åˆ—å‡º Unix like ç³»ç»Ÿçš„ socket æ–‡ä»¶ç±»å‹
	-uï¼šåé¢æ¥ usernameï¼Œåˆ—å‡ºè¯¥ä½¿ç”¨è€…ç›¸å…³è¿›ç¨‹æ‰€å¼€å¯çš„æ–‡ä»¶
	+dï¼šåé¢æ¥ç›®å½•ï¼Œæ‰¾å‡ºæŸä¸ªç›®å½•ä¸‹å·²ç»è¢«å¼€å¯çš„æ–‡ä»¶
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># èŒƒä¾‹ 1ï¼šåˆ—å‡ºç›®å‰ç³»ç»Ÿä¸Šæ‰€æœ‰å·²ç»è¢«å¼€å¯çš„æ–‡ä»¶ä¸è£…ç½®</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># lsof</span>
libvirtd   <span class="token number">1277</span> <span class="token number">1318</span>           root  mem       REG              <span class="token number">253,0</span>     <span class="token number">53848</span>    <span class="token number">9645351</span> /usr/lib64/libavahi-common.so.3.5.3
libvirtd   <span class="token number">1277</span> <span class="token number">1318</span>           root  mem       REG              <span class="token number">253,0</span>    <span class="token number">155784</span>    <span class="token number">8569818</span> /usr/lib64/libselinux.so.1
libvirtd   <span class="token number">1277</span> <span class="token number">1318</span>           root  mem       REG              <span class="token number">253,0</span>     <span class="token number">37056</span>    <span class="token number">8655202</span> /usr/lib64/libacl.so.1.1.0
<span class="token comment"># æ–‡ä»¶å¾ˆå¤šå¾ˆå¤šï¼Œç›´æ¥åˆ·å±äº†</span>


<span class="token comment"># èŒƒä¾‹ 2ï¼šä»…åˆ—å‡ºå…³äº root çš„æ‰€æœ‰è¿›ç¨‹å¼€å¯çš„ socket æ–‡ä»¶</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># lsof -u root -a -U</span>
COMMAND     PID <span class="token environment constant">USER</span>   FD   TYPE             DEVICE SIZE/OFF   NODE NAME
systemd       <span class="token number">1</span> root   12u  unix 0xffff8922437ed800      0t0  <span class="token number">12513</span> /run/systemd/private
systemd       <span class="token number">1</span> root   13u  unix 0xffff892243dc2c00      0t0  <span class="token number">25917</span> /run/systemd/journal/stdout
systemd       <span class="token number">1</span> root   15u  unix 0xffff892243e71800      0t0  <span class="token number">25941</span> /run/systemd/journal/stdout
systemd       <span class="token number">1</span> root   16u  unix 0xffff892243e8fc00      0t0  <span class="token number">25942</span> /run/systemd/journal/stdout
systemd       <span class="token number">1</span> root   17u  unix 0xffff892243e6ec00      0t0  <span class="token number">26002</span> /run/systemd/journal/stdout
systemd       <span class="token number">1</span> root   18u  unix 0xffff892243e6dc00      0t0  <span class="token number">26009</span> /run/systemd/journal/stdout
systemd       <span class="token number">1</span> root   23u  unix 0xffff89224359a800      0t0   <span class="token number">7620</span> /run/systemd/notify
<span class="token comment"># æ³¨æ„ -a å‚æ•°ï¼Œåˆ†åˆ«æ‰§è¡Œ lsof -u root åŠ lsof -U ä¿¡æ¯éƒ½ä¸åŒ</span>
<span class="token comment"># -a å–ä»–ä»¬çš„äº¤é›†ç»“æœ</span>


<span class="token comment"># èŒƒä¾‹ 3ï¼šåˆ—å‡ºç›®å‰ç³»ç»Ÿä¸Šæ‰€æœ‰è¢«å¯åŠ¨çš„å‘¨è¾¹è£…ç½®</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># lsof +d /dev/</span>
COMMAND     PID           <span class="token environment constant">USER</span>   FD   TYPE             DEVICE SIZE/OFF NODE NAME
systemd       <span class="token number">1</span>           root    0u   CHR                <span class="token number">1,3</span>      0t0 <span class="token number">5342</span> /dev/null
systemd       <span class="token number">1</span>           root    1u   CHR                <span class="token number">1,3</span>      0t0 <span class="token number">5342</span> /dev/null
systemd       <span class="token number">1</span>           root    2u   CHR                <span class="token number">1,3</span>      0t0 <span class="token number">5342</span> /dev/null
systemd       <span class="token number">1</span>           root   27r   CHR             <span class="token number">10,235</span>      0t0 <span class="token number">7250</span> /dev/autofs
systemd       <span class="token number">1</span>           root   30u  unix 0xffff8922436ce000      0t0 <span class="token number">7645</span> /dev/log
kdevtmpfs    <span class="token number">13</span>           root  cwd    DIR                <span class="token number">0,5</span>     <span class="token number">3340</span>    <span class="token number">3</span> /dev
<span class="token comment"># å› ä¸ºéƒ½åœ¨ç›®å½•ä¸­ï¼Œæ‰€ä»¥æœç´¢ç›®å½•å³å¯</span>

<span class="token comment"># èŒƒä¾‹ 4ï¼šåˆ—å‡º root çš„ bash ç¨‹åºå¼€å¯çš„æ–‡ä»¶</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># lsof -u root | grep bash</span>
ksmtuned    <span class="token number">921</span> root  txt       REG              <span class="token number">253,0</span>    <span class="token number">964600</span>     <span class="token number">309027</span> /usr/bin/bash
<span class="token function">bash</span>      <span class="token number">20030</span> root  cwd       DIR              <span class="token number">253,0</span>      <span class="token number">4096</span>   <span class="token number">25165889</span> /root
<span class="token function">bash</span>      <span class="token number">20030</span> root  rtd       DIR              <span class="token number">253,0</span>       <span class="token number">251</span>         <span class="token number">64</span> /
<span class="token function">bash</span>      <span class="token number">20030</span> root  txt       REG              <span class="token number">253,0</span>    <span class="token number">964600</span>     <span class="token number">309027</span> /usr/bin/bash
<span class="token function">bash</span>      <span class="token number">20030</span> root  mem       REG              <span class="token number">253,0</span> <span class="token number">106075056</span>     <span class="token number">309022</span> /usr/lib/locale/locale-archive
<span class="token function">bash</span>      <span class="token number">20030</span> root  mem       REG              <span class="token number">253,0</span>     <span class="token number">61624</span>    <span class="token number">8548289</span> /usr/lib64/libnss_files-2.17.so
<span class="token function">bash</span>      <span class="token number">20030</span> root  mem       REG              <span class="token number">253,0</span>   <span class="token number">2156160</span>    <span class="token number">8532847</span> /usr/lib64/libc-2.17.so
<span class="token function">bash</span>      <span class="token number">20030</span> root  mem       REG              <span class="token number">253,0</span>     <span class="token number">19288</span>    <span class="token number">8532853</span> /usr/lib64/libdl-2.17.so
<span class="token function">bash</span>      <span class="token number">20030</span> root  mem       REG              <span class="token number">253,0</span>    <span class="token number">174576</span>    <span class="token number">8548350</span> /usr/lib64/libtinfo.so.5.9
<span class="token function">bash</span>      <span class="token number">20030</span> root  mem       REG              <span class="token number">253,0</span>    <span class="token number">163400</span>    <span class="token number">8532840</span> /usr/lib64/ld-2.17.so
<span class="token function">bash</span>      <span class="token number">20030</span> root  mem       REG              <span class="token number">253,0</span>     <span class="token number">26254</span>   <span class="token number">16946906</span> /usr/lib64/gconv/gconv-modules.cache
<span class="token function">bash</span>      <span class="token number">20030</span> root    0u      CHR              <span class="token number">136,0</span>       0t0          <span class="token number">3</span> /dev/pts/0
<span class="token function">bash</span>      <span class="token number">20030</span> root    1u      CHR              <span class="token number">136,0</span>       0t0          <span class="token number">3</span> /dev/pts/0
<span class="token function">bash</span>      <span class="token number">20030</span> root    2u      CHR              <span class="token number">136,0</span>       0t0          <span class="token number">3</span> /dev/pts/0
<span class="token function">bash</span>      <span class="token number">20030</span> root  255u      CHR              <span class="token number">136,0</span>       0t0          <span class="token number">3</span> /dev/pts/0

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥é€šè¿‡èŒƒä¾‹ 4 æ‰¾å‡ºæŸä¸ªè¿›ç¨‹æ˜¯å¦æœ‰å¯ç”¨å“ªäº›ä¿¡æ¯</p><h3 id="pidof-æ‰¾å‡ºæŸä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åºçš„-pid" tabindex="-1"><a class="header-anchor" href="#pidof-æ‰¾å‡ºæŸä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åºçš„-pid" aria-hidden="true">#</a> pidofï¼šæ‰¾å‡ºæŸä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åºçš„ PID</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>pidof <span class="token punctuation">[</span>-sx<span class="token punctuation">]</span> program_name

é€‰é¡¹ä¸å‚æ•°ï¼š
	-sï¼šä»…åˆ—å‡ºä¸€ä¸ª PID è€Œä¸åˆ—å‡ºæ‰€æœ‰çš„ PID
	-xï¼šåŒæ—¶åˆ—å‡ºè¯¥ç¨‹åºå¯èƒ½çš„ <span class="token environment constant">PPID</span> é‚£ä¸ªè¿›ç¨‹çš„ PID
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># èŒƒä¾‹ 1ï¼šåˆ—å‡ºç›®å‰ç³»ç»Ÿä¸Š systemd ä»¥åŠ rsyslogd è¿™ä¸¤ä¸ªç¨‹åºçš„ PID</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># pidof systemd rsyslogd</span>
<span class="token number">1</span> <span class="token number">1265</span>
<span class="token comment"># ç»“æœæ˜¾ç¤ºçš„æ˜¯ä¸¤ä¸ª PID</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>pidof æŒ‡ä»¤è¾ƒç®€å•ï¼Œå¯é…åˆ pas aux ä¸æ­£åˆ™è¡¨ç¤ºæ³•ï¼Œå°±å¯ä»¥å¾ˆè½»æ˜“çš„æ‰¾åˆ°ä½ æƒ³è¦çš„è¿›ç¨‹å†…å®¹äº†ã€‚å¦‚æœè¦æ‰¾çš„æ˜¯ bashï¼Œé‚£å°± pidof bash ï¼Œå°±åˆ—å‡ºä¸€å † PID å·ç äº†</p>`,43),o=[p];function c(l,i){return s(),a("div",null,o)}const d=n(t,[["render",c],["__file","04.html.vue"]]);export{d as default};
