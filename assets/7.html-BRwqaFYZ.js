import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as i,c as u,a as n,b as a,w as e,e as s,d as c}from"./app-CvlAI_tu.js";const k="/VueDoc/assets/image-20231221105759223-Do95bGNV.png",r="/VueDoc/assets/image-20231221105848787-CznVg4h8.png",d="/VueDoc/assets/l-20231221105625058-DR2E8_1o.png",v={},m={class:"hint-container details"},g=n("summary",null,"ç›®å½•",-1),b={class:"table-of-contents"},w=c(`<p>é€šè¿‡ç»“åˆ Servlet å’Œ JSP çš„ MVC æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥å‘æŒ¥äºŒè€…å„è‡ªçš„ä¼˜ç‚¹ï¼š</p><ul><li>Servlet å®ç°ä¸šåŠ¡é€»è¾‘ï¼›</li><li>JSP å®ç°å±•ç¤ºé€»è¾‘ã€‚</li></ul><p>ä½†æ˜¯ï¼Œç›´æ¥æŠŠ MVC æ­åœ¨ Servlet å’Œ JSP ä¹‹ä¸Šè¿˜æ˜¯ä¸å¤ªå¥½ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p><ul><li>Servlet æä¾›çš„æ¥å£ä»ç„¶ååº•å±‚ï¼Œéœ€è¦å®ç° Servlet è°ƒç”¨ç›¸å…³æ¥å£ï¼›</li><li>JSP å¯¹é¡µé¢å¼€å‘ä¸å‹å¥½ï¼Œæ›´å¥½çš„æ›¿ä»£å“æ˜¯æ¨¡æ¿å¼•æ“ï¼›</li><li>ä¸šåŠ¡é€»è¾‘æœ€å¥½ç”±çº¯ç²¹çš„ Java ç±»å®ç°ï¼Œè€Œä¸æ˜¯å¼ºè¿«ç»§æ‰¿è‡ª Servletã€‚</li></ul><p>èƒ½ä¸èƒ½é€šè¿‡æ™®é€šçš„ Java ç±»å®ç° MVC çš„ Controllerï¼Ÿç±»ä¼¼ä¸‹é¢çš„ä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/signin&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">signin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/signin&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">doSignin</span><span class="token punctuation">(</span><span class="token class-name">SignInBean</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/signout&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">signout</span><span class="token punctuation">(</span><span class="token class-name">HttpSession</span> session<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢çš„è¿™ä¸ª Java ç±»æ¯ä¸ªæ–¹æ³•éƒ½å¯¹åº”ä¸€ä¸ª GET æˆ– POST è¯·æ±‚ï¼Œæ–¹æ³•è¿”å›å€¼æ˜¯ <code>ModelAndView</code>ï¼Œå®ƒåŒ…å«ä¸€ä¸ª View çš„è·¯å¾„ä»¥åŠä¸€ä¸ª Modelï¼Œè¿™æ ·ï¼Œå†ç”± MVC æ¡†æ¶å¤„ç†åè¿”å›ç»™æµè§ˆå™¨ã€‚</p><p>å¦‚æœæ˜¯ GET è¯·æ±‚ï¼Œæˆ‘ä»¬å¸Œæœ› MVC æ¡†æ¶èƒ½ç›´æ¥æŠŠ URL å‚æ•°æŒ‰æ–¹æ³•å‚æ•°å¯¹åº”èµ·æ¥ç„¶åä¼ å…¥ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæ˜¯ POST è¯·æ±‚ï¼Œæˆ‘ä»¬å¸Œæœ› MVC æ¡†æ¶èƒ½ç›´æ¥æŠŠ Post å‚æ•°å˜æˆä¸€ä¸ª JavaBean åé€šè¿‡æ–¹æ³•å‚æ•°ä¼ å…¥ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/signin&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">doSignin</span><span class="token punctuation">(</span><span class="token class-name">SignInBean</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ºäº†å¢åŠ çµæ´»æ€§ï¼Œå¦‚æœ Controller çš„æ–¹æ³•åœ¨å¤„ç†è¯·æ±‚æ—¶éœ€è¦è®¿é—® <code>HttpServletRequest</code>ã€<code>HttpServletResponse</code>ã€<code>HttpSession</code> è¿™äº›å®ä¾‹æ—¶ï¼Œåªè¦æ–¹æ³•å‚æ•°æœ‰å®šä¹‰ï¼Œå°±å¯ä»¥è‡ªåŠ¨ä¼ å…¥ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/signout&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">signout</span><span class="token punctuation">(</span><span class="token class-name">HttpSession</span> session<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸Šå°±æ˜¯æˆ‘ä»¬åœ¨è®¾è®¡ MVC æ¡†æ¶æ—¶ï¼Œä¸Šå±‚ä»£ç æ‰€éœ€è¦çš„ä¸€åˆ‡ä¿¡æ¯ã€‚</p><h2 id="ğŸ€-è®¾è®¡-mvc-æ¡†æ¶" tabindex="-1"><a class="header-anchor" href="#ğŸ€-è®¾è®¡-mvc-æ¡†æ¶" aria-hidden="true">#</a> ğŸ€ è®¾è®¡ MVC æ¡†æ¶</h2><p>å¦‚ä½•è®¾è®¡ä¸€ä¸ª MVC æ¡†æ¶ï¼Ÿåœ¨ä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®šä¹‰äº†ä¸Šå±‚ä»£ç ç¼–å†™ Controller çš„ä¸€åˆ‡æ¥å£ä¿¡æ¯ï¼Œå¹¶ä¸”å¹¶ä¸è¦æ±‚å®ç°ç‰¹å®šæ¥å£ï¼Œåªéœ€è¿”å› <code>ModelAndView</code> å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«ä¸€ä¸ª <code>View</code> å’Œä¸€ä¸ª <code>Model</code>ã€‚å®é™…ä¸Š <code>View</code> å°±æ˜¯æ¨¡æ¿çš„è·¯å¾„ï¼Œè€Œ <code>Model</code> å¯ä»¥ç”¨ä¸€ä¸ª <code>Map&lt;String, Object&gt;</code> è¡¨ç¤ºï¼Œå› æ­¤ï¼Œ<code>ModelAndView</code> å®šä¹‰éå¸¸ç®€å•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ModelAndView</span> <span class="token punctuation">{</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">;</span>
    <span class="token class-name">String</span> view<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¯”è¾ƒå¤æ‚çš„æ˜¯æˆ‘ä»¬éœ€è¦åœ¨ MVC æ¡†æ¶ä¸­åˆ›å»ºä¸€ä¸ªæ¥æ”¶æ‰€æœ‰è¯·æ±‚çš„ <code>Servlet</code>ï¼Œé€šå¸¸æˆ‘ä»¬æŠŠå®ƒå‘½åä¸º <code>DispatcherServlet</code>ï¼Œå®ƒæ€»æ˜¯æ˜ å°„åˆ° <code>/</code>ï¼Œç„¶åï¼Œæ ¹æ®ä¸åŒçš„ Controller çš„æ–¹æ³•å®šä¹‰çš„ <code>@Get</code> æˆ– <code>@Post</code> çš„ Path å†³å®šè°ƒç”¨å“ªä¸ªæ–¹æ³•ï¼Œæœ€åï¼Œè·å¾—æ–¹æ³•è¿”å›çš„ <code>ModelAndView</code> åï¼Œæ¸²æŸ“æ¨¡æ¿ï¼Œå†™å…¥ <code>HttpServletResponse</code>ï¼Œå³å®Œæˆäº†æ•´ä¸ª MVC çš„å¤„ç†ã€‚</p><p>è¿™ä¸ª MVC çš„æ¶æ„å¦‚ä¸‹ï¼š</p><figure><img src="`+k+`" alt="image-20231221105759223" tabindex="0" loading="lazy"><figcaption>image-20231221105759223</figcaption></figure><p>å…¶ä¸­ï¼Œ<code>DispatcherServlet</code> ä»¥åŠå¦‚ä½•æ¸²æŸ“å‡ç”± MVC æ¡†æ¶å®ç°ï¼Œåœ¨ MVC æ¡†æ¶ä¹‹ä¸Šåªéœ€è¦ç¼–å†™æ¯ä¸€ä¸ª Controllerã€‚</p><p>æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ç¼–å†™æœ€å¤æ‚çš„ <code>DispatcherServlet</code>ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å­˜å‚¨è¯·æ±‚è·¯å¾„åˆ°æŸä¸ªå…·ä½“æ–¹æ³•çš„æ˜ å°„ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DispatcherServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">GetDispatcher</span><span class="token punctuation">&gt;</span></span> getMappings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">PostDispatcher</span><span class="token punctuation">&gt;</span></span> postMappings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤„ç†ä¸€ä¸ª GET è¯·æ±‚æ˜¯é€šè¿‡ <code>GetDispatcher</code> å¯¹è±¡å®Œæˆçš„ï¼Œå®ƒéœ€è¦å¦‚ä¸‹ä¿¡æ¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">GetDispatcher</span> <span class="token punctuation">{</span>
    <span class="token class-name">Object</span> instance<span class="token punctuation">;</span> <span class="token comment">// Controller å®ä¾‹</span>
    <span class="token class-name">Method</span> method<span class="token punctuation">;</span> <span class="token comment">// Controller æ–¹æ³•</span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> parameterNames<span class="token punctuation">;</span> <span class="token comment">// æ–¹æ³•å‚æ•°åç§°</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> parameterClasses<span class="token punctuation">;</span> <span class="token comment">// æ–¹æ³•å‚æ•°ç±»å‹</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ‰äº†ä»¥ä¸Šä¿¡æ¯ï¼Œå°±å¯ä»¥å®šä¹‰ <code>invoke()</code> æ¥å¤„ç†çœŸæ­£çš„è¯·æ±‚ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">GetDispatcher</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arguments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>parameterClasses<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> parameterClasses<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> parameterName <span class="token operator">=</span> parameterNames<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> parameterClass <span class="token operator">=</span> parameterClasses<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>parameterClass <span class="token operator">==</span> <span class="token class-name">HttpServletRequest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> request<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parameterClass <span class="token operator">==</span> <span class="token class-name">HttpServletResponse</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> response<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parameterClass <span class="token operator">==</span> <span class="token class-name">HttpSession</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parameterClass <span class="token operator">==</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> parameterName<span class="token punctuation">,</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parameterClass <span class="token operator">==</span> <span class="token keyword">long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> parameterName<span class="token punctuation">,</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parameterClass <span class="token operator">==</span> <span class="token keyword">boolean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Boolean</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> parameterName<span class="token punctuation">,</span> <span class="token string">&quot;false&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parameterClass <span class="token operator">==</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">getOrDefault</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> parameterName<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;Missing handler for type:&quot;</span> <span class="token operator">+</span> parameterClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">ModelAndView</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getOrDefault</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> defaultValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> s <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> s <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> defaultValue <span class="token operator">:</span> s<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°ä»£ç æ¯”è¾ƒç¹çï¼Œä½†é€»è¾‘éå¸¸ç®€å•ï¼Œå³é€šè¿‡æ„é€ æŸä¸ªæ–¹æ³•éœ€è¦çš„æ‰€æœ‰å‚æ•°åˆ—è¡¨ï¼Œä½¿ç”¨åå°„è°ƒç”¨è¯¥æ–¹æ³•åè¿”å›ç»“æœã€‚</p><p>ç±»ä¼¼çš„ï¼Œ<code>PostDispatcher</code> éœ€è¦å¦‚ä¸‹ä¿¡æ¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">PostDispatcher</span> <span class="token punctuation">{</span>
    <span class="token class-name">Object</span> instance<span class="token punctuation">;</span> <span class="token comment">// Controller å®ä¾‹</span>
    <span class="token class-name">Method</span> method<span class="token punctuation">;</span> <span class="token comment">// Controller æ–¹æ³•</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> parameterClasses<span class="token punctuation">;</span> <span class="token comment">// æ–¹æ³•å‚æ•°ç±»å‹</span>
    <span class="token class-name">ObjectMapper</span> objectMapper<span class="token punctuation">;</span> <span class="token comment">// JSON æ˜ å°„</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å’Œ GET è¯·æ±‚ä¸åŒï¼ŒPOST è¯·æ±‚ä¸¥æ ¼åœ°æ¥è¯´ä¸èƒ½æœ‰ URL å‚æ•°ï¼Œæ‰€æœ‰æ•°æ®éƒ½åº”å½“ä» Post Body ä¸­è¯»å–ã€‚è¿™é‡Œæˆ‘ä»¬ä¸ºäº†ç®€åŒ–å¤„ç†ï¼Œ* åªæ”¯æŒ * JSON æ ¼å¼çš„ POST è¯·æ±‚ï¼Œè¿™æ ·ï¼ŒæŠŠ Post æ•°æ®è½¬åŒ–ä¸º JavaBean å°±éå¸¸å®¹æ˜“ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">PostDispatcher</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arguments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>parameterClasses<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> parameterClasses<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> parameterClass <span class="token operator">=</span> parameterClasses<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>parameterClass <span class="token operator">==</span> <span class="token class-name">HttpServletRequest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> request<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parameterClass <span class="token operator">==</span> <span class="token class-name">HttpServletResponse</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> response<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parameterClass <span class="token operator">==</span> <span class="token class-name">HttpSession</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">// è¯»å– JSON å¹¶è§£æä¸º JavaBean:</span>
                <span class="token class-name">BufferedReader</span> reader <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>objectMapper<span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>reader<span class="token punctuation">,</span> parameterClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">ModelAndView</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>instance<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åï¼Œæˆ‘ä»¬æ¥å®ç°æ•´ä¸ª <code>DispatcherServlet</code> çš„å¤„ç†æµç¨‹ï¼Œä»¥ <code>doGet()</code> ä¸ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DispatcherServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> path <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ ¹æ®è·¯å¾„æŸ¥æ‰¾ GetDispatcher:</span>
        <span class="token class-name">GetDispatcher</span> dispatcher <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>getMappings<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dispatcher <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// æœªæ‰¾åˆ°è¿”å› 404:</span>
            resp<span class="token punctuation">.</span><span class="token function">sendError</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// è°ƒç”¨ Controller æ–¹æ³•è·å¾—è¿”å›å€¼:</span>
        <span class="token class-name">ModelAndView</span> mv <span class="token operator">=</span> dispatcher<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å…è®¸è¿”å› null:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mv <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// å…è®¸è¿”å› \`redirect:\` å¼€å¤´çš„ view è¡¨ç¤ºé‡å®šå‘:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mv<span class="token punctuation">.</span>view<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;redirect:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>mv<span class="token punctuation">.</span>view<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// å°†æ¨¡æ¿å¼•æ“æ¸²æŸ“çš„å†…å®¹å†™å…¥å“åº”:</span>
        <span class="token class-name">PrintWriter</span> pw <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>viewEngine<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>mv<span class="token punctuation">,</span> pw<span class="token punctuation">)</span><span class="token punctuation">;</span>
        pw<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œæœ‰å‡ ä¸ªå°æ”¹è¿›ï¼š</p><ul><li>å…è®¸ Controller æ–¹æ³•è¿”å› <code>null</code>ï¼Œè¡¨ç¤ºå†…éƒ¨å·²è‡ªè¡Œå¤„ç†å®Œæ¯•ï¼›</li><li>å…è®¸ Controller æ–¹æ³•è¿”å›ä»¥ <code>redirect:</code> å¼€å¤´çš„ view åç§°ï¼Œè¡¨ç¤ºä¸€ä¸ªé‡å®šå‘ã€‚</li></ul><p>è¿™æ ·ä½¿å¾—ä¸Šå±‚ä»£ç ç¼–å†™æ›´çµæ´»ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ˜¾ç¤ºç”¨æˆ·èµ„æ–™çš„è¯·æ±‚å¯ä»¥è¿™æ ·å†™ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/profile&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">profile</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">HttpSession</span> session<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æœªç™»å½•ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token string">&quot;redirect:/signin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">.</span><span class="token function">isManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æƒé™ä¸å¤Ÿï¼Œè¿”å› 403:</span>
        response<span class="token punctuation">.</span><span class="token function">sendError</span><span class="token punctuation">(</span><span class="token number">403</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token string">&quot;/profile.html&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åä¸€æ­¥æ˜¯åœ¨ <code>DispatcherServlet</code> çš„ <code>init()</code> æ–¹æ³•ä¸­åˆå§‹åŒ–æ‰€æœ‰ Get å’Œ Post çš„æ˜ å°„ï¼Œä»¥åŠç”¨äºæ¸²æŸ“çš„æ¨¡æ¿å¼•æ“ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DispatcherServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">GetDispatcher</span><span class="token punctuation">&gt;</span></span> getMappings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">PostDispatcher</span><span class="token punctuation">&gt;</span></span> postMappings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">ViewEngine</span> viewEngine<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>getMappings <span class="token operator">=</span> <span class="token function">scanGetInControllers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>postMappings <span class="token operator">=</span> <span class="token function">scanPostInControllers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>viewEngine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ViewEngine</span><span class="token punctuation">(</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚ä½•æ‰«ææ‰€æœ‰ Controller ä»¥è·å–æ‰€æœ‰æ ‡è®°æœ‰ <code>@GetMapping</code> å’Œ <code>@PostMapping</code> çš„æ–¹æ³•ï¼Ÿå½“ç„¶æ˜¯ä½¿ç”¨åå°„äº†ã€‚è™½ç„¶ä»£ç æ¯”è¾ƒç¹çï¼Œä½†æˆ‘ä»¬ç›¸ä¿¡å„ä½ç«¥é‹å¯ä»¥è½»æ¾å®ç°ã€‚</p><p>è¿™æ ·ï¼Œæ•´ä¸ª MVC æ¡†æ¶å°±æ­å»ºå®Œæ¯•ã€‚</p><h2 id="ğŸ€-å®ç°æ¸²æŸ“" tabindex="-1"><a class="header-anchor" href="#ğŸ€-å®ç°æ¸²æŸ“" aria-hidden="true">#</a> ğŸ€ å®ç°æ¸²æŸ“</h2><p>æœ‰çš„ç«¥é‹å¯¹å¦‚ä½•ä½¿ç”¨æ¨¡æ¿å¼•æ“è¿›è¡Œæ¸²æŸ“æœ‰ç–‘é—®ï¼Œå³å¦‚ä½•å®ç°ä¸Šè¿°çš„ <code>ViewEngine</code>ï¼Ÿå…¶å® <code>ViewEngine</code> éå¸¸ç®€å•ï¼Œåªéœ€è¦å®ç°ä¸€ä¸ªç®€å•çš„ <code>render()</code> æ–¹æ³•ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>public class ViewEngine {
    public void render(ModelAndView mv, Writer writer) throws IOException {
        String view = mv.view;
        Map&lt;String, Object&gt; model = mv.model;
        // æ ¹æ® view æ‰¾åˆ°æ¨¡æ¿æ–‡ä»¶:
        Template template = getTemplateByPath(view);
        // æ¸²æŸ“å¹¶å†™å…¥ Writer:
        template.write(writer, model);
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Java æœ‰å¾ˆå¤šå¼€æºçš„æ¨¡æ¿å¼•æ“ï¼Œå¸¸ç”¨çš„æœ‰ï¼š</p>`,46),f={href:"https://www.thymeleaf.org/",target:"_blank",rel:"noopener noreferrer"},h={href:"https://freemarker.apache.org/",target:"_blank",rel:"noopener noreferrer"},y={href:"https://velocity.apache.org/",target:"_blank",rel:"noopener noreferrer"},S={href:"https://palletsprojects.com/p/jinja/",target:"_blank",rel:"noopener noreferrer"},M={href:"https://pebbletemplates.io/",target:"_blank",rel:"noopener noreferrer"},C=c(`<div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
  {% for user in users %}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ user.url }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ user.username }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  {% endfor %}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å³å˜é‡ç”¨ <code>{{xxx}}</code> è¡¨ç¤ºï¼Œæ§åˆ¶è¯­å¥ç”¨ <code>{% xxx %}</code> è¡¨ç¤ºã€‚</p><p>ä½¿ç”¨ Pebble æ¸²æŸ“åªéœ€è¦å¦‚ä¸‹å‡ è¡Œä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ViewEngine</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">PebbleEngine</span> engine<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ViewEngine</span><span class="token punctuation">(</span><span class="token class-name">ServletContext</span> servletContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å®šä¹‰ä¸€ä¸ª ServletLoader ç”¨äºåŠ è½½æ¨¡æ¿:</span>
        <span class="token class-name">ServletLoader</span> loader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletLoader</span><span class="token punctuation">(</span>servletContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ¨¡æ¿ç¼–ç :</span>
        loader<span class="token punctuation">.</span><span class="token function">setCharset</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ¨¡æ¿å‰ç¼€ï¼Œè¿™é‡Œé»˜è®¤æ¨¡æ¿å¿…é¡»æ”¾åœ¨ \`/WEB-INF/templates\` ç›®å½•:</span>
        loader<span class="token punctuation">.</span><span class="token function">setPrefix</span><span class="token punctuation">(</span><span class="token string">&quot;/WEB-INF/templates&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ¨¡æ¿åç¼€:</span>
        loader<span class="token punctuation">.</span><span class="token function">setSuffix</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// åˆ›å»º Pebble å®ä¾‹:</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>engine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PebbleEngine<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">autoEscaping</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// é»˜è®¤æ‰“å¼€ HTML å­—ç¬¦è½¬ä¹‰ï¼Œé˜²æ­¢ XSS æ”»å‡»</span>
            <span class="token punctuation">.</span><span class="token function">cacheActive</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// ç¦ç”¨ç¼“å­˜ä½¿å¾—æ¯æ¬¡ä¿®æ”¹æ¨¡æ¿å¯ä»¥ç«‹åˆ»çœ‹åˆ°æ•ˆæœ</span>
            <span class="token punctuation">.</span><span class="token function">loader</span><span class="token punctuation">(</span>loader<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token class-name">ModelAndView</span> mv<span class="token punctuation">,</span> <span class="token class-name">Writer</span> writer<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// æŸ¥æ‰¾æ¨¡æ¿:</span>
        <span class="token class-name">PebbleTemplate</span> template <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>engine<span class="token punctuation">.</span><span class="token function">getTemplate</span><span class="token punctuation">(</span>mv<span class="token punctuation">.</span>view<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ¸²æŸ“:</span>
        template<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span>writer<span class="token punctuation">,</span> mv<span class="token punctuation">.</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åæˆ‘ä»¬æ¥çœ‹çœ‹æ•´ä¸ªå·¥ç¨‹çš„ç»“æ„ï¼š</p><figure><img src="`+r+`" alt="image-20231221105848787" tabindex="0" loading="lazy"><figcaption>image-20231221105848787</figcaption></figure><p>å…¶ä¸­ï¼Œ<code>framework</code> åŒ…æ˜¯ MVC çš„æ¡†æ¶ï¼Œå®Œå…¨å¯ä»¥å•ç‹¬ç¼–è¯‘åä½œä¸ºä¸€ä¸ª Maven ä¾èµ–å¼•å…¥ï¼Œ<code>controller</code> åŒ…æ‰æ˜¯æˆ‘ä»¬éœ€è¦ç¼–å†™çš„ä¸šåŠ¡é€»è¾‘ã€‚</p><p>æˆ‘ä»¬è¿˜ç¡¬æ€§è§„å®šæ¨¡æ¿å¿…é¡»æ”¾åœ¨ <code>webapp/WEB-INF/templates</code> ç›®å½•ä¸‹ï¼Œé™æ€æ–‡ä»¶å¿…é¡»æ”¾åœ¨ <code>webapp/static</code> ç›®å½•ä¸‹ï¼Œå› æ­¤ï¼Œä¸ºäº†ä¾¿äºå¼€å‘ï¼Œæˆ‘ä»¬è¿˜é¡ºå¸¦å®ç°ä¸€ä¸ª <code>FileServlet</code> æ¥å¤„ç†é™æ€æ–‡ä»¶ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;/favicon.ico&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/static/*&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// è¯»å–å½“å‰è¯·æ±‚è·¯å¾„:</span>
        <span class="token class-name">ServletContext</span> ctx <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// RequestURI åŒ…å« ContextPath, éœ€è¦å»æ‰:</span>
        <span class="token class-name">String</span> urlPath <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å–çœŸå®æ–‡ä»¶è·¯å¾„:</span>
        <span class="token class-name">String</span> filepath <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span>urlPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>filepath <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// æ— æ³•è·å–åˆ°è·¯å¾„:</span>
            resp<span class="token punctuation">.</span><span class="token function">sendError</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">.</span><span class="token constant">SC_NOT_FOUND</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Path</span> path <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>path<span class="token punctuation">.</span><span class="token function">toFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// æ–‡ä»¶ä¸å­˜åœ¨:</span>
            resp<span class="token punctuation">.</span><span class="token function">sendError</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">.</span><span class="token constant">SC_NOT_FOUND</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// æ ¹æ®æ–‡ä»¶åçŒœæµ‹ Content-Type:</span>
        <span class="token class-name">String</span> mime <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">probeContentType</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mime <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mime <span class="token operator">=</span> <span class="token string">&quot;application/octet-stream&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span>mime<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è¯»å–æ–‡ä»¶å¹¶å†™å…¥ Response:</span>
        <span class="token class-name">OutputStream</span> output <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">InputStream</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            input<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span>output<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        output<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œä»£ç ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ URL<code>http://localhost:8080/hello?name=Bob</code> å¯ä»¥çœ‹åˆ°å¦‚ä¸‹é¡µé¢ï¼š</p><figure><img src="`+d+`" alt="mvc" tabindex="0" loading="lazy"><figcaption>mvc</figcaption></figure><p>ä¸ºäº†æŠŠæ–¹æ³•å‚æ•°çš„åç§°ç¼–è¯‘åˆ° class æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿å¤„ç† <code>@GetMapping</code> æ—¶ä½¿ç”¨ï¼Œæˆ‘ä»¬éœ€è¦æ‰“å¼€ç¼–è¯‘å™¨çš„ä¸€ä¸ªå‚æ•°ï¼Œåœ¨ Eclipse ä¸­å‹¾é€‰ <code>Preferences</code>-<code>Java</code>-<code>Compiler</code>-<code>Store information about method parameters (usable via reflection)</code>ï¼›åœ¨ Idea ä¸­é€‰æ‹© <code>Preferences</code>-<code>Build, Execution, Deployment</code>-<code>Compiler</code>-<code>Java Compiler</code>-<code>Additional command line parameters</code>ï¼Œå¡«å…¥ <code>-parameters</code>ï¼›åœ¨ Maven çš„ <code>pom.xml</code> æ·»åŠ ä¸€æ®µé…ç½®å¦‚ä¸‹ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>compilerArgs</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span><span class="token punctuation">&gt;</span></span>-parameters<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>arg</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>compilerArgs</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ‰äº›ç”¨è¿‡ Spring MVC çš„ç«¥é‹ä¼šå‘ç°ï¼Œæœ¬èŠ‚å®ç°çš„è¿™ä¸ª MVC æ¡†æ¶ï¼Œä¸Šå±‚ä»£ç ä½¿ç”¨çš„å…¬å…±ç±»å¦‚ <code>GetMapping</code>ã€<code>PostMapping</code> å’Œ <code>ModelAndView</code> éƒ½å’Œ Spring MVC éå¸¸ç±»ä¼¼ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬è¿™ä¸ª MVC æ¡†æ¶ä¸»è¦å‚è€ƒå°±æ˜¯ Spring MVCï¼Œé€šè¿‡å®ç°ä¸€ä¸ª â€œç®€åŒ–ç‰ˆâ€MVCï¼Œå¯ä»¥æŒæ¡ Java Web MVC å¼€å‘çš„æ ¸å¿ƒæ€æƒ³ä¸åŸç†ï¼Œå¯¹å°†æ¥ç›´æ¥ä½¿ç”¨ Spring MVC æ˜¯éå¸¸æœ‰å¸®åŠ©çš„ã€‚</p><h2 id="ğŸ€-ç»ƒä¹ " tabindex="-1"><a class="header-anchor" href="#ğŸ€-ç»ƒä¹ " aria-hidden="true">#</a> ğŸ€ ç»ƒä¹ </h2><p>å®ç°ä¸€ä¸ª MVC æ¡†æ¶</p><h2 id="ğŸ€-å°ç»“" tabindex="-1"><a class="header-anchor" href="#ğŸ€-å°ç»“" aria-hidden="true">#</a> ğŸ€ å°ç»“</h2><p>ä¸€ä¸ª MVC æ¡†æ¶æ˜¯åŸºäº Servlet åŸºç¡€æŠ½è±¡å‡ºæ›´é«˜çº§çš„æ¥å£ï¼Œä½¿å¾—ä¸Šå±‚åŸºäº MVC æ¡†æ¶çš„å¼€å‘å¯ä»¥ä¸æ¶‰åŠ Servlet ç›¸å…³çš„ <code>HttpServletRequest</code> ç­‰æ¥å£ï¼Œå¤„ç†å¤šä¸ªè¯·æ±‚æ›´åŠ çµæ´»ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨ä»»æ„æ¨¡æ¿å¼•æ“ï¼Œä¸å¿…ä½¿ç”¨ JSPã€‚</p>`,18);function q(V,x){const p=o("router-link"),t=o("ExternalLinkIcon");return i(),u("div",null,[n("details",m,[g,n("nav",b,[n("ul",null,[n("li",null,[a(p,{to:"#ğŸ€-è®¾è®¡-mvc-æ¡†æ¶"},{default:e(()=>[s("ğŸ€ è®¾è®¡ MVC æ¡†æ¶")]),_:1})]),n("li",null,[a(p,{to:"#ğŸ€-å®ç°æ¸²æŸ“"},{default:e(()=>[s("ğŸ€ å®ç°æ¸²æŸ“")]),_:1})]),n("li",null,[a(p,{to:"#ğŸ€-ç»ƒä¹ "},{default:e(()=>[s("ğŸ€ ç»ƒä¹ ")]),_:1})]),n("li",null,[a(p,{to:"#ğŸ€-å°ç»“"},{default:e(()=>[s("ğŸ€ å°ç»“")]),_:1})])])])]),w,n("ul",null,[n("li",null,[n("a",f,[s("Thymeleaf"),a(t)])]),n("li",null,[n("a",h,[s("FreeMarker"),a(t)])]),n("li",null,[n("a",y,[s("Velocity"),a(t)])])]),n("p",null,[s("ä»–ä»¬çš„ç”¨æ³•éƒ½å¤§åŒå°å¼‚ã€‚è¿™é‡Œæˆ‘ä»¬æ¨èä¸€ä¸ªä½¿ç”¨ "),n("a",S,[s("Jinja"),a(t)]),s(" è¯­æ³•çš„æ¨¡æ¿å¼•æ“"),n("a",M,[s("Pebble"),a(t)]),s("ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯è¯­æ³•ç®€å•ï¼Œæ”¯æŒæ¨¡æ¿ç»§æ‰¿ï¼Œç¼–å†™å‡ºæ¥çš„æ¨¡æ¿ç±»ä¼¼ï¼š")]),C])}const P=l(v,[["render",q],["__file","7.html.vue"]]);export{P as default};
