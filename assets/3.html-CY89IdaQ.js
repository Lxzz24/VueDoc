import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as c,o,c as l,a as n,b as s,w as t,d as u,e as p}from"./app-CvlAI_tu.js";const i={},k={class:"hint-container details"},d=n("summary",null,"ç›®å½•",-1),r={class:"table-of-contents"},m=u(`<p>å’Œ TCP ç¼–ç¨‹ç›¸æ¯”ï¼ŒUDP ç¼–ç¨‹å°±ç®€å•å¾—å¤šï¼Œå› ä¸º UDP æ²¡æœ‰åˆ›å»ºè¿æ¥ï¼Œæ•°æ®åŒ…ä¹Ÿæ˜¯ä¸€æ¬¡æ”¶å‘ä¸€ä¸ªï¼Œæ‰€ä»¥æ²¡æœ‰æµçš„æ¦‚å¿µã€‚</p><p>åœ¨ Java ä¸­ä½¿ç”¨ UDP ç¼–ç¨‹ï¼Œä»ç„¶éœ€è¦ä½¿ç”¨ Socketï¼Œå› ä¸ºåº”ç”¨ç¨‹åºåœ¨ä½¿ç”¨ UDP æ—¶å¿…é¡»æŒ‡å®šç½‘ç»œæ¥å£ï¼ˆIPï¼‰å’Œç«¯å£å·ã€‚</p><div class="hint-container caution"><p class="hint-container-title">è­¦å‘Š</p><p>UDP ç«¯å£å’Œ TCP ç«¯å£è™½ç„¶éƒ½ä½¿ç”¨ 0 ~ 65535ï¼Œä½†ä»–ä»¬æ˜¯ä¸¤å¥—ç‹¬ç«‹çš„ç«¯å£ï¼Œå³ä¸€ä¸ªåº”ç”¨ç¨‹åºç”¨ TCP å ç”¨äº†ç«¯å£ 1234ï¼Œä¸å½±å“å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºç”¨ UDP å ç”¨ç«¯å£ 1234ã€‚</p></div><h2 id="ğŸ€-æœåŠ¡å™¨ç«¯" tabindex="-1"><a class="header-anchor" href="#ğŸ€-æœåŠ¡å™¨ç«¯" aria-hidden="true">#</a> ğŸ€ æœåŠ¡å™¨ç«¯</h2><p>åœ¨æœåŠ¡å™¨ç«¯ï¼Œä½¿ç”¨ UDP ä¹Ÿéœ€è¦ç›‘å¬æŒ‡å®šçš„ç«¯å£ã€‚Java æä¾›äº† <code>DatagramSocket</code> æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">DatagramSocket</span> ds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span><span class="token punctuation">(</span><span class="token number">6666</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç›‘å¬æŒ‡å®šç«¯å£</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æ— é™å¾ªç¯</span>
    <span class="token comment">// æ•°æ®ç¼“å†²åŒº:</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token class-name">DatagramPacket</span> packet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> buffer<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ds<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span>packet<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ”¶å–ä¸€ä¸ª UDP æ•°æ®åŒ…</span>
    <span class="token comment">// æ”¶å–åˆ°çš„æ•°æ®å­˜å‚¨åœ¨ buffer ä¸­ï¼Œç”± packet.getOffset(), packet.getLength() æŒ‡å®šèµ·å§‹ä½ç½®å’Œé•¿åº¦</span>
    <span class="token comment">// å°†å…¶æŒ‰ UTF-8 ç¼–ç è½¬æ¢ä¸º String:</span>
    <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>packet<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> packet<span class="token punctuation">.</span><span class="token function">getOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> packet<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å‘é€æ•°æ®:</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token string">&quot;ACK&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    packet<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ds<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>packet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœåŠ¡å™¨ç«¯é¦–å…ˆä½¿ç”¨å¦‚ä¸‹è¯­å¥åœ¨æŒ‡å®šçš„ç«¯å£ç›‘å¬ UDP æ•°æ®åŒ…ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">DatagramSocket</span> ds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span><span class="token punctuation">(</span><span class="token number">6666</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœæ²¡æœ‰å…¶ä»–åº”ç”¨ç¨‹åºå æ®è¿™ä¸ªç«¯å£ï¼Œé‚£ä¹ˆç›‘å¬æˆåŠŸï¼Œæˆ‘ä»¬å°±ä½¿ç”¨ä¸€ä¸ªæ— é™å¾ªç¯æ¥å¤„ç†æ”¶åˆ°çš„ UDP æ•°æ®åŒ…ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¦æ¥æ”¶ä¸€ä¸ª UDP æ•°æ®åŒ…ï¼Œéœ€è¦å‡†å¤‡ä¸€ä¸ª <code>byte[]</code> ç¼“å†²åŒºï¼Œå¹¶é€šè¿‡ <code>DatagramPacket</code> å®ç°æ¥æ”¶ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token class-name">DatagramPacket</span> packet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> buffer<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
ds<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span>packet<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‡è®¾æˆ‘ä»¬æ”¶å–åˆ°çš„æ˜¯ä¸€ä¸ª <code>String</code>ï¼Œé‚£ä¹ˆï¼Œé€šè¿‡ <code>DatagramPacket</code> è¿”å›çš„ <code>packet.getOffset()</code> å’Œ <code>packet.getLength()</code> ç¡®å®šæ•°æ®åœ¨ç¼“å†²åŒºçš„èµ·æ­¢ä½ç½®ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>packet<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> packet<span class="token punctuation">.</span><span class="token function">getOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> packet<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å½“æœåŠ¡å™¨æ”¶åˆ°ä¸€ä¸ª DatagramPacket åï¼Œé€šå¸¸å¿…é¡»ç«‹åˆ»å›å¤ä¸€ä¸ªæˆ–å¤šä¸ª UDP åŒ…ï¼Œå› ä¸ºå®¢æˆ·ç«¯åœ°å€åœ¨ DatagramPacket ä¸­ï¼Œæ¯æ¬¡æ”¶åˆ°çš„ DatagramPacket å¯èƒ½æ˜¯ä¸åŒçš„å®¢æˆ·ç«¯ï¼Œå¦‚æœä¸å›å¤ï¼Œå®¢æˆ·ç«¯å°±æ”¶ä¸åˆ°ä»»ä½• UDP åŒ…ã€‚</p><p>å‘é€ UDP åŒ…ä¹Ÿæ˜¯é€šè¿‡ <code>DatagramPacket</code> å®ç°çš„ï¼Œå‘é€ä»£ç éå¸¸ç®€å•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
packet<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
ds<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>packet<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ€-å®¢æˆ·ç«¯" tabindex="-1"><a class="header-anchor" href="#ğŸ€-å®¢æˆ·ç«¯" aria-hidden="true">#</a> ğŸ€ å®¢æˆ·ç«¯</h2><p>å’ŒæœåŠ¡å™¨ç«¯ç›¸æ¯”ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨ UDP æ—¶ï¼Œåªéœ€è¦ç›´æ¥å‘æœåŠ¡å™¨ç«¯å‘é€ UDP åŒ…ï¼Œç„¶åæ¥æ”¶è¿”å›çš„ UDP åŒ…ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">DatagramSocket</span> ds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ds<span class="token punctuation">.</span><span class="token function">setSoTimeout</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ds<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">6666</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿æ¥æŒ‡å®šæœåŠ¡å™¨å’Œç«¯å£</span>
<span class="token comment">// å‘é€:</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">DatagramPacket</span> packet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> data<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
ds<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>packet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æ¥æ”¶:</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
packet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> buffer<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
ds<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span>packet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> resp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>packet<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> packet<span class="token punctuation">.</span><span class="token function">getOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> packet<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ds<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å…³é—­:</span>
ds<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®¢æˆ·ç«¯æ‰“å¼€ä¸€ä¸ª <code>DatagramSocket</code> ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">DatagramSocket</span> ds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ds<span class="token punctuation">.</span><span class="token function">setSoTimeout</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ds<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">6666</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®¢æˆ·ç«¯åˆ›å»º <code>DatagramSocket</code> å®ä¾‹æ—¶å¹¶ä¸éœ€è¦æŒ‡å®šç«¯å£ï¼Œè€Œæ˜¯ç”±æ“ä½œç³»ç»Ÿè‡ªåŠ¨æŒ‡å®šä¸€ä¸ªå½“å‰æœªä½¿ç”¨çš„ç«¯å£ã€‚ç´§æ¥ç€ï¼Œè°ƒç”¨ <code>setSoTimeout(1000)</code> è®¾å®šè¶…æ—¶ 1 ç§’ï¼Œæ„æ€æ˜¯åç»­æ¥æ”¶ UDP åŒ…æ—¶ï¼Œç­‰å¾…æ—¶é—´æœ€å¤šä¸ä¼šè¶…è¿‡ 1 ç§’ï¼Œå¦åˆ™åœ¨æ²¡æœ‰æ”¶åˆ° UDP åŒ…æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šæ— é™ç­‰å¾…ä¸‹å»ã€‚è¿™ä¸€ç‚¹å’ŒæœåŠ¡å™¨ç«¯ä¸ä¸€æ ·ï¼ŒæœåŠ¡å™¨ç«¯å¯ä»¥æ— é™ç­‰å¾…ï¼Œå› ä¸ºå®ƒæœ¬æ¥å°±è¢«è®¾è®¡æˆé•¿æ—¶é—´è¿è¡Œã€‚</p><p>æ³¨æ„åˆ°å®¢æˆ·ç«¯çš„ <code>DatagramSocket</code> è¿˜è°ƒç”¨äº†ä¸€ä¸ª <code>connect()</code> æ–¹æ³• â€œè¿æ¥â€ åˆ°æŒ‡å®šçš„æœåŠ¡å™¨ç«¯ã€‚ä¸æ˜¯è¯´ UDP æ˜¯æ— è¿æ¥çš„åè®®å—ï¼Ÿä¸ºå•¥è¿™é‡Œéœ€è¦ <code>connect()</code>ï¼Ÿ</p><p>è¿™ä¸ª <code>connect()</code> æ–¹æ³•ä¸æ˜¯çœŸè¿æ¥ï¼Œå®ƒæ˜¯ä¸ºäº†åœ¨å®¢æˆ·ç«¯çš„ <code>DatagramSocket</code> å®ä¾‹ä¸­ä¿å­˜æœåŠ¡å™¨ç«¯çš„ IP å’Œç«¯å£å·ï¼Œç¡®ä¿è¿™ä¸ª <code>DatagramSocket</code> å®ä¾‹åªèƒ½å¾€æŒ‡å®šçš„åœ°å€å’Œç«¯å£å‘é€ UDP åŒ…ï¼Œä¸èƒ½å¾€å…¶ä»–åœ°å€å’Œç«¯å£å‘é€ã€‚è¿™ä¹ˆåšä¸æ˜¯ UDP çš„é™åˆ¶ï¼Œè€Œæ˜¯ Java å†…ç½®äº†å®‰å…¨æ£€æŸ¥ã€‚</p><p>åç»­çš„æ”¶å‘æ•°æ®å’ŒæœåŠ¡å™¨ç«¯æ˜¯ä¸€è‡´çš„ã€‚é€šå¸¸æ¥è¯´ï¼Œå®¢æˆ·ç«¯å¿…é¡»å…ˆå‘ UDP åŒ…ï¼Œå› ä¸ºå®¢æˆ·ç«¯ä¸å‘ UDP åŒ…ï¼ŒæœåŠ¡å™¨ç«¯å°±æ ¹æœ¬ä¸çŸ¥é“å®¢æˆ·ç«¯çš„åœ°å€å’Œç«¯å£å·ã€‚</p><p>å¦‚æœå®¢æˆ·ç«¯è®¤ä¸ºé€šä¿¡ç»“æŸï¼Œå°±å¯ä»¥è°ƒç”¨ <code>disconnect()</code> æ–­å¼€è¿æ¥ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>ds<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ³¨æ„åˆ° <code>disconnect()</code> ä¹Ÿä¸æ˜¯çœŸæ­£åœ°æ–­å¼€è¿æ¥ï¼Œå®ƒåªæ˜¯æ¸…é™¤äº†å®¢æˆ·ç«¯ <code>DatagramSocket</code> å®ä¾‹è®°å½•çš„è¿œç¨‹æœåŠ¡å™¨åœ°å€å’Œç«¯å£å·ï¼Œè¿™æ ·ï¼Œ<code>DatagramSocket</code> å®ä¾‹å°±å¯ä»¥è¿æ¥å¦ä¸€ä¸ªæœåŠ¡å™¨ç«¯ã€‚</p><p>å¦‚æœå®¢æˆ·ç«¯å¸Œæœ›å‘ä¸¤ä¸ªä¸åŒçš„æœåŠ¡å™¨å‘é€ UDP åŒ…ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><ol><li>å®¢æˆ·ç«¯å¯ä»¥åˆ›å»ºä¸¤ä¸ª <code>DatagramSocket</code> å®ä¾‹ï¼Œç”¨ <code>connect()</code> è¿æ¥åˆ°ä¸åŒçš„æœåŠ¡å™¨ï¼›</li><li>å®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ä¸è°ƒç”¨ <code>connect()</code> æ–¹æ³•ï¼Œè€Œæ˜¯åœ¨åˆ›å»º <code>DatagramPacket</code> çš„æ—¶å€™æŒ‡å®šæœåŠ¡å™¨åœ°å€ï¼Œè¿™æ ·å¯ä»¥ç”¨ä¸€ä¸ª <code>DatagramSocket</code> å®ä¾‹å‘é€ <code>DatagramPacket</code> åˆ°ä¸åŒçš„æœåŠ¡å™¨ã€‚</li></ol><p>ä¸è°ƒç”¨ <code>connect()</code> æ–¹æ³•çš„ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">DatagramSocket</span> ds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ds<span class="token punctuation">.</span><span class="token function">setSoTimeout</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å‘é€åˆ° localhost:6666:</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data1 <span class="token operator">=</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> packet1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>data1<span class="token punctuation">,</span> data1<span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">6666</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ds<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>packet1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å‘é€åˆ° localhost:8888:</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data2 <span class="token operator">=</span> <span class="token string">&quot;Hi&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> packet2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>data2<span class="token punctuation">,</span> data2<span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ds<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>packet2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å…³é—­:</span>
ds<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ€-ç»ƒä¹ " tabindex="-1"><a class="header-anchor" href="#ğŸ€-ç»ƒä¹ " aria-hidden="true">#</a> ğŸ€ ç»ƒä¹ </h2><p>ä½¿ç”¨ UDP å®ç°æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯é€šä¿¡</p><h2 id="ğŸ€-å°ç»“" tabindex="-1"><a class="header-anchor" href="#ğŸ€-å°ç»“" aria-hidden="true">#</a> ğŸ€ å°ç»“</h2><p>ä½¿ç”¨ UDP åè®®é€šä¿¡æ—¶ï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯åŒæ–¹æ— éœ€å»ºç«‹è¿æ¥ï¼š</p><ul><li>æœåŠ¡å™¨ç«¯ç”¨ <code>DatagramSocket(port)</code> ç›‘å¬ç«¯å£ï¼›</li><li>å®¢æˆ·ç«¯ä½¿ç”¨ <code>DatagramSocket.connect()</code> æŒ‡å®šè¿œç¨‹åœ°å€å’Œç«¯å£ï¼›</li><li>åŒæ–¹é€šè¿‡ <code>receive()</code> å’Œ <code>send()</code> è¯»å†™æ•°æ®ï¼›</li><li><code>DatagramSocket</code> æ²¡æœ‰ IO æµæ¥å£ï¼Œæ•°æ®è¢«ç›´æ¥å†™å…¥ <code>byte[]</code> ç¼“å†²åŒºã€‚</li></ul>`,38);function v(g,b){const a=c("router-link");return o(),l("div",null,[n("details",k,[d,n("nav",r,[n("ul",null,[n("li",null,[s(a,{to:"#ğŸ€-æœåŠ¡å™¨ç«¯"},{default:t(()=>[p("ğŸ€ æœåŠ¡å™¨ç«¯")]),_:1})]),n("li",null,[s(a,{to:"#ğŸ€-å®¢æˆ·ç«¯"},{default:t(()=>[p("ğŸ€ å®¢æˆ·ç«¯")]),_:1})]),n("li",null,[s(a,{to:"#ğŸ€-ç»ƒä¹ "},{default:t(()=>[p("ğŸ€ ç»ƒä¹ ")]),_:1})]),n("li",null,[s(a,{to:"#ğŸ€-å°ç»“"},{default:t(()=>[p("ğŸ€ å°ç»“")]),_:1})])])])]),m])}const h=e(i,[["render",v],["__file","3.html.vue"]]);export{h as default};
