---
title: ç”¨æˆ·ä¸­å¿ƒ
sidebarDepth: 1
category: é¡¹ç›®ç¬”è®°
tag: é¡¹ç›®
---

::: details ç›®å½•
[[toc]]
:::

## æµç¨‹

![](./assets/image-20240819153419816.png)

### 1 éœ€æ±‚åˆ†æ

1. ç™»å½• / æ³¨å†Œ
2. ç”¨æˆ·ç®¡ç†ï¼ˆä»…ç®¡ç†å‘˜å¯è§ï¼‰å¯¹ç”¨æˆ·çš„æŸ¥è¯¢æˆ–è€…ä¿®æ”¹
3. ç”¨æˆ·æ ¡éªŒï¼ˆä»…ç”¨æˆ·å¯è§ï¼‰

### 2 æŠ€æœ¯é€‰å‹

å‰ç«¯ï¼šä¸‰ä»¶å¥— + React + Ant Designï¼ˆç»„ä»¶åº“ï¼‰ + Umiï¼ˆæ¡†æ¶ï¼‰ + Ant Design Proï¼ˆç°æˆçš„ç®¡ç†ç³»ç»Ÿï¼‰

åç«¯ï¼š

- java
- springï¼ˆä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œå¸®åŠ©ä½ ç®¡ç† Java å¯¹è±¡ï¼Œé›†æˆä¸€äº›å…¶ä»–çš„å†…å®¹ï¼‰
- springmvcï¼ˆweb æ¡†æ¶ï¼Œæä¾›æ¥å£è®¿é—®ã€restful æ¥å£ç­‰èƒ½åŠ›ï¼‰
- mybatisï¼ˆJava æ“ä½œæ•°æ®åº“çš„æ¡†æ¶ï¼ŒæŒä¹…å±‚æ¡†æ¶ï¼Œå¯¹ jdbc çš„å°è£…ï¼‰
- mybatis-plusï¼ˆå¯¹ mybatis çš„å¢å¼ºï¼Œä¸ç”¨å†™ sql ä¹Ÿèƒ½å®ç°å¢åˆ æ”¹æŸ¥ï¼‰
- springbootï¼ˆ**å¿«é€Ÿå¯åŠ¨** / å¿«é€Ÿé›†æˆé¡¹ç›®ã€‚ä¸ç”¨è‡ªå·±ç®¡ç† spring é…ç½®ï¼Œä¸ç”¨è‡ªå·±æ•´åˆå„ç§æ¡†æ¶ï¼‰
- junit å•å…ƒæµ‹è¯•åº“
- mysql æ•°æ®åº“

éƒ¨ç½²ï¼šæœåŠ¡å™¨ / å®¹å™¨ï¼ˆå¹³å°ï¼‰

### 3 åˆå§‹åŒ– Java é¡¹ç›®çš„æ–¹å¼

1. GitHub æœç°æˆçš„ä»£ç 
2. SpringBoot å®˜æ–¹çš„æ¨¡æ¿ç”Ÿæˆå™¨ï¼ˆhttps://start.spring.io/ï¼‰
3. ç›´æ¥åœ¨ IDEA å¼€å‘å·¥å…·ä¸­ç”Ÿæˆ âœ”

å¦‚æœè¦å¼•å…¥ java çš„åŒ…ï¼Œå¯ä»¥å» maven ä¸­å¿ƒä»“åº“å¯»æ‰¾ï¼ˆhttp://mvnrepository.com/ï¼‰

## å¼€å‘

### ä¸€ã€åˆå§‹åŒ–é¡¹ç›®

#### 1. å‰ç«¯åˆå§‹åŒ–

1. [å®˜ç½‘](https://nodejs.org/zh-cn) ä¸‹è½½ node.js (16.x ç¨³å®šç‰ˆæœ¬)
   > æœ¬æ¬¡ä½¿ç”¨çš„æ˜¯ v16.20.2

2. [Ant Design Pro](https://pro.ant.design/zh-CN)

3. æ–°å»ºé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œç»ˆç«¯æ‰“å¼€ï¼Œåˆå§‹åŒ–é¡¹ç›®

é¦–å…ˆéœ€è¦å®‰è£… yarn ï¼š

```bash
# node.js >=16.10
corepack enable
# Node.js <16.10
npm i -g corepack
# æ£€éªŒ
yarn -v
```

åˆå§‹åŒ– Ant Design Pro è„šæ‰‹æ¶ (å¾ˆå¤šæ“ä½œéœ€ sudo æˆæƒï¼Œéƒ¨åˆ†æŠ¥é”™è·Ÿæœªå®‰è£… git æœ‰å…³)ï¼Œ[å‚è€ƒè¿™é‡Œ](#umi-ui)

```bash
# yarn create umi myapp
# å®‰è£…è€ç‰ˆæœ¬çš„è„šæ‰‹æ¶
â¯ npm i @ant-design/pro-cli@3.1.0 -g
```

```bash
â¯ pro -v
3.0.1

â¯ pro create frontuc
? ğŸ‚ ä½¿ç”¨ umi@4 è¿˜æ˜¯ umi@3 ? umi@3
? ğŸš€ è¦å…¨é‡çš„è¿˜æ˜¯ä¸€ä¸ªç®€å•çš„è„šæ‰‹æ¶? complete
> ğŸ™ˆ complete mode can only use the version of antd@4
æ­£å…‹éš†åˆ° 'frontuc'...
remote: Enumerating objects: 418, done.
remote: Counting objects: 100% (418/418), done.
remote: Compressing objects: 100% (354/354), done.
remote: Total 418 (delta 76), reused 255 (delta 45), pack-reused 0
æ¥æ”¶å¯¹è±¡ä¸­: 100% (418/418), 444.85 KiB | 385.00 KiB/s, å®Œæˆ.
å¤„ç† delta ä¸­: 100% (76/76), å®Œæˆ.
> ğŸšš clone success
> Clean up...

No change to package.json was detected. No package manager install will be executed.
```

1. å¼€å‘å·¥å…·å®‰è£…
WebStormï¼ˆå‰ç«¯ï¼‰ï¼ŒIDEAï¼ˆåç«¯ï¼‰

1. å®‰è£…ä¾èµ–
ä½¿ç”¨å¼€å‘å·¥å…·æ‰“å¼€é¡¹ç›®ï¼Œæ‰“å¼€å·¥å…·å†…çš„ç»ˆç«¯ï¼Œè¾“å…¥ï¼š

```bash
yarn
```

è‡ªåŠ¨å®‰è£…ä¾èµ–

3. å¯åŠ¨é¡¹ç›®
æ‰¾åˆ° package.json ä¸­çš„ start ï¼Œç‚¹å‡»å·¦ä¾§çš„ç»¿è‰²è¿è¡ŒæŒ‰é’®

4. å®‰è£… Umi UIï¼ˆå¯ä»¥è‡ªåŠ¨ç”Ÿæˆä»£ç çš„å·¥å…·ï¼‰

```bash
yarn add @umijs/preset-ui -D
```

5. é¡¹ç›®ç˜¦èº«

1. .vscode å¯èƒ½æ˜¯é…ç½® vscode çš„ä¸€äº›æ’ä»¶
2. config å­˜å‚¨ä¸€äº›é…ç½®ï¼ˆæœ¬åœ°ä»£ç†ã€è·¯ç”±ï¼‰
- oneapi.json å®šä¹‰äº†é¡¹ç›®ç”¨åˆ°çš„ä¸€äº›æ¥å£ï¼ˆåˆ ï¼‰
3. dist _æœ€ç»ˆéƒ¨ç½²é¡¹ç›®å°±å·²ç»ç¼–è¯‘å¥½çš„é¡¹ç›®ç›®å½•_
4. mock æ¨¡æ‹Ÿæ•°æ®å­˜æ”¾çš„åœ°æ–¹ï¼ˆå‡æ•°æ®ï¼‰
5. public å­˜æ”¾ä¸€äº›é™æ€èµ„æºï¼ˆlogoã€éŸ³è§†é¢‘ç­‰ï¼‰
6. src å¹³æ—¶å†™ä»£ç å¸¸ç”¨ç›®å½•
7. components å­˜æ”¾ç»„ä»¶
8. e2e ï¼ˆé›†æˆï¼‰æµ‹è¯•ï¼Œå¯ä»¥åˆ é™¤
9. pages å­˜æ”¾é¡µé¢
10. locales å›½é™…åŒ–ç»„ä»¶ï¼ˆå³ç¿»è¯‘ï¼Œåˆ ï¼‰
 1. package.json ä¸­æä¾›äº†ç§»é™¤è„šæœ¬ï¼š i18n-remove ï¼Œç‚¹å‡»è¿è¡Œå³å¯ï¼Œç„¶ååˆ é™¤è¯¥æ–‡ä»¶å¤¹
11. services
 - swagger æ¥å£æ–‡æ¡£å·¥å…·ï¼ˆåˆ ï¼‰
12. tests æµ‹è¯•
13. app.tsx é¡¹ç›®çš„å…¥å£ï¼Œæ•´ä¸ªå‰ç«¯é¡¹ç›®çš„å¯åŠ¨ç¦»ä¸å¼€è¿™ä¸ªæ–‡ä»¶
14. global.tsx å…¨å±€çš„è„šæœ¬æ–‡ä»¶
15. service-worker.js å‰ç«¯ä¸€äº›ç•Œé¢çš„ç¼“å­˜
16. typings.d.ts å®šä¹‰äº†ä¸€äº› ts çš„ç±»å‹
17. .editorconfig ç¼–è¾‘å™¨çš„é…ç½®ï¼ˆä¾‹å¦‚è‡ªåŠ¨æ ¼å¼åŒ–ï¼‰
18. .prettierrc.js ç¾åŒ–ä»£ç å·¥å…·
19. .eslintrc.js æ£€æŸ¥ js è¯­æ³•
20. jest.config.js æµ‹è¯•å·¥å…·
21. .stylelintrc.js æ£€éªŒ css è¯­æ³•
22. playwright.config.ts è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·

> åˆ é™¤æ–‡ä»¶æ—¶ï¼Œè¦è®°å¾—è¿™ä¸ªæ–‡ä»¶æœ‰æ²¡æœ‰è¢«å…¶ä»–åœ°æ–¹å¼•ç”¨

#### 2. åç«¯åˆå§‹åŒ–

##### å‡†å¤‡ç¯å¢ƒï¼ˆ MySQL ä¹‹ç±»çš„ï¼‰

éªŒè¯ MySQL æ˜¯å¦å®‰è£…æˆåŠŸ - è¿æ¥ä¸€ä¸‹

Database - â• - MySQL

![20221108102715](assets/20221108102715.png)

##### åˆå§‹åŒ–åç«¯é¡¹ç›®

1. GitHub ä¸Šæœç´¢ç°æˆçš„ [SpringBoot-Templates æ¨¡æ¿](https://github.com/search?q=springboot-templates)ï¼ˆä¸æ¨èï¼‰
2. [SpringBoot å®˜æ–¹çš„æ¨¡æ¿ç”Ÿæˆå™¨](https://start.spring.io)
![20221108094002](assets/20221108094002.png)
3. ç›´æ¥åœ¨ IDEA å¼€å‘å·¥å…·ä¸­ç”Ÿæˆï¼ˆæœ€æ–¹ä¾¿ï¼‰
1. æ–°å»ºé¡¹ç›®ï¼ˆprojectï¼‰
2. é€‰æ‹© Spring Initializr
![20221108101835](assets/20221108101835.png)
3. æ·»åŠ ä¾èµ–
![20221108101912](assets/20221108101912.png)
4. é¡¹ç›®ç”ŸæˆæˆåŠŸ

> [MyBatis-Plus](https://baomidou.com/pages/226c21/#å¼€å§‹ä½¿ç”¨)

> Junit
> [Maven Repository](https://mvnrepository.com)

### äºŒã€æ•°æ®åº“è®¾è®¡

- ä»€ä¹ˆæ˜¯æ•°æ®åº“ï¼Ÿå­˜æ•°æ®çš„

- æ•°æ®åº“é‡Œæœ‰ä»€ä¹ˆï¼Ÿæ•°æ®è¡¨ï¼ˆç†è§£ä¸º excel è¡¨æ ¼ï¼‰

- java æ“ä½œæ•°æ®åº“ï¼Ÿç¨‹åºä»£æ›¿äººå·¥

æœ‰å“ªäº›è¡¨ï¼ˆæ¨¡å‹ï¼‰ï¼Ÿè¡¨ä¸­æœ‰å“ªäº›å­—æ®µï¼Ÿå­—æ®µçš„ç±»å‹ï¼Ÿæ•°æ®åº“å­—æ®µæ·»åŠ ç´¢å¼•ï¼Ÿè¡¨ä¸è¡¨ä¹‹é—´çš„å…³è”

**æ€§åˆ«æ˜¯å¦éœ€è¦åŠ ç´¢å¼•ï¼Ÿ**

#### ç”¨æˆ·è¡¨ï¼š

- idï¼ˆä¸»é”®ï¼‰ bigint
- username æ˜µç§° varchar
- userAccount ç™»å½•å¸å· varchar
- avatarUrl å¤´åƒ varchar
- gender æ€§åˆ« tinyint
- userPassword å¯†ç  varchar
- phone ç”µè¯ varchar
- email é‚®ç®± varchar
- userStatus ç”¨æˆ·çŠ¶æ€ï¼ˆè¡¨ç¤ºç”¨æˆ·æ˜¯å¦åˆæ³•ï¼Œæœ‰æ— è¢«å°å·ç­‰ï¼‰ int 0 - æ­£å¸¸

---

- createTime åˆ›å»ºæ—¶é—´ datetime
- updateTime æ›´æ–°æ—¶é—´ datetime ~~ï¼ˆ/ timestampï¼‰~~
- isDelete æ˜¯å¦åˆ é™¤ 0 1ï¼ˆé€»è¾‘åˆ é™¤ï¼‰tinyint
- userRole ç”¨æˆ·è§’è‰² 0 - æ™®é€šç”¨æˆ· 1 - ç®¡ç†å‘˜

#### æ–°å»ºè¡¨

åˆ é™¤æ—§çš„æµ‹è¯•è¡¨ï¼š

```sql
DROP TABLE user;
```

![20221108213430](assets/20221108213430.png)

```sql
create table user
(
 id  bigint auto_increment comment 'uid'
  primary key,
 username  varchar(256)  null comment 'ç”¨æˆ·å',
 userAccount  varchar(256)  null comment 'è´¦å·',
 avatarUrl varchar(1024) null comment 'å¤´åƒ',
 gender tinyint null comment 'æ€§åˆ«',
 userPassword varchar(512)  not null comment 'å¯†ç ',
 phone  varchar(128)  null comment 'ç”µè¯',
 email  varchar(512)  null comment 'é‚®ç®±',
 userStatusintdefault 0  not null comment 'ç”¨æˆ·çŠ¶æ€ 0 - æ­£å¸¸',
 createTimedatetime default CURRENT_TIMESTAMP not null comment 'åˆ›å»ºæ—¶é—´',
 updateTimedatetime default CURRENT_TIMESTAMP not null comment 'æ›´æ–°æ—¶é—´',
 userRole  tinyint  default 0  null comment 'ç”¨æˆ·è§’è‰² 0 - æ™®é€šç”¨æˆ· 1 - ç®¡ç†å‘˜',
 isDelete  tinyint  default 0  null comment 'æ˜¯å¦åˆ é™¤'
)
 comment 'ç”¨æˆ·';
```

#### ç”¨åˆ°çš„æ’ä»¶

> [!NOTE]
>
> - `MyBatisX` ï¼šè‡ªåŠ¨æ ¹æ®æ•°æ®åº“ç”Ÿæˆ domain å®ä½“å¯¹è±¡ã€mapperï¼ˆæ“ä½œæ•°æ®åº“çš„å¯¹è±¡ï¼‰ã€mapper.xmlï¼ˆå®šä¹‰äº† mapper å¯¹è±¡å’Œæ•°æ®åº“çš„å…³è”ï¼Œå¯ä»¥åœ¨é‡Œé¢è‡ªå·±å†™ SQLï¼‰ã€serviceï¼ˆåŒ…å«å¸¸ç”¨çš„å¢åˆ æ”¹æŸ¥ï¼‰ã€serviceImplï¼ˆå…·ä½“å®ç° serviceï¼‰
> - `SonarLint` ï¼šæ£€æŸ¥ä»£ç æ˜¯å¦è§„èŒƒ
> - `GenerateAllSetter` ï¼šä¸€é”®è°ƒç”¨ä¸€ä¸ªå¯¹è±¡æ‰€æœ‰çš„ set æ–¹æ³•
> - `Apache Commons Langï¼ˆMVN Repositoryï¼‰` ï¼šå¯¹ java.lang çš„æ‰©å±•ï¼ŒåŸºæœ¬ä¸Šæ˜¯ commons ä¸­æœ€å¸¸ç”¨çš„å·¥å…·åŒ…
> - `Auto filling Java call arguments` ï¼šè‡ªåŠ¨å¡«å…… Java çš„å‚æ•°
> - `GenerateSerialVersionUID` ï¼šè‡ªåŠ¨ç”Ÿæˆ serialVersionUID

### ä¸‰ã€ç™»å½• / æ³¨å†Œ

#### æ¥å£è®¾è®¡

#### æ³¨å†Œé€»è¾‘

1. ç”¨æˆ·åœ¨å‰ç«¯è¾“å…¥è´¦æˆ·å’Œå¯†ç ã€ä»¥åŠæ ¡éªŒç ï¼ˆtodoï¼‰
2. æ ¡éªŒç”¨æˆ·çš„è´¦æˆ·ã€å¯†ç ã€æ ¡éªŒå¯†ç ï¼Œæ˜¯å¦ç¬¦åˆè¦æ±‚
1. éç©º
2. è´¦æˆ·é•¿åº¦ ** ä¸å°äº ** 4 ä½
3. å¯†ç å°± ** ä¸å°äº ** 8 ä½å§
4. è´¦æˆ·ä¸èƒ½é‡å¤
5. è´¦æˆ·ä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦
6. å¯†ç å’Œæ ¡éªŒå¯†ç ç›¸åŒ
3. å¯¹å¯†ç è¿›è¡ŒåŠ å¯†ï¼ˆ **_å¯†ç åƒä¸‡ä¸è¦ç›´æ¥ä»¥æ˜æ–‡å­˜å‚¨åˆ°æ•°æ®åº“ä¸­_** ï¼‰
4. å‘æ•°æ®åº“æ’å…¥ç”¨æˆ·æ•°æ®

#### ç™»å½•é€»è¾‘ï¼ˆå•æœºç™»å½• => åˆ†å¸ƒå¼ç™»å½• / ç¬¬ä¸‰æ–¹ç™»å½•ï¼‰

1. ç™»å½•æ¥å£

- æ¥å—å‚æ•°ï¼šç”¨æˆ·è´¦æˆ·ã€å¯†ç 

- è¯·æ±‚ç±»å‹ï¼šPOST

- è¯·æ±‚ä½“ï¼šJSON æ ¼å¼çš„æ•°æ®

  > è¯·æ±‚å‚æ•°å¾ˆé•¿æ—¶ä¸å»ºè®®ç”¨ get

- è¿”å›å€¼ï¼šç”¨æˆ·ä¿¡æ¯ï¼ˆ **è„±æ•** ï¼‰

2. é€»è¾‘

1. æ ¡éªŒç”¨æˆ·è´¦æˆ·å’Œå¯†ç æ˜¯å¦åˆæ³•
1. éç©º
2. è´¦æˆ·é•¿åº¦ **ä¸å°äº** 4 ä½
3. å¯†ç å°± **ä¸å°äº** 8 ä½å§
4. è´¦æˆ·ä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦
2. æ ¡éªŒå¯†ç æ˜¯å¦è¾“å…¥æ­£ç¡®ï¼Œè¦å’Œæ•°æ®åº“ä¸­çš„å¯†æ–‡å¯†ç å»å¯¹æ¯”
3. ç”¨æˆ·ä¿¡æ¯è„±æ•ï¼Œéšè—æ•æ„Ÿä¿¡æ¯ï¼Œé˜²æ­¢æ•°æ®åº“ä¸­çš„å­—æ®µæ³„éœ²
4. æˆ‘ä»¬è¦è®°å½•ç”¨æˆ·çš„ç™»å½•æ€ï¼ˆsessionï¼‰ï¼Œå°†å…¶å­˜åˆ°æœåŠ¡å™¨ä¸Šï¼ˆç”¨åç«¯ SpringBoot æ¡†æ¶å°è£…çš„æœåŠ¡å™¨ tomcat å»è®°å½•ï¼‰
cookie
5. è¿”å› **è„±æ•** åçš„ç”¨æˆ·ä¿¡æ¯

#### åç«¯é¡¹ç›®ç›®å½•

- `controller` è¯·æ±‚å±‚ / æ§åˆ¶å±‚ã€‚è¯¥ç›®å½•é‡Œçš„æ‰€æœ‰æ–‡ä»¶ä¸“é—¨ç”¨æ¥æ¥æ”¶è¯·æ±‚ï¼Œä¸åšä»»ä½•çš„ä¸šåŠ¡å¤„ç†
- `mapper` ï¼ˆ/daoï¼‰ æ•°æ®åº“è®¿é—®å±‚ã€‚ä¸“é—¨ç”¨äºä»æ•°æ®åº“ä¸­å¢åˆ æ”¹æŸ¥
- `model` å®šä¹‰äº†æ•°æ®åº“çš„ä¸€äº›å¯¹è±¡æˆ–è€…ç”¨åˆ°çš„ä¸€äº›å°è£…ç±»
- `service` ä¸šåŠ¡å±‚ã€‚ä¸“é—¨ç”¨æ¥ç¼–å†™ä¸šåŠ¡é€»è¾‘ï¼Œä¾‹å¦‚ç™»å½•ã€æ³¨å†Œ
- `utils` å­˜æ”¾å·¥å…·ï¼Œä¾‹å¦‚åŠ å¯†ã€æ ¼å¼è½¬æ¢ã€æ—¥æœŸè½¬æ¢ç­‰

#### å®ç°åŸºæœ¬çš„æ•°æ®åº“æ“ä½œï¼ˆæ“ä½œ user è¡¨ï¼‰

- æ¨¡å‹ user å¯¹è±¡ => å’Œæ•°æ®åº“çš„å­—æ®µå…³è”ï¼Œè‡ªåŠ¨ç”Ÿæˆ

#### å®ç°

æ§åˆ¶å±‚ Controller å°è£…è¯·æ±‚

application.yml æŒ‡å®šæ¥å£å…¨å±€è·¯å¾„å‰ç¼€ï¼š

```
servlet:
  context-path: /api
```

æ§åˆ¶å™¨æ³¨è§£ï¼š

```
@RestController é€‚ç”¨äºç¼–å†™ restful é£æ ¼çš„ apiï¼Œè¿”å›å€¼é»˜è®¤ä¸º json ç±»å‹
```

æ ¡éªŒå†™åœ¨å“ªé‡Œï¼Ÿ

- controller å±‚å€¾å‘äºå¯¹è¯·æ±‚å‚æ•°æœ¬èº«çš„æ ¡éªŒï¼Œä¸æ¶‰åŠä¸šåŠ¡é€»è¾‘æœ¬èº«ï¼ˆè¶Šå°‘è¶Šå¥½ï¼‰
- service å±‚æ˜¯å¯¹ä¸šåŠ¡é€»è¾‘çš„æ ¡éªŒï¼ˆæœ‰å¯èƒ½è¢« controller ä¹‹å¤–çš„ç±»è°ƒç”¨ï¼‰

##### å¦‚ä½•çŸ¥é“æ˜¯å“ªä¸ªç”¨æˆ·ç™»å½•äº†ï¼Ÿ

ï¼ˆjavaweb è¿™ä¸€å—ï¼‰

1. è¿æ¥æœåŠ¡å™¨ç«¯åï¼Œå¾—åˆ°ä¸€ä¸ª session çŠ¶æ€ï¼ˆåŒ¿åä¼šè¯ï¼‰ï¼Œè¿”å›ç»™å‰ç«¯
2. ç™»å½•æˆåŠŸåï¼Œå¾—åˆ°äº†ç™»å½•æˆåŠŸçš„ sessionï¼Œå¹¶ä¸”ç»™è¯¥ session è®¾ç½®ä¸€äº›å€¼ï¼ˆæ¯”å¦‚ç”¨æˆ·ä¿¡æ¯ï¼‰ï¼Œè¿”å›ç»™å‰ç«¯ä¸€ä¸ªè®¾ç½® cookie çš„ â€ å‘½ä»¤ â€œ
- **session => cookie**
3. å‰ç«¯æ¥æ”¶åˆ°åç«¯çš„å‘½ä»¤åï¼Œè®¾ç½® cookieï¼Œä¿å­˜åˆ°æµè§ˆå™¨å†…
4. å‰ç«¯å†æ¬¡è¯·æ±‚åç«¯çš„æ—¶å€™ï¼ˆç›¸åŒçš„åŸŸåï¼‰ï¼Œåœ¨è¯·æ±‚å¤´ä¸­å¸¦ä¸Š cookie å»è¯·æ±‚
5. åç«¯æ‹¿åˆ°å‰ç«¯ä¼ æ¥çš„ cookieï¼Œæ‰¾åˆ°å¯¹åº”çš„ session
6. åç«¯ä» session ä¸­å¯ä»¥å–å‡ºåŸºäºè¯¥ session å­˜å‚¨çš„å˜é‡ï¼ˆç”¨æˆ·çš„ç™»å½•ä¿¡æ¯ã€ç™»å½•åï¼‰

![20221115210129](assets/20221115210129.png)

æµ‹è¯•å·¥å…·ï¼š

æ‰“å¼€æ–¹å¼ä¸€ï¼š

![20221115210638](assets/20221115210638.png)

æ‰“å¼€æ–¹å¼äºŒï¼š

![20221115210925](assets/20221115210925.png)

```
POST http://localhost:8080/user/login
Content-Type: application/json

{
"userAccount":"lxzz",
"userPassword":12345678
}
```

> æ³¨æ„ MyBatis-Plus çš„é€»è¾‘åˆ é™¤ï¼Œé»˜è®¤ä¼šå¸®åŠ©æˆ‘ä»¬æŸ¥è¯¢å‡ºæ¥æ²¡æœ‰è¢«åˆ é™¤çš„ç”¨æˆ·

## ç”¨æˆ·ç®¡ç†

æ¥å£è®¾è®¡å…³é”®ï¼šå¿…é¡»é‰´æƒï¼ï¼ï¼

1. æŸ¥è¯¢ç”¨æˆ·ï¼ˆå…è®¸æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ï¼‰
2. åˆ é™¤ç”¨æˆ·

## å†™ä»£ç æµç¨‹

1. å…ˆåšè®¾è®¡
2. ä»£ç å®ç°
3. æŒç»­ä¼˜åŒ–ï¼ï¼ï¼ï¼ˆå¤ç”¨ä»£ç ã€æå–å…¬å…±é€»è¾‘ / å¸¸é‡ï¼‰

## å‰åç«¯äº¤äº’

å‰ç«¯éœ€è¦å‘åç«¯å‘é€è¯·æ±‚

å‰ç«¯ ajax æ¥è¯·æ±‚åç«¯

### å‰ç«¯è¯·æ±‚åº“åŠå°è£…å…³ç³»

- axios å°è£…äº† ajax
- request æ˜¯ ant design é¡¹ç›®åˆå°è£…äº†ä¸€æ¬¡
- è¿½è¸ª request æºç ï¼šç”¨åˆ°äº† umi çš„æ’ä»¶ã€requestConfig æ˜¯ä¸€ä¸ªé…ç½®

## ä»£ç†

æ­£å‘ä»£ç†ï¼šæ›¿å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œå¯ä»¥è§£å†³è·¨åŸŸé—®é¢˜

åå‘ä»£ç†ï¼šæ›¿æœåŠ¡å™¨ç»Ÿä¸€æ¥æ”¶è¯·æ±‚ã€‚

æ€ä¹ˆæä»£ç†ï¼Ÿ

- Nginx æœåŠ¡å™¨
- Node.js æœåŠ¡å™¨

### ä¸¾ä¾‹

åŸæœ¬è¯·æ±‚ï¼šhttp://localhost:8000/api/user/login

ä»£ç†åˆ°è¯·æ±‚ï¼šhttp://localhost:8080/api/user/login

![](https://qiniuyun.code-nav.cn/img/image-20220319005859098.png)

## å‰ç«¯æ¡†æ¶ä»‹ç»

### Ant Design Proï¼ˆUmi æ¡†æ¶ï¼‰æƒé™ç®¡ç†

- app.tsxï¼šé¡¹ç›®å…¨å±€å…¥å£æ–‡ä»¶ï¼Œå®šä¹‰äº†æ•´ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨çš„å…¬å…±æ•°æ®ï¼ˆæ¯”å¦‚ç”¨æˆ·ä¿¡æ¯ï¼‰
- access.ts æ§åˆ¶ç”¨æˆ·çš„è®¿é—®æƒé™

è·å–åˆå§‹çŠ¶æ€æµç¨‹ï¼šé¦–æ¬¡è®¿é—®é¡µé¢ï¼ˆåˆ·æ–°é¡µé¢ï¼‰ï¼Œè¿›å…¥ app.tsxï¼Œæ‰§è¡Œ getInitialState æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯å…¨å±€å¯ç”¨çš„çŠ¶æ€å€¼ã€‚

### ProComponents é«˜çº§è¡¨å•

1. é€šè¿‡ columns å®šä¹‰è¡¨æ ¼æœ‰å“ªäº›åˆ—
2. columns å±æ€§
- dataIndex å¯¹åº”è¿”å›æ•°æ®å¯¹è±¡çš„å±æ€§
- title è¡¨æ ¼åˆ—å
- copyable æ˜¯å¦å…è®¸å¤åˆ¶
- ellipsis æ˜¯å¦å…è®¸ç¼©ç•¥
- valueTypeï¼šç”¨äºå£°æ˜è¿™ä¸€åˆ—çš„ç±»å‹ï¼ˆdateTimeã€selectï¼‰

### æ¡†æ¶å…³ç³»

Ant Design ç»„ä»¶åº“ => åŸºäº React å®ç°

Ant Design Procomponents => åŸºäº Ant Design å®ç°

Ant Design Pro åå°ç®¡ç†ç³»ç»Ÿ => åŸºäº Ant Design + React + Ant Design Procomponents + å…¶ä»–çš„åº“å®ç°

#### å¤„ç† Register\index.tsx

å‰ç«¯ä»£ç ç¼–å†™é¡ºåºå¯å‚è€ƒ html -> css(ç¾åŒ–) -> js(é€»è¾‘)

1. åˆ é™¤æ£€æµ‹ç™»å½•çŠ¶æ€çš„æ¨¡å—
2. ä¿®æ”¹è¡¨å•é¡¹æ–‡æ¡ˆ
3. å»æ‰è‡ªåŠ¨ç™»å½•ã€å¿˜è®°å¯†ç æ¨¡å—
4. ä¿®æ”¹æŒ‰é’®åç§°ï¼šç™»å½• -> æ³¨å†Œ
5. æ³¨å†Œæäº¤é€»è¾‘ï¼Œ LoginParams -> RegisterParams
6. `type RegisterResult = number;`
7. é‡å®šå‘ redirect (è®°å½•ç”¨æˆ·æœªç™»å½•å‰è®¿é—®é¡µé¢çš„ location ï¼Œç›´æ¥è¿›å…¥ç™»å½•ç•Œé¢çš„æ—  redirect)
8. ä¼˜åŒ–ï¼Œç™»å½•ç•Œé¢æ³¨å†Œæç¤º + å·²å­˜åœ¨å¸å·æ— æ³•æ³¨å†Œæç¤º

## åç«¯ä¼˜åŒ–

1. å¼€å‘ç”¨æˆ·æ³¨é”€å‰ç«¯åç«¯

2. ~~_è¡¥å……ç”¨æˆ·æ³¨å†Œæ ¡éªŒé€»è¾‘å‰ç«¯åç«¯ï¼ˆæ˜Ÿçƒç¼–å·ï¼‰_~~

3. åç«¯ä»£ç ä¼˜åŒ–

1. **é€šç”¨è¿”å›å¯¹è±¡**

- ç›®çš„ï¼šç»™å¯¹è±¡è¡¥å……ä¸€äº›ä¿¡æ¯ï¼Œå‘Šè¯‰å‰ç«¯è¿™ä¸ªè¯·æ±‚åœ¨ä¸šåŠ¡å±‚é¢ä¸Šæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥
- 200\404\500\502\503

```json
{
  "name": "yupi"
}
// æˆåŠŸ
{
  "code": 0 //ä¸šåŠ¡çŠ¶æ€ç 
  "data": {
"name": "yupi"
  }
  "message": "ok"
}
// é”™è¯¯
{
  "code": 50001 //ä¸šåŠ¡çŠ¶æ€ç 
  "data": null
  "message": "ç”¨æˆ·æ“ä½œå¼‚å¸¸ã€xxx"
  "description"
}
```

- è‡ªå®šä¹‰é”™è¯¯ç 
- è¿”å›ç±»æ”¯æŒè¿”å›æ­£å¸¸å’Œè¿”å›é”™è¯¯

2. **å°è£…å…¨å±€å¼‚å¸¸å¤„ç†**

1. å®šä¹‰ä¸šåŠ¡å¼‚å¸¸ç±»
1. ç›¸å¯¹äº Java çš„å¼‚å¸¸ç±»ï¼Œæ”¯æŒæ›´å¤šå­—æ®µ
2. è‡ªå®šä¹‰æ„é€ å‡½æ•°ï¼Œæ›´çµæ´» / å¿«æ·åœ°è®¾ç½®å­—æ®µ
2. ç¼–å†™å…¨å±€å¼‚å¸¸å¤„ç†å™¨
- ä½œç”¨
  1. æ•è·ä»£ç ä¸­æ‰€æœ‰çš„å¼‚å¸¸ï¼Œå†…éƒ¨æ¶ˆåŒ–ï¼Œè®©å‰ç«¯å¾—åˆ°æ›´è¯¦ç»†çš„ä¸šåŠ¡æŠ¥é”™ / ä¿¡æ¯
  2. åŒæ—¶å±è”½æ‰é¡¹ç›®æ¡†æ¶æœ¬èº«çš„å¼‚å¸¸ï¼ˆä¸æš´éœ²æœåŠ¡å™¨å†…éƒ¨çŠ¶æ€ï¼‰
  3. é›†ä¸­å¤„ç†ï¼Œæ¯”å¦‚æ—¥å¿—
- å®ç°ï¼š 4. Spring AOP ï¼šåœ¨è°ƒç”¨æ–¹æ³•å‰åè¿›è¡Œé¢å¤–çš„å¤„ç†

## å‰ç«¯ä»£ç ä¼˜åŒ–

### å…¨å±€å“åº”å¤„ç†

åº”ç”¨åœºæ™¯ï¼šæˆ‘ä»¬éœ€è¦å¯¹æ¥å£çš„ **é€šç”¨å“åº”** è¿›è¡Œç»Ÿä¸€å¤„ç†ï¼Œæ¯”å¦‚ä» response ä¸­å–å‡º dataï¼›æˆ–è€…æ ¹æ® code å»é›†ä¸­å¤„ç†é”™è¯¯ï¼Œæ¯”å¦‚ç”¨æˆ·æœªç™»å½•ã€æ²¡æƒé™ä¹‹ç±»çš„ã€‚

ä¼˜åŠ¿ï¼šä¸ç”¨åœ¨æ¯ä¸ªæ¥å£è¯·æ±‚ä¸­éƒ½å»å†™ç›¸åŒçš„é€»è¾‘

å®ç°ï¼šå‚è€ƒä½ ç”¨çš„è¯·æ±‚å°è£…å·¥å…·çš„å®˜æ–¹æ–‡æ¡£ï¼Œæ¯”å¦‚ umi-requestï¼ˆ https://github.com/umijs/umi-request#interceptor ã€ https://blog.csdn.net/huantai3334/article/details/116780020 ï¼‰ã€‚å¦‚æœä½ ç”¨ **axios**ï¼Œå‚è€ƒ axios çš„æ–‡æ¡£ã€‚

åˆ›å»ºæ–°çš„æ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­é…ç½®ä¸€ä¸ªå…¨å±€è¯·æ±‚ç±»ã€‚åœ¨å‘é€è¯·æ±‚æ—¶ï¼Œä½¿ç”¨æˆ‘ä»¬è‡ªå·±çš„å®šä¹‰çš„å…¨å±€è¯·æ±‚ç±»ã€‚

## å¤šç¯å¢ƒ

å‚è€ƒæ–‡ç« ï¼šhttps://blog.csdn.net/weixin_41701290/article/details/120173283

æœ¬åœ°å¼€å‘ï¼šlocalhostï¼ˆ127.0.0.1ï¼‰

å¤šç¯å¢ƒï¼šæŒ‡åŒä¸€å¥—é¡¹ç›®ä»£ç åœ¨ä¸åŒçš„é˜¶æ®µéœ€è¦æ ¹æ®å®é™…æƒ…å†µæ¥è°ƒæ•´é…ç½®å¹¶ä¸”éƒ¨ç½²åˆ°ä¸åŒçš„æœºå™¨ä¸Šã€‚

ä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ

1. æ¯ä¸ªç¯å¢ƒäº’ä¸å½±å“
2. åŒºåˆ†ä¸åŒçš„é˜¶æ®µï¼šå¼€å‘ / æµ‹è¯• / ç”Ÿäº§
3. å¯¹é¡¹ç›®è¿›è¡Œä¼˜åŒ–ï¼š
1. æœ¬åœ°æ—¥å¿—çº§åˆ«
2. ç²¾ç®€ä¾èµ–ï¼ŒèŠ‚çœé¡¹ç›®ä½“ç§¯
3. é¡¹ç›®çš„ç¯å¢ƒ / å‚æ•°å¯ä»¥è°ƒæ•´ï¼Œæ¯”å¦‚ JVM å‚æ•°

é’ˆå¯¹ä¸åŒç¯å¢ƒåšä¸åŒçš„äº‹æƒ…ã€‚

å¤šç¯å¢ƒåˆ†ç±»ï¼š

1. æœ¬åœ°ç¯å¢ƒï¼ˆè‡ªå·±çš„ç”µè„‘ï¼‰localhost
2. å¼€å‘ç¯å¢ƒï¼ˆè¿œç¨‹å¼€å‘ï¼‰å¤§å®¶è¿åŒä¸€å°æœºå™¨ï¼Œä¸ºäº†å¤§å®¶å¼€å‘æ–¹ä¾¿
3. æµ‹è¯•ç¯å¢ƒï¼ˆæµ‹è¯•ï¼‰å¼€å‘ / æµ‹è¯• / äº§å“ï¼Œå•å…ƒæµ‹è¯• / æ€§èƒ½æµ‹è¯• / åŠŸèƒ½æµ‹è¯• / ç³»ç»Ÿé›†æˆæµ‹è¯•ï¼Œç‹¬ç«‹çš„æ•°æ®åº“ã€ç‹¬ç«‹çš„æœåŠ¡å™¨
4. é¢„å‘å¸ƒç¯å¢ƒï¼ˆä½“éªŒæœï¼‰ï¼šå’Œæ­£å¼ç¯å¢ƒä¸€è‡´ï¼Œæ­£å¼æ•°æ®åº“ï¼Œæ›´ä¸¥è°¨ï¼ŒæŸ¥å‡ºæ›´å¤šé—®é¢˜
5. æ­£å¼ç¯å¢ƒï¼ˆçº¿ä¸Šï¼Œå…¬å¼€å¯¹å¤–è®¿é—®çš„é¡¹ç›®ï¼‰ï¼šå°½é‡ä¸è¦æ”¹åŠ¨ï¼Œä¿è¯ä¸Šçº¿å‰çš„ä»£ç æ˜¯ â€œå®Œç¾â€ è¿è¡Œ
6. æ²™ç®±ç¯å¢ƒï¼ˆå®éªŒç¯å¢ƒï¼‰ï¼šä¸ºäº†åšå®éªŒ

### å‰ç«¯å¤šç¯å¢ƒå®æˆ˜

- è¯·æ±‚åœ°å€

  - å¼€å‘ç¯å¢ƒï¼šlocalhost:8000

  - çº¿ä¸Šç¯å¢ƒï¼šuser-backend.code-nav.cn

  ```js
  startFront(env) {
if(env === 'prod') {
 // ä¸è¾“å‡ºæ³¨é‡Š
 // é¡¹ç›®ä¼˜åŒ–
 // ä¿®æ”¹è¯·æ±‚åœ°å€
} else {
 // ä¿æŒæœ¬åœ°å¼€å‘é€»è¾‘
}
  }
  ```

  ç”¨äº† umi æ¡†æ¶ï¼Œ `build` æ—¶ä¼šè‡ªåŠ¨ä¼ å…¥ `NODE_ENV == production` å‚æ•°ï¼Œ `start NODE_ENV` å‚æ•°ä¸º `development`

- å¯åŠ¨æ–¹å¼

  - å¼€å‘ç¯å¢ƒï¼š `npm run start` ï¼ˆæœ¬åœ°å¯åŠ¨ï¼Œç›‘å¬ç«¯å£ã€è‡ªåŠ¨æ›´æ–°ï¼‰
  - çº¿ä¸Šç¯å¢ƒï¼š `npm run build` ï¼ˆé¡¹ç›®æ„å»ºæ‰“åŒ…ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ serve å·¥å…·å¯åŠ¨ï¼ˆå®‰è£…ï¼š `npm i -g serve` ï¼‰

- é¡¹ç›®çš„é…ç½®

  ä¸åŒçš„é¡¹ç›®ï¼ˆæ¡†æ¶ï¼‰éƒ½æœ‰ä¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œumi çš„é…ç½®æ–‡ä»¶æ˜¯ config ï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶åæ·»åŠ å¯¹åº”çš„ç¯å¢ƒåç§°åç¼€æ¥åŒºåˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒã€‚å‚è€ƒæ–‡æ¡£ï¼š https://umijs.org/zh-CN/docs/deployment

  - å¼€å‘ç¯å¢ƒï¼š `config.dev.ts`
  - ç”Ÿäº§ç¯å¢ƒï¼š `config.prod.ts`
  - å…¬å…±é…ç½®ï¼š `config.ts` ä¸å¸¦åç¼€

### åç«¯å¤šç¯å¢ƒå®æˆ˜

SpringBoot é¡¹ç›®ï¼Œé€šè¿‡ `application.yml` æ·»åŠ ä¸åŒçš„åç¼€æ¥åŒºåˆ†é…ç½®æ–‡ä»¶

å¯ä»¥åœ¨å¯åŠ¨é¡¹ç›®æ—¶ä¼ å…¥ç¯å¢ƒå˜é‡ï¼š

```bash
java -jar .\user-center-backend-0.0.1-SNAPSHOT.jar --spring.profiles.active=prod
```

ä¸»è¦æ˜¯æ”¹ï¼š

- ä¾èµ–çš„ç¯å¢ƒåœ°å€

  - æ•°æ®åº“åœ°å€

  - ç¼“å­˜åœ°å€

  - æ¶ˆæ¯é˜Ÿåˆ—åœ°å€

  - é¡¹ç›®ç«¯å£å·

- æœåŠ¡å™¨é…ç½®

## é¡¹ç›®éƒ¨ç½²ä¸Šçº¿

å‚è€ƒæ–‡ç« ï¼šhttps://www.bilibili.com/read/cv16179200

éœ€è¦ Linux æœåŠ¡å™¨ï¼ˆå»ºè®®å¤§å®¶ç”¨ CentOS 8+ / 7.6 ä»¥ä¸Šï¼‰

### åŸå§‹éƒ¨ç½²

ä»€ä¹ˆéƒ½è‡ªå·±è£…

#### å‰ç«¯

éœ€è¦ web æœåŠ¡å™¨ï¼š**nginx** ã€apacheã€tomcat

å®‰è£… nginx æœåŠ¡å™¨ï¼š

1. ç”¨ç³»ç»Ÿè‡ªå¸¦çš„è½¯ä»¶åŒ…ç®¡ç†å™¨å¿«é€Ÿå®‰è£…ï¼Œæ¯”å¦‚ centos çš„ yum

2. è‡ªå·±åˆ°å®˜ç½‘å®‰è£…ï¼ˆå‚è€ƒæ–‡ç« ï¼‰

```bash
curl -o nginx-1.21.6.tar.gz http://nginx.org/download/nginx-1.21.6.tar.gz

tar -zxvf nginx-1.21.6.tar.gz

cd nginx-1.21.6

37  2022-04-17 23:30:09 yum install pcre pcre-devel -y
39  2022-04-17 23:30:59 yum install openssl openssl-devel -y
41  2022-04-17 23:31:57 ./configure --with-http_ssl_module --with-http_v2_module --with-stream
42  2022-04-17 23:32:13 make
43  2022-04-17 23:32:54 make install
48  2022-04-17 23:33:40 ls /usr/local/nginx/sbin/nginx
vim /etc/profile
  åœ¨æœ€åä¸€è¡Œæ·»åŠ ï¼šexport PATH=$PATH:/usr/local/nginx/sbin

  nginx

  netstat -ntlp æŸ¥çœ‹å¯åŠ¨æƒ…å†µ
```

æ³¨æ„ nginx æƒé™

#### åç«¯

javaã€maven

å®‰è£…ï¼š

```bash
yum install -y java-1.8.0-openjdk*

curl -o apache-maven-3.8.5-bin.tar.gz https://dlcdn.apache.org/maven/maven-3/3.8.5/binaries/apache-maven-3.8.5-bin.tar.gz

git clone xxx ä¸‹è½½ä»£ç 

æ‰“åŒ…æ„å»ºï¼Œè·³è¿‡æµ‹è¯•
mvn package -DskipTests

java -jar ./user-center-backend-0.0.1-SNAPSHOT.jar --spring.profiles.active=prod
```

### å®å¡” Linux éƒ¨ç½²

Linux è¿ç»´é¢æ¿

å®˜æ–¹å®‰è£…æ•™ç¨‹ï¼šhttps://www.bt.cn/new/download.html

æ–¹ä¾¿ç®¡ç†æœåŠ¡å™¨ã€æ–¹ä¾¿å®‰è£…è½¯ä»¶

### å‰ç«¯æ‰˜ç®¡

å‰ç«¯è…¾è®¯äº‘ web åº”ç”¨æ‰˜ç®¡ï¼ˆæ¯”å®¹å™¨åŒ–æ›´å‚»ç“œå¼ï¼Œä¸éœ€è¦è‡ªå·±å†™æ„å»ºåº”ç”¨çš„å‘½ä»¤ï¼Œå°±èƒ½å¯åŠ¨å‰ç«¯é¡¹ç›®ï¼‰

> https://console.cloud.tencent.com/webify/new

- å°ç¼ºç‚¹ï¼šéœ€è¦å°†ä»£ç æ”¾åˆ°ä»£ç æ‰˜ç®¡å¹³å°ä¸Š
- ä¼˜åŠ¿ï¼šä¸ç”¨å†™å‘½ä»¤ã€ä»£ç æ›´æ–°æ—¶è‡ªåŠ¨æ„å»º

### Docker éƒ¨ç½²

docker æ˜¯å®¹å™¨ï¼Œå¯ä»¥å°†é¡¹ç›®çš„ç¯å¢ƒï¼ˆæ¯”å¦‚ javaã€nginxï¼‰å’Œé¡¹ç›®çš„ä»£ç ä¸€èµ·æ‰“åŒ…æˆé•œåƒï¼Œæ‰€æœ‰åŒå­¦éƒ½èƒ½ä¸‹è½½é•œåƒï¼Œæ›´å®¹æ˜“åˆ†å‘å’Œç§»æ¤ã€‚

å†å¯åŠ¨é¡¹ç›®æ—¶ï¼Œä¸éœ€è¦æ•²ä¸€å¤§å †å‘½ä»¤ï¼Œè€Œæ˜¯ç›´æ¥ä¸‹è½½é•œåƒã€å¯åŠ¨é•œåƒå°±å¯ä»¥äº†ã€‚

docker å¯ä»¥ç†è§£ä¸ºè½¯ä»¶å®‰è£…åŒ…ã€‚

Docker å®‰è£…ï¼šhttps://www.docker.com/get-started/ æˆ–è€…å®å¡”å®‰è£…

Dockerfile ç”¨äºæŒ‡å®šæ„å»º Docker é•œåƒçš„æ–¹æ³•

Dockerfile ä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦å®Œå…¨ä» 0 è‡ªå·±å†™ï¼Œå»ºè®®å» githubã€gitee ç­‰æ‰˜ç®¡å¹³å°å‚è€ƒåŒç±»é¡¹ç›®ï¼ˆæ¯”å¦‚ springbootï¼‰

Dockerfile ç¼–å†™ï¼š

- FROM ä¾èµ–çš„åŸºç¡€é•œåƒ
- WORKDIR å·¥ä½œç›®å½•
- COPY ä»æœ¬æœºå¤åˆ¶æ–‡ä»¶
- RUN æ‰§è¡Œå‘½ä»¤
- CMD / ENTRYPOINTï¼ˆé™„åŠ é¢å¤–å‚æ•°ï¼‰æŒ‡å®šè¿è¡Œå®¹å™¨æ—¶é»˜è®¤æ‰§è¡Œçš„å‘½ä»¤

æ ¹æ® Dockerfile æ„å»ºé•œåƒï¼š

```bash
# åç«¯
docker build -t user-center-backend:v0.0.1 .

# å‰ç«¯
docker build -t user-center-front:v0.0.1 .
```

Docker æ„å»ºä¼˜åŒ–ï¼šå‡å°‘å°ºå¯¸ã€å‡å°‘æ„å»ºæ—¶é—´ï¼ˆæ¯”å¦‚å¤šé˜¶æ®µæ„å»ºï¼Œå¯ä»¥ä¸¢å¼ƒä¹‹å‰é˜¶æ®µä¸éœ€è¦çš„å†…å®¹ï¼‰

docker run å¯åŠ¨ï¼š

```bash
# å‰ç«¯
docker run -p 80:80 -d user-center-frontend:v0.0.1

# åç«¯
docker run -p 8080:8080 user-center-backend:v0.0.1
```

è™šæ‹ŸåŒ–

1. ç«¯å£æ˜ å°„ï¼šæŠŠæœ¬æœºçš„èµ„æºï¼ˆå®é™…è®¿é—®åœ°å€ï¼‰å’Œå®¹å™¨å†…éƒ¨çš„èµ„æºï¼ˆåº”ç”¨å¯åŠ¨ç«¯å£ï¼‰è¿›è¡Œå…³è”
2. ç›®å½•æ˜ å°„ï¼šæŠŠæœ¬æœºçš„ç«¯å£å’Œå®¹å™¨åº”ç”¨çš„ç«¯å£è¿›è¡Œå…³è”

è¿›å…¥å®¹å™¨ï¼š

```bash
docker exec -i -t  fee2bbb7c9ee /bin/bash
```

æŸ¥çœ‹è¿›ç¨‹ï¼š

```bash
docker ps
```

æŸ¥çœ‹æ—¥å¿—ï¼š

```bash
docker logs -f [container-id]
```

æ€æ­»å®¹å™¨ï¼š

```bash
docker kill
```

å¼ºåˆ¶åˆ é™¤é•œåƒï¼š

```bash
docker rmi -f
```

### Docker å¹³å°éƒ¨ç½²

1. äº‘æœåŠ¡å•†çš„å®¹å™¨å¹³å°ï¼ˆè…¾è®¯äº‘ã€é˜¿é‡Œäº‘ï¼‰
2. é¢å‘æŸä¸ªé¢†åŸŸçš„å®¹å™¨å¹³å°ï¼ˆå‰ç«¯ / åç«¯å¾®ä¿¡äº‘æ‰˜ç®¡ï¼‰**è¦èŠ±é’±ï¼**

å®¹å™¨å¹³å°çš„å¥½å¤„ï¼š

1. ä¸ç”¨è¾“å‘½ä»¤æ¥æ“ä½œï¼Œæ›´æ–¹ä¾¿çœäº‹
2. ä¸ç”¨åœ¨æ§åˆ¶å°æ“ä½œï¼Œæ›´å‚»ç“œå¼ã€æ›´ç®€å•
3. å¤§å‚è¿ç»´ï¼Œæ¯”è‡ªå·±è¿ç»´æ›´çœå¿ƒ
4. é¢å¤–çš„èƒ½åŠ›ï¼Œæ¯”å¦‚ç›‘æ§ã€å‘Šè­¦ã€å…¶ä»–ï¼ˆå­˜å‚¨ã€è´Ÿè½½å‡è¡¡ã€è‡ªåŠ¨æ‰©ç¼©å®¹ã€æµæ°´çº¿ï¼‰

çˆ½å°±å®Œäº‹äº†ï¼ï¼ï¼

## ç»‘å®šåŸŸå

å‰ç«¯é¡¹ç›®è®¿é—®æµç¨‹ï¼šç”¨æˆ·è¾“å…¥ç½‘å€ => åŸŸåè§£ææœåŠ¡å™¨ï¼ˆæŠŠç½‘å€è§£æä¸º ip åœ°å€ / äº¤ç»™å…¶ä»–çš„åŸŸåè§£ææœåŠ¡ï¼‰ => æœåŠ¡å™¨ =>ï¼ˆé˜²ç«å¢™ï¼‰=> nginx æ¥æ”¶è¯·æ±‚ï¼Œæ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶ï¼Œè¿”å›æ–‡ä»¶ç»™å‰ç«¯ => å‰ç«¯åŠ è½½æ–‡ä»¶åˆ°æµè§ˆå™¨ä¸­ï¼ˆjsã€cssï¼‰ => æ¸²æŸ“é¡µé¢

åç«¯é¡¹ç›®è®¿é—®æµç¨‹ï¼šç”¨æˆ·è¾“å…¥ç½‘å€ => åŸŸåè§£ææœåŠ¡å™¨ => æœåŠ¡å™¨ => nginx æ¥æ”¶è¯·æ±‚ => åç«¯é¡¹ç›®ï¼ˆæ¯”å¦‚ 8080 ç«¯å£ï¼‰

nginx åå‘ä»£ç†çš„ä½œç”¨ï¼šæ›¿æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚ï¼Œè½¬å‘è¯·æ±‚

## è·¨åŸŸé—®é¢˜è§£å†³

æµè§ˆå™¨ä¸ºäº†ç”¨æˆ·çš„å®‰å…¨ï¼Œä»…å…è®¸å‘ **åŒåŸŸåã€åŒç«¯å£** çš„æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚

å¦‚ä½•è§£å†³è·¨åŸŸï¼Ÿ

æœ€ç›´æ¥çš„æ–¹å¼ï¼šæŠŠåŸŸåã€ç«¯å£æ”¹æˆç›¸åŒçš„

### æ·»åŠ è·¨åŸŸå¤´

è®©æœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨ï¼šå…è®¸è·¨åŸŸï¼ˆè¿”å› cross-origin-allow å“åº”å¤´ï¼‰

#### 1. ç½‘å…³æ”¯æŒï¼ˆNginxï¼‰

```nginx
# è·¨åŸŸé…ç½®
location ^~ /api/ {
 proxy_pass http://127.0.0.1:8080/api/;
 add_header 'Access-Control-Allow-Origin' $http_origin;
 add_header 'Access-Control-Allow-Credentials' 'true';
 add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';
 add_header Access-Control-Allow-Headers '*';
 if ($request_method = 'OPTIONS') {
  add_header 'Access-Control-Allow-Credentials' 'true';
  add_header 'Access-Control-Allow-Origin' $http_origin;
  add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';
  add_header 'Access-Control-Allow-Headers' 'DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range';
  add_header 'Access-Control-Max-Age' 1728000;
  add_header 'Content-Type' 'text/plain; charset=utf-8';
  add_header 'Content-Length' 0;
  return 204;
 }
}
```

#### 2. ä¿®æ”¹åç«¯æœåŠ¡

1. é…ç½® @CrossOrigin æ³¨è§£

2. æ·»åŠ  web å…¨å±€è¯·æ±‚æ‹¦æˆªå™¨

```java
@Configuration
public class WebMvcConfg implements WebMvcConfigurer {

 @Override
 public void addCorsMappings(CorsRegistry registry) {
  //è®¾ç½®å…è®¸è·¨åŸŸçš„è·¯å¾„
  registry.addMapping("/**")
 //è®¾ç½®å…è®¸è·¨åŸŸè¯·æ±‚çš„åŸŸå
 //å½“**Credentialsä¸ºtrueæ—¶ï¼Œ**Originä¸èƒ½ä¸ºæ˜Ÿå·ï¼Œéœ€ä¸ºå…·ä½“çš„ipåœ°å€ã€å¦‚æœæ¥å£ä¸å¸¦cookie,ipæ— éœ€è®¾æˆå…·ä½“ipã€‘
 .allowedOrigins("http://localhost:9527", "http://127.0.0.1:9527", "http://127.0.0.1:8082", "http://127.0.0.1:8083")
 //æ˜¯å¦å…è®¸è¯ä¹¦ ä¸å†é»˜è®¤å¼€å¯
 .allowCredentials(true)
 //è®¾ç½®å…è®¸çš„æ–¹æ³•
 .allowedMethods("*")
 //è·¨åŸŸå…è®¸æ—¶é—´
 .maxAge(3600);
 }
}
```

3. å®šä¹‰æ–°çš„ corsFilter Beanï¼Œå‚è€ƒï¼šhttps://www.jianshu.com/p/b02099a435bd

## é¡¹ç›®ä¼˜åŒ–ç‚¹

1. åŠŸèƒ½æ‰©å……
1. ç®¡ç†å‘˜åˆ›å»ºç”¨æˆ·ã€ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ã€åˆ é™¤ç”¨æˆ·
2. ä¸Šä¼ å¤´åƒ
3. æŒ‰ç…§æ›´å¤šçš„æ¡ä»¶å»æŸ¥è¯¢ç”¨æˆ·
4. æ›´æ”¹æƒé™
2. ä¿®æ”¹ Bug
3. é¡¹ç›®ç™»å½•æ”¹ä¸ºåˆ†å¸ƒå¼ sessionï¼ˆå•ç‚¹ç™»å½• - redisï¼‰
4. é€šç”¨æ€§
1. set-cookie domain åŸŸåæ›´é€šç”¨ï¼Œæ¯”å¦‚æ”¹ä¸º \*.xxx.com
2. æŠŠç”¨æˆ·ç®¡ç†ç³»ç»Ÿ => ç”¨æˆ·ä¸­å¿ƒï¼ˆä¹‹åæ‰€æœ‰çš„æœåŠ¡éƒ½è¯·æ±‚è¿™ä¸ªåç«¯ï¼‰
5. åå°æ·»åŠ å…¨å±€è¯·æ±‚æ‹¦æˆªå™¨ï¼ˆç»Ÿä¸€å»åˆ¤æ–­ç”¨æˆ·æƒé™ã€ç»Ÿä¸€è®°å½•è¯·æ±‚æ—¥å¿—ï¼‰

## å…¶ä»–

MFSU ï¼šå‰ç«¯ç¼–è¯‘ä¼˜åŒ–

Ant Design ç»„ä»¶åº“ => React

Ant Design Procomponents => Ant Design

Ant Design Pro åå°ç®¡ç†ç³»ç»Ÿ => Ant Design ã€ Ant Design Procomponents ã€ React ã€ å…¶ä»–çš„åº“

### Ant Design Proï¼ˆUmi æ¡†æ¶ï¼‰

app.tsx é¡¹ç›®å…¨å±€å…¥å£æ–‡ä»¶ï¼Œå®šä¹‰äº†æ•´ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨çš„å…¬å…±æ•°æ®ï¼ˆæ¯”å¦‚ç”¨æˆ·ä¿¡æ¯ï¼‰

access.ts æ§åˆ¶ç”¨æˆ·çš„è®¿é—®æƒé™

é¦–æ¬¡è®¿é—®é¡µé¢ï¼ˆåˆ·æ–°é¡µé¢ï¼‰ï¼Œè¿›å…¥ app.tsxï¼Œæ‰§è¡Œ getInitialState æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯å…¨å±€å¯ç”¨çš„çŠ¶æ€å€¼ã€‚

---

# è¸©å‘

## Start é¡¹ç›®

æœ€å¼€å§‹å®‰è£…çš„ node.js ç‰ˆæœ¬æ˜¯ 18.x ï¼Œç‰ˆæœ¬è¿‡é«˜æ— æ³•å¯åŠ¨é¡¹ç›®ï¼Œå¸è½½åæ›´æ¢ä¸º 16.x ç‰ˆæœ¬ï¼Œå¯ä»¥å¯åŠ¨ã€‚

## Umi-UI

![20221107170443](assets/20221107170443.png)

å½“åˆ é™¤æŸä¸ªæ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚ `/home/jj/test/`ï¼Œå¯èƒ½æç¤º

````
EACCES: permission denied, unlink ```/home/jj/test/```
````

æ­¤æ—¶åªéœ€è¦ç»™äºˆ **å†™å…¥æƒé™** å³å¯ï¼š

```
sudo chown -R jj /home/jj/test/
```

å…¶ä¸­ jj æ˜¯ç”¨æˆ·å

### mac å®‰è£… MySQL

å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ï¼Œç‚¹å‡»ä¸‹è½½å®‰è£…

1. åœ¨ç³»ç»Ÿåå¥½è®¾ç½®é‡Œæ‰¾åˆ° mysqlï¼Œç‚¹å‡»å¹¶é€‰æ‹©å¯åŠ¨ mysqlï¼›
2. æ‰“å¼€ç»ˆç«¯é¢æ¿ï¼Œè¾“å…¥ï¼š`mysql -u root -p`

é—®é¢˜æ¥äº†ï¼Œå› ä¸ºä¹‹åæ˜¾ç¤ºçš„æ˜¯ï¼š`-bash: mysql: command not found`

è§£å†³ï¼š

```
# æŸ¥çœ‹ï½æ–‡ä»¶å¤¹
ls -a

# å¦‚æœæ²¡æœ‰ .bash_profile ï¼Œåˆ›å»ºä¸€ä¸‹
touch .bash_profile

# åˆ›å»ºå¥½åï¼Œæ‰“å¼€è¯¥æ–‡ä»¶
open -t .bash_profile

# ç¼–è¾‘æ–‡ä»¶ï¼ŒåŠ å…¥å¦‚ä¸‹å†…å®¹ï¼Œè·¯å¾„è·å–æ–¹å¼è§ä¸‹å›¾
export PATH=$PATH:/usr/local/{mysql}/bin

# ä¿å­˜åï¼Œé”®å…¥
source ~/.bash_profile

```

![20221107220056](assets/20221107220056.png)

### å…³é—­ mybatis-plus è‡ªåŠ¨å°†ä¸‹åˆ’çº¿è½¬é©¼å³°

åœ¨ application.yml ä¸­å¢åŠ é…ç½®ï¼š

```yml
mybatis-plus:
  configuration:
 map-underscore-to-camel-case: false
```

### æ— æ³•æŸ¥è¯¢ç”¨æˆ·æ˜¯å¦é‡å¤

å¯èƒ½æ˜¯ç”±äºæ•°æ®åº“è¡¨æ ¼ä¸­ isDelete æœªåˆå§‹åŒ–å€¼ï¼Œé‡æ–°å»ºè¡¨åå®šä¹‰ isDelete åˆå§‹å€¼ä¸º 0 ï¼Œç¨‹åº Debug æ­£å¸¸è¿è¡Œï¼Œå¯æŸ¥è¯¢åˆ°å·²å­˜åœ¨ç”¨æˆ·

> User user = userMapper.selectOne(queryWrapper); æ‰§è¡Œå®Œåï¼Œ `user == null`

### ä½¿ç”¨ Image æ ‡ç­¾æ—¶æŠ¥é”™ï¼Œæ— æ³•åŠ è½½é¡µé¢ï¼š

åˆ é™¤ `.umi` æ–‡ä»¶å¤¹ï¼Œ ç»ˆç«¯æ‰§è¡Œ `npm i` å‘½ä»¤ï¼Œé‡æ–°å®‰è£… umi

> å‡ºç°äº†æ–°é—®é¢˜ï¼š è¡¨æ ¼åˆ—é—´è·å˜çª„
> ![20221204091642](assets/20221204091642.png)

åˆåˆ é™¤äº† `node_modules` å’Œ `.umi` ï¼Œä¾æ¬¡æ‰§è¡Œï¼š

```
rm -rf yarn.lock yarn-error.log node_modules src/.umi package-lock.json

yarn && yarn start
```

é‡å¯å‰ç«¯é¡¹ç›®ï¼Œæ¢å¤æ­£å¸¸ï¼š

![20221204094252](assets/20221204094252.png)
