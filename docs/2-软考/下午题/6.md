---
title: 试题六 ⑪ ✅
sidebarDepth: 1
category: 软考笔记
tag: 软考
---

::: details 目录
[[toc]]
:::

基础知识详见 [设计模式](/VueDoc/2-软考/上午题/8.html)


## 🍀 真题

阅读下列说明和 Java 代码，将应填入 （n） 处的字句写在答题纸的对应栏内。

:::: tabs


@tab 🍐 01 ✅

> 🍐 2012 下：**抽象工厂（Abstract Factory）**

==【说明】==

现欲开发一个软件系统，要求能够同时支持多种不同的数据库，为此采用抽象工厂模式设计该系统。以 SQL Server 和 Access 两种数据库以及系统中的数据库表 Department为例，其类图如图 6-1 所示。

![](./assets/image-20240506161814867.png =600x)



@tab 🍐 02 ✅

> 🍐 2017 上：**生成器（Builder）**

==【说明】==

某快餐厅主要制作并出售儿童套餐，一般包括主餐（各类比萨）、饮料和玩具，其餐品种类可能不同，但其制作过程相同。前台服务员（Waiter）调度厨师制作套餐。现采用生成器（Builder）模式实现制作过程，得到如图 6-1 所示的类图。

![](./assets/image-20240506162850700.png =600x)

程序的输出结果为：

```
pizza：cross + mild + ham&pineapple
```


@tab 🍐 03 ✅

> 🍐 2018 上：**生成器（Builder）**

==【说明】==

生成器（Builder）模式的意图是将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。图 6-1 所示为其类图。

![](./assets/image-20240506163247894.png =500x)




@tab 🍐 04 ✅

> 🍐 2013 上：**原型（Prototype）**

==【说明】==

现要求实现一个能够自动生成求职简历的程序，简历的基本内容包括求职者的姓名、性别、年龄及工作经历。希望每份简历中的工作经历有所不同，并尽量减少程序中的重复代码。

现采用原型模式（Prototype）来实现上述要求，得到如图 6-1 所示的类图。

![](./assets/image-20240506163546187.png =600x)



@tab 🍐 05 ✅

> 🍐 2016 上：**适配器（Adapter）**

==【说明】==

某软件系统中，已设计并实现了用于显示地址信息的类 Address（如图 6-1 所示），现要求提供基于 Dutch 语言的地址信息显示接口。为了实现该要求并考虑到以后可能还会出现新的语言的接口，决定采用适配器（Adapter）模式实现该要求，得到如图 6-1 所示的类图。

![](./assets/image-20240506163837706.png =500x)



@tab 🍐 06 ✅

> 🍐 2009 上：**桥接（Bridge）**

==【说明】==

现欲实现一个图像浏览系统，要求该系统能够显示 BMP、JPEG 和 GIF 三种格式的文件，并且能够在 Windows 和 Linux 两种操作系统上运行。系统首先将 BMP、JPEG 和 GIF 三种格式的文件解析为像素矩阵，然后将像素矩阵显示在屏幕上。系统需具有较好的扩展性以支持新的文件格式和操作系统。为满足上述需求并减少所需生成的子类数目，采用桥接（Bridge）设计模式进行设计，所得类图如下图所示

![](./assets/image-20240506164145365.png =600x)

采用该设计模式的原因在于：系统解析 BMP、GIF 与 JPEG 文件的代码仅与文件格式相关，而在屏幕上显示像素矩阵的代码则仅与操作系统相关。

现假设该系统需要支持 10 种格式的图像文件和 5 种操作系统，不考虑类 Matrix，若采用桥接设计模式则至少需要设计 <u>（7）</u> 个类。

> <u>（7）</u>：$10 + 5 + 2 = 17$




@tab 🍐 07 ✅

> 🍐 2013 下：**桥接（Bridge）**

==【说明】==

欲开发一个绘图软件，要求使用不同的绘图程序绘制不同的图形。以绘制直线和圆形为例，对应的绘图程序如表 6-1 所示。

![](./assets/image-20240506164519743.png =600x)

该绘图软件的扩展性要求，将不断扩充新的图形和新的绘图程序。为了避免出现类爆炸的情况，现采用桥接（Bridge）模式来实现上述要求，得到如图 6-1 所示的类图。

![](./assets/image-20240506164535827.png =600x)




@tab 🍐 08 ✅

> 🍐 2017 下：**桥接（Bridge）**

==【说明】==

某图像预览程序要求能够查看 BMP、JPEG 和 GIF 三种格式的文件，且能够在 Windows 和 Linux 两种操作系统上运行。程序需具有较好的扩展性以支持新的文件格式和操作系统。

为满足上述需求并减少所需生成的子类数目，现采用桥接（Bridge）模式进行设计，得到如图 6-1 所示的类图。

![](./assets/image-20240506165030612.png =600x)





@tab 🍐 09 ✅

> 🍐 2009 下：**组合（Composite）**

==【说明】==

现欲构造一文件/目录树，采用组合（Composite）设计模式来设计，得到的类图如下图所示：

![](./assets/image-20240506165356116.png =500x)


该程序运行后输出结果为：

```text
c:\\
composite
TestCompsite.java
Windows
```



@tab 🍐 10 ✅

> 🍐 2010 下：**组合（Composite）**

==【说明】==

某公司的组织结构图如图 6-1 所示，现采用组合（Composition）设计模式来构造该公司的组织结构，得到如图 6-2 所示的类图。

![](./assets/image-20240506165803063.png =600x)

其中 Company 为抽象类，定义了在组织结构图上添加（Add）和删除（Delete）分公司/办事处或者部门的方法接口。类 ConcreteCompany 表示具体的分公司或者办事处，分公司或办事处下可以设置不同的部门。类 HRDepartment 和 FinanceDepartment 分别表示人力资源部和财务部。



@tab 🍐 11 ✅

> 🍐 2011 上：**组合（Composite）**

==【说明】==

某饭店在不同的时段提供多种不同的餐饮，其菜单的结构图如图 6-1 所示。

![](./assets/image-20240506170105559.png =600x)

现在采用组合（Composition）模式来构造该饭店的菜单，使得饭店可以方便地在其中增加新的餐饮形式，得到如图 6-2 所示的类图。其中 MenuComponent 为抽象类，定义了添加（add）新菜单和打印饭店所有菜单信息（print）的方法接口。类 Menu 表示饭店提供的每种餐饮形式的菜单，如煎饼屋菜单、咖啡屋菜单等。每种菜单中都可以添加子菜单，例如图 6-1 中的甜点菜单。类 Menultem 表示菜单中的菜式。

![](./assets/image-20240506170132871.png =600x)




@tab 🍐 12 ✅

> 🍐 2021 上：**组合（Composite）**

==【说明】==

层叠菜单是窗口风格的软件系统中经常采用的一种系统功能组织方式。层叠菜单（如图 6-1 示例）中包含的可能是一个菜单项（直接对应某个功能），也可能是一个子菜单，现在采用组合（composite）设计模式实现层叠菜单，得到如图 6-2 所示的类图

![](./assets/image-20240506170447966.png =600x)



@tab 🍐 13 ✅

> 🍐 2012 上：**装饰器（Decorator）**

==【说明】==

某咖啡店当卖咖啡时，可以根据顾客的要求在其中加入各种配料，咖啡店会根据所加入的配料来计算费用。咖啡店所供应的咖啡及配料的种类和价格如下表所示。

![](./assets/image-20240506170732774.png =600x)

现采用装饰器（Decorator）模式来实现计算费用的功能，得到如图 6-1 所示的类图

![](./assets/image-20240506170747668.png =600x)


编译运行上述程序，其输出结果为：

```
DarkRoast, Mocha, Whip ￥38
```


@tab 🍐 14 ✅

> 🍐 2016 下：**装饰器（Decorator）**

==【说明】==

某发票（lnvoice）由抬头（Head）部分、正文部分和脚注（Foot）部分构成。现采用装饰（Decorator）模式实现打印发票的功能，得到如图 6-1 所示的类图。

![](./assets/image-20240506171405133.png =400x)


程序的输出结果为：

```
This is the header of the invoice!
This is the content of the invoice!
This is the footnote of the invoice!
--------------------
This is the header of the invoice!
This is the footnote of the invoice!
```


@tab 🍐 15 ✅

> 🍐 2021 下：**享元（FlyWeight）**

==【说明】==

享元（FlyWeight）模式主要用于减少创建对象的数量，以降低内存占用，提高性能。先要开发一个网络围棋程序，允许多个玩家联机下棋。由于只有一台服务器，为节省内存空间，采用享元模式实现该程序，得到如图 6-1 所示的类图。

![](./assets/image-20240506171903389.png =600x)




@tab 🍐 16 ✅

> 🍐 2014 下：**Command（命令）**

==【说明】==

某灯具厂商欲生产一个灯具遥控器，该遥控器具有 7 个可编程的插槽，每个插槽都有开关按钮，对应着一个不同的灯。利用该遥控器能够统一控制房间中该厂商所有品牌灯具的开关，现采用 Command（命令）模式实现该遥控器的软件部分。Command 模式的类图如图 6-1 所示。

![](./assets/image-20240506172257627.png =600x)




@tab 🍐 17 ✅

> 🍐 2014 上：**观察者（Observer）**

==【说明】==

某实验室欲建立一个实验室环境监测系统，能够显示实验室的温度、湿度以及洁净度等环境数据。当获取到最新的环境测量数据时，显示的环境数据能够更新。

现在采用观察者（Observer）模式来开发该系统。观察者模式的类图如图 6-1 所示。

![](./assets/image-20240506172700224.png =500x)




@tab 🍐 18 ✅

> 🍐 2019 下：**观察者（Observer）**

==【说明】==

某文件管理系统中定义了类 OfficeDoc 和 DocExplorer。当类 OfficeDoc 发生变化时，类 DocExplorer 的所有对象都要更新其自身的状态。现采用观察者（Observer）设计模式来实现该需求，所设计的类图如图 6-1 所示。

![](./assets/image-20240507104437873.png =400x)



@tab 🍐 19 ✅

> 🍐 2011 下：**状态（State）**

==【说明】==

某大型商场内安装了多个简易的纸巾售卖机，自动出售 2 元钱一包的纸巾，且每次仅售出一包纸巾。纸巾售卖机的状态图如图 6-1 所示。

![](./assets/image-20240507111524794.png =600x)

采用状态（State）模式来实现该纸巾售卖机，得到如图 6-2 所示的类图。其中类 State 为抽象类，定义了投币、退币、出纸巾等方法接口。类 SoldState、SoldOutState、NoQuarterState 和 HasQuarterState 分别对应图 6-1 中纸巾售卖机的 4 种状态：售出纸巾、纸巾售完、没有投币、有 2 元钱。

![](./assets/image-20240507111547658.png =600x)




@tab 🍐 20 ✅

> 🍐 2018 下：**状态（State）**

==【说明】==

某航空公司的会员积分系统将其会员划分为：普卡(Basic)、银卡(Silver)和金卡(Gold)三个等级。非会员(NonMember)可以申请成为普卡会员。会员的等级根据其一年内累积的里程数进行调整。描述会员等级调整的状态图如图 6-1 所示。现采用状态(State)模式实现上述场景，得到如图 6-2 所示的类图。

![](./assets/image-20240507111822270.png =600x)

![](./assets/image-20240507111826892.png =600x)




@tab 🍐 21 ✅

> 🍐 2010 上：**策略（Strategy）**

==【说明】==

某软件公司现欲开发一款飞机飞行模拟系统，该系统主要模拟不同种类飞机的飞行特征与起飞特征。需要模拟的飞机种类及其特征如表 6-1 所示。

![](./assets/image-20240507112153526.png =600x)

为支持将来模拟更多种类的飞机，采用策略设计模式（Strategy）设计的类图如图 6-1
所示。

![](./assets/image-20240507112217057.png =600x)

图 6-1 中，AirCraft 为抽象类，描述了抽象的飞机，而类 Helicopter、AirPlane、Fighter 和 Harrier 分别描述具体的飞机种类，方法 fly()和 takeOff()分别表示不同飞机都具有飞行特征和起飞特征；类 FlyBehavior 与 TakeOffBehavior 为抽象类，分别用于表示抽象的飞行行为与起飞行为；类 SubSonicFly 与 SuperSonicFly 分别描述亚音速飞行和超音速飞行的行为；类 VerticalTakeOff 与 LongDistanceTakeOff 分别描述垂直起飞与长距离起飞的行为。




@tab 🍐 22 ✅

> 🍐 2015 下：**策略（Strategy）**

==【说明】==

某大型购物中心欲开发一套收银软件，要求其能够支持购物中心在不同时期推出的各种促销活动，如打折、返利（例如，满 300 返 100）等等。现采用策略（Strategy）模式实现该要求，得到如图 6-1 所示的类图。

![](./assets/image-20240507112401182.png =500x)



@tab 🍐 23 ✅

> 🍐 2019 上：**策略（Strategy）**

==【说明】==

某软件公司欲开发一款汽车竞速类游戏，需要模拟长轮胎和短轮胎急刹车时在路面上留下的不同痕迹，并考虑后续能模拟更多种轮胎急刹车时的痕迹。现采用策略（Strategy）设计模式来实现该需求，所设计的类图如图 6-1 所示。

![](./assets/image-20240507112706029.png =600x)



@tab 🍐 24 ✅

> 🍐 2015 上：**Visitor（访问者）**

==【说明】==

某图书管理系统中管理着两种类型的文献：图书和论文。现在要求统计所有馆藏文献的总页码（假设图书馆中有一本 540 页的图书和两篇各 25 页的论文，那么馆藏文献的总页码就是 590 页）。采用 Visitor（访问者）模式实现该要求，得到如图 6-1 所示的类图。

![](./assets/image-20240507113129289.png =500x)



@tab 🍐 25 ✅

> 🍐 2020 下：**中介者（Mediator）**


==【说明】==

在线支付是电子商务的一个重要环节，不同的电子商务平台提供了不同的支付接口。现在需要整合不同电子商务平台的支付接口，使得客户在不同平台上购物时，不需要关心具体的支付接口。拟采用中介者（Mediator）设计模式来实现该需求，所设计的类图如图 6-1 所示。

![](./assets/image-20240507113613441.png =500x)




@tab 🍐 26 ✅

> 🍐 2022 上：**备忘录（Memento）**


==【说明】==

在软件系统中，通常都会给用户提供取消、不确定或者错误的操作，允许将系统回复到原先的状态。现使用备忘录（Memento）模式实现该要求，得到如图 6-1 所示的类图。

![](./assets/image-20240507113913637.png =250x)

Memento 包含了要被恢复的状态。Originator 创建并在 Memento 中存储状态。CareTaker 负责从 Memento 中恢复状态。





@tab 🍐 27 ✅

> 🍐 2022 下：**外观（Facade）**


==【说明】==

Facade（外观）模式是一种通过为多个复杂子系统提供一个一致的接口，而使这些子系统更加容易被访问的模式，以医院为例，就医时患者需要与医院不同的职能部门交互，完成挂号、门诊、取药等操作。为简化就医流程，设置了一个接待员的职位，代患者完成上述就医步骤，患者则只需与接待员交互即可。如图 5-1 给出了以外观模式实现该场景的类图。

![](./assets/image-20240507134522499.png =500x)



@tab 🍐 28 ✅

> 🍐 2023 上：**策略（Strategy）**


==【说明】==

在某系统中，类 Interval 代表由下界（lower- bound）和上界（upper- bound）定义的区间。要求采用不同的格式显示区间范围。如：

`[lower-bound,upper-bound]`; `[lower-bound...upper-bound]`; `[lower-bound-upper-bound]` 等。

现采用策略（Strategy）模式实现该要求，得到如图 5-1 所示的类图。


::::


## 🍀 代码


:::: code-tabs#shell

@tab 🍐 01 ✅


```java
import java.util.*;

class Department { /*代码省略*/ }

interface IDepartment {
    // (1) ;
    public void Insert(Department department){}
    // (2) ;
    public Department GetDepartment(int id){}
}

// class SqlserverDepartment (3) {
class SqlserverDepartment implements IDepartment{
    public void Insert(Department department) {
        System.out.println("Insert a record into Department in SQL Server!");
        // 其余代码省略
    }
    public Department GetDepartment(int id) {
        /*代码省略*/
    }
}

// class AccessDepartment (4) {
class AccessDepartment implements IDepartment{
    public void Insert(Department department) {
        System.out.println("Insert a record into Department in ACCESS!");
        // 其余代码省略
    }
    public Department GetDepartment(int id) {
        /* 代码省略 */
    }
}

// (5) {
interface IFactory{
    // (6) ;
    public IDepartment CreateDepartment(){}
}

class SqlServerFactory implements IFactory {
    public IDepartment CreateDepartment() {
        return new SqlserverDepartment();
    }
    // 其余代码省略
}

class AccessFactory implements IFactory {
    public IDepartment CreateDepartment() {
        return new AccessDepartment();
    }
    // 其余代码省略
}
```




@tab 🍐 02 ✅


```java
class Pizza {
    private String parts;
    public void setParts(String parts) { this.parts = parts; }
    public String toString() { return this.parts; }
}

abstract class PizzaBuilder {
    protected Pizza pizza;
    public Pizza getPizza() { return pizza; }
    public void createNewPizza() { pizza = new Pizza(); }
    // public (1) ;
    public abstract void buildParts();
}

class HawaiianPizzaBuilder extends PizzaBuilder {
    public void buildParts(){
        pizza.setParts("cross + mild + ham&pineapp1e");
    }
}

class SpicyPizzaBuilder extends PizzaBuilder {
    public void buildParts() {
        pizza.setParts("panbaked + hot + pepperoni&salami");
    }
}

class Waiter {
    private PizzaBuilder pizzaBuilder;
    public void setPizzaBuilder(PizzaBuilder pizzaBuilder) {/*设置构建器*/
        // (2) ;
        this.pizzaBuilder = pizzaBuilder;
    }
    public Pizza getPizza() { return pizzaBuilder.getPizza(); }
    public void construct() { /* 构建 */
        pizzaBuilder.createNewPizza();
        // (3) ;
        pizzaBuilder.buildParts();
    }
}
class FastFoodOrdering {
    public static viod main(String[] args) {
        Waiter waiter = new Waiter();
        PizzaBuilder hawaiian_pizzabuilder = new HawaiianPizzaBuilder();
        // (4) ;
        waiter.setPizzaBuilder(hawaiian_pizzabuilder);
        // (5) ;
        waiter.construct();

        System.out.println("pizza：" + waiter.getPizza());
    }
}
```



@tab 🍐 03 ✅



```java
import java.util.*;

class Product {
    private String partA;
    private String partB;
    public Product() {}
    public void setPartA(String s) { partA = s; }
    public void setPartB(String s) { partB = s; }
}

interface Builder {
    // public (1) ;
    public void buildPartA();
    public void buildPartB();
    // public (2) ;
    public Product getResult();
}

class ConcreteBuilder1 implements Builder {
    private Product product;
    public ConcreteBuilder1() { product = new Product(); }
    public void buildPartA() { 
        // (3) ("Component A");
        product.setPartA("Component A"); 
    }
    public void buildPartB() { 
        // (4) ("Component B"); 
        product.setPartB("Component B");
    }
    public Product getResult() { return product;}
}

class ConcreteBuilder2 implements Builder {
    // 代码省略
}

class Director {
    private Builder builder;
    public Director(Builder builder) { this.builder = builder; }
    public void construct() {
        // (5) ;
        builder.setPartA(); // 或 builder.setPartB();
        // 代码省略
    }
}

class Test {
    public static void main(String[] args) {
        Director director1 = new Director(new ConcreteBuilder1());
        director1.construct();
    }
}
```



@tab 🍐 04 ✅


```java
// class WorkExperience (1) Cloneable {
class WorkExperience implements Cloneable { // 工作经历
    private String workDate;
    private String company;

    public Object Clone() {
        // (2) ;
        WorkExperience obj = new WorkExperience();
        obj.workDate= this.workDate;
        obj.company = this.company;
        return obj;
    }
    // 其余代码省略
}

// class Resume (3) Cloneable {
class Resume implements Cloneable { // 简历
    private String name;
    private String sex;
    private String age;
    private WorkExperience work;

    public Resume(String name) {
        this.name = name;
        work = new WorkExperience();
    }

    private Resume(WorkExperience work) {
        // this.work = (4) ;
        this.work = (WorkExperience)work.Clone(); // 注意不要只写 work
    }

    public void SetPersonInfo(string sex, string age) { /* 代码略 */ }

    public void SetWorkExperience(string workDate, string company) {
        /* 代码略 */
    }
    
    public Object Clone() {
        // Resume obj = (5) ;
        Resume obj = new Resume(this.work);
        // 其余代码省略
        return obj;
    }
}

class WorkResume {
    public static void main(String[] args) {
        Resume a = new Resume("张三");
        a.SetPersonInfo("男", "29")；
        a.SetWorkExperience("1998〜2000", "XXX 公司");
        // Resume b = (6) ;
        Resume b = (Resume)a.Clone() ;
        b.SetWorkExperience("2001〜2006", "YYY 公司");
    }
}
```



@tab 🍐 05 ✅


```java
import java.util.*;

class Address {
    public void street() { // 实现代码省略 
    }
    public void zip() { // 实现代码省略 
    }
    public void city() { // 实现代码省略 
    }
    // 其他成员省略
}

class DutchAddress {
    public void straat() { // 实现代码省略 
    }
    public void postcode() { // 实现代码省略 
    }
    public void plaats() { // 实现代码省略 
    }
    // 其他成员省略
}

class DutchAddressAdapter extends DutchAddress {
    // private (1) ;
    private Address address;
    public DutchAddressAdapter (Address addr) {
        address = addr;
    }
    public void straat() {
        // (2) ;
        address.street();
    }
    public void postcode() {
        // (3) ;
        address.zip();
    }
    public void plaats() {
        // (4) ;
        address.city();
    }
    // 其他成员省略
}

class Test {
    public static void main(String[] args) {
        Address addr = new Address();
        // (5) ;
        DutchAddress addrAdapter = new DutchAddressAdapter(addr);

        System.out.println("\n The DutchAddress\n");
        testDutch(addrAdapter);
    }
    static void testDutch(DutchAddress addr) {
        addr.straat();
        addr.postcode();
        addr.plaats();
    }
}
```



@tab 🍐 06 ✅



```java
class Matrix { // 各种格式的文件最终都被转化为像素矩阵
    // 此处代码省略
}

abstract class ImageImp {
    public abstract void doPaint(Matrix m); // 显示像素矩阵 m
}

class WinImp extends ImageImp {
    public void doPaint(Matrix m) { /*调用 Windows 系统的绘制函数绘制像素矩阵*/ }
}

class LinuxImp extends ImageImp {
    public void doPaint(Matrix m) { /*调用 Linux 系统的绘制函数绘制像素矩阵*/ }
}

abstract class Image {
    public void setImp(ImageImp imp) {
        // (1) = imp;
        this.imp = imp;
    }
    public abstract void parseFile(String fileName);
    // protected (2) imp;
    protected ImageImp imp;
}
class BMP extends Image {
    public void parseFile(String fileName) {
        // 此处解析 BMP 文件并获得一个像素矩阵对象 m
        // (3) ; 
        imp.doPaint(m)// 显示像素矩阵 m
    }
}

class GIF extends Image {
// 此处代码省略
}

class JPEG extends Image {
// 此处代码省略
}

public class javaMain {
    public static void main(String[] args) {
        // 在 windows 操作系统上查看 demo.bmp 图像文件
        // Image image1 = (4) ;
        Image image1 = new BMP();
        // ImageImp imageImp1 = (5) ;
        ImageImp imageImp1 = new WinImp();
        // (6) ;
        image1.setImp(imageImp1);

        image1.parseFile("demo.bmp");
    }
}
```





@tab 🍐 07 ✅



```java
// (1) Drawing {
interface Drawing{
    // (2) ;
    public void drawLine(double x1, double y1, double x2 ,double y2);
    // (3) ;
    public void drawCircle(double x, double y, double r);
}

class DP1 {
    static public void draw_a_line(double x1, double y1, double x2, double y2) { /* 代码省略 */ }

    static public void draw_a_circle(double x, double y, double r){ /* 代码省略 */ }
}

class DP2 {
    static public void drawline(double x1, double y1, double x2 ,double y2) { /* 代码省略 */ }

    static public void drawcircle (double x, double y, double r){ /* 代码省略 */ }
}

class V1Drawing implements Drawing {
    public void drawLine(double x1, double y1, double x2 ,double y2){ /* 代码省略 */ }

    public void drawCircle(double x, double y, double r) { 
        // (4) ; 
        DP1.draw_a_circle(x,y,r); // 静态方法可通过 `类名.方法名` 直接调用
    }
}

class V2Drawing implements Drawing {
    public void drawLine(double x1, double y1, double x2 ,double y2){ /* 代码省略 */ }

    public void drawCircle (double x, double y, double r) { 
        // (5) ;
        DP2.drawcircle(x,y,r);
    }
}

abstract class Shape {
    private Drawing _dp;
    // (6) ;
    public abstract void draw();

    Shape(Drawing dp) { _dp = dp; }
    
    public void drawLine(double x1, double y1, double x2 ,double y2){ _dp.drawLine(x1, y1, x2, y2); }

    public void drawCircle (double x, double y, double r){ _dp.drawCircle(x, y, r); }
}

class Rectangle extends Shape {
    private double _x1, _x2, _y1, _y2;
    
    public Rectangle(Drawing dp, double x1, double y1, double x2, double y2) { /* 代码省略 */ }
    
    public void draw() { /* 代码省略 */ }
}

class Circle extends Shape {
    private double _x, _y, _r;
    
    public Circle(Drawing dp, double x, double y, double r){ /* 代码省略 */ }
    
    public void draw() { drawCircle(_x, _y, _r); }
}
```




@tab 🍐 08 ✅


```java
import java.util.*;

class Matrix { // 各种格式的文件最终都被转化为像素矩阵
    // 此处代码省略
}

abstract class Implementor {
    // public (1) ; 
    public abstract void doPaint(Matrix m); // 显示像素矩阵 m
}

class WinImp extends Implementor {
    public void doPaint(Matrix m) { // 调用 Windows 系统的绘制函数绘制像素矩阵
        // 此处代码省略
    }
}

class LinuxImp extends Implementor {
    public void doPaint(Matrix m) { // 调用 Linux 系统的绘制函数绘制像素矩阵
        // 此处代码省略
    }
}

abstract class Image {
    public void setImp(Implementor imp) { this.imp = imp; }
    public abstract void parseFile(String fileName);
    protected Implementor imp;
}

class BMPImage extends Image {
    // 此处代码省略
}

class GIFImage extends Image {
    public void parseFile(String fileName) {// 此处解析 BMP 文件并获得一个像素矩阵对象 m
        // (2) ; 
        imp.doPaint(m); // 显示像素矩阵 m
    }
}

class JPEGImage extends Image {
    // 此处代码省略
}

class Main {
    public static void main(String[]args) {
        // 在 Linux 操作系统上查看 demo.gif 图像文件
        // Image image = (3) ;
        Image image = new GIFImage();
        // Implementor imageImp = (4) ;
        Implementor imageImp = new LinuxImp();
        // (5) ;
        image.setImp(imageImp);
        Image.parseFile("demo.gif");
    }
}
```




@tab 🍐 09 ✅


```java
import java.util.ArrayList;
import java.util.List;

// (1) class AbstractFile {
abstract class AbstractFile {    
    protected String name;

    public void printName() { System.out.println(name); }
    public abstract boolean addChild(AbstractFile file);
    public abstract boolean removeChild(AbstractFile file);
    public abstract List<AbstractFile> getChildren();
}

class File extends AbstractFile {
    public File(String name) { this.name = name; }
    public boolean addChild(AbstractFile file) { return false; }
    public boolean removeChild(AbstractFile file) { return false; }
    public List<AbstractFile> getChildren() { 
        // return (2) ;
        return null;
    }
}

class Folder extends AbstractFile {
    private List<AbstractFile> childList;
    public Folder(String name) {
        this.name = name;
        this.childList = new ArrayList<AbstractFile>();
    }
    public boolean addChild(AbstractFile file) {
        return childList.add(file);
    }
    public boolean removeChild(AbstractFile file) {
        return childList.remove(file);
    }
    // public (3) <AbstractFile> getChildren() { 
    public List<AbstractFile> getChildren() { 
        // return (4) ; 
        return childList;
    }
}
public class Client {
    public static void main(String[] args) {
        // 创造一个树形的文件/目录结构
        AbstractFile rootFolder = new Folder("c:\\");
        AbstractFile compositeFolder = new Folder("composite");
        AbstractFile windowsFolder = new Folder("windows");
        AbstractFile file = new File("TestComposite.java");
        rootFolder.addChild(compositeFolder);
        rootFolder.addChild(windowsFolder);
        compositeFolder.addChild(file);
        // 打印目录文件数
        printTree(rootFolder);
    }
    private static void printTree(AbstractFile ifile) {
        ifile.printName();
        List<AbstractFile> children = ifile.getChildren();
        if (children == null) return;
        for (AbstractFile file : Children) {
            // (5) ;
            printTress(file);
        }
    }
}
```




@tab 🍐 10 ✅


```java
import java.util.*;

// (1) Company {
public abstract class Company{ 
    protected String name;
    public Company(String name) { 
        // (2) = name; 
        this.name = name;
    }
    public abstract void Add(Company c); // 增加子公司、办尊处或部门
    public abstract void Delete(Company c); // 删除子公司、办事处或部门
}

class ConcreteCompany extends Company {
    // private List< (3) > children = new ArrayList<( 4 )>();
    private List<Company> children = new ArrayList<Company>();
    // 存储子公司、办事处或部门
    public ConcreteCompany(String name) { super(name); }
    public void Add(Company c) { 
        // (5) .add(c); 
        children.add(c);
    }
    public void Delete(Company c) { 
        // (6) .remove(c); 
        children.remove(c);
    }
}

class HRDepartment extends Company {
    public HRDepartment(String name) { super(name); }
    // 其他代码省略
}

class FinanceDepartment extends Company {
    public FinanceDepartment(String name) { super(name); }
    // 其他代码省略
}

public class Test {
    public static void main(String[] args) {
        ConcreteCompany root = new ConcreteCompany("北京总公司");
        root.Add(new HRDepartment("总公司人力资源部"));
        root.Add(new FinanceDepartment("总公司财务部"));

        ConcreteCompany comp = new ConcreteCompany("上海分公司");
        comp.Add(new HRDepartment("上海分公司人力资源部"));
        comp.Add(new FinanceDepartment("上海分公司财务部"));
        // (7) ;
        root.Add(comp);
        
        ConcreteCompany comp1 = new ConcreteCompany("南京办事处");
        comp1.Add(new HRDepartment("南京办事处人力资源部"));
        comp1.Add(new FinanceDepartment("南京办事处财务部"));
        // (8) ;
        comp.Add(comp1); 
        
        // 其他代码省略

    }
}
```






@tab 🍐 11 ✅



```java
import java.util.*;

// (1) MenuComponent {
public abstract class MenuComponent{
    protected String name;
    // (2) ; 
    public abstract void add(MenuComponent menuComponent);// 添加新菜单
    public abstract void print(); // 打印菜单信息
    public String getName() { return name; }
}

class Menultem extends MenuComponent {
    private double price;
    public MenuItem(String name, double price) {
        this.name = name; this.price = price;
    }
    public double getPrice() { return price; }
    public void add(MenuComponent menuComponent) { return;} //添加新菜单
    public void print() {
        System.out.print(" " + getName());
        System.out.println("," + getPrice());
    }
}

class Menu extends MenuComponent {
    private List<MenuComponent> menuComponents = new ArrayList<MenuComponent>();
    
    public Menu(String name) { this.name = name; }

    public void add(MenuComponent menuComponent) { // 添加新菜单
        // menuComponents. (3) ;
        menuComponents.add(menuComponent);
    }
    public void print() {
        System.out.print("\n" + getName());
        System.out.println("," + "---------------");
        Iterator iterator = menuComponents.iterator();
        while (iterator.hasNext()) {
            MenuComponent menuComponent = (MenuComponent)iterator.next();
            // (4) ;
            menuComponent.print(); // ?
        }
    }
}

class MenuTestDrive {
    public static void main(String args[]) {
        MenuComponent allMenus = new Menu("ALL MENUS");
        MenuComponent dinerMenu = new Menu("DINER MENU");
        // 创建更多的 Menu 对象，此处代码省略

        allMenus.add(dinerMenu); // 将 dinerMenu 添加到餐厅菜单中
        // 为餐厅增加更多的菜单，此处代码省略
        // (5) ; 
        allMenus.print(); // 打印饭店所有菜单的信息
    }
}
```




@tab 🍐 12 ✅


```java
import java.util.*;

abstract class MenuComponent { // 构成层叠菜单的元素
    // (1) String name; 
    protected String name; // 菜单项或子菜单名称
    public void printName() { System.out.println(name); }
    // public (2) ;
    public abstract boolean addMenuElement(MenuComponent element);
    public abstract boolean removeMenuElement(MenuComponent element);
    // public (3) ;
    public abstract List<MenuComponent> getElement();
}

class MenuItem extends MenuComponent {
    public MenuItem(String name) { this.name = name; }
    public boolean addMenuElement(MenuComponent element) { return false; }
    public boolean removeMenuElement(MenuComponent element) {
        return false;
    }
    public List<MenuComponent> getElement(){ return null; }
}

class Menu extends MemuComponent {
    // private (4) ;
    private List<MenuComponent> elementList;

    public Menu(String name) {
        this.name = name;
        this.elementList = new ArrayList<MenuComponent>;
    }
    public boolean addMenuElement(MenuComponent element) {
        return elementList.add(element);
    }
    public boolean removeMenuElement(MenuComponent element) {
        return elementList.remove(element);
    }
    public List<MenuComponent> getElement() { return elementList; }
}

class CompositeTest {
    public static void main(String[] args) {
        MenuComponent mainMenu = new Menu("Insert");
        MenuComponent subMenu = new Menu("Chart");
        MenuComponent element = new MenuItem("On This Sheet");
        // (5) ;
        mainMenu.addMenuElement(subMenu);

        subMenu.addMenuElement(element);
        printMenus(mainMenu);
    }
    private static void printMenus(MenuComponent ifile) {
        ifile.printName();
        List<MenuComponent> children = ifile.getElement();
        if (children == null) return;
        for(MenuComponent element; children) {
            printMenus(element);
        }
    }
}
```




@tab 🍐 13 ✅


```java
import java.util.*;

// (1) class Beverage { 
abstract class Beverage { // 饮料
    String description = "Unknown Beverage";
    // public (2) () { 
    public String getDescription() { 
        return description; 
    }
    // public (3) ;
    public abstract int cost();
}

abstract class CondimentDecorator extends Beverage { // 配料
    // (4) ;❓
    Beverage beverage;
}

class Espresso extends Beverage { // 蒸馏咖啡
    private final int ESPRESSO_PRICE = 25;
    public Espresso() { description = "Espresso"; }
    public int cost() { return ESPRESSO_PRICE; }
}

class DarkRoast extends Beverage { // 深度烘焙咖啡
    private final int DARKROAST_PRICE = 20;
    public DarkRoast() { description = "DarkRoast"; }
    public int cost() { rcturn DARKROAST PRICE; }
}

class Mocha extends CondimentDecorator { // 摩卡
    private final int MOCHA_PRICE = 10;
    public Mocha (Beverage beverage) { this.beverage = beverage; }
    public String getDescription() {
        return beverage.getDescription() + ", Mocha";
    }
    public int cost() { return MOCHA_PRICE + beverage.cost(); }
}
class Whip extends CondimentDecorator { // 奶泡
    private final int WHIP_PRICE = 8;
    public Whip (Beverage beverage) { this.beverage = beverage; }
    public String getDescription() {
        return beverage.getDescription() + ", Whip";
    }
    public int cost() { return WHIP_PRICE + beverage.cost(); }
}

public class Coffee {
    public static void main(String args[]) {
        Beverage beverage = new DarkRoast();
        // beverage = new Mocha( (5) );
        beverage = new Mocha(beverage);
        // beverage = new Whip ( (6) );
        beverage = new Whip (beverage);

        System.out.println(beverage.getDescription() +" ￥"+
        beverage.cost());
    }
}

```


@tab 🍐 14 ✅❗️


```java
class invoice {
    public void printInvoice() {
        System.out.println("This is the content of the invoice!");
    }
}
class Decorator extends Invoice {
    protected Invoice ticket;
    public Decorator(Invoice t) {
        ticket = t;
    }
    public void printInvoice() {
        if (ticket != null)
            // (1) ;
            ticket.printInvoice();
    }
}

class HeadDecorator extends Decorator {
    public HeadDecorator(Invoice t) {
        super(t);
    }
    public void printInvoice() {
        System.out.println("This is the header of the invoice!");
        // (2) ;❓
        super.printInvoice(); 
        // 直接使用 ticket.printInvoice(); 的话，第二次打印就会出现 NullPointException，而 Decorator 中定义的 printInvoice() 方法先判断了 ticket 是否为空，所以传入 null 值时不进行打印操作
    }
}

class FootDecorator extends Decorator {
    public FootDecorator(Invoice t) {
        super(t);
    }
    public void printInvoice() {
        // (3) ;❓
        super.printInvoice();
        System.out.println("This is the footnote of the invoice!");
    }
}
class Test {
    public static void main(String[] args) {
        Invoice t = new Invoice();
        Invoice ticket;
        // ticket = (4) ;❓
        ticket = new HeadDecorator(new FootDecorator(t));
        // new FootDecorator(new HeadDecorator(t)) 也是正确的

        ticket.printInvoice();
        System.out.println("--------------------");
        // ticket = (5) ;❓
        ticket = new HeadDecorator(new FootDecorator(null));

        ticket.printInvoice();
    }
}

```


@tab 🍐 15 ✅


```java
import java.util.*;

enum PieceColor { BLACK, WHITE } // 棋子颜色

class PiecePos { // 棋子位置
    private int x;
    private int y;
    public PiecePos(int a, int b) { x = a; y = b; }
    public int getX() { return x; }
    public int getY() { return y; }
}

abstract class Piece { // 棋子定义
    protected PieceColor m_color; // 颜色
    protected PiecePos m_pos; // 位置
    public Piece(PieceColor color, PiecePos pos) {
        m_color = color;
        m_pos = pos;
    }
    // (1) ;
    public abstract void draw();
}

class BlackPiece extends Piece {
    public BlackPiece(PieceColor color, PiecePos pos) {
        super(color, pos);
    }
    public void draw() { System.out.println("draw a blackpiece"); }
}

class WhitePiece extends Piece {
    public WhitePiece(PieceColor color, PiecePos pos) {
        super(color, pos);
    }
    public void draw() { System.out.println("white a blackpiece"); }
}

class PieceBoard { // 棋盘上已有的棋子
    // private static final ArrayList<(2)> m_arrayPiece = new ArrayList<>();
    private static final ArrayList<Piece> m_arrayPiece = new ArrayList<>();

    private String m_blackName; // 黑方名称
    private String m_whiteName; // 白方名称
    public PieceBoard(String black, String white) {
        m_blackName = black;
        m_whiteName = white;
    }
    // 一步棋，在棋盘上放一颗棋子
    public void SetPiece(PieceColor color, PiecePos pos) {
        // (3) piece = null;
        Piece piece = null;

        if (color == PieceColor.BLACK) { // 放黑子
            piece = new BlackPiece(color, pos); // 获取一颗黑子
            System.out.println(m_blackName + "在位置(" + pos.getX() + "," + pos.getY() + ")");
            // (4) ;
            piece.draw();
        } else { // 放白子
            piece = new WhitePiece(color, pos); // 获取一颗白子
            System.out.println(m_whiteName + "在位置(" + pos.getX() + "," + pos.getY() + ")");
            // (5) ;
            piece.draw();
        }
        m_arrayPiece.add(piece);
    }
}
```





@tab 🍐 16 ✅



```java
class Light {
    public Light() {}
    public Light(String name) { /* 代码省略 */ }
    public void on() { /* 代码省略 */ } // 开灯
    public void off() { /* 代码省略 */ } // 关灯
    // 其余代码省略
}

// (1) {
interface Command {
    public void execute();
}

class LightOnCommand implements Command { // 开灯命令
    Light light;
    public LightOnCommand(Light light) { this.light = light; }
    public void execute(){ 
        // (2) ; 
        light.on();
    }
}

class LightOffCommand implements Command { // 关灯命令
    Light light;
    public LightOffCommand(Light light) { this.light = light; }
    public void execute() { 
        // (3) ; 
        light.off();
    }
}

class RemoteControl { // 遥控器
    Command[] onCommands = new Command[7];
    Command[] offCommands = new Command[7];
    public RemoteControl() { /* 代码省略 */ }
    public void setCommand(int slot, Command onCommand, Command offCommand){
        // (4) = onCommand;
        onCommands[slot] = onCommand;
        // (5) = offCommand;
        offCommands[slot] = offCommand;
    }
    public void onButtonWasPushed(int slot) {
        // (6) ;
        onCommands[slot].execute();
    }
    public void offButtonWasPushed(int slot) {
        // (7) ;
        offCommands[slot].execute();
    }
}

class RemoteLoader {
    public static void main(String[] args) {
        RemoteControl remoteControl = new RemoteControl();
        Light livingRoomLight = new Light("Living Room");
        Light kitchenLight = new Light("kitchen");
        
        LightOnCommand livingRoomLightOn = new LightOnCommand(livingRoomLight);
        LightOffCommand livingRoomLightOff = new LightOffCommand(livingRoomLight);
        LightOnCommand kitchenLightOn = new LightOnCommand(kitchenLight);
        LightOffCommand kitchenLightOff = new LightOffCommand(kitchenLight);

        remoteControl.setCommand(0, livingRoomLightOn, livingRoomLightOff);
        remoteControl.setCommand(1, kitchenLightOn, kitchenLightOff);
        remoteControl.onButtonWasPushed(0);
        remoteControl.offButtonWasPushed(0);
        remoteControl.onButtonWasPushed(1);
        remoteControl.offButtonWasPushed(1);
    }
}
```



@tab 🍐 17 ✅



```java
import java.util.*;

interface Observer {
    public void update(float temp, float humidity, float cleanness);
}

interface Subject {
    public void registerObserver(Observer o); // 注册对主题感兴趣的观察者
    public void removeObserver(Observer o); // 删除观察者
    public void notifyObservers(); // 当主题发生变化时通知观察者
}

// class EnvironmentData implements (1) {
class EnvironmentData implements Subject {
    private ArrayList observers;
    private float temperature, humidity, cleanness;

    public EnvironmentData() { observers = new ArrayList(); }
    public void registerObserver(Observer o) { observers.add(o); }
    public void removeObserver(Observer o) { /* 代码省略 */ }
    public void notifyObservers() {
        for (int i = 0; i < observers.size(); i ++ ) {
            Observer observer = (Observer) observers.get(i);
            // (2) ;
            observer.update(temperature, humidity, cleanness);
        }
    }
    public void measurementsChanged() { 
        // (3) ; 
        notifyObservers();
    }
    public void setMeasurements(float temperature, float humidity, float cleanness) {
        this.temperature = temperature;
        this.humidity = humidity;
        this.cleanness = cleanness;
        // (4) ;
        measurementsChanged();
    }
}

// class CurrentConditionsDisplay implements (5) {
class CurrentConditionsDisplay implements Observer {
    private float temperature;
    private float humidity;
    private float cleanness;
    private Subject envData;

    public CurrentConditionsDisplay(Subject envData) {
        this.envData = envData;
        // (6) ;
        envData.registerObserver(this);
    }
    public void update(float temperature, float humidity, float cleanness){
        this.temperature = temperature;
        this.humidity = humidity;
        this.cleanness = cleanness;
        display();
    }
    public void display() { /* 代码省略 */ }
}
class EnvironmentMonitor {
    public static void main(String[] args) {
        EnvironmentData envData = new EnvironmentData();
        CurrentConditionsDisplay currentDisplay = new CurrentConditionsDisplay(envData);
        envData.setMeasurements(80, 65, 30.4f);
    }
}
```




@tab 🍐 18 ✅


```java
import java.util.*;

interface Observer {
    // public (1) ;
    public void update();
}

interface Subject {
    public void Attach(Observer obs);
    public void Detach(Observer obs);
    public void Notify();
    public void setStatus(int status);
    public int getStatus();
}

class OfficeDoc implements Subject {
    // private List< (2) > myObs;
    private List<Observer> myObs;

    private String mySubjectName;
    private int m_status;
    public OfficeDoc(String name) {
        mySubjectName = name;
        this.myObs = new ArrayList<Observer>();
        m_status = 0;
    }
    public void Attach(Observer obs) { this.myObs.add(obs); }
    public void Detach(Observer obs) { this.myObs.remove(obs); }
    public void Notify() {
        for (Observer obs : this.myObs) { 
            // (3) ; 
            obs.update();
        }
    }
    public void setStatus(int status) {
        m_status = status;
        System.out.println("SetStatus subject[" + mySubjectName + "]status:" + status);
    }
    public int getStatus() { return m_status; }
}

class DocExplorer implements Observer {
    private String myObsName;
    // public DocExplorer(String name, (4) sub) {
    public DocExplorer(String name, Subject sub) {
        myObsName = name;
        // sub. (5) ;
        sub.Attach(this);
    }
    public void update() {
        System.out.println("update observer[" + myObsName + "]");
    }
}
class ObserverTest {
    public static void main(String[] args) {
        Subject subjectA = new OfficeDoc("subject A");
        Observer observerA = new DocExplorer("observer A", subjectA);
        subjectA.setStatus(1);
        subjectA.Notify();
    }
}
```



@tab 🍐 19 ✅


```java
import java.util.*;

interface State {
    public void insertQuarter(); // 投币
    public void ejectQuarter(); // 退币
    public void turnCrank(); // 按下“出纸巾”按钮
    public void dispense(); // 出纸巾
}

class TissueMachine {
    // (1) soldOutState, noQuarterState, hasQuarterState, soldState, state;
    State soldOutState, noQuarterState, hasQuarterState, soldState, state;

    state = soldOutState;
    int count = 0; // 纸巾数
    public TissueMachine(int numbers) { /* 实现代码省略 */ }
    public State getHasQuarterState() { return hasQuarterState; }
    public State getNoQuarterState() { return noQuarterState; }
    public State getSoldState() { return soldState; }
    public State getSoldOutState() { return soldOutState; }
    public int getCount() { return count; }
    // 其余代码省略
}

class NoQuarterState implements State {
    TissueMachine tissueMachine;
    public void insertQuarter() {
        // tissueMachine.setState( (2) );
        tissueMachine.setState(tissueMachine.getHasQuarterState());
    }
    // 构造方法以及其余代码省略
}

class HasQuarterState implements State {
    TissueMachine tissueMachine;
    public void ejectQuarter() {
        // tissueMachine.setState( (3) );
        tissueMachine.setState(tissueMachine.getNoQuarterState());
    }
    // 构造方法以及其余代码省略
}

class SoldState implements State {
    TissueMachine tissueMachine;
    public void dispense() {
        if (tissueMachine.getCount() > 0) {
            // tissueMachine.setState( (4) );
            tissueMachine.setState(tissueMachine.getNoQuarterState());
        } else {
            // tissueMachine.setState( (5) ); 
            tissueMachine.setState(tissueMachine.getSoldOutState());
        }
    }
}
```





@tab 🍐 20 ✅


```java
import java.util.*;

abstract class CState {
    public int flyMiles; // 里程数
    // public (1) ; 
    public abstract double travel(int miles, CFrequentFlyer context);// 根据累积里程数调整会员等级
}

class CNoCustomer extends CState { // 非会员
    public double travel(int miles, CFrequentFlyer context) {
        System.out.println("Your travel will not account for points");
        return miles; // 不累积里程数
    }
}

class CBasic extends CState { // 普卡会员
    public double travel(int miles, CFrequentFlyer context) {
        if (context.flyMiles >= 25000 && context.flyMiles < 50000)
            // (2) ;
            context.setState(new CSilver());
        if (context.flyMiles >= 50000)
            // (3) ;
            context.setState(new CGold());
        return miles;
    }
}

class CGold extends CState { // 金卡会员
    public double travel(int miles, CFrequentFlyer context) {
        if (context.flyMiles >= 25000 && context.flyMiles < 50000)
            // (4) ;
            context.setState(new CSilver());
        if (context.flyMiles < 25000);
            // (5) ;
            context.setState(new CBasic());
        return miles + 0.5 * miles; // 累积里程数
    }
}

class CSilver extends CState { // 银卡会员
    public double travel(int miles, CFrequentFlyer context) {
        if (context.flyMiles <= 25000)
            context.setState(new CBasic());
        if (context.flyMiles >= 50000)
            context.setState(new CGold());
        return (miles + 0.25 * miles); // 累积里程数
    }
}

class CFrequentFlyer {
    CState state;
    double flyMiles;
    public CFrequentFlyer() {
        state = new CNoCustomer();
        flyMiles = 0;
        setState(state);
    }
    public void setState(CState state) { this.state = state; }
    public void travel(int miles) {
        double bonusMiles = state.travel(miles, this);
        flyMiles = flyMiles + bonusMiles;
    }
}
```



@tab 🍐 21 ✅


```java
interface FlyBehavior {
    public void fly();
}

class SubSonicFly implements FlyBehavior {
    public void fly() { System.out.println("亚音速飞行！"); }
}

class SuperSonicFly implements FlyBehavior {
    public void fly() { System.out.println("超音速飞行！"); }
}

interface TakeOffBehavior {
    public void takeOff();
}

class VerticalTakeOff implements TakeOffBehavior {
    public void takeOff() { System.out.println("垂直起飞！"); }
}

class LongDistanceTakeOff implements TakeOffBehavior {
    public void takeOff() { System.out.println("长距离起飞！"); }
}

abstract class AirCraft {
    // protected (1) ;
    protected FlyBehavior flyBehavior;
    // protected (2) ;
    protected TakeOffBehavior takeOffBehavior;
    public void fly() { 
        // (3) ; 
        flyBehavior.fly();
    }
    public void takeOff() { 
        // (4) ; 
        takeOffBehavior.takeOff();
    }
}

// class Helicopter (5) AirCraft{
class Helicopter extends AirCraft{
    public Helicopter () {
        // flyBehavior = new (6) ;
        flyBehavior = new SubSonicFly();
        // takeOffBehavior = new (7) ;
        takeOffBehavior = new VerticalTakeOff();
    }
}
// 其它代码省略
```



@tab 🍐 22 ✅


```java
import java.util.*;

enum TYPE { NORMAL, CASH_DISCOUNT, CASH_RETURN};

interface CashSuper {
    // public (1) ;
    public double acceptCash(double money);
}

class CashNormal implements CashSuper { // 正常收费子类
    public double acceptCash(double money) {
        return money;
    }
}

class CashDiscount implements CashSuper {
    private double moneyDiscount; // 折扣率

    public CashDiscount(double moneyDiscount) {
        this moneyDiscount = moneyDiscount;
    }
    public double acceptCash(double money) {
        return money * moneyDiscount;
    }
}
class CashReturn implements CashSuper { // 满额返利
    private double moneyCondition;
    private double moneyReturn;
    public CashReturn(double moneyCondition, double moneyReturn) {
        this.moneyCondition = moneyCondition; // 满额数额
        this.moneyReturn = moneyReturn; // 返利数额
    }
    public double acceptCash(double money) {
        double result = money;
        if(money >= moneyCondition)
            result = money - Math.floor(money / moneyCondition) * moneyReturn;
        return result;
    }
}

class CashContext {
    private CashSuper cs;
    private TYPE t;
    public CashContext(TYPE t) {
        switch(t) {
            case NORMAL: // 正常收费
                // (2) ;
                cs = new CashNormal();
                break;
            case CASH_DISCOUNT: // 打 8 折
                // (3) ;
                cs = new CashDiscount(0.8);
                break;
            case CASH_RETURN: // 满 300 返 100
                // (4) ;
                cs = new CashReturn(300, 100)
                break;
        }
    }
    public double GetResult(double money) {
        // (5) ;
        return cs.acceptCash(money);
    }
    //此处略去 main()函数
}
```


@tab 🍐 23 ✅


```java
import java.util.*;

interface BrakeBehavior {
    // public (1) ;
    public void stop();
    /* 其余代码省略 */
}

class LongWheelBrake implements BrakeBehavior {
    public void stop() { System.out.println("模拟长轮胎刹车痕迹！"); }
    /* 其余代码省略 */
}

class ShortWheelBrake implements BrakeBehavior {
    public void stop() { System.out.println("模拟短轮胎刹车痕迹！"); }
    /* 其余代码省略 */
}

abstract class Car {
    // protected (2) wheel;
    protected BrakeBehavior wheel;
    public void brake() { 
        // (3) ; 
        wheel.stop();
    }
    /* 其余代码省略 */
}

class ShortWheelCar extends Car {
    public ShortWheelCar(BrakeBehavior behavior) {
        // (4) ;
        wheel = behavior;
    }
    /* 其余代码省略 */
}

class StrategyTest {
    public static void main(String[] args) {
        BrakeBehavior brake = new ShortWheelBrake();
        ShortWheelCar car1 = new ShortWheelCar(brake);
        // car1. (5) ;
        car1.brake();
    }
}
```


@tab 🍐 24 ✅


```java
import java.util.*;

interface LibraryVisitor {
    // (1) ;
    void visit(Book p_book);
    // (2) ;
    void visit(Article p_article);
    void printSum();
}

class LibrarySumPrintVisitor implements LibraryVisitor { // 打印总页数
    private int sum = 0;
    public void visit(Book p_book) {
        sum = sum + p_book.getNumberOfPages();
    }
    public void visit(Article p_article) {
        sum = sum + p_article.getNumberOfPages();
    }
    public void printSum() {
        System.out.println("SUM = " + sum);
    }
}

interface LibraryItemInterface {
    // (3) ;
    void accept(LibraryVisitor visitor);
}

class Article implements LibraryItemInterface {
    private String m_title; // 论文名
    private String m_author; // 论文作者
    private int m_start_page;
    private int m_end_page;

    public Article(String p_author, String p_title, int p_start_page, int p_end_page) {
        m_title = p_title;
        m_author = p_author;
        m_start_page = p_start_page;
        m_end_page = p_end_page;
    }

    public int getNumberOfPages() {
        return m_end_page - m_start_page;
    }
    public void accept(LibraryVisitor visitor) {
        // (4) ;
        visitor.visit(this);
    }
}

class Book implements LibraryItemInterface {
    private String m_title; // 书名
    private String m_author; // 书作者
    private int m_pages; // 页教

    public Book(String p_author, String p_title,int p_ pages) {
        m_title = p_title;
        m_author = p_author;
        m_pages = p_pages;
    }
    public int getNumberOfPages() {
        return m_pages;
    }
    public void accept(LibraryVisitor visitor) {
        // (5) ;
        visitor.visit(this);
    }
}
```


@tab 🍐 25 ✅


```java
import java.util.*;

interface WebServiceMediator {
    // public (1) ;
    public void buy(double money, WebService service);

    public void SetAmazon(WebService amazon);
    public void SetEbay(WebService ebay);
}

abstract class WebService {
    // protected (2) mediator;
    protected WebServiceMediator mediator;

    public abstract void SetMediator(WebServiceMediator mediator);
    // public (3) ;
    public abstract void buyService(double money);

    public abstract void search(double money);
}

class ConcreteServiceMediator implements WebServiceMediator {
    private WebService amazon;
    private WebService ebay;
    public ConcreteServiceMediator() {
        amazon = null;
        ebay = null;
    }
    public void SetAmazon(WebService amazon) {
        this.amazon = amazon;
    }
    public void SetEbay(WebService ebay) {
        this.ebay = ebay;
    }
    public void buy(double money, WebService service) {
        if (service == amazon)
            amazon.search(money);
        else
            ebay.search(money);
    }
}

class Amazon extends WebService {
    public void SetMediator(WebServiceMediator mediator) {
        this.mediator = mediator;
    }
    public void buyService(double money) {
        // (4) ;
        mediator.buy(money, this);
    }
    public void search(double money) {
        System.out.println("Amazon receive：" + money);
    }
}

class Ebay extends WebService {
    public void SetMediator(WebServiceMediator mediator) {
        this.mediator = mediator;
    }
    public void buyService(double money) {
        // (5) ;
        mediator.buy(money, this);
    }
    public void search(double money) {
        System.out.println("Esbay receive：" + money);
    }
}
```



@tab 🍐 26 ✅❗️


```java
import java.util.*;

class Memento {
    private String state;
    public Memento(String state) {
        this.state = state;
    }
    public String getState() {
        return state;
    }
}

class Originator {
    private String state;
    public void setState(String state) {
        this.state = state;
    }
    public String getState() {
        return state;
    }
    public Memento saveStateToMemento() {
        // return (1) ;
        return new Memento(state);
        // 或 （this.state） 或 （getState()） 均可
    }
    public void getStateFromMemento(Memento Memento) {
        // state = (2) ;
        state = Memento.getState();
    }
}

class CareTaker {
    private List<Memento> mementoList = new ArrayList<Memento>();
    // public (3) {
    public void add(Memento state) { // 注意，方法内是将 state 加入 mementoList 中，所以类型是 Memento 而非 String
        mementoList.add(state);
    }
    // public (4) {
    public Memento get(int index) {
        return mementoList.get(index);
    }
}

class MementoPaneDemos {
    public static void main(String[] args) {
    Originator originator = new Originator();
    CareTaker careTaker = new CareTaker();

    originator.setState("State #1");
    originator.setState("State #2");
    // careTaker.add( (5) ); ❗️
    careTaker.add(originator.saveStateToMemento());

    originator.setState("State #3");
    // careTaker.add( (6) ); ❗️
    careTaker.add(originator.saveStateToMemento());

    originator.setState("State #4");

    System.out.println("Current State：" + originator.getState());
    originator.getStateFromMemento(careTaker.get(0));
    System.out.println("First saved State：" + originator.getState());
    originator.getStateFromMemento(careTaker.get(1));
    System.out.println("Second saved State：" + originator.getState());
    }
}
```


@tab 🍐 27 ✅



```java
import java.util.*;

interface Patient {
    // (1) ;
    public String getName();
}

interface Disposer {
    // (2) ;
    public void dispose(Patient patient);
}

class Registry implements Disposer { // 挂号
    public void dispose(Patient patient) {
        System.out.println("I am registering..." + patient.getName());
    }
}

class Doctor implements Disposer { // 医生门诊
    public void dispose(Patient patient) {
        System.out.println("I am diagnosing..." + patient.getName());
    }
}
class Pharmacy implements Disposer { // 取药
    public void dispose(Patient patient) {
        System.out.println("I am giving medicine... " + patient.getName());
    }
}

class Facade {
    private Patient patient;
    public Facade(Patient patient) {
        this.patient = patient;
    }
    void dispose() {
        Registry registry = new Registry();
        Doctor doctor = new Doctor();
        Pharmacy pharmacy = new Pharmacy();

        registry.dispose(patient);
        doctor.dispose(patient);
        pharmacy.dispose(patient);
    }
}

class ConcretePatient implements Patient {
    private String name;
    public ConcretePatient(String name) {
        this.name = name;
    }
    public String getName() {
        return name;
    }
}

public class FacadeTest {
    public static void main(String[] args) {
        // Patient patient = (3) ;
        Patient patient = new ConcretePatient("xxxx");
        // (4) f = (5) ;
        Facade f = new Facade(patient);
        // (6) ;
        f.dispose();
    }
}
```

@tab 🍐 28 ✅


```java
enum TYPE{
    COMMA,
    DOTS,
    LINE
}

interface PrintStrategy{
    // public (1) ;
    public void doPrint(Interval val);
}

class Interval{
    private double lower;
    private double upper;
    public Interval(double lower, double upper){
        this.lower = lower;
        this.upper = upper;
    }
    public double getLower(){return lower;}
    public double getUpper(){return upper;}
    public void printIntervals(PrintStrategy ptr){
        // (2) ;
        ptr.doPrint(this);
    }
}

class PrintIntervalsComma implements PrintStrategy{
    public void doPrint(Interval val){
        System.out.println("[" + val.getLower() + "," + val.getUpper() + "]");
    }
}
class PrintIntervalsDots implements PrintStrategy{
    public void doPrint(Interval val){
        System.out.println("[" + val.getLower() + "..." + val.getUpper() + "]");
    }
}

class PrintIntervalsLine implements PrintStrategy{
    public void doPrint(Interval val){
        System.out.println("[" + val.getLower() + "-" + val.getUpper() + "]");
    }
}
public class Main{
    public static PrintStrategy getStrategy(TYPE type){
        PrintStrategy st = null;
        switch(type){
            case COMMA:
                // (3) ;
                st = new PrintIntervalsComma();
                break;
            case DOTS:
                // (4) ;
                st = new PrintIntervalsDots();
                break;
            case LINE:
                // (5) ;
                st = new PrintIntervalsLine();
                break;
        }
        return st;
    }
    public static void main(String[] args){
        Interval a = new Interval(1.7, 2.1);
        a.printIntervals(getStrategy(TYPE.COMMA));
        a.printIntervals(getStrategy(TYPE.DOTS));
        a.printIntervals(getStrategy(TYPE.LINE));
    }
}
```


::::

