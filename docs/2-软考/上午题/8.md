---
title: 8-è®¾è®¡æ¨¡å¼ â‘© âœ…
sidebarDepth: 1
category: è½¯è€ƒç¬”è®°
tag: è½¯è€ƒ
---

::: details ç›®å½•
[[toc]]
:::



## ğŸ€ è®¾è®¡æ¨¡å¼çš„è¦ç´ 

è®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒåœ¨äºæä¾›äº†ç›¸å…³é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œä½¿å¾—äººä»¬å¯ä»¥æ›´åŠ ç®€å•æ–¹ä¾¿åœ° **å¤ç”¨æˆåŠŸçš„è®¾è®¡å’Œä½“ç³»ç»“æ„**ã€‚

è®¾è®¡æ¨¡å¼åŸºæœ¬è¦ç´ ï¼š

- æ¨¡å¼åç§°ï¼ˆPattern Nameï¼‰
- é—®é¢˜ï¼ˆProblemï¼‰
- è§£å†³æ–¹æ¡ˆï¼ˆSolutionï¼‰
- æ•ˆæœï¼ˆConsequencesï¼‰

![](./assets/image-20230417151608470.png =800x)




## ğŸ€ åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼ˆ5 ç§ï¼‰


:::: tabs

@tab 0

### Simple Factoryï¼ˆç®€å•å·¥å‚ï¼‰

::: tip åˆ›å»ºå¯¹è±¡ä¸å¯¹å¤–æš´éœ²ç»†èŠ‚
:::


- ç®€å•å·¥å‚æ¨¡å¼å±åˆ›å»ºå‹æ¨¡å¼ï¼Œ~~ä½†ä¸å±äº 23 ç§è®¾è®¡æ¨¡å¼ä¹‹ä¸€~~ã€‚

#### ï¼ˆ1ï¼‰æ„å›¾

åœ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ä¸å‘å®¢æˆ·æš´éœ²å†…éƒ¨ç»†èŠ‚ï¼Œå¹¶æä¾›ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„é€šç”¨æ¥å£ã€‚

> - å®šä¹‰ï¼šå®šä¹‰ä¸€ä¸ªå·¥å‚ç±»ï¼Œä»–å¯ä»¥æ ¹æ®å‚æ•°çš„ä¸åŒè¿”å›ä¸åŒç±»çš„å®ä¾‹ï¼Œè¢«åˆ›å»ºçš„å®ä¾‹é€šå¸¸éƒ½å…·æœ‰å…±åŒçš„çˆ¶ç±»ã€‚åœ¨ç®€å•å·¥å‚æ¨¡å¼ä¸­ç”¨äºè¢«åˆ›å»ºå®ä¾‹çš„æ–¹æ³•é€šå¸¸ä¸ºé™æ€ (static) æ–¹æ³•ï¼Œå› æ­¤ç®€å•å·¥å‚æ¨¡å¼åˆè¢«æˆä¸ºé™æ€å·¥å‚æ–¹æ³•
> - *ç®€å•å·¥å‚æ¨¡å¼è¿åäº†å¼€æ”¾å°é—­åŸåˆ™ï¼Œå³å¯¹æ‰©å±•å¼€æ”¾å¯¹ä¿®æ”¹ä¹Ÿå¼€æ”¾*ã€‚


#### ï¼ˆ2ï¼‰ç±»å›¾

![ç®€å•å·¥å‚](./assets/image-20240430091347439.png =500x)

<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java {13,19-21,23-24}
public class SimpleFactory {
    public static void main(String[] args) {
        Product productA = Factory.createProduct("A");
        productA.info();
 
        Product productB = Factory.createProduct("B");
        productB.info();
 
    }
}
 
class Factory{
    public static Product createProduct(String type){
        Product product = null;
 
        switch (type){
            case "A":
                product = new ProductA();
                break;
            case "B":
                product = new ProductB();
                break;
            default:
                System.out.println("æ²¡æœ‰ " + type + " ç±»å‹çš„äº§å“ï¼");
                return null;
        }
        return product;
    }
}
 
abstract class Product{
    public abstract void info();
}
 
class ProductA extends Product{
 
    @Override
    public void info() {
        System.out.println("äº§å“çš„ä¿¡æ¯ï¼šA");
    }
}
 
class ProductB extends Product{
 
    @Override
    public void info() {
        System.out.println("äº§å“çš„ä¿¡æ¯ï¼šB");
    }
}
```

</details>


@tab 1

### 1. Factory Methodï¼ˆå·¥å‚æ–¹æ³•ï¼‰

> åˆ›å»ºå‹**ç±»**æ¨¡å¼

::: tip å®šä¹‰åˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œå­ç±»è¿›è¡Œå®ä¾‹åŒ–
:::


#### ï¼ˆ1ï¼‰æ„å›¾

å®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸ªç±»ã€‚*Factory Method æŠŠå®ä¾‹åŒ–æ“ä½œå»¶è¿Ÿåˆ°å­ç±»ã€‚*

#### ï¼ˆ2ï¼‰ç±»å›¾  

![å·¥å‚æ–¹æ³•](./assets/image-20240430094024755.png =500x)

#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

å·¥å‚æ¨¡å¼é€‚ç”¨äº
- *å½“ä¸€ä¸ªç±»ä¸çŸ¥é“å®ƒæ‰€å¿…é¡»åˆ›å»ºçš„å¯¹è±¡çš„ç±»çš„æ—¶å€™*ã€‚ 
- å½“ä¸€ä¸ªç±»å¸Œæœ›ç”±å®ƒçš„å­ç±»æ¥æŒ‡å®šå®ƒæ‰€åˆ›å»ºçš„å¯¹è±¡çš„æ—¶å€™ã€‚ 
- å½“ç±»å°†åˆ›å»ºå¯¹è±¡çš„èŒè´£å§”æ‰˜ç»™å¤šä¸ªå¸®åŠ©å­ç±»ä¸­çš„æŸä¸€ä¸ªï¼Œå¹¶ä¸”ä½ å¸Œæœ›å°†å“ªä¸€ä¸ªå¸®åŠ©å­ç±»æ˜¯ä»£ç†è€…è¿™ä¸€ä¿¡æ¯å±€éƒ¨åŒ–çš„æ—¶å€™ã€‚â“


<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java {15-17,22-24,30-32}
public class FactoryMethod {
    public static void main(String[] args) {
        
        Factory factoryA = new FactoryA();
        Product productA = factoryA.createProduct();
        productA.info();
 
        Factory factoryB = new FactoryB();
        Product productB = factoryB.createProduct();
        productB.info();
 
    }
}
 
interface Factory{
   Product createProduct();
}
 
class FactoryA implements Factory{
 
    @Override
    public Product createProduct() {
        return new ProductA();
    }
}
 
class FactoryB implements Factory{
 
    @Override
    public Product createProduct() {
        return new ProductB();
    }
}
 
interface Product{
    void info();
}
 
class ProductA implements Product{
 
    @Override
    public void info() {
        System.out.println("äº§å“çš„ä¿¡æ¯ï¼šA");
    }
}
 
class ProductB implements Product{
 
    @Override
    public void info() {
        System.out.println("äº§å“çš„ä¿¡æ¯ï¼šB");
    }
}
```

</details>

@tab 2


### 2. Abstract Factoryï¼ˆæŠ½è±¡å·¥å‚ï¼‰

::: tip åˆ›å»ºä¸€ç³»åˆ—å¯¹è±¡
:::


#### ï¼ˆ1ï¼‰æ„å›¾

æä¾›ä¸€ä¸ªåˆ›å»º**ä¸€ç³»åˆ—**ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— é¡»æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚

> æä¾›ä¸€ä¸ªæ¥å£ï¼Œç”¨äºåˆ›å»º *ç›¸å…³çš„å¯¹è±¡å®¶æ—* 

#### ï¼ˆ2ï¼‰ç±»å›¾

![æŠ½è±¡å·¥å‚](./assets/image-20240430095030350.png =800x)

#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Abstract Factory æ¨¡å¼é€‚ç”¨äº
- ä¸€ä¸ªç³»ç»Ÿè¦ç‹¬ç«‹äºå®ƒçš„äº§å“çš„åˆ›å»ºã€**ç»„åˆ**å’Œè¡¨ç¤ºæ—¶ã€‚
- ä¸€ä¸ªç³»ç»Ÿè¦ç”±å¤šä¸ªäº§å“ç³»åˆ—ä¸­çš„ä¸€ä¸ªæ¥é…ç½®æ—¶ã€‚
- å½“è¦å¼ºè°ƒä¸€ç³»åˆ—ç›¸å…³çš„äº§å“å¯¹è±¡çš„è®¾è®¡ä»¥ä¾¿è¿›è¡Œè”åˆä½¿ç”¨æ—¶ã€‚
- å½“æä¾›ä¸€ä¸ªäº§å“ç±»åº“ï¼Œåªæƒ³æ˜¾ç¤ºå®ƒä»¬çš„æ¥å£è€Œä¸æ˜¯å®ç°æ—¶ã€‚

<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java {21-22,26,30,35,43,48,39}
public class AbstractFactory {
 
    public static void main(String[] args) {
        Factory factory1 = new Factory1();
        ProductA productA1 = factory1.createProductA();
        productA1.info();
        ProductB productB1 = factory1.createProductB();
        productB1.info();
 
        Factory factory2 = new Factory2();
        ProductA productA2 = factory2.createProductA();
        productA2.info();
        ProductB productB2 = factory2.createProductB();
        productB2.info();
 
    }
}
 
// å£°æ˜ä¸€ä¸ªåˆ›å»ºæŠ½è±¡äº§å“å¯¹è±¡çš„æ“ä½œæ¥å£
interface Factory{
   ProductA createProductA();
   ProductB createProductB();
}
 
// å®ç°åˆ›å»ºå…·ä½“äº§å“å¯¹è±¡çš„æ“ä½œ
class Factory1 implements Factory{
 
    @Override
    public ProductA createProductA() {
        return new ProductA1();
    }
 
    @Override
    public ProductB createProductB() {
        return new ProductB1();
    }
}
 
class Factory2 implements Factory{
 
    @Override
    public ProductA createProductA() {
        return new ProductA2();
    }
 
    @Override
    public ProductB createProductB() {
        return new ProductB2();
    }
}
 
// ä¸ºä¸€ç±»äº§å“å¯¹è±¡å£°æ˜ä¸€ä¸ªæ¥å£
interface ProductA{
    void info();
}
 
interface ProductB{
    void info();
}
 
// å®šä¹‰ä¸€å°†è¢«ç›¸åº”çš„å…·ä½“å·¥å‚åˆ›å»ºçš„äº§å“å¯¹è±¡
class ProductA1 implements ProductA{
 
    @Override
    public void info() {
        System.out.println("äº§å“çš„ä¿¡æ¯ï¼šA1");
    }
}
 
class ProductA2 implements ProductA{
 
    @Override
    public void info() {
        System.out.println("äº§å“çš„ä¿¡æ¯ï¼šA2");
    }
}
 
class ProductB1 implements ProductB{
 
    @Override
    public void info() {
        System.out.println("äº§å“çš„ä¿¡æ¯ï¼šB1");
    }
}
 
class ProductB2 implements ProductB{
 
    @Override
    public void info() {
        System.out.println("äº§å“çš„ä¿¡æ¯ï¼šB2");
    }
}
```

</details>


@tab 3

### 3. Builderï¼ˆç”Ÿæˆå™¨/å»ºé€ è€…ï¼‰

::: tip æ„å»ºå¤æ‚å¯¹è±¡ï¼šç±»ä¼¼äºç»„è£…
:::


#### ï¼ˆ1ï¼‰æ„å›¾

å°†ä¸€ä¸ª**å¤æ‚å¯¹è±¡**çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„**æ„å»ºè¿‡ç¨‹**å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚

> å°è£…ä¸€ä¸ªå¯¹è±¡çš„æ„é€ è¿‡ç¨‹ï¼Œå¹¶å…è®¸æŒ‰æ­¥éª¤æ„é€ ã€‚

#### ï¼ˆ2ï¼‰ç±»å›¾  

![ç”Ÿæˆå™¨](./assets/image-20230414134325945.png =800x)

#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Builder æ¨¡å¼é€‚ç”¨äº
- å½“åˆ›å»ºå¤æ‚å¯¹è±¡çš„ç®—æ³•åº”è¯¥ç‹¬ç«‹äºè¯¥å¯¹è±¡çš„ç»„æˆéƒ¨åˆ†ä»¥åŠå®ƒä»¬çš„è£…é…æ–¹å¼æ—¶ã€‚
- å½“æ„é€ è¿‡ç¨‹å¿…é¡»å…è®¸è¢«æ„é€ çš„å¯¹è±¡æœ‰ä¸åŒçš„è¡¨ç¤ºæ—¶ã€‚


> å¯ä»¥å°† Builder ç†è§£ä¸ºä¸€ä¸ªæŠ½è±¡å¥—é¤ï¼ŒConcreteBuilder ä¸ºä¸€ä¸ªå…·ä½“å¥—é¤

<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java {18-20,24-25,68,70-72}
public class Main {
    public static void main(String[] args) {
        Director director = new Director();
 
        Builder builder1 = new Builder1();
        director.Construct(builder1);
        Product product1 = builder1.getResult();
        product1.show();
 
        Builder builder2 = new Builder2();
        director.Construct(builder2);
        Product product2 = builder2.getResult();
        product2.show();
    }
}
 
class Director{
    public void Construct(Builder builder){
        builder.BuildPart();
    }
}

abstract class Builder{
    public abstract void BuildPart();
    public abstract Product getResult();
}
 
class Builder1 extends Builder{
 
    Product product = new Product();
 
    @Override
    public void BuildPart() {
        product.add("A");
        product.add("B");
        product.add("C");
        product.add("D");
        product.add("E");
        product.add("F");
    }
 
    @Override
    public Product getResult() {
 
        return product;
    }
}
 
class Builder2 extends Builder{
 
    Product product = new Product();
 
    @Override
    public void BuildPart() {
        product.add("A");
        product.add("B");
        product.add("C");
    }
 
    @Override
    public Product getResult() {
 
        return product;
    }
}
 
class Product{
    List<String> parts = new ArrayList<String>();
 
    public void add(String part){
        parts.add(part);
    }
 
    public void show(){
        System.out.print("äº§å“çš„ç»„æˆï¼š");
        for (String part : parts) {
            System.out.print(part + " ");
        }
        System.out.println();
    }
}
```

</details>


@tab 4

### 4. Prototypeï¼ˆåŸå‹ï¼‰

::: tip å¤åˆ¶
:::

#### ï¼ˆ1ï¼‰æ„å›¾

ç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç±»å‹ï¼Œå¹¶ä¸”é€šè¿‡**å¤åˆ¶**è¿™äº›åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚

#### ï¼ˆ2ï¼‰ç±»å›¾  

![åŸå‹](./assets/image-20240430104802365.png =800x)

- Prototype å£°æ˜ä¸€ä¸ªå¤åˆ¶è‡ªèº«çš„æ¥å£ã€‚
- ConcretePrototype å®ç°ä¸€ä¸ªå¤åˆ¶è‡ªèº«çš„æ“ä½œã€‚
- Client è®©ä¸€ä¸ªåŸå‹å¤åˆ¶è‡ªèº«ä»è€Œåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡

#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Prototype æ¨¡å¼é€‚ç”¨äº
- å½“ä¸€ä¸ªç³»ç»Ÿåº”è¯¥ç‹¬ç«‹äºå®ƒçš„äº§å“åˆ›å»ºã€**æ„æˆ**å’Œè¡¨ç¤ºæ—¶ã€‚
- å½“è¦å®ä¾‹åŒ–çš„ç±»æ˜¯åœ¨è¿è¡Œæ—¶åˆ»æŒ‡å®šæ—¶ï¼Œä¾‹å¦‚ï¼Œé€šè¿‡åŠ¨æ€è£…è½½ã€‚
- ä¸ºäº†é¿å…åˆ›å»ºä¸€ä¸ªä¸äº§å“ç±»å±‚æ¬¡å¹³è¡Œçš„å·¥å‚ç±»å±‚æ¬¡æ—¶ã€‚
- å½“ä¸€ä¸ªç±»çš„å®ä¾‹åªèƒ½æœ‰å‡ ä¸ªä¸åŒçŠ¶æ€ç»„åˆä¸­çš„ä¸€ç§æ—¶ã€‚å»ºç«‹ç›¸åº”æ•°ç›®çš„åŸå‹å¹¶å…‹éš†å®ƒä»¬ï¼Œå¯èƒ½æ¯”æ¯æ¬¡ç”¨åˆé€‚çš„çŠ¶æ€æ‰‹å·¥å®ä¾‹åŒ–è¯¥ç±»æ›´æ–¹ä¾¿ä¸€äº›ã€‚

<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java {13,37-43}
public class Main {
    public static void main(String[] args) {
        Product product1 = new Product(2022,5.28);
        System.out.println(product1.getId()+ " " + product1.getPrice());
 
        Product product2 = (Product) product1.Chlone();
        System.out.println(product2.getId()+ " " + product2.getPrice());
 
    }
}
 
interface Prototype{
    Object Clone();
}
 
class Product implements Prototype{
 
    private int id;
    private double price;
 
    public Product(){}
 
    public Product(int id,double price){
        this.id = id;
        this.price = price;
    }
 
    public int getId() {
        return id;
    }
 
    public double getPrice() {
        return price;
    }
 
    @Override
    public Object Clone() {
        Product object = new Product();
        object.id = this.id;
        object.price = this.price;
 
        return object;
    }
}
```

</details>

@tab 5

### 5. Singletonï¼ˆå•ä¾‹ï¼‰

::: tip ä»…æœ‰ä¸€ä¸ªå®ä¾‹
:::


#### ï¼ˆ1ï¼‰æ„å›¾

ä¿è¯ä¸€ä¸ªç±»**ä»…æœ‰**ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„**å…¨å±€è®¿é—®ç‚¹**ã€‚

#### ï¼ˆ2ï¼‰ç±»å›¾  

![](./assets/image-20230414153516687.png =800x)

- å…¶ä¸­ï¼šSingleton æŒ‡å®šä¸€ä¸ª Instance æ“ä½œï¼Œå…è®¸å®¢æˆ·è®¿é—®å®ƒçš„å”¯ä¸€å®ä¾‹ï¼ŒInstance æ˜¯ä¸€ä¸ªç±»
- æ“ä½œï¼šå¯èƒ½è´Ÿè´£åˆ›å»ºå®ƒè‡ªå·±çš„å”¯ä¸€å®ä¾‹ã€‚

#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Singleton æ¨¡å¼é€‚ç”¨äºï¼š
- å½“ç±»åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹è€Œä¸”å®¢æˆ·å¯ä»¥ä»ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„è®¿é—®ç‚¹è®¿é—®å®ƒæ—¶ã€‚
- å½“è¿™ä¸ªå”¯ä¸€å®ä¾‹åº”è¯¥æ˜¯é€šè¿‡å­ç±»åŒ–å¯æ‰©å±•çš„ï¼Œå¹¶ä¸”å®¢æˆ·æ— é¡»æ›´æ”¹ä»£ç å°±èƒ½ä½¿ç”¨ä¸€ä¸ªæ‰©å±•çš„å®ä¾‹æ—¶ã€‚

<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java {14,16,18-20}
public class SingletonPattern {
    public static void main(String[] args) {
        Singleton instance1 = Singleton.getInstance();
        Singleton instance2 = Singleton.getInstance();
        Singleton instance3 = Singleton.getInstance();
 
        System.out.println("instance1: " + instance1);
        System.out.println("instance2: " + instance2);
        System.out.println("instance3: " + instance3);
    }
}
 
class Singleton {
    private static Singleton instance = new Singleton();
 
    private Singleton(){};
 
    public static Singleton getInstance(){
        return instance;
    }
}
```

![](./assets/image-20230414154430890.png =500x)

</details>


::::



## ğŸ€ ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼ˆ7 ç§ï¼‰

:::: tabs

@tab 1

### ğŸŒ¸ 1. Adapterï¼ˆé€‚é…å™¨ï¼‰

::: tip æ¥å£é€‚é…
:::

#### ï¼ˆ1ï¼‰æ„å›¾

å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå¦ä¸€ä¸ªç”¨æˆ·éœ€è¦çš„æ¥å£ã€‚

![](./assets/3d5b828e-5c4d-48d8-a440-281e4a8e1c92.png)

Adapter æ¨¡å¼ä½¿å¾—åŸæœ¬ç”±äº**æ¥å£ä¸å…¼å®¹**è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚

#### ï¼ˆ2ï¼‰ç±»å›¾    


![é€‚é…å™¨ç±»æ¨¡å¼ï¼ˆäº†è§£ï¼‰](./assets/image-20240430110220613.png =800x)

![é€‚é…å™¨å¯¹è±¡æ¨¡å¼](./assets/image-20240430110413021.png =800x)    

å…¶ä¸­ï¼š
- Target å®šä¹‰ Client ä½¿ç”¨çš„ä¸ç‰¹å®šé¢†åŸŸç›¸å…³çš„æ¥å£ã€‚
- Client ä¸ç¬¦åˆ Target æ¥å£çš„å¯¹è±¡ååŒã€‚
- Adaptee å®šä¹‰ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£éœ€è¦é€‚é…ã€‚
- Adapter å¯¹ Adaptee çš„æ¥å£ä¸ Target æ¥å£è¿›è¡Œé€‚é…ã€‚

#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Adapter æ¨¡å¼é€‚ç”¨äº
- *æƒ³ä½¿ç”¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ç±»ï¼Œè€Œå®ƒçš„æ¥å£ä¸ç¬¦åˆè¦æ±‚ã€‚*
- æƒ³åˆ›å»ºä¸€ä¸ªå¯ä»¥å¤ç”¨çš„ç±»ï¼Œè¯¥ç±»å¯ä»¥ä¸å…¶ä»–ä¸ç›¸å…³çš„ç±»æˆ–ä¸å¯é¢„è§çš„ç±»ï¼ˆå³é‚£äº›æ¥å£å¯èƒ½ä¸ä¸€å®šå…¼å®¹çš„ç±»ï¼‰ååŒå·¥ä½œã€‚ï¼ˆäº†è§£ï¼‰
- (ä»…é€‚ç”¨äºå¯¹è±¡ Adapter) æƒ³ä½¿ç”¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å­ç±»ï¼Œä½†æ˜¯ä¸å¯èƒ½å¯¹æ¯ä¸€ä¸ªéƒ½è¿›è¡Œå­ç±»åŒ–ä»¥åŒ¹é…å®ƒä»¬çš„æ¥å£ã€‚å¯¹è±¡é€‚é…å™¨å¯ä»¥é€‚é…å®ƒçš„çˆ¶ç±»æ¥å£ã€‚ï¼ˆäº†è§£ï¼‰



<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java {14-20}
public class AdapterPattern {
    public static void main(String[] args) {
        Target target = new Adapter();
        target.Request();
    }
}
 
class Target{
    public void Request(){
        System.out.println("æ™®é€šè¯·æ±‚~");
    }
}

class Adapter extends Target {
    private Adaptee adaptee = new Adaptee();
    @Override
    public void Request() {
        adaptee.SpecificRequest();
    }
}
 
class Adaptee{
    public void SpecificRequest(){
        System.out.println("ç‰¹æ®Šè¯·æ±‚~");
    }
}
```

</details>


@tab 2

### ğŸŒ¸ 2. Bridgeï¼ˆæ¡¥æ¥ï¼‰

::: tip æŠ½è±¡ä¸å®ç°åˆ†ç¦»
:::

#### ï¼ˆ1ï¼‰æ„å›¾

å°†æŠ½è±¡éƒ¨åˆ†ä¸å…¶å®ç°éƒ¨åˆ†**åˆ†ç¦»**ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥*ç‹¬ç«‹åœ°å˜åŒ–*ã€‚

#### ï¼ˆ2ï¼‰ç±»å›¾

![æ¡¥æ¥](./assets/image-20230414163901596.png =800x)

#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

- ä¸å¸Œæœ›åœ¨æŠ½è±¡å’Œå®ƒçš„å®ç°éƒ¨åˆ†ä¹‹é—´æœ‰ä¸€ä¸ªå›ºå®šçš„ç»‘å®šå…³ç³»ã€‚
- ç±»çš„æŠ½è±¡ä»¥åŠå®ƒçš„å®ç°éƒ½åº”è¯¥å¯ä»¥é€šè¿‡ç”Ÿæˆå­ç±»çš„æ–¹æ³•åŠ ä»¥æ‰©å……ã€‚
- å¯¹ä¸€ä¸ªæŠ½è±¡çš„å®ç°éƒ¨åˆ†çš„ä¿®æ”¹åº”å¯¹å®¢æˆ·ä¸äº§ç”Ÿå½±å“ï¼Œå³å®¢æˆ·ä»£ç ä¸å¿…é‡æ–°ç¼–è¯‘ã€‚(C++) æƒ³å¯¹å®¢æˆ·å®Œå…¨éšè—æŠ½è±¡çš„å®ç°éƒ¨åˆ†ã€‚
- æœ‰è®¸å¤šç±»è¦ç”Ÿæˆçš„ç±»å±‚æ¬¡ç»“æ„ã€‚
- æƒ³åœ¨å¤šä¸ªå¯¹è±¡é—´å…±äº«å®ç°ï¼ˆå¯èƒ½ä½¿ç”¨å¼•ç”¨è®¡æ•°ï¼‰ï¼Œä½†åŒæ—¶è¦æ±‚å®¢æˆ·å¹¶ä¸çŸ¥é“è¿™ä¸€ç‚¹ã€‚


<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java {34,38,44-46}
public class BridgePattern {
    public static void main(String[] args) {
        Product productA = new ProductA();
        Product productB = new ProductA();
 
        Color red = new Red();
        productA.setName("äº§å“A");
        productA.setColor(red);
        productA.Operation();
 
        Blue blue = new Blue();
        productB.setName("äº§å“B");
        productB.setColor(blue);
        productB.Operation();
    }
}
 
abstract class Product{
    private String name;
    protected Color color;
 
    public void setName(String name){
        this.name = name;
    }
 
    public String getName(){
        return name;
    }
 
    public void setColor(Color color){
        this.color = color;
    }
 
    public abstract void Operation();
}
 
interface Color{
    void OperationImpl(String name);
}
 
class ProductA extends Product{
 
    @Override
    public void Operation() {
        color.OperationImpl(this.getName());
    }
}
 
class Red implements Color{
 
    @Override
    public void OperationImpl(String name) {
        System.out.println(name + ": çº¢è‰²" );
    }
}
 
class Blue implements Color{
 
    @Override
    public void OperationImpl(String name) {
        System.out.println(name + ": è“è‰²" );
    }
}
```

</details>


@tab 3

### ğŸŒ¸ 3. Compositeï¼ˆç»„åˆï¼‰

::: tip éƒ¨åˆ†-æ•´ä½“
:::

#### ï¼ˆ1ï¼‰æ„å›¾

å°†å¯¹è±¡ç»„åˆæˆæ ‘å‹ç»“æ„ä»¥è¡¨ç¤º **â€œéƒ¨åˆ†-æ•´ä½“â€** çš„å±‚æ¬¡ç»“æ„ã€‚Composite ä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰**ä¸€è‡´æ€§**ã€‚
   
> ä¾‹å¦‚ï¼Œæ–‡ä»¶-æ–‡ä»¶å¤¹

#### ï¼ˆ2ï¼‰ç±»å›¾  

![ç»„åˆ](./assets/image-20240430135919199.png =800x)

å…¶ä¸­ï¼š  
- *Component* ä¸ºç»„åˆä¸­çš„å¯¹åƒ *å£°æ˜æ¥å£*ï¼šåœ¨é€‚å½“æƒ…å†µä¸‹å®ç°æ‰€æœ‰ç±»å…±æœ‰æ¥å£çš„é»˜è®¤è¡Œä¸ºï¼šå£°æ˜ä¸€ä¸ªæ¥å£ç”¨äºè®¿é—®å’Œç®¡ç† Component çš„å­ç»„ä»¶ï¼›ï¼ˆå¯é€‰ï¼‰åœ¨é€’å½’ç»“æ„ä¸­å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œç”¨äºè®¿é—®ä¸€ä¸ªçˆ¶ç»„ä»¶ï¼Œå¹¶åœ¨åˆé€‚çš„æƒ…å†µä¸‹å®ç°å®ƒã€‚
- *Leaf* åœ¨ç»„åˆä¸­è¡¨ç¤ºå¶ç»“ç‚¹å¯¹è±¡ï¼Œå¶ç»“ç‚¹æ²¡æœ‰å­ç»“ç‚¹ï¼›åœ¨ç»„åˆä¸­ *å®šä¹‰å›¾å…ƒå¯¹è±¡çš„è¡Œä¸º*ã€‚
- *Composite* *å®šä¹‰æœ‰å­ç»„ä»¶çš„é‚£äº›ç»„ä»¶çš„è¡Œä¸º*ï¼›å­˜å‚¨å­ç»„ä»¶ï¼›åœ¨ Component æ¥å£ä¸­å®ç°ä¸å­ç»„ä»¶æœ‰å…³çš„æ“ä½œã€‚
- *Client é€šè¿‡ Component æ¥å£æ“çºµç»„åˆç»„ä»¶çš„å¯¹è±¡*ã€‚

#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Composite æ¨¡å¼ä¸‹é€‚ç”¨äºï¼š
- æƒ³è¡¨ç¤ºå¯¹è±¡çš„ â€œéƒ¨åˆ†-æ•´ä½“â€ å±‚æ¬¡ç»“æ„ã€‚
- å¸Œæœ›ç”¨æˆ·å¿½ç•¥ç»„åˆå¯¹è±¡ä¸å•ä¸ªå¯¹è±¡çš„ä¸åŒï¼Œç”¨æˆ·å°†ç»Ÿä¸€åœ°ä½¿ç”¨ç»„åˆç»“æ„ä¸­çš„æ‰€æœ‰å¯¹è±¡ã€‚


<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java {28-29,33-35,46-48,72}
import java.util.*;

public class CompositePattern {
    public static void main(String[] args) {
        // çˆ¶ç±»å å¯¹è±¡å = new å­ç±»å();
        AbstractFile root = new Folder("root");
 
        AbstractFile folderA = new Folder("folderA");
        AbstractFile folderB = new Folder("folderB");
 
        AbstractFile fileC = new File("fileC");
        AbstractFile fileD = new File("fileD");
        AbstractFile fileE = new File("fileE");
 
        root.Add(folderA);
        root.Add(folderB);
        root.Add(fileC);
 
        folderA.Add(fileD);
        folderA.Add(fileE);
 
        print(root);
    }
 
    static void print(AbstractFile file){
        file.printName();
 
        List<AbstractFile> childrenList = file.getChildren();
        if (childrenList == null){
            return;
        }
 
        for (AbstractFile children : childrenList) {
            print(children);
        }
    }
}
 
abstract class AbstractFile{
    protected String name;
 
    public void printName(){
        System.out.println(name);
    }
 
    public abstract boolean Add(AbstractFile file);
    public abstract boolean Remove(AbstractFile file);
    public abstract List<AbstractFile> getChildren();
 
}
 
class Folder extends AbstractFile {
 
    private List<AbstractFile> childrenList = new ArrayList<>();
 
    public Folder(String name) {
        this.name = name;
    }
 
    @Override
    public boolean Add(AbstractFile file) {
        return childrenList.add(file);
    }
 
    @Override
    public boolean Remove(AbstractFile file) {
        return childrenList.remove(file);
    }
 
    @Override
    public List<AbstractFile> getChildren() {
        return childrenList;
    }
}
 
class File extends AbstractFile{
    public File(String name) {
        this.name = name;
    }
 
    @Override
    public boolean Add(AbstractFile filei) {
        return false;
    }
 
    @Override
    public boolean Remove(AbstractFile file) {
        return false;
    }
 
    @Override
    public List<AbstractFile> getChildren() {
        return null;
    }
}
```

</details>

@tab 4


### 4. Decoratorï¼ˆè£…é¥°ï¼‰

::: tip ä¸ºå¯¹è±¡åŠ¨æ€æ·»åŠ åŠŸèƒ½
:::

#### ï¼ˆ1ï¼‰æ„å›¾

åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›*é¢å¤–çš„èŒè´£*ã€‚å°±å¢åŠ åŠŸèƒ½è€Œè¨€ï¼ŒDecorator æ¨¡å¼æ¯”ç”Ÿæˆå­ç±»æ›´åŠ çµæ´»ã€‚

#### ï¼ˆ2ï¼‰ç±»å›¾  

![è£…é¥°](./assets/image-20240430145021730.png =800x)  

å…¶ä¸­ï¼š  
- Component å®šä¹‰ä¸€ä¸ªå¯¹è±¡æ¥å£ï¼Œå¯ä»¥ç»™è¿™äº›å¯¹è±¡åŠ¨æ€åœ°æ·»åŠ èŒè´£ã€‚
- ConcreteComponent å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥ç»™è¿™ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›èŒè´£ã€‚
- Decorator ç»´æŒä¸€ä¸ªæŒ‡å‘ Component å¯¹è±¡çš„æŒ‡é’ˆï¼Œå¹¶å®šä¹‰ä¸€ä¸ªä¸ Component æ¥å£ä¸€è‡´çš„æ¥å£ã€‚
- ConcreteDecorator å‘ç»„ä»¶æ·»åŠ èŒè´£ã€‚

#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Decorator æ¨¡å¼é€‚ç”¨äºï¼š

- åœ¨ä¸å½±å“å…¶ä»–å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œä»¥åŠ¨æ€ã€é€æ˜çš„æ–¹å¼ç»™å•ä¸ªå¯¹è±¡æ·»åŠ èŒè´£ã€‚
- å¤„ç†é‚£äº›å¯ä»¥æ’¤é”€çš„èŒè´£ã€‚
- å½“ä¸èƒ½é‡‡ç”¨ç”Ÿæˆå­ç±»çš„æ–¹å¼è¿›è¡Œæ‰©å……æ—¶ã€‚ä¸€ç§æƒ…å†µæ˜¯ï¼Œå¯èƒ½æœ‰å¤§é‡ç‹¬ç«‹çš„æ‰©å±•ï¼Œä¸ºæ”¯æŒæ¯ä¸€ç§ç»„åˆå°†äº§ç”Ÿå¤§é‡çš„å­ç±»ï¼Œä½¿å¾—å­ç±»æ•°ç›®å‘ˆçˆ†ç‚¸æ€§å¢é•¿ã€‚å¦ä¸€ç§æƒ…å†µå¯èƒ½æ˜¯ï¼Œç”±äºç±»å®šä¹‰è¢«éšè—ï¼Œæˆ–ç±»å®šä¹‰ä¸èƒ½ç”¨äºç”Ÿæˆå­ç±»ã€‚ï¼ˆäº†è§£ï¼‰


<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java {4-5,11,17,21,33}
public class DecoratorPattern {
    public static void main(String[] args) {
        Person zhangsan = new Student("å¼ ä¸‰");
        zhangsan = new DecoratorA(zhangsan);
        zhangsan = new DecoratorB(zhangsan);
        zhangsan.Operation();
 
        System.out.println("==========åˆ†å‰²çº¿==============");
 
        // å¯¹åƒé“¾
        Person lisi = new DecoratorB(new DecoratorA(new Student("æå››")));
        lisi.Operation();
 
    }
}
 
abstract class Decorator extends Person{
    protected Person person;
}
 
class DecoratorA extends Decorator{
    public DecoratorA(Person person){
        this.person = person;
    }
 
    @Override
    public void Operation() { // èŒè´£
        person.Operation(); // åŸæœ¬çš„èŒè´£
        System.out.println("å†™ä½œä¸š~");
    }
}
 
class DecoratorB extends Decorator{
    public DecoratorB(Person person){
        this.person = person;
    }
 
    @Override
    public void Operation() { // èŒè´£
        person.Operation(); // åŸæœ¬çš„èŒè´£
        System.out.println("è€ƒè¯•~");
    }
}
 
abstract class Person{
    protected String name;
 
    public abstract void Operation(); // èŒè´£
 
}
 
class Student extends Person{
    public Student(String name){
        this.name = name;
    }
 
    @Override
    public void Operation() {
        System.out.println(name + "çš„èŒè´£ï¼šå­¦ä¹ ~");
    }
}
```

</details>


@tab 5


### 5. Facadeï¼ˆå¤–è§‚ï¼‰

::: tip æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£æ¥è®¿é—®å­ç³»ç»Ÿä¸­çš„ä¸€ç¾¤æ¥å£
:::

#### ï¼ˆ1ï¼‰æ„å›¾

ä¸º**å­ç³»ç»Ÿ**ä¸­çš„**ä¸€ç»„æ¥å£**æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼ŒFacade æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚

#### ï¼ˆ2ï¼‰ç±»å›¾

![](./assets/image-20230415135923577.png =800x)

å…¶ä¸­ï¼š
- Facade çŸ¥é“å“ªäº›å­ç³»ç»Ÿç±»è´Ÿè´£å¤„ç†è¯·æ±‚ï¼›å°†å®¢æˆ·çš„è¯·æ±‚ä»£ç†ç»™é€‚å½“çš„å­ç³»ç»Ÿå¯¹è±¡ã€‚
- Subsystem classes å®ç°å­ç³»ç»Ÿçš„åŠŸèƒ½ï¼›å¤„ç†æœ‰ Facade å¯¹è±¡æŒ‡æ´¾çš„ä»»åŠ¡ï¼›æ²¡æœ‰ Facade çš„ä»»ä½•ç›¸å…³ä¿¡æ¯ï¼Œå³æ²¡æœ‰æŒ‡å‘ Facade çš„æŒ‡é’ˆã€‚

#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Facade æ¨¡å¼é€‚ç”¨äº
- *è¦ä¸ºä¸€ä¸ªå¤æ‚å­ç³»ç»Ÿæä¾›ä¸€ä¸ªç®€å•æ¥å£æ—¶*ã€‚
- å®¢æˆ·ç¨‹åºä¸æŠ½è±¡ç±»çš„å®ç°éƒ¨åˆ†ä¹‹é—´å­˜åœ¨ç€å¾ˆå¤§çš„ä¾èµ–æ€§ã€‚
- å½“éœ€è¦æ„å»ºä¸€ä¸ªå±‚æ¬¡ç»“æ„çš„å­ç³»ç»Ÿæ—¶ï¼Œä½¿ç”¨ Facade æ¨¡å¼å®šä¹‰å­ç³»ç»Ÿä¸­æ¯å±‚çš„å…¥å£ç‚¹ã€‚



<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java {19-21}
import java.util.Scanner;

public class FacadePattern {
    public static void main(String[] args) {
        Facade facade = new Facade();
 
        facade.methodA();
        facade.methodB();
        facade.methodC();
    }
}
 
class Facade{
    SubSystemOne subSystemOne;
    SubSystemTwo subSystemTwo;
    SubSystemThree subSystemThree;
 
    public Facade(){
        subSystemOne = new SubSystemOne();
        subSystemTwo = new SubSystemTwo();
        subSystemThree = new SubSystemThree();
    }
 
    public void methodA(){
        subSystemOne.methodOne();
    }
 
    public void methodB(){
        subSystemTwo.methodTwo();
    }
 
    public void methodC(){
        subSystemThree.methodThree();
    }
}
 
class SubSystemOne{
    public void methodOne(){
        System.out.println("æ‰§è¡Œå­ç³»ç»Ÿä¸€çš„åŠŸèƒ½~");
    }
}
 
class SubSystemTwo{
    public void methodTwo(){
        System.out.println("æ‰§è¡Œå­ç³»ç»ŸäºŒçš„åŠŸèƒ½~");
    }
}
 
class SubSystemThree{
    public void methodThree(){
        System.out.println("æ‰§è¡Œå­ç³»ç»Ÿä¸‰çš„åŠŸèƒ½~");
    }
}
```

</details>

@tab 6

### 6. Flyweightï¼ˆäº«å…ƒï¼‰

::: tip å…±äº«åˆ›å»ºçš„å¯¹è±¡
:::

#### ï¼ˆ1ï¼‰æ„å›¾

è¿ç”¨**å…±äº«æŠ€æœ¯**æœ‰æ•ˆåœ°æ”¯æŒ**å¤§é‡**ç»†ç²’åº¦çš„å¯¹è±¡ã€‚

> å‡å°‘åˆ›å»ºçš„å¯¹è±¡çš„æ•°é‡ï¼Œé™ä½å­˜å‚¨å¼€é”€

#### ï¼ˆ2ï¼‰ç±»å›¾

![](./assets/image-20240430145130815.png =800x)

å…¶ä¸­ï¼š
- Flyweight æè¿°ä¸€ä¸ªæ¥å£ï¼Œé€šè¿‡è¿™ä¸ªæ¥å£ Flyweight å¯ä»¥æ¥å—å¹¶ä½œç”¨äºå¤–éƒ¨çŠ¶æ€ã€‚
- ConcreteFlyweight å®ç° Flyweight æ¥å£ï¼Œå¹¶ä¸ºå†…éƒ¨çŠ¶æ€ï¼ˆå¦‚æœæœ‰ï¼‰å¢åŠ å­˜å‚¨ç©ºé—´ã€‚
- ConcreteFlyweight å¯¹è±¡å¿…é¡»æ˜¯å¯å…±äº«çš„ã€‚å®ƒæ‰€å­˜å‚¨çš„çŠ¶æ€å¿…é¡»æ˜¯å†…éƒ¨çš„ï¼Œå³å®ƒå¿…é¡»ç‹¬ç«‹äº ConcreteFlyweight å¯¹è±¡çš„åœºæ™¯ã€‚
- å¹¶éæ‰€æœ‰çš„ Flyweight å­ç±»éƒ½éœ€è¦è¢«å…±äº«ã€‚Flyweight æ¥å£ä½¿å…±äº«æˆä¸ºå¯èƒ½ï¼Œä½†å®ƒå¹¶ä¸å¼ºåˆ¶å…±äº«ã€‚åœ¨ Flyweight å¯¹è±¡ç»“æ„çš„æŸäº›å±‚æ¬¡ï¼ŒUnsharedConcreteFlyweight å¯¹è±¡é€šå¸¸å°† ConcreteFlyweight å¯¹è±¡ä½œä¸ºå­ç»“ç‚¹ã€‚
- FlyweightFactory åˆ›å»ºå¹¶ç®¡ç† Flyweight å¯¹è±¡ï¼›ç¡®ä¿åˆç†åœ°å…±äº« Flyweightï¼Œå½“ç”¨æˆ·è¯·æ±‚ä¸€ä¸ª Flyweight æ—¶ï¼ŒFlyweightFactory å¯¹è±¡æä¾›ä¸€ä¸ªå·²åˆ›å»ºçš„å®ä¾‹æˆ–è€…åœ¨ä¸å­˜åœ¨æ—¶åˆ›å»ºä¸ªå®ä¾‹ã€‚
- Client ç»´æŒä¸€ä¸ªå¯¹ Flyweight çš„å¼•ç”¨ï¼›è®¡ç®—æˆ–å­˜å‚¨ä¸€ä¸ªæˆ–å¤šä¸ª Flyweight çš„å¤–éƒ¨çŠ¶æ€ã€‚

#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Flyweight æ¨¡å¼é€‚ç”¨äºï¼š

- ä¸€ä¸ªåº”ç”¨ç¨‹åºä½¿ç”¨äº†å¤§é‡çš„å¯¹è±¡ã€‚
- å®Œå…¨ç”±äºä½¿ç”¨å¤§é‡çš„å¯¹è±¡ï¼Œé€ æˆå¾ˆå¤§çš„å­˜å‚¨å¼€é”€ã€‚
- å¯¹è±¡çš„å¤§å¤šæ•°çŠ¶æ€éƒ½å¯å˜ä¸ºå¤–éƒ¨çŠ¶æ€ã€‚
- å¦‚æœåˆ é™¤å¯¹è±¡çš„å¤–éƒ¨çŠ¶æ€ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ç›¸å¯¹è¾ƒå°‘çš„å…±äº«å¯¹è±¡å–ä»£å¾ˆå¤šç»„å¯¹è±¡ã€‚
- åº”ç”¨ç¨‹åºä¸ä¾èµ–äºå¯¹è±¡æ ‡è¯†ã€‚ç”±äº Flyweight å¯¹è±¡å¯ä»¥è¢«å…±äº«ï¼Œæ‰€ä»¥å¯¹äºæ¦‚å¿µä¸Šæ˜æ˜¾æœ‰åˆ«çš„å¯¹è±¡ï¼Œæ ‡è¯†æµ‹è¯•å°†è¿”å›çœŸå€¼ã€‚


##### ğŸ 1 é»‘ç™½æ£‹

<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java {24,27-28}
public class FlyweightPattern {
    public static void main(String[] args) {
        PieceFactory factory = new PieceFactory();
 
        Piece whitePiece1 = factory.getPiece(0);
        whitePiece1.draw(66,87);
        System.out.println(whitePiece1);
 
        Piece blackPiece1 = factory.getPiece(1);
        blackPiece1.draw(20,11);
        System.out.println(blackPiece1);
 
        Piece whitePiece2 = factory.getPiece(0);
        whitePiece1.draw(26ï¼Œ54);
        System.out.println(whitePiece2);
 
        Piece blackPiece2 = factory.getPiece(1);
        blackPiece2.draw(12ï¼Œ34);
        System.out.println(blackPiece2);
    }
}
 
class PieceFactory{
    private Piece[] pieces = {new WhitePiece(),new BlackPiece()};
 
    public Piece getPiece(int key){
        if (key == 0) return pieces[0];
        else return pieces[1];
    }
}
 
abstract class Piece{
    protected String color;
 
    public abstract void draw(int x,int y);
}
 
class WhitePiece extends Piece{
    public WhitePiece(){
        this.color = "white";
    }
 
    @Override
    public void draw(int xï¼Œint y) {
        System.out.println("draw a color: " + color + " piece x: " + x + " y:ã€€" + y);
    }
}
 
class BlackPiece extends Piece{
    public BlackPiece(){
        this.color = "black";
    }
 
    @Override
    public void draw(int xï¼Œint y) {
        System.out.println("draw a color: " + color + " piece x: " + x + " y:ã€€" + y);
    }
}
```

è¿è¡Œ 1

```text
draw a color: white piece x: 66 y:ã€€87
com.lxzz.softdesign.WhitePiece@4c873330
draw a color: black piece x: 20 y:ã€€11
com.lxzz.softdesign.BlackPiece@119d7047
draw a color: white piece x: 26 y:ã€€54
com.lxzz.softdesign.WhitePiece@4c873330
draw a color: black piece x: 12 y:ã€€34
com.lxzz.softdesign.BlackPiece@119d7047
```

</details>

##### ğŸ 2 ç”»åœ†

<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java {}
public class FlyweightPattern {
    public static void main(String[] args) {
        ShapeFactory factory = new ShapeFactory();
 
        Random random = new Random();
        String[] colors = {"red","blue","green","white","black"};
 
        for (int i = 1; i <= 10; i++) {
            int x = random.nextInt(colors.length);
            Shape shape = factory.getShape(colors[x]);
            System.out.print("ç¬¬" + i + "ä¸ªåœ†ï¼š");
            shape.draw(random.nextInt(100),random.nextInt(100));
        }
    }
}
 
class ShapeFactory{
    private Map<String,Shape> map = new HashMap<>();
 
    public Shape getShape(String key){
        if (!map.containsKey(key)) {
            map.put(keyï¼Œnew Circle(key));
            System.out.println("create color: " + key + " circle");
        }
        return map.get(key);
    }
}
 
abstract class Shape {
    protected String color;
 
    public abstract void draw(int xï¼Œint y);
}
 
class Circle extends Shape {
 
    public Circle(String color){
        this.color = color;
    }
 
    @Override
    public void draw(int xï¼Œint y) {
        System.out.println("draw a color: " + color + " circle xï¼š"+ x + " yï¼š" + y);
    }
}
```


è¿è¡Œ 2

```text
create color: white circle
ç¬¬1ä¸ªåœ†ï¼šdraw a color: white circle xï¼š98 yï¼š99
create color: blue circle
ç¬¬2ä¸ªåœ†ï¼šdraw a color: blue circle xï¼š59 yï¼š14
create color: red circle
ç¬¬3ä¸ªåœ†ï¼šdraw a color: red circle xï¼š21 yï¼š31
create color: black circle
ç¬¬4ä¸ªåœ†ï¼šdraw a color: black circle xï¼š0 yï¼š13
create color: green circle
ç¬¬5ä¸ªåœ†ï¼šdraw a color: green circle xï¼š41 yï¼š66
ç¬¬6ä¸ªåœ†ï¼šdraw a color: black circle xï¼š54 yï¼š11
ç¬¬7ä¸ªåœ†ï¼šdraw a color: white circle xï¼š99 yï¼š68
ç¬¬8ä¸ªåœ†ï¼šdraw a color: white circle xï¼š18 yï¼š52
ç¬¬9ä¸ªåœ†ï¼šdraw a color: red circle xï¼š28 yï¼š60
ç¬¬10ä¸ªåœ†ï¼šdraw a color: white circle xï¼š83 yï¼š66
```

</details>


@tab 7

### 7. Proxy (ä»£ç†)

::: tip ä»£ç†æ§åˆ¶
:::

#### ï¼ˆ1ï¼‰æ„å›¾

ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§**ä»£ç†**ä»¥**æ§åˆ¶**å¯¹è¿™ä¸ªå¯¹è±¡çš„**è®¿é—®**ã€‚

#### ï¼ˆ2ï¼‰ç±»å›¾

![](./assets/image-20240430145205532.png =800x)

#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Proxy æ¨¡å¼é€‚ç”¨äºåœ¨éœ€è¦æ¯”è¾ƒé€šç”¨å’Œå¤æ‚çš„å¯¹è±¡æŒ‡é’ˆä»£æ›¿ç®€å•çš„æŒ‡é’ˆçš„æ—¶å€™ï¼Œå¸¸è§æƒ…å†µæœ‰ï¼š
- è¿œç¨‹ä»£ç† (Remote Proxy) ä¸ºä¸€ä¸ªå¯¹è±¡åœ¨ä¸åŒåœ°å€ç©ºé—´æä¾›å±€éƒ¨ä»£è¡¨ã€‚
- è™šä»£ç† (Virtual Proxy) æ ¹æ®éœ€è¦åˆ›å»ºå¼€é”€å¾ˆå¤§çš„å¯¹è±¡ã€‚
- ä¿æŠ¤ä»£ç† (Protection Proxy) æ§åˆ¶å¯¹åŸå§‹å¯¹è±¡çš„è®¿é—®ï¼Œç”¨äºå¯¹è±¡åº”è¯¥æœ‰ä¸åŒçš„è®¿é—®æƒé™çš„æ—¶å€™ã€‚
- æ™ºèƒ½å¼•ç”¨ (Smart Reference) å–ä»£äº†ç®€å•çš„æŒ‡é’ˆï¼Œå®ƒåœ¨è®¿é—®å¯¹è±¡æ—¶æ‰§è¡Œä¸€äº›é™„åŠ æ“ä½œã€‚

<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java {14,18-20,30}
public class ProxyPattern {
    public static void main(String[] args) {
        RealSubject realSubject = new RealSubject();
        Proxy proxy = new Proxy(realSubject);
 
        proxy.buy();
    }
}
 
interface Subject{
    void buy();
}
 
class Proxy implements Subject{
 
    protected RealSubject realSubject;
 
    public Proxy(RealSubject realSubject){
        this.realSubject = realSubject;
    }
 
    @Override
    public void buy() {
        System.out.println("åŠç†è´­ä¹°å‰çš„æ‰‹ç»­~");
        realSubject.buy(); // ä»˜é’±
        System.out.println("åŠç†è´­ä¹°åçš„æ‰‹ç»­~");
    }
}
 
class RealSubject implements Subject{
 
    @Override
    public void buy() {
        System.out.println("ä»˜é’±~");
    }
}
```

</details>

::::


## ğŸ€ è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ï¼ˆ11 ç§ï¼‰


:::: tabs

@tab 1

### 1. Chain of Responsibilityï¼ˆè´£ä»»é“¾ï¼‰

::: tip ä¸ºæŸä¸ªè¯·æ±‚åˆ›å»ºä¸€ä¸ªå¯¹è±¡é“¾ï¼Œæ¯ä¸ªå¯¹è±¡ä¾åºæ£€æŸ¥æ­¤è¯·æ±‚å¹¶å¯¹å…¶è¿›è¡Œå¤„ç†æˆ–è€…å°†å®ƒä¼ ç»™é“¾ä¸­çš„ä¸‹ä¸€ä¸ªå¯¹è±¡
:::

#### ï¼ˆ1ï¼‰æ„å›¾

*ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚*ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚*å°†è¿™äº›å¯¹è±¡è¿æˆä¸€æ¡é“¾*ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚

#### ï¼ˆ2ï¼‰ç±»å›¾

![](./assets/image-20230415171040969.png =800x)

å…¶ä¸­ï¼š
- Handler å®šä¹‰ä¸€ä¸ªå¤„ç†è¯·æ±‚çš„æ¥å£ï¼›ï¼ˆå¯é€‰ï¼‰å®ç°åç»§é“¾ã€‚
- ConcreteHandler å¤„ç†å®ƒæ‰€è´Ÿè´£çš„è¯·æ±‚ï¼›å¯è®¿é—®å®ƒçš„åç»§è€…ï¼ˆsuccessorï¼‰ï¼›å¦‚æœå¯å¤„ç†è¯¥è¯·æ±‚ï¼Œå°±å¤„ç†å®ƒï¼Œå¦åˆ™å°†è¯¥è¯·æ±‚è½¬å‘ç»™åç»§è€…ã€‚
- Client å‘é“¾ä¸Šçš„å…·ä½“å¤„ç†è€… (ConcreteHandler) å¯¹è±¡æäº¤è¯·æ±‚ã€‚


#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Chain of Responsibility æ¨¡å¼é€‚ç”¨äºä»¥ä¸‹æ¡ä»¶ï¼š

- æœ‰å¤šä¸ªçš„å¯¹è±¡å¯ä»¥å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œå“ªä¸ªå¯¹è±¡å¤„ç†è¯¥è¯·æ±‚è¿è¡Œæ—¶åˆ»è‡ªåŠ¨ç¡®å®šã€‚
- æƒ³åœ¨ä¸æ˜ç¡®æŒ‡å®šæ¥æ”¶è€…çš„æƒ…å†µä¸‹å‘å¤šä¸ªå¯¹è±¡ä¸­çš„ä¸€ä¸ªæäº¤ä¸€ä¸ªè¯·æ±‚ã€‚
- å¯å¤„ç†ä¸€ä¸ªè¯·æ±‚çš„å¯¹è±¡é›†åˆåº”è¢«åŠ¨æ€æŒ‡å®šã€‚


<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java
public class ChainOfResponsibilityPattern {
    public static void main(String[] args) {
        Handler counsellor = new Counsellor();
        Handler dean = new Dean();
        Handler headmaster= new Headmaster();
 
        counsellor.setNext(dean);
        dean.setNext(headmaster);
 
        counsellor.HandRequest(25);
    }
 
}
 
abstract class Handler{
    protected Handler next;
 
    public void setNext(Handler next){
        this.next = next;
    }
 
    public abstract void HandRequest(int request);
}
 
class Counsellor extends Handler{
 
    @Override
    public void HandRequest(int request) {
        if (request <= 7){
            System.out.println("è¾…å¯¼å‘˜å®¡æ‰¹é€šè¿‡~");
        }else {
            if (next != null){
                next.HandRequest(request);
            }else {
                System.out.println("æ— æ³•å®¡æ‰¹");
            }
        }
    }
}
 
class Dean extends Handler{
 
    @Override
    public void HandRequest(int request) {
        if (request <= 15){
            System.out.println("é™¢é•¿å®¡æ‰¹é€šè¿‡~");
        }else {
            if (next != null){
                next.HandRequest(request);
            }else {
                System.out.println("æ— æ³•å®¡æ‰¹");
            }
        }
    }
}
 
class Headmaster extends Handler{
 
    @Override
    public void HandRequest(int request) {
        if (request <= 30){
            System.out.println("æ ¡é•¿å®¡æ‰¹é€šè¿‡~");
        }else {
            if (next != null){
                next.HandRequest(request);
            }else {
                System.out.println("æ— æ³•å®¡æ‰¹");
            }
        }
    }
}
```

</details>


@tab 2

### ğŸŒ¸ 2. Commandï¼ˆå‘½ä»¤ï¼‰

::: tip å°†è¯·æ±‚å°è£…ä¸ºå¯¹è±¡
:::


#### ï¼ˆ1ï¼‰æ„å›¾

å°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä½¿å¾—å¯ä»¥ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ï¼›å¯¹**è¯·æ±‚æ’é˜Ÿ**æˆ–è®°å½•**è¯·æ±‚æ—¥å¿—**ï¼Œä»¥åŠæ”¯æŒå¯**æ’¤é”€**çš„æ“ä½œã€‚


#### ï¼ˆ2ï¼‰ç±»å›¾

![](./assets/image-20230415173855870.png =800x)

å…¶ä¸­ï¼š

- *Command* å£°æ˜æ‰§è¡Œæ“ä½œçš„æ¥å£ã€‚
- *ConcreteCommand* å°†ä¸€ä¸ªæ¥æ”¶è€…å¯¹è±¡ç»‘å®šäºä¸€ä¸ªåŠ¨ä½œï¼šè°ƒç”¨æ¥æ”¶è€…ç›¸åº”çš„æ“ä½œï¼Œä»¥å®ç° Executeã€‚
- Client åˆ›å»ºä¸€ä¸ªå…·ä½“å‘½ä»¤å¯¹è±¡å¹¶è®¾å®šå®ƒçš„æ¥æ”¶è€…ã€‚
- Invoker è¦æ±‚è¯¥å‘½ä»¤æ‰§è¡Œè¿™ä¸ªè¯·æ±‚ã€‚
- Receiver çŸ¥é“å¦‚ä½•å®æ–½ä¸æ‰§è¡Œä¸€ä¸ªè¯·æ±‚ç›¸å…³çš„æ“ä½œã€‚*ä»»ä½•ç±»éƒ½å¯èƒ½ä½œä¸ºä¸€ä¸ªæ¥æ”¶è€…*ã€‚


#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Command æ¨¡å¼é€‚ç”¨äºï¼š

- æŠ½è±¡å‡ºå¾…æ‰§è¡Œçš„åŠ¨ä½œä»¥å‚æ•°åŒ–æŸå¯¹è±¡ã€‚
- åœ¨ä¸åŒçš„æ—¶åˆ»æŒ‡å®šã€æ’åˆ—å’Œæ‰§è¡Œè¯·æ±‚ã€‚
- æ”¯æŒå–æ¶ˆæ“ä½œã€‚
- æ”¯æŒä¿®æ”¹æ—¥å¿—ã€‚
- ç”¨æ„å»ºåœ¨åŸè¯­æ“ä½œä¸Šçš„é«˜å±‚æ“ä½œæ„é€ ä¸€ä¸ªç³»ç»Ÿã€‚



<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java
public class CommandPattern {
    public static void main(String[] args) {
        Tv tv = new Tv(); // æ¥æ”¶è€… å¯¹è±¡ ç”µè§†æœº
 
        Command onCommand = new OnCommand(tv); // å‘½ä»¤å¯¹è±¡ å¼€æœºå‘½ä»¤
        Command offCommand = new OnCommand(tv); // å‘½ä»¤å¯¹è±¡ å…³æœºå‘½ä»¤
 
        Invoker invoker = new Invoker(); //è¯·æ±‚è€…
        invoker.setCommand(onCommand); // ç»™è¯·æ±‚è€…è®¾ç½® å¼€æœº å‘½ä»¤
        invoker.call(); // è¯·æ±‚è€…å»è¯·æ±‚å‘½ä»¤
 
        System.out.println("==============åˆ†å‰²çº¿===============");
 
        invoker.setCommand(offCommand); // ç»™è¯·æ±‚è€…è®¾ç½® å…³æœºå‘½ä»¤
        invoker.call(); // è¯·æ±‚è€…å»è¯·æ±‚å‘½ä»¤
 
    }
}
 
class Invoker{ // è¯·æ±‚è€…
    private Command command; // å‘½ä»¤
 
    public void setCommand(Command command){ // è®¾ç½®è¯·æ±‚è€…çš„å‘½ä»¤
        this.command = command;
    }
 
    public void call(){ // è°ƒç”¨
        command.Execute();
    }
}
 
interface Command{ // å‘½ä»¤æ¥å£
    void Execute(); // æ‰§è¡Œå‘½ä»¤
 
}
 
class OnCommand implements Command{// å¼€æœºå‘½ä»¤
    private Tv tv;
 
    public OnCommand(Tv tv){
        this.tv = tv;
    }
 
    @Override
    public void Execute() {
        tv.OnAction();
    }
}
 
class OffCommand implements Command{ // å…³æœºå‘½ä»¤
    private Tv tv;
 
    public OffCommand(Tv tv){
        this.tv = tv;
    }
 
    @Override
    public void Execute() {
        tv.OffAction();
    }
}
 
class Tv{
    public void OnAction(){ // å¼€æœºè¡Œä¸º
        System.out.println("ç”µè§†æœºå¼€æœºäº†...");
    }
 
    public void OffAction(){ // å…³æœºè¡Œä¸º
        System.out.println("ç”µè§†æœºå…³æœºäº†...");
    }
}
```

</details>



@tab 3

### 3. Interpreterï¼ˆè§£é‡Šå™¨ï¼‰

> æ²¡è€ƒè¿‡

::: tip ä¸ºè¯­è¨€åˆ›å»ºè§£é‡Šå™¨ï¼Œé€šå¸¸ç”±è¯­è¨€çš„è¯­æ³•å’Œè¯­æ³•åˆ†ææ¥å®šä¹‰
:::

#### ï¼ˆ1ï¼‰æ„å›¾

ç»™å®šä¸€ä¸ªè¯­è¨€ï¼Œ*å®šä¹‰å®ƒçš„æ–‡æ³•çš„ä¸€ç§è¡¨ç¤º*ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªè§£é‡Šå™¨ï¼Œè¿™ä¸ªè§£é‡Šå™¨ä½¿ç”¨è¯¥è¡¨ç¤ºæ¥è§£é‡Šè¯­è¨€ä¸­çš„å¥å­ã€‚


#### ï¼ˆ2ï¼‰ç±»å›¾

![](./assets/image-20240430145354943.png =800x)

- Context ä¸Šä¸‹æ–‡
- NonterminalExpression éç»ˆç»“ç¬¦è¡¨è¾¾å¼

#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Interpreter æ¨¡å¼é€‚ç”¨äºå½“æœ‰ä¸€ä¸ªè¯­è¨€éœ€è¦è§£é‡Šæ‰§è¡Œï¼Œå¹¶ä¸”å¯å°†è¯¥è¯­è¨€ä¸­çš„å¥å­è¡¨ç¤ºä¸ºä¸€ä¸ªæŠ½è±¡è¯­æ³•æ ‘æ—¶ï¼Œä»¥ä¸‹æƒ…å†µæ•ˆæœæœ€å¥½ï¼š

- è¯¥æ–‡æ³•ç®€å•ã€‚å¯¹äºå¤æ‚çš„å‘æ–‡ï¼Œæ–‡æ³•çš„ç±»å±‚æ¬¡å˜å¾—åºå¤§è€Œæ— æ³•ç®¡ç†ã€‚
- æ•ˆç‡ä¸æ˜¯ä¸€ä¸ªå…³é”®é—®é¢˜ã€‚æœ€é«˜æ•ˆçš„è§£é‡Šå™¨é€šå¸¸ä¸æ˜¯é€šè¿‡ç›´æ¥è§£é‡Šè¯­æ³•åˆ†ææ ‘å®ç°çš„ï¼Œè€Œæ˜¯é¦–å…ˆå°†å®ƒä»¬è½¬æ¢æˆå¦ä¸€ç§å½¢å¼ã€‚


<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java
public class InterpreterPattern {
 
    public static void main(String[] args) {
 
        Context context = new Context();
 
        context.check("AåŒºçš„å¼€å‘äººå‘˜");
        context.check("BåŒºçš„è°ƒè¯•äººå‘˜");
        context.check("CåŒºçš„æµ‹è¯•äººå‘˜");
 
        System.out.println("========åˆ†å‰²çº¿=============");
 
        context.check("DåŒºçš„ç¨‹åºå‘˜");
        context.check("DåŒºçš„æµ‹è¯•å‘˜");
        context.check("CåŒºçš„ç¨‹åºå‘˜");
 
    }
}
 
class Context{
    private String[] regions = {"AåŒº","BåŒº","CåŒº"};
    private String[] persions = {"å¼€å‘äººå‘˜","æµ‹è¯•äººå‘˜","è°ƒè¯•äººå‘˜"};
    private NonterminalExpression nonterminal;
 
    public Context(){
        TerminalExpression region = new TerminalExpression(regions);
        TerminalExpression person = new TerminalExpression(persions);
        nonterminal = new NonterminalExpression(region,person);
    }
 
    public void check(String info){
        boolean result = nonterminal.Interpret(info);
        if (result){
            System.out.println("è¯†åˆ«æˆåŠŸ~");
        }else {
            System.out.println("è¯†åˆ«å¤±è´¥~");
        }
    }
 
}
 
interface Expression{
    boolean Interpret(String info);
}
 
class NonterminalExpression implements Expression{
 
    private TerminalExpression region;
    private TerminalExpression person;
 
    public NonterminalExpression(TerminalExpression region,TerminalExpression person){
        this.region =region;
        this.person = person;
    }
 
    @Override
    public boolean Interpret(String info) {
        String[] str = info.split("çš„");
        // BåŒºçš„è°ƒè¯•äººå‘˜ --> str = {"BåŒº","è°ƒè¯•äººå‘˜"};
        return region.Interpret(str[0]) && person.Interpret(str[1]);
    }
}
 
class TerminalExpression implements Expression{
 
    private Set<String> set = new HashSet<>();
 
    public TerminalExpression(String[] data){
        for (String str : data) {
            set.add(str);
        }
    }
 
    @Override
    public boolean Interpret(String info) {
        return set.contains(info);
    }
}
```

</details>




@tab 4

### 4. Iteratorï¼ˆè¿­ä»£å™¨ï¼‰

::: tip æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸æš´éœ²å…¶å†…éƒ¨çš„è¡¨ç¤º
:::

#### ï¼ˆ1ï¼‰æ„å›¾

æä¾›ä¸€ç§æ–¹æ³•*é¡ºåºè®¿é—®*ä¸€ä¸ª**èšåˆå¯¹è±¡**ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œä¸”*ä¸éœ€è¦æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤º*ã€‚


#### ï¼ˆ2ï¼‰ç±»å›¾

![](./assets/image-20240430145419785.png =800x)

å…¶ä¸­ï¼š

- Iterator (è¿­ä»£å™¨) *å®šä¹‰è®¿é—®å’Œéå†å…ƒç´ çš„æ¥å£*ã€‚
- ConcreteIteratorï¼ˆå…·ä½“è¿­ä»£å™¨ï¼‰*å®ç°è¿­ä»£å™¨æ¥å£*ï¼›å¯¹è¯¥èšåˆéå†æ—¶è·Ÿè¸ªå½“å‰ä½ç½®ã€‚
- Aggregate (èšåˆ) å®šä¹‰åˆ›å»ºç›¸åº”è¿­ä»£å™¨å¯¹è±¡çš„æ¥å£ã€‚
- ConcreteAggregate (å…·ä½“èšåˆ) å®ç°åˆ›å»ºç›¸åº”è¿­ä»£å™¨çš„æ¥å£ï¼Œè¯¥æ“ä½œè¿”å› ConcreteIterator çš„ä¸€ä¸ªé€‚å½“çš„å®ä¾‹ã€‚

#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Iterator æ¨¡å¼é€‚ç”¨äºï¼š

- è®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡çš„å†…å®¹è€Œæ— é¡»æš´éœ²å®ƒçš„å†…éƒ¨è¡¨ç¤ºã€‚
- æ”¯æŒå¯¹èšåˆå¯¹è±¡çš„å¤šç§éå†ã€‚
- ä¸ºéå†ä¸åŒçš„èšåˆç»“æ„æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ã€‚


<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java
public class IteratorPattern {
 
    public static void main(String[] args) {
        BookAggregate bookAggregate = new BookAggregate();
 
        String[] books = {"æ•°æ®ç»“æ„","æ“ä½œç³»ç»Ÿ","è®¡ç®—æœºç½‘ç»œ","è®¡ç®—æœºç»„æˆåŸç†"};
        double[] prices = {10.24,20.48,40.96,81.92};
 
        for (int i = 0; i < 4; i++) {
            bookAggregate.Add(new Book(books[i],prices[i]));
        }
 
        Iterator iterator = bookAggregate.CreateIterator();
        while (iterator.hasNext()) {
            Book book = (Book) iterator.next();
            System.out.println("ä¹¦åï¼š" + book.getName() + " ä»·æ ¼ï¼š" + book.getPrice());
        }
 
    }
 
}
 
interface Iterator{
    boolean hasNext();
    Object next();
}
 
class BookIterator implements Iterator{
    private int index;
    private BookAggregate bookAggregate;
 
    public BookIterator(BookAggregate bookAggregate){
        this.index = 0;
        this.bookAggregate = bookAggregate;
    }
 
    @Override
    public boolean hasNext() {
        if (index < bookAggregate.getSize()){
            return true;
        }
        return false;
    }
 
    @Override
    public Object next() {
        Object obj = bookAggregate.get(index);
        index ++ ;
        return obj;
    }
}
 
class BookAggregate implements Aggregate{
 
    private List<Book> list = new ArrayList<>();
 
    public void Add(Book book){
        list.add(book);
    }
 
    public Book get(int index){
        return list.get(index);
    }
 
    public int getSize(){
        return list.size();
    }
 
    @Override
    public Iterator CreateIterator() {
        return new BookIterator(this);
    }
}
 
interface Aggregate{
    Iterator CreateIterator();
}
 
class Book{
    private String name;
    private double price;
 
    public Book(String name,double price){
        this.name = name;
        this.price = price;
    }
 
    public String getName(){
        return name;
    }
 
    public double getPrice(){
        return price;
    }
}
```

</details>




@tab 5

### 5. Mediatorï¼ˆä¸­ä»‹è€…ï¼‰

::: tip é›†ä¸­ç›¸å…³å¯¹è±¡ä¹‹é—´å¤æ‚çš„æ²Ÿé€šå’Œæ§åˆ¶æ–¹å¼
:::

#### ï¼ˆ1ï¼‰æ„å›¾

ç”¨ä¸€ä¸ª**ä¸­ä»‹å¯¹è±¡**æ¥*å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’*ã€‚ä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾å¼çš„ç›¸äº’å¼•ç”¨ï¼Œä»è€Œä½¿å…¶*è€¦åˆæ¾æ•£*ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚


#### ï¼ˆ2ï¼‰ç±»å›¾

![](./assets/image-20240430145449796.png =800x)


å…¶ä¸­ï¼š

- Mediator (ä¸­ä»‹è€…) å®šä¹‰ä¸€ä¸ªæ¥å£ç”¨äºå„åŒäº‹ (Colleague) å¯¹è±¡é€šä¿¡ã€‚
- ConcreteMediator (å…·ä½“ä¸­ä»‹è€…) é€šè¿‡åè°ƒå„åŒäº‹å¯¹è±¡å®ç°åä½œè¡Œä¸ºï¼›äº†è§£å¹¶ç»´æŠ¤å®ƒçš„å„ä¸ªåŒäº‹ã€‚
- Colleague class (åŒäº‹ç±») çŸ¥é“å®ƒçš„ä¸­ä»‹è€…å¯¹è±¡ï¼›æ¯ä¸€ä¸ªåŒäº‹ç±»å¯¹è±¡åœ¨éœ€è¦ä¸å…¶ä»–åŒäº‹é€šä¿¡çš„æ—¶å€™ä¸å®ƒçš„ä¸­ä»‹è€…é€šä¿¡ã€‚


#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Mediator æ¨¡å¼é€‚ç”¨äºï¼š

- ä¸€ç»„å¯¹è±¡ä»¥*å®šä¹‰è‰¯å¥½*ä½†æ˜¯~~å¤æ‚çš„æ–¹å¼è¿›è¡Œé€šä¿¡~~ï¼Œäº§ç”Ÿçš„~~ç›¸äº’ä¾èµ–å…³ç³»ç»“æ„æ··ä¹±ä¸”éš¾ä»¥ç†è§£~~ã€‚
- ä¸€ä¸ªå¯¹è±¡å¼•ç”¨å…¶ä»–å¾ˆå¤šå¯¹è±¡å¹¶ä¸”ç›´æ¥ä¸è¿™äº›å¯¹è±¡é€šä¿¡ï¼Œå¯¼è‡´éš¾ä»¥å¤ç”¨è¯¥å¯¹è±¡ã€‚
- æƒ³å®šåˆ¶ä¸€ä¸ªåˆ†å¸ƒåœ¨å¤šä¸ªç±»ä¸­çš„è¡Œä¸ºï¼Œè€Œåˆä¸æƒ³ç”Ÿæˆå¤ªå¤šçš„å­ç±»ã€‚


<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java
public class MediatorPattern {
    public static void main(String[] args) {
        ConcreteMediator mediator = new ConcreteMediator();

        Colleague1 colleague1 = new Colleague1(mediator);
        Colleague2 colleague2 = new Colleague2(mediator);

        mediator.setColleague1(colleague1);
        mediator.setColleague2(colleague2);

        colleague1.sendMessage("è½¯è€ƒåŠ æ²¹~");
        colleague2.sendMessage("ç¥ä½ ä¸Šå²¸~");
    }
}

abstract class Colleague {
    protected Mediator mediator;
}

class Colleague1 extends Colleague {
    public Colleague1(Mediator mediator) {
        this.mediator = mediator;
    }

    public void sendMessage(String message) {
        mediator.sendMessage(messageï¼Œthis);
    }

    public void Notify(String message) {
        System.out.println("åŒäº‹1æ”¶åˆ°æ¶ˆæ¯ï¼š" + message);
    }
}

class Colleague2 extends Colleague {
    public Colleague2(Mediator mediator) {
        this.mediator = mediator;
    }

    public void sendMessage(String message) {
        mediator.sendMessage(messageï¼Œthis);
    }

    public void Notify(String message) {
        System.out.println("åŒäº‹2æ”¶åˆ°æ¶ˆæ¯ï¼š" + message);
    }
}

abstract class Mediator {
    public abstract void sendMessage(String messageï¼ŒColleague colleague);
}

class ConcreteMediator extends Mediator {
    private Colleague1 colleague1;
    private Colleague2 colleague2;

    public void setColleague1(Colleague1 colleague1) {
        this.colleague1 = colleague1;
    }

    public void setColleague2(Colleague2 colleague2) {
        this.colleague2 = colleague2;
    }

    @Override
    public void sendMessage(String messageï¼ŒColleague colleague) {
        if (colleague == colleague1) {
            // è®©åŒäº‹2æ”¶åˆ°æ¶ˆæ¯
            colleague2.Notify(message);
        } else {
            // è®©åŒäº‹1æ”¶åˆ°æ¶ˆæ¯
            colleague1.Notify(message);
        }
    }
}
```

</details>




@tab 6

### 6. Mementoï¼ˆå¤‡å¿˜å½•ï¼‰

::: tip å½“ä½ éœ€è¦è®©å¯¹è±¡è¿”å›ä¹‹å‰çš„çŠ¶æ€æ—¶(ä¾‹å¦‚ï¼Œä½ çš„ç”¨æˆ·è¯·æ±‚"æ’¤é”€")ï¼Œä½ ä½¿ç”¨å¤‡å¿˜å½•æ¨¡å¼
:::

#### ï¼ˆ1ï¼‰æ„å›¾

åœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹*æ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€*ï¼Œå¹¶åœ¨å¯¹è±¡ä¹‹å¤–*ä¿å­˜*è¿™ä¸ªçŠ¶æ€ã€‚è¿™æ ·ä»¥åå°±å¯ä»¥å°†å¯¹è±¡*æ¢å¤*åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€ã€‚


#### ï¼ˆ2ï¼‰ç±»å›¾


![](./assets/image-20240430145510432.png =800x)

- Mementoï¼ˆå¤‡å¿˜å½•ï¼‰ï¼šå­˜å‚¨åŸå‘å™¨å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼›é˜²æ­¢åŸå‘å™¨ä»¥å¤–çš„å¯¹è±¡è®¿é—®å¤‡å¿˜å½•ï¼›
- Originatorï¼ˆåŸå‘å™¨ï¼‰ï¼šåˆ›å»ºä¸€ä¸ªå¤‡å¿˜å½•ï¼Œç”¨äºè®°å½•å½“å‰æ—¶åˆ»å®ƒçš„å†…éƒ¨çŠ¶æ€ï¼›ä½¿ç”¨å¤‡å¿˜å½•æ¢å¤å†…éƒ¨çŠ¶æ€
- Caretakerï¼ˆç®¡ç†è€…ï¼‰

#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Memento æ¨¡å¼é€‚ç”¨äºï¼š

- *å¿…é¡»ä¿å­˜ä¸€ä¸ªå¯¹è±¡åœ¨æŸä¸€ä¸ªæ—¶åˆ»çš„ï¼ˆéƒ¨åˆ†ï¼‰çŠ¶æ€*ï¼Œè¿™æ ·ä»¥åéœ€è¦æ—¶å®ƒæ‰èƒ½æ¢å¤åˆ°å…ˆå‰çš„çŠ¶æ€ã€‚
- å¦‚æœä¸€ä¸ªç”¨æ¥å£æ¥è®©å…¶ä»–å¯¹è±¡ç›´æ¥å¾—åˆ°è¿™äº›çŠ¶æ€ï¼Œå°†ä¼šæš´éœ²å¯¹è±¡çš„å®ç°ç»†èŠ‚å¹¶ç ´åå¯¹è±¡çš„å°è£…æ€§ã€‚


<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java
public class MementoPattern {
    public static void main(String[] args) {
        Caretaker caretaker = new Caretaker();
        Originator originator = new Originator();
 
        originator.setState("1024");
        Memento backup1 = originator.createMemento();
        caretaker.addMemento(backup1);
 
        originator.setState("2048");
        Memento backup2 = originator.createMemento();
        caretaker.addMemento(backup2);
 
        originator.setState("4096");
        Memento backup3 = originator.createMemento();
        caretaker.addMemento(backup3);
 
        System.out.println(originator.getState());
        caretaker.showMemento();
 
        Memento memento1 = caretaker.getMemento(2);
        originator.setState(memento1.getState());
 
        System.out.println("æ ¹æ®ç¬¬2æ¬¡å¤‡ä»½è¿˜åŸä¹‹åçš„çŠ¶æ€ä¸ºï¼š" + originator.getState());
    }
}
 
class Originator{ // åŸå‘å™¨
    private String state;
 
    public void setState(String state){
        this.state = state;
    }
 
    public String getState(){
        return state;
    }
 
    public Memento createMemento(){
        return new Memento(state);
    }
 
    public void setMemento(Memento memento){
        state = memento.getState();
    }
}
 
class Memento{ // å¤‡å¿˜å½•
    private String state;
 
    public String getState(){
        return state;
    }
 
    public Memento(String state){
        this.state = state;
    }
}
 
class Caretaker{ // ç®¡ç†è€…
    private List<Memento> mementoList = new ArrayList<>();
 
    public void addMemento(Memento memento){
        mementoList.add(memento);
    }
 
    public Memento getMemento(int index){
        // åˆ¤æ–­å‚æ•°æ˜¯å¦åˆæ³•
        if (index >=1 && index <= mementoList.size()) {
            return mementoList.get(index - 1);
        }
        return null;
    }
 
    public void showMemento(){
        int cnt = 1;
        for (Memento memento : mementoList) {
            System.out.println("ç¬¬" + cnt + "æ¬¡å¤‡ä»½ï¼ŒçŠ¶æ€ä¸ºï¼š" + memento.getState());
            cnt ++;
        }
    }
}
```

</details>




@tab 7


### ğŸŒ¸ 7. Observerï¼ˆè§‚å¯Ÿè€…ï¼‰

::: tip å¯¹è±¡é—´å®šä¹‰ä¸€å¯¹å¤šçš„ä¾èµ–ï¼Œä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€ï¼Œä¾èµ–å®ƒçš„å¯¹è±¡éƒ½ä¼šæ”¶åˆ°é€šçŸ¥
:::

#### ï¼ˆ1ï¼‰æ„å›¾

å®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚

#### ï¼ˆ2ï¼‰ç±»å›¾

![](./assets/image-20240430145530766.png =800x)


å…¶ä¸­ï¼š

- *Subject (ç›®æ ‡) çŸ¥é“å®ƒçš„è§‚å¯Ÿè€…ï¼Œå¯ä»¥æœ‰ä»»æ„å¤šä¸ªè§‚å¯Ÿè€…è§‚å¯ŸåŒä¸€ä¸ªç›®æ ‡*ï¼›æä¾›æ³¨å†Œå’Œåˆ é™¤è§‚å¯Ÿè€…å¯¹è±¡çš„æ¥å£ã€‚
- Observer (è§‚å¯Ÿè€…) ä¸ºé‚£äº›åœ¨ç›®æ ‡å‘ç”Ÿæ”¹å˜æ—¶éœ€è·å¾—é€šçŸ¥çš„å¯¹è±¡å®šä¹‰ä¸€ä¸ªæ›´æ–°æ¥å£ã€‚
- ConcreteSubject (å…·ä½“ç›®æ ‡) å°†æœ‰å…³çŠ¶æ€å­˜å…¥å„ ConcreteObserver å¯¹è±¡ï¼›å½“å®ƒçš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå‘å®ƒçš„å„ä¸ªè§‚å¯Ÿè€…å‘å‡ºé€šçŸ¥ã€‚
- ConcreteObserver (å…·ä½“è§‚å¯Ÿè€…) ç»´æŠ¤ä¸€ä¸ªæŒ‡å‘ ConcreteSubject å¯¹è±¡çš„å¼•ç”¨ï¼›å­˜å‚¨æœ‰å…³çŠ¶æ€ï¼Œè¿™äº›çŠ¶æ€åº”ä¸ç›®æ ‡çš„çŠ¶æ€ä¿æŒä¸€è‡´ã€‚
- å®ç° Observer çš„æ›´æ–°æ¥å£ï¼Œä»¥ä½¿è‡ªèº«çŠ¶æ€ä¸ç›®æ ‡çš„çŠ¶æ€ä¿æŒä¸€è‡´ã€‚

#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Observer æ¨¡å¼é€‚ç”¨äºï¼š

- å½“ä¸€ä¸ªæŠ½è±¡æ¨¡å‹æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œå…¶ä¸­ä¸€ä¸ªæ–¹é¢ä¾èµ–äºå¦ä¸€ä¸ªæ–¹é¢ï¼Œå°†è¿™ä¸¤è€…å°è£…åœ¨ç‹¬ç«‹çš„å¯¹è±¡ä¸­ä»¥ä½¿å®ƒä»¬å¯ä»¥å„è‡ªç‹¬ç«‹åœ°æ”¹å˜å’Œå¤ç”¨ã€‚
- *å½“å¯¹ä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜éœ€è¦åŒæ—¶æ”¹å˜å…¶ä»–å¯¹è±¡ï¼Œè€Œä¸çŸ¥é“å…·ä½“æœ‰å¤šå°‘å¯¹è±¡æœ‰å¾…æ”¹å˜æ—¶*ã€‚
- å½“ä¸€ä¸ªå¯¹è±¡å¿…é¡»é€šçŸ¥å…¶ä»–å¯¹è±¡ï¼Œè€Œå®ƒåˆä¸èƒ½å‡å®šå…¶ä»–å¯¹è±¡æ˜¯è°ï¼Œå³*ä¸å¸Œæœ›è¿™äº›å¯¹è±¡æ˜¯ **ç´§è€¦åˆ** çš„*ã€‚

<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java
public class ObserverPattern {
    public static void main(String[] args) {
        Subject subjectA = new ConcreteSubject("ç›®æ ‡A");

        Observer observerB = new ConcreteObserver("å¼ ä¸‰"ï¼ŒsubjectA);
        Observer observerC = new ConcreteObserver("æå››"ï¼ŒsubjectA);
        Observer observerD = new ConcreteObserver("ç‹äº”"ï¼ŒsubjectA);

        subjectA.setState("æ›´æ–°äº†");
    }
}


interface Subject { // ç›®æ ‡æ¥å£
    void Attach(Observer observer); // æ·»åŠ è§‚å¯Ÿè€…

    void Detach(Observer observer); // åˆ é™¤è§‚å¯Ÿè€…

    void Notify(); // çŠ¶æ€æ”¹å˜åï¼Œé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…

    void setState(String state); // è®¾ç½®çŠ¶æ€ï¼ˆæ”¹å˜çŠ¶æ€ï¼‰

    String getState(); // è·å–çŠ¶æ€


}

class ConcreteSubject implements Subject {
    private String name;
    private String state;


    private List<Observer> observerList;

    public ConcreteSubject(String name) {
        state = "æœªæ›´æ–°";
        this.name = name;
        observerList = new ArrayList<>();
    }

    @Override
    public void Attach(Observer observer) {
        observerList.add(observer);
    }

    @Override
    public void Detach(Observer observer) {
        observerList.remove(observer);
    }

    @Override
    public void Notify() {
        for (Observer observer : observerList) {
            observer.update();
        }
    }

    @Override
    public void setState(String state) {
        this.state = state;

        System.out.println(name + "çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œå˜åŒ–åçš„çŠ¶æ€ä¸ºï¼š" + state);
        Notify();
    }

    @Override
    public String getState() {
        return state;
    }


}

interface Observer { // è§‚å¯Ÿè€…æ¥å£
    void update(); // æ”¶åˆ°é€šçŸ¥ï¼Œæ›´æ–°è§‚å¯Ÿè€…çš„çŠ¶æ€
}

class ConcreteObserver implements Observer {


    private String name;
    private String state;

    private Subject subject;

    public ConcreteObserver(String nameï¼ŒSubject subject) {
        this.name = name;
        this.subject = subject;
        subject.Attach(this);
        state = subject.getState();
    }

    @Override
    public void update() {
        System.out.println(name + " æ”¶åˆ°é€šçŸ¥");
        state = subject.getState(); //  è®©å½“å‰è§‚å¯Ÿè€…çš„çŠ¶æ€ å’Œ ç›®æ ‡æ”¹å˜åçš„çŠ¶æ€ä¿æŒä¸€è‡´
        System.out.println(name + " æ”¹å˜åçš„çŠ¶æ€ä¸ºï¼š" + state);
    }
}
```

</details>


@tab 8


### ğŸŒ¸ 8. Stateï¼ˆçŠ¶æ€ï¼‰

::: tip å…è®¸å¯¹è±¡åœ¨å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸º
:::

#### ï¼ˆ1ï¼‰æ„å›¾

å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶*å†…éƒ¨çŠ¶æ€æ”¹å˜*æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºã€‚å¯¹è±¡çœ‹èµ·æ¥ä¼¼ä¹ä¿®æ”¹äº†å®ƒçš„ç±»ã€‚


#### ï¼ˆ2ï¼‰ç±»å›¾

![](./assets/image-20240430145747952.png =800x)

#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

State æ¨¡å¼é€‚ç”¨äºï¼š

- ä¸€ä¸ªå¯¹è±¡çš„*è¡Œä¸ºå†³å®šäºå®ƒçš„çŠ¶æ€*ï¼Œå¹¶ä¸”å®ƒ*å¿…é¡»åœ¨è¿è¡Œæ—¶åˆ»æ ¹æ®çŠ¶æ€æ”¹å˜å®ƒçš„è¡Œä¸º*ã€‚
- ä¸€ä¸ªæ“ä½œä¸­*å«æœ‰åºå¤§çš„å¤šåˆ†æ”¯çš„æ¡ä»¶è¯­å¥*ï¼Œä¸”è¿™äº›*åˆ†æ”¯ä¾èµ–äºè¯¥å¯¹è±¡çš„çŠ¶æ€*ã€‚è¿™ä¸ªçŠ¶æ€å¸¸ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªæšä¸¾å¸¸é‡è¡¨ç¤ºã€‚


<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java
public class StatePattern {
    public static void main(String[] args) {
        Context context = new Context(); // count = 3
 
        System.out.println("çŠ¶æ€ï¼š" + context.getState() + " æ•°é‡ï¼š" + context.getCount());
 
        context.Request(); // è´­ä¹°ä¸€ä¸ªé¥®æ–™ count = 2
        context.Request(); // è´­ä¹°ä¸€ä¸ªé¥®æ–™ count = 1
        context.Request(); // è´­ä¹°ä¸€ä¸ªé¥®æ–™ count = 0
 
        System.out.println("çŠ¶æ€ï¼š" + context.getState() + " æ•°é‡ï¼š" + context.getCount());
 
        context.Request(); // æ— è´§ï¼Œç­‰å¾…è¡¥è´§
 
        System.out.println("çŠ¶æ€ï¼š" + context.getState() + " æ•°é‡ï¼š" + context.getCount());
 
        context.Request(); // è´­ä¹°ä¸€ä¸ªé¥®æ–™ count = 4
        System.out.println("çŠ¶æ€ï¼š" + context.getState() + " æ•°é‡ï¼š" + context.getCount());
 
    }
}
 
class Context{ // è´©å–æœº
    private int count;
 
    private State state;
 
    public Context(){
        count = 3;
        state = new StateA();
    }
 
    public int getCount() {
        return count;
    }
 
    public void setCount(int count) {
        this.count = count;
    }
 
    public State getState() {
        return state;
    }
 
    public void setState(State state) {
        this.state = state;
    }
 
    public void Request(){  // è´­ä¹°é¥®æ–™
        state.Handle(this);
    }
}
 
interface State{
    void Handle(Context context);
}
 
class StateA implements State{
 
    @Override
    public void Handle(Context context) {
        int count = context.getCount();
 
        if (count >= 1){
            System.out.println("è´­ä¹°æˆåŠŸ~");
            context.setCount(count - 1);
 
            if (context.getCount() == 0){
                context.setState(new StateB()); // è®¾ç½®ä¸ºæ— è´§çŠ¶æ€
            }
        }else {
            System.out.println("è´­ä¹°å¤±è´¥~");
        }
    }
}
 
class StateB implements State{
 
    @Override
    public void Handle(Context context) {
        int count = context.getCount();
 
        if (count == 0){
            System.out.println("è´­ä¹°å¤±è´¥ï¼ç­‰å¾…è¡¥è´§~");
 
            context.setCount(5);
            System.out.println("è¡¥è´§æˆåŠŸï¼Œè¯·é‡æ–°è´­ä¹°~");
 
            context.setState(new StateA());
        }
    }
}
```

</details>



@tab 9


### ğŸŒ¸ 9. Strategyï¼ˆç­–ç•¥ï¼‰

::: tip å®šä¹‰äº†ç®—æ³•æ—ï¼Œåˆ†åˆ«å°é—­èµ·æ¥ï¼Œè®©å®ƒä»¬ä¹‹é—´å¯ä»¥äº’ç›¸æ›¿æ¢ï¼Œæ­¤æ¨¡å¼è®©ç®—æ³•çš„å˜åŒ–ç‹¬ç«‹äºä½¿ç”¨ç®—æ³•çš„å®¢æˆ·
:::

#### ï¼ˆ1ï¼‰æ„å›¾


å®šä¹‰ä¸€ç³»åˆ—çš„**ç®—æ³•**ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ª**å°è£…**èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚æ­¤æ¨¡å¼ä½¿å¾—ç®—æ³•å¯ä»¥ç‹¬ç«‹äºä½¿ç”¨å®ƒä»¬çš„å®¢æˆ·è€Œå˜åŒ–ã€‚


#### ï¼ˆ2ï¼‰ç±»å›¾

![](./assets/image-20240430145813957.png =800x)


#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Strategy æ¨¡å¼é€‚ç”¨äºï¼š

- è®¸å¤šç›¸å…³çš„ç±»ä»…ä»…æ˜¯*è¡Œä¸ºæœ‰å¼‚*ã€‚
- *éœ€è¦ä½¿ç”¨ä¸€ä¸ªç®—æ³•çš„ä¸åŒå˜ä½“*ã€‚
- ç®—æ³•ä½¿ç”¨å®¢æˆ·ä¸åº”è¯¥çŸ¥é“çš„æ•°æ®ã€‚å¯ä½¿ç”¨ç­–ç•¥æ¨¡å¼ä»¥*é¿å…æš´éœ²å¤æ‚çš„ã€ä¸ç®—æ³•ç›¸å…³çš„æ•°æ®ç»“æ„*ã€‚
- ä¸€ä¸ªç±»å®šä¹‰äº†å¤šç§è¡Œä¸ºï¼Œå¹¶ä¸”è¿™äº›è¡Œä¸ºåœ¨è¿™ä¸ªç±»çš„æ“ä½œä¸­ä»¥å¤šä¸ªæ¡ä»¶è¯­å¥çš„å½¢å¼å‡ºç°ï¼ˆè¶…å¸‚æ‰“æŠ˜ï¼Œæ™®é€š/é«˜çº§ä¼šå‘˜ä»·ï¼‰ï¼Œå°†ç›¸å…³çš„æ¡ä»¶åˆ†æ”¯ç§»å…¥å®ƒä»¬å„è‡ªçš„ Strategy ç±»ä¸­ï¼Œä»¥ä»£æ›¿è¿™äº›æ¡ä»¶è¯­å¥ã€‚


<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java
public class StrategyPattern {
    public static void main(String[] args) {
 
        OperationContext context = new OperationContext(new Addstrategy());
        context.Operation(20,17);
 
        context = new OperationContext(new Substrategy());
        context.Operation(20,17);
 
        context = new OperationContext(new Multstrategy());
        context.Operation(20,17);
    }
}
 
class OperationContext{
    private Strategy strategy;
 
    public OperationContext(Strategy strategy){
        this.strategy = strategy;
    }
 
    public void Operation(int aï¼Œint b){
        strategy.TwoNumberOperation(a,b);
    }
}
 
interface Strategy{
    void TwoNumberOperation(int a,int b);
}
 
class Addstrategy implements Strategy{
    @Override
    public void TwoNumberOperation(int aï¼Œint b) {
        System.out.println(a + b);
    }
}
 
class Substrategy implements Strategy{
    @Override
    public void TwoNumberOperation(int aï¼Œint b) {
        System.out.println(a - b);
    }
}
 
class Multstrategy implements Strategy{
    @Override
    public void TwoNumberOperation(int aï¼Œint b) {
        System.out.println(a * b);
    }
}
```

</details>




@tab 10

### 10. Template Methodï¼ˆæ¨¡æ¿æ–¹æ³•ï¼‰

::: tip åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­å®šä¹‰ä¸€ä¸ªç®—æ³•çš„éª¨æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­
:::

#### ï¼ˆ1ï¼‰æ„å›¾

å®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„**ç®—æ³•éª¨æ¶**ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ã€‚Template Method ä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æ„å³*å¯é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤*ã€‚


#### ï¼ˆ2ï¼‰ç±»å›¾

![](./assets/image-20240430145831835.png =800x)

å…¶ä¸­ï¼š

- AbstractClassï¼ˆæŠ½è±¡ç±»ï¼‰å®šä¹‰æŠ½è±¡çš„*åŸè¯­æ“ä½œ*ï¼Œå…·ä½“çš„å­ç±»å°†é‡å®šä¹‰å®ƒä»¬ä»¥å®ç°ä¸€ä¸ªç®—æ³•çš„å„æ­¥éª¤ï¼›å®ç°æ¨¡æ¿æ–¹æ³•ï¼Œå®šä¸€ä¸ªç®—æ³•çš„éª¨æ¶ï¼Œè¯¥æ¨¡æ¿æ–¹æ³•ä¸ä»…è°ƒç”¨åŸè¯­æ“ä½œï¼Œä¹Ÿè°ƒç”¨å®šä¹‰åœ¨ AbstractClass æˆ–å…¶ä»–å¯¹è±¡ä¸­çš„æ“ä½œã€‚
- ConcreteClassï¼ˆå…·ä½“ç±»ï¼‰å®ç°åŸè¯­æ“ä½œä»¥å®Œæˆç®—æ³•ä¸­ä¸ç‰¹å®šå­ç±»ç›¸å…³çš„æ­¥éª¤ã€‚

> æŠ½è±¡ç±»æ§åˆ¶æ­¥éª¤ï¼Œå„å­ç±»ç»§æ‰¿çˆ¶ç±»å…·ä½“å®ç°æ“ä½œæ­¥éª¤

#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Template Method æ¨¡å¼é€‚ç”¨äºï¼š

- ä¸€æ¬¡æ€§å®ç°ä¸€ä¸ªç®—æ³•çš„ä¸å˜çš„éƒ¨åˆ†ï¼Œå¹¶å°†å¯å˜çš„è¡Œä¸ºç•™ç»™å­ç±»æ¥å®ç°ã€‚
- å„å­ç±»ä¸­å…¬å…±çš„è¡Œä¸ºåº”è¢«æå–å‡ºæ¥å¹¶é›†ä¸­åˆ°ä¸€ä¸ªå…¬å…±çˆ¶ç±»ä¸­ï¼Œä»¥é¿å…ä»£ç é‡å¤ã€‚
- æ§åˆ¶å­ç±»æ‰©å±•ï¼šæ¨¡æ¿æ–¹æ³•åœ¨ç‰¹å®šç‚¹è°ƒç”¨ â€œhookâ€ æ“ä½œ (é»˜è®¤è¡Œä¸ºï¼Œå­ç±»å¯ä»¥åœ¨å¿…è¦æ—¶è¿›è¡Œé‡å®šä¹‰æ‰©å±•)ï¼Œè¿™å°±åªå…è®¸åœ¨è¿™äº›ç‚¹è¿›è¡Œæ‰©å±•ã€‚

<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java
public class TemplateMethodPattern {
    public static void main(String[] args) {
        // çˆ¶ç±»å å¯¹è±¡å = new å­ç±»å();
 
        Person student = new Student();
        Person teacher = new Teacher();
 
        student.TemplateMethod();
 
        System.out.println("=========åˆ†å‰²çº¿=============");
 
        teacher.TemplateMethod();
    }
}
 
abstract class Person{
    public void TemplateMethod(){
        System.out.println("ä¸Šè¯¾ å»æ•™å®¤");
        PrimitiveOperation1();
        System.out.println("ä¸‹è¯¾ ç¦»å¼€æ•™å®¤");
        PrimitiveOperation2();
    }
 
    public abstract void PrimitiveOperation1(); // åŸè¯­æ“ä½œ 1ï¼šä¸Šè¯¾è¿‡ç¨‹ å­¦ç”Ÿ å¬è¯¾... è€å¸ˆ è®²è¯¾
    public abstract void PrimitiveOperation2(); // åŸè¯­æ“ä½œ 2ï¼šä½œä¸š  å­¦ç”Ÿ å†™ä½œä¸š æäº¤ä½œä¸š... è€å¸ˆæ‰¹æ”¹ä½œä¸š æ‰“åˆ†æ•°
}
 
class Student extends Person{
 
    @Override
    public void PrimitiveOperation1() {
        System.out.println("å­¦ç”Ÿï¼šå¬è¯¾ å­¦ä¹  åšç¬”è®° æå‡ºé—®é¢˜");
    }
 
    @Override
    public void PrimitiveOperation2() {
        System.out.println("å­¦ç”Ÿï¼šå†™ä½œä¸š æäº¤ä½œä¸š");
    }
}
 
class Teacher extends Person{
 
    @Override
    public void PrimitiveOperation1() {
        System.out.println("è€å¸ˆï¼šä¸Šè¯¾ è®²è¯¾ è§£ç­”é—®é¢˜ å¸ƒç½®ä½œä¸š");
    }
 
    @Override
    public void PrimitiveOperation2() {
        System.out.println("è€å¸ˆï¼šæ‰¹æ”¹ä½œä¸š æ‰“åˆ†æ•°");
    }
}
```

</details>



@tab 11

### ğŸŒ¸ 11. Visitorï¼ˆè®¿é—®è€…ï¼‰

::: tip å½“ä½ æƒ³è¦ä¸ºä¸€ä¸ªå¯¹è±¡çš„ç»„åˆå¢åŠ æ–°çš„èƒ½åŠ›ï¼Œä¸”å°è£…å¹¶ä¸é‡è¦æ—¶ï¼Œå°±ä½¿ç”¨è®¿é—®è€…æ¨¡å¼
:::

#### ï¼ˆ1ï¼‰æ„å›¾

*è¡¨ç¤ºä¸€ä¸ªä½œç”¨äºæŸ**å¯¹è±¡ç»“æ„**ä¸­çš„å„å…ƒç´ çš„æ“ä½œ*ã€‚å®ƒå…è®¸åœ¨ä¸æ”¹å˜å„å…ƒç´ çš„ç±»çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°æ“ä½œã€‚


#### ï¼ˆ2ï¼‰ç±»å›¾

![](./assets/image-20240430145858087.png =800x)

å…¶ä¸­ï¼š

- Visitor (è®¿é—®è€…) ä¸ºè¯¥å¯¹è±¡ç»“æ„ä¸­ ConcreteElement çš„æ¯ä¸€ä¸ªç±»å£°æ˜ä¸€ä¸ª Visit æ“ä½œã€‚è¯¥æ“ä½œçš„åå­—å’Œç‰¹å¾æ ‡è¯†äº†å‘é€ Vist è¯·æ±‚ç»™è¯¥è®¿é—®è€…çš„é‚£ä¸ªç±»ï¼Œè¿™ä½¿å¾—è®¿é—®è€…å¯ä»¥ç¡®å®šæ­£è¢«è®¿é—®å…ƒç´ çš„å…·ä½“çš„ç±»ã€‚è¿™æ ·è®¿é—®è€…å°±å¯ä»¥é€šè¿‡è¯¥å…ƒç´ çš„ç‰¹å®šæ¥å£ç›´æ¥è®¿é—®å®ƒã€‚
- ConcreteVisitor (å…·ä½“è®¿é—®è€…) å®ç°æ¯ä¸ªæœ‰ Visitor å£°æ˜çš„æ“ä½œï¼Œæ¯ä¸ªæ“ä½œå®ç°æœ¬ç®—æ³•çš„ä¸€éƒ¨åˆ†ï¼Œè€Œè¯¥ç®—æ³•ç‰‡æ®µä¹ƒæ˜¯å¯¹åº”äºç»“æ„ä¸­å¯¹è±¡çš„ç±»ã€‚Concrete Visitor ä¸ºè¯¥ç®—æ³•æä¾›äº†ä¸Šä¸‹æ–‡å¹¶å­˜å‚¨å®ƒçš„å±€éƒ¨çŠ¶æ€ã€‚è¿™ä¸€çŠ¶æ€å¸¸å¸¸åœ¨éå†è¯¥ç»“æ„çš„è¿‡ç¨‹ä¸­ç´¯ç§¯ç»“æœã€‚
- Element (å…ƒç´ ) å®šä¹‰ä»¥ä¸€ä¸ªè®¿é—®è€…ä¸ºå‚æ•°çš„ Accept æ“ä½œã€‚
- ConcreteElement (å…·ä½“å…ƒç´ ) å®ç°ä»¥ä¸€ä¸ªè®¿é—®è€…ä¸ºå‚æ•°çš„ Accept æ“ä½œã€‚
- ObjectStructure (å¯¹è±¡ç»“æ„) èƒ½æšä¸¾å®ƒçš„å…ƒç´ ï¼›å¯ä»¥æä¾›ä¸€ä¸ªé«˜å±‚çš„æ¥å£ä»¥å…è®¸è¯¥è®¿é—®è€…è®¿é—®å®ƒçš„å…ƒç´ ï¼›å¯ä»¥æ˜¯ä¸€ä¸ªç»„åˆæˆ–è€…ä¸€ä¸ªé›†åˆï¼Œå¦‚ä¸€ä¸ªåˆ—è¡¨æˆ–ä¸€ä¸ªæ— åºé›†åˆã€‚


#### ï¼ˆ3ï¼‰é€‚ç”¨æ€§

Visitor æ¨¡å¼é€‚ç”¨äºï¼š

- ä¸€ä¸ªå¯¹è±¡ç»“æ„åŒ…å«å¾ˆå¤šç±»å¯¹è±¡ï¼Œå®ƒä»¬æœ‰ä¸åŒçš„æ¥å£ï¼Œè€Œç”¨æˆ·æƒ³å¯¹è¿™äº›å¯¹è±¡å®æ–½ä¸€äº›ä¾èµ–äºå…¶å…·ä½“ç±»çš„æ“ä½œã€‚
- éœ€è¦å¯¹ä¸€ä¸ªå¯¹è±¡ç»“æ„ä¸­çš„å¯¹è±¡è¿›è¡Œå¾ˆå¤šä¸åŒçš„å¹¶ä¸”ä¸ç›¸å…³çš„æ“ä½œï¼Œè€Œåˆæƒ³è¦é¿å…è¿™äº›æ“ä½œ â€œæ±¡æŸ“â€ è¿™äº›å¯¹è±¡çš„ç±»ã€‚
- å®šä¹‰å¯¹è±¡ç»“æ„çš„ç±»å¾ˆå°‘æ”¹å˜ï¼Œä½†ç»å¸¸éœ€è¦åœ¨æ­¤ç»“æ„ä¸Šå®šä¹‰æ–°çš„æ“ä½œã€‚


<details>
<summary><mark>æŸ¥çœ‹ä»£ç </mark></summary>

```java
public class VisitorPattern {
    public static void main(String[] args) {
        PersonStructure structure = new PersonStructure();
 
        Visitor1 visitor1 = new Visitor1();
        System.out.println("è®¿é—®è€…1çš„è®¿é—®è®°å½•ï¼š");
        structure.Accept(visitor1);
        System.out.println("å­¦ç”Ÿå¹´é¾„çš„æ€»å’Œï¼š" + visitor1.getStudentAgeSum() +" è€å¸ˆå¹´é¾„çš„æ€»å’Œï¼š" + visitor1.getTeacherAgeSum());
 
        System.out.println("=========åˆ†å‰²çº¿==============");
 
        Visitor2 visitor2 = new Visitor2();
        System.out.println("è®¿é—®è€…2çš„è®¿é—®è®°å½•ï¼š");
        structure.Accept(visitor2);
        System.out.println("å­¦ç”Ÿçš„æœ€é«˜æˆç»©ï¼š" + visitor2.getMaxScore() + " è€å¸ˆçš„æœ€é«˜å·¥é¾„ï¼š" + visitor2.getMaxWorkYear());
 
    }
}
 
interface Visitor{
    void VistStudent(Student student); // è®¿é—®
    void vistTeacher(Teacher teacher); // è®¿é—®è€å¸ˆ
}
 
class Visitor1 implements Visitor{ // è®¿é—®è€…1 åˆ†åˆ«ç»Ÿè®¡å­¦ç”Ÿå’Œè€å¸ˆçš„å¹´é¾„æ€»å’Œ
    private int studentAgeSum = 0;
    private int teacherAgeSum = 0;
 
    public int getStudentAgeSum() {
        return studentAgeSum;
    }
 
    public int getTeacherAgeSum() {
        return teacherAgeSum;
    }
 
    @Override
    public void VistStudent(Student student) {
        System.out.println("è®¿é—®è€…1è®¿é—®å­¦ç”Ÿï¼š" + student.getName() + " å¹´é¾„ï¼š" + student.getAge());
        studentAgeSum += student.getAge();
    }
 
    @Override
    public void vistTeacher(Teacher teacher) {
        System.out.println("è®¿é—®è€…1è®¿é—®è€å¸ˆï¼š" + teacher.getName() + " å¹´é¾„ï¼š" + teacher.getAge());
        teacherAgeSum += teacher.getAge();
    }
}
 
class Visitor2 implements Visitor{ // è®¿é—®è€…2 åˆ†åˆ«æ±‚å‡º å­¦ç”Ÿçš„æœ€é«˜æˆç»© ä»¥åŠ è€å¸ˆçš„æœ€é«˜å·¥é¾„
    private int maxScore = -1;
    private int maxWorkYear = -1;
 
    public int getMaxScore() {
        return maxScore;
    }
 
    public int getMaxWorkYear() {
        return maxWorkYear;
    }
 
    @Override
    public void VistStudent(Student student) {
        System.out.println("è®¿é—®è€…2è®¿é—®å­¦ç”Ÿï¼š" + student.getName() + " æˆç»©ï¼š" + student.getScore());
        maxScore = Math.max(maxScore,student.getScore());
    }
 
    @Override
    public void vistTeacher(Teacher teacher) {
        System.out.println("è®¿é—®è€…2è®¿é—®è€å¸ˆï¼š" + teacher.getName() + " å·¥é¾„ï¼š" + teacher.getWorkYear());
        maxWorkYear = Math.max(maxWorkYear,teacher.getWorkYear());
    }
}
 
class PersonStructure{
    private List<Person> personList = new ArrayList<>();
 
    public PersonStructure(){
        personList.add(new Student("å¼ ä¸‰",20,70));
        personList.add(new Student("æå››",21,80));
        personList.add(new Student("ç‹äº”",22,90));
 
        personList.add(new Teacher("æè€å¸ˆ",26,3));
        personList.add(new Teacher("é™ˆè€å¸ˆ",27,4));
        personList.add(new Teacher("åˆ˜è€å¸ˆ",28,5));
    }
 
    public void Accept(Visitor visitor){
        for (Person person : personList) {
            person.Accept(visitor);
        }
    }
}
 
abstract class Person{
    private String name;
    private int age;
 
    public Person(String  name,int age){
        this.name = name;
        this.age = age;
    }
 
    public String getName(){
        return name;
    }
 
    public int getAge() {
        return age;
    }
 
    public abstract void Accept(Visitor visitor);
}
 
class Student extends Person{
 
    private int score;
    public Student(String name,int age,int score){
        super(name,age);
        this.score = score;
    }
 
    public int getScore(){
        return score;
    }
 
    @Override
    public void Accept(Visitor visitor) {
        visitor.VistStudent(this);
    }
}
 
class Teacher extends Person{
    private int workYear;
    public Teacher(String name,int age,int workYear){
        super(name,age);
        this.workYear = workYear;
    }
 
    public int getWorkYear(){
        return workYear;
    }
 
    @Override
    public void Accept(Visitor visitor) {
        visitor.vistTeacher(this);
    }
}
```

</details>



