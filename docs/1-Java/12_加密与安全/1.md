---
title: ç¼–ç ç®—æ³•
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::

è¦å­¦ä¹ ç¼–ç ç®—æ³•ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€çœ‹ä»€ä¹ˆæ˜¯ç¼–ç ã€‚

ASCII ç å°±æ˜¯ä¸€ç§ç¼–ç ï¼Œå­—æ¯ `A` çš„ç¼–ç æ˜¯åå…­è¿›åˆ¶çš„ `0x41`ï¼Œå­—æ¯ `B` æ˜¯ `0x42`ï¼Œä»¥æ­¤ç±»æ¨ï¼š

| å­—æ¯ | ASCII ç¼–ç  |
| :--- | :--------- |
| A    | 0x41       |
| B    | 0x42       |
| C    | 0x43       |
| D    | 0x44       |
| ...  | ...        |

å› ä¸º ASCII ç¼–ç æœ€å¤šåªèƒ½æœ‰ 128 ä¸ªå­—ç¬¦ï¼Œè¦æƒ³å¯¹æ›´å¤šçš„æ–‡å­—è¿›è¡Œç¼–ç ï¼Œå°±éœ€è¦ç”¨ Unicodeã€‚è€Œä¸­æ–‡çš„ä¸­ä½¿ç”¨ Unicode ç¼–ç å°±æ˜¯ `0x4e2d`ï¼Œä½¿ç”¨ UTF-8 åˆ™éœ€è¦ 3 ä¸ªå­—èŠ‚ç¼–ç ï¼š

| æ±‰å­— | Unicode ç¼–ç  | UTF-8 ç¼–ç  |
| :--- | :----------- | :--------- |
| ä¸­   | 0x4e2d       | 0xe4b8ad   |
| æ–‡   | 0x6587       | 0xe69687   |
| ç¼–   | 0x7f16       | 0xe7bc96   |
| ç    | 0x7801       | 0xe7a081   |
| ...  | ...          | ...        |

å› æ­¤ï¼Œæœ€ç®€å•çš„ç¼–ç æ˜¯ç›´æ¥ç»™æ¯ä¸ªå­—ç¬¦æŒ‡å®šä¸€ä¸ªè‹¥å¹²å­—èŠ‚è¡¨ç¤ºçš„æ•´æ•°ï¼Œå¤æ‚ä¸€ç‚¹çš„ç¼–ç å°±éœ€è¦æ ¹æ®ä¸€ä¸ªå·²æœ‰çš„ç¼–ç æ¨ç®—å‡ºæ¥ã€‚

æ¯”å¦‚ UTF-8 ç¼–ç ï¼Œå®ƒæ˜¯ä¸€ç§**ä¸å®šé•¿ç¼–ç **ï¼Œä½†å¯ä»¥ä»ç»™å®šå­—ç¬¦çš„ Unicode ç¼–ç æ¨ç®—å‡ºæ¥ã€‚

## ğŸ€ URL ç¼–ç 

URL ç¼–ç æ˜¯æµè§ˆå™¨å‘é€æ•°æ®ç»™æœåŠ¡å™¨æ—¶ä½¿ç”¨çš„ç¼–ç ï¼Œå®ƒé€šå¸¸é™„åŠ åœ¨ URL çš„å‚æ•°éƒ¨åˆ†ï¼Œä¾‹å¦‚ï¼š

[https://www.baidu.com/s?wd=%E4%B8%AD%E6%96%87](https://www.baidu.com/s?wd=ä¸­æ–‡)

ä¹‹æ‰€ä»¥éœ€è¦ URL ç¼–ç ï¼Œæ˜¯å› ä¸ºå‡ºäºå…¼å®¹æ€§è€ƒè™‘ï¼Œå¾ˆå¤šæœåŠ¡å™¨åªè¯†åˆ« ASCII å­—ç¬¦ã€‚ä½†å¦‚æœ URL ä¸­åŒ…å«ä¸­æ–‡ã€æ—¥æ–‡è¿™äº›é ASCII å­—ç¬¦æ€ä¹ˆåŠï¼Ÿä¸è¦ç´§ï¼ŒURL ç¼–ç æœ‰ä¸€å¥—è§„åˆ™ï¼š

- å¦‚æœå­—ç¬¦æ˜¯ `A`ï½`Z`ï¼Œ`a`ï½`z`ï¼Œ`0`ï½`9` ä»¥åŠ `-`ã€`_`ã€`.`ã€`*`ï¼Œåˆ™ä¿æŒä¸å˜ï¼›
- å¦‚æœæ˜¯å…¶ä»–å­—ç¬¦ï¼Œå…ˆè½¬æ¢ä¸º UTF-8 ç¼–ç ï¼Œç„¶åå¯¹æ¯ä¸ªå­—èŠ‚ä»¥ `%XX` è¡¨ç¤ºã€‚

> ä¾‹å¦‚ï¼šå­—ç¬¦ `ä¸­` çš„ UTF-8 ç¼–ç æ˜¯ `0xe4b8ad`ï¼Œå› æ­¤ï¼Œå®ƒçš„ URL ç¼–ç æ˜¯ `%E4%B8%AD`ã€‚URL ç¼–ç æ€»æ˜¯å¤§å†™ã€‚

Java æ ‡å‡†åº“æä¾›äº†ä¸€ä¸ª `URLEncoder` ç±»æ¥å¯¹ä»»æ„å­—ç¬¦ä¸²è¿›è¡Œ URL ç¼–ç ï¼š

```java
import java.net.URLEncoder;
import java.nio.charset.StandardCharsets;
public class Main {
    public static void main(String[] args) {
        String encoded = URLEncoder.encode("ä¸­æ–‡!", StandardCharsets.UTF_8);
        System.out.println(encoded);
    }
}
```

ä¸Šè¿°ä»£ç çš„è¿è¡Œç»“æœæ˜¯ `%E4%B8%AD%E6%96%87%21`ï¼Œ`ä¸­` çš„ URL ç¼–ç æ˜¯ `%E4%B8%AD`ï¼Œ`æ–‡` çš„ URL ç¼–ç æ˜¯ `%E6%96%87`ï¼Œ`!` è™½ç„¶æ˜¯ ASCII å­—ç¬¦ï¼Œä¹Ÿè¦å¯¹å…¶ç¼–ç ä¸º `%21`ã€‚

å’Œæ ‡å‡†çš„ URL ç¼–ç ç¨æœ‰ä¸åŒï¼ŒURLEncoder æŠŠç©ºæ ¼å­—ç¬¦ç¼–ç æˆ `+`ï¼Œè€Œç°åœ¨çš„ URL ç¼–ç æ ‡å‡†è¦æ±‚ç©ºæ ¼è¢«ç¼–ç ä¸º `%20`ï¼Œä¸è¿‡ï¼ŒæœåŠ¡å™¨éƒ½å¯ä»¥å¤„ç†è¿™ä¸¤ç§æƒ…å†µã€‚

å¦‚æœæœåŠ¡å™¨æ”¶åˆ° URL ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œå°±å¯ä»¥å¯¹å…¶è¿›è¡Œè§£ç ï¼Œè¿˜åŸæˆåŸå§‹å­—ç¬¦ä¸²ã€‚Java æ ‡å‡†åº“çš„ `URLDecoder` å°±å¯ä»¥è§£ç ï¼š

```java
import java.net.URLDecoder;
import java.nio.charset.StandardCharsets;
public class Main {
    public static void main(String[] args) {
        String decoded = URLDecoder.decode("%E4%B8%AD%E6%96%87%21", StandardCharsets.UTF_8);
        System.out.println(decoded);
    }
}
```

::: warning ç‰¹åˆ«æ³¨æ„
URL ç¼–ç æ˜¯ç¼–ç ç®—æ³•ï¼Œä¸æ˜¯åŠ å¯†ç®—æ³•ã€‚URL ç¼–ç çš„ç›®çš„æ˜¯æŠŠä»»æ„æ–‡æœ¬æ•°æ®ç¼–ç ä¸º `%` å‰ç¼€è¡¨ç¤ºçš„æ–‡æœ¬ï¼Œç¼–ç åçš„æ–‡æœ¬ä»…åŒ…å« `A`ï½`Z`ï¼Œ`a`ï½`z`ï¼Œ`0`ï½`9`ï¼Œ`-`ï¼Œ`_`ï¼Œ`.`ï¼Œ`*` å’Œ `%`ï¼Œä¾¿äºæµè§ˆå™¨å’ŒæœåŠ¡å™¨å¤„ç†ã€‚

:::

## ğŸ€ Base64 ç¼–ç 

URL ç¼–ç æ˜¯å¯¹å­—ç¬¦è¿›è¡Œç¼–ç ï¼Œè¡¨ç¤ºæˆ `%xx` çš„å½¢å¼ï¼Œè€Œ Base64 ç¼–ç æ˜¯å¯¹äºŒè¿›åˆ¶æ•°æ®è¿›è¡Œç¼–ç ï¼Œè¡¨ç¤ºæˆæ–‡æœ¬æ ¼å¼ã€‚

Base64 ç¼–ç å¯ä»¥æŠŠä»»æ„é•¿åº¦çš„äºŒè¿›åˆ¶æ•°æ®å˜ä¸ºçº¯æ–‡æœ¬ï¼Œä¸”åªåŒ…å« `A`ï½`Z`ã€`a`ï½`z`ã€`0`ï½`9`ã€`+`ã€`/`ã€`=` è¿™äº›å­—ç¬¦ã€‚å®ƒçš„åŸç†æ˜¯æŠŠ 3 å­—èŠ‚çš„äºŒè¿›åˆ¶æ•°æ®æŒ‰ 6bit ä¸€ç»„ï¼Œç”¨ 4 ä¸ª int æ•´æ•°è¡¨ç¤ºï¼Œç„¶åæŸ¥è¡¨ï¼ŒæŠŠ int æ•´æ•°ç”¨ç´¢å¼•å¯¹åº”åˆ°å­—ç¬¦ï¼Œå¾—åˆ°ç¼–ç åçš„å­—ç¬¦ä¸²ã€‚

ä¸¾ä¸ªä¾‹å­ï¼š3 ä¸ª byte æ•°æ®åˆ†åˆ«æ˜¯ `e4`ã€`b8`ã€`ad`ï¼ŒæŒ‰ 6bit åˆ†ç»„å¾—åˆ° `39`ã€`0b`ã€`22` å’Œ `2d`ï¼š

![](assets/image-20231128114726573.png =500x)

å› ä¸º 6 ä½æ•´æ•°çš„èŒƒå›´æ€»æ˜¯ `0`~`63`ï¼Œæ‰€ä»¥ï¼Œèƒ½ç”¨ 64 ä¸ªå­—ç¬¦è¡¨ç¤ºï¼šå­—ç¬¦ `A`~`Z` å¯¹åº”ç´¢å¼• `0`~`25`ï¼Œå­—ç¬¦ `a`~`z` å¯¹åº”ç´¢å¼• `26`~`51`ï¼Œå­—ç¬¦ `0`~`9` å¯¹åº”ç´¢å¼• `52`~`61`ï¼Œæœ€åä¸¤ä¸ªç´¢å¼• `62`ã€`63` åˆ†åˆ«ç”¨å­—ç¬¦ `+` å’Œ `/` è¡¨ç¤ºã€‚

åœ¨ Java ä¸­ï¼ŒäºŒè¿›åˆ¶æ•°æ®å°±æ˜¯ `byte[]` æ•°ç»„ã€‚Java æ ‡å‡†åº“æä¾›äº† `Base64` æ¥å¯¹ `byte[]` æ•°ç»„è¿›è¡Œç¼–è§£ç ï¼š

```java
import java.util.*;
public class Main {
    public static void main(String[] args) {
        byte[] input = new byte[] { (byte) 0xe4, (byte) 0xb8, (byte) 0xad };
        String b64encoded = Base64.getEncoder().encodeToString(input);
        System.out.println(b64encoded);
    }
}
```

ç¼–ç åå¾—åˆ° `5Lit` 4 ä¸ªå­—ç¬¦ã€‚è¦å¯¹ `Base64` è§£ç ï¼Œä»ç„¶ç”¨ `Base64` è¿™ä¸ªç±»ï¼š

```java
import java.util.*;
public class Main {
    public static void main(String[] args) {
        byte[] output = Base64.getDecoder().decode("5Lit");
        System.out.println(Arrays.toString(output)); // [-28, -72, -83]
    }
}
```

> æœ‰çš„ç«¥é‹ä¼šé—®ï¼šå¦‚æœè¾“å…¥çš„ `byte[]` æ•°ç»„é•¿åº¦ä¸æ˜¯ 3 çš„æ•´æ•°å€è‚¿ä¹ˆåŠï¼Ÿ

è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦å¯¹è¾“å…¥çš„æœ«å°¾è¡¥ä¸€ä¸ªæˆ–ä¸¤ä¸ª `0x00`ï¼Œç¼–ç åï¼Œåœ¨ç»“å°¾åŠ ä¸€ä¸ª `=` è¡¨ç¤ºè¡¥å……äº† 1 ä¸ª `0x00`ï¼ŒåŠ ä¸¤ä¸ª `=` è¡¨ç¤ºè¡¥å……äº† 2 ä¸ª `0x00`ï¼Œè§£ç çš„æ—¶å€™ï¼Œå»æ‰æœ«å°¾è¡¥å……çš„ä¸€ä¸ªæˆ–ä¸¤ä¸ª `0x00` å³å¯ã€‚

å®é™…ä¸Šï¼Œå› ä¸ºç¼–ç åçš„é•¿åº¦åŠ ä¸Š `=` æ€»æ˜¯ 4 çš„å€æ•°ï¼Œæ‰€ä»¥å³ä½¿ä¸åŠ  `=` ä¹Ÿå¯ä»¥è®¡ç®—å‡ºåŸå§‹è¾“å…¥çš„ `byte[]`ã€‚Base64 ç¼–ç çš„æ—¶å€™å¯ä»¥ç”¨ `withoutPadding()` å»æ‰ `=`ï¼Œè§£ç å‡ºæ¥çš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼š

```java
import java.util.*;
public class Main {
    public static void main(String[] args) {
        byte[] input = new byte[] { (byte) 0xe4, (byte) 0xb8, (byte) 0xad, 0x21 };
        String b64encoded = Base64.getEncoder().encodeToString(input);
        String b64encoded2 = Base64.getEncoder().withoutPadding().encodeToString(input);
        System.out.println(b64encoded);
        System.out.println(b64encoded2);
        byte[] output = Base64.getDecoder().decode(b64encoded2);
        System.out.println(Arrays.toString(output));
    }
}

```

å› ä¸ºæ ‡å‡†çš„ Base64 ç¼–ç ä¼šå‡ºç° `+`ã€`/` å’Œ `=`ï¼Œæ‰€ä»¥ä¸é€‚åˆæŠŠ Base64 ç¼–ç åçš„å­—ç¬¦ä¸²æ”¾åˆ° URL ä¸­ã€‚ä¸€ç§é’ˆå¯¹ URL çš„ Base64 ç¼–ç å¯ä»¥åœ¨ URL ä¸­ä½¿ç”¨çš„ Base64 ç¼–ç ï¼Œå®ƒä»…ä»…æ˜¯æŠŠ `+` å˜æˆ `-`ï¼Œ`/` å˜æˆ `_`ï¼š

```java
import java.util.*;
public class Main {
    public static void main(String[] args) {
        byte[] input = new byte[] { 0x01, 0x02, 0x7f, 0x00 };
        String b64encoded = Base64.getUrlEncoder().encodeToString(input);
        System.out.println(b64encoded);
        byte[] output = Base64.getUrlDecoder().decode(b64encoded);
        System.out.println(Arrays.toString(output));
    }
}

```

Base64 ç¼–ç çš„ç›®çš„æ˜¯æŠŠäºŒè¿›åˆ¶æ•°æ®å˜æˆæ–‡æœ¬æ ¼å¼ï¼Œè¿™æ ·åœ¨å¾ˆå¤šæ–‡æœ¬ä¸­å°±å¯ä»¥å¤„ç†äºŒè¿›åˆ¶æ•°æ®ã€‚ä¾‹å¦‚ï¼Œç”µå­é‚®ä»¶åè®®å°±æ˜¯æ–‡æœ¬åè®®ï¼Œå¦‚æœè¦åœ¨ç”µå­é‚®ä»¶ä¸­æ·»åŠ ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå°±å¯ä»¥ç”¨ Base64 ç¼–ç ï¼Œç„¶åä»¥æ–‡æœ¬çš„å½¢å¼ä¼ é€ã€‚

Base64 ç¼–ç çš„ç¼ºç‚¹æ˜¯ä¼ è¾“æ•ˆç‡ä¼š **é™ä½**ï¼Œå› ä¸ºå®ƒæŠŠåŸå§‹æ•°æ®çš„é•¿åº¦å¢åŠ äº† 1/3ã€‚

å’Œ URL ç¼–ç ä¸€æ ·ï¼ŒBase64 ç¼–ç æ˜¯ä¸€ç§ç¼–ç ç®—æ³•ï¼Œä¸æ˜¯åŠ å¯†ç®—æ³•ã€‚

å¦‚æœæŠŠ Base64 çš„ 64 ä¸ªå­—ç¬¦ç¼–ç è¡¨æ¢æˆ 32 ä¸ªã€48 ä¸ªæˆ–è€… 58 ä¸ªï¼Œå°±å¯ä»¥ä½¿ç”¨ Base32 ç¼–ç ï¼ŒBase48 ç¼–ç å’Œ Base58 ç¼–ç ã€‚å­—ç¬¦è¶Šå°‘ï¼Œç¼–ç çš„æ•ˆç‡å°±ä¼šè¶Šä½ã€‚

## ğŸ€ å°ç»“

- URL ç¼–ç å’Œ Base64 ç¼–ç éƒ½æ˜¯ç¼–ç ç®—æ³•ï¼Œå®ƒä»¬ä¸æ˜¯åŠ å¯†ç®—æ³•ï¼›

- URL ç¼–ç çš„ç›®çš„æ˜¯æŠŠä»»æ„æ–‡æœ¬æ•°æ®ç¼–ç ä¸º `%` å‰ç¼€è¡¨ç¤ºçš„æ–‡æœ¬ï¼Œä¾¿äºæµè§ˆå™¨å’ŒæœåŠ¡å™¨å¤„ç†ï¼›

- Base64 ç¼–ç çš„ç›®çš„æ˜¯æŠŠä»»æ„äºŒè¿›åˆ¶æ•°æ®ç¼–ç ä¸ºæ–‡æœ¬ï¼Œä½†ç¼–ç åæ•°æ®é‡ä¼šå¢åŠ  1/3ã€‚
