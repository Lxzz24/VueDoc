---
title: æ„å»ºæµç¨‹
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::

Maven ä¸ä½†æœ‰æ ‡å‡†åŒ–çš„é¡¹ç›®ç»“æ„ï¼Œè€Œä¸”è¿˜æœ‰ä¸€å¥—æ ‡å‡†åŒ–çš„æ„å»ºæµç¨‹ï¼Œå¯ä»¥è‡ªåŠ¨åŒ–å®ç°ç¼–è¯‘ï¼Œæ‰“åŒ…ï¼Œå‘å¸ƒï¼Œç­‰ç­‰ã€‚

## ğŸ€ Lifecycle å’Œ Phase

ä½¿ç”¨ Maven æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆè¦äº†è§£ä»€ä¹ˆæ˜¯ Maven çš„ **ç”Ÿå‘½å‘¨æœŸ**ï¼ˆlifecycleï¼‰ã€‚

Maven çš„ç”Ÿå‘½å‘¨æœŸç”±ä¸€ç³»åˆ— **é˜¶æ®µ**ï¼ˆphaseï¼‰æ„æˆï¼Œä»¥å†…ç½®çš„ç”Ÿå‘½å‘¨æœŸ `default` ä¸ºä¾‹ï¼Œå®ƒåŒ…å«ä»¥ä¸‹ phaseï¼š

- **validate**
- initialize
- generate-sources
- process-sources
- generate-resources
- process-resources
- **compile**
- process-classes
- generate-test-sources
- process-test-sources
- generate-test-resources
- process-test-resources
- test-compile
- process-test-classes
- **test**
- prepare-package
- **package**
- pre-integration-test
- integration-test
- post-integration-test
- verify
- install
- deploy

å¦‚æœæˆ‘ä»¬è¿è¡Œ `mvn package`ï¼ŒMaven å°±ä¼šæ‰§è¡Œ `default` ç”Ÿå‘½å‘¨æœŸï¼Œå®ƒä¼šä»å¼€å§‹ä¸€ç›´è¿è¡Œåˆ° `package` è¿™ä¸ª phase ä¸ºæ­¢ï¼š

- validate
- ...
- package

å¦‚æœæˆ‘ä»¬è¿è¡Œ `mvn compile`ï¼ŒMaven ä¹Ÿä¼šæ‰§è¡Œ `default` ç”Ÿå‘½å‘¨æœŸï¼Œä½†è¿™æ¬¡å®ƒåªä¼šè¿è¡Œåˆ° `compile`ï¼Œå³ä»¥ä¸‹å‡ ä¸ª phaseï¼š

- validate
- ...
- compile

Maven å¦ä¸€ä¸ªå¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ `clean`ï¼Œå®ƒä¼šæ‰§è¡Œ 3 ä¸ª phaseï¼š

- pre-clean
- clean ï¼ˆæ³¨æ„è¿™ä¸ª clean ä¸æ˜¯ lifecycle è€Œæ˜¯ phaseï¼‰
- post-clean

æ‰€ä»¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ `mvn` è¿™ä¸ªå‘½ä»¤æ—¶ï¼Œåé¢çš„å‚æ•°æ˜¯ phaseï¼ŒMaven è‡ªåŠ¨æ ¹æ®ç”Ÿå‘½å‘¨æœŸè¿è¡Œåˆ°æŒ‡å®šçš„ phaseã€‚

æ›´å¤æ‚çš„ä¾‹å­æ˜¯æŒ‡å®šå¤šä¸ª phaseï¼Œä¾‹å¦‚ï¼Œè¿è¡Œ `mvn clean package`ï¼ŒMaven å…ˆæ‰§è¡Œ `clean` ç”Ÿå‘½å‘¨æœŸå¹¶è¿è¡Œåˆ° `clean` è¿™ä¸ª phaseï¼Œç„¶åæ‰§è¡Œ `default` ç”Ÿå‘½å‘¨æœŸå¹¶è¿è¡Œåˆ° `package` è¿™ä¸ª phaseï¼Œå®é™…æ‰§è¡Œçš„ phase å¦‚ä¸‹ï¼š

- pre-clean
- clean ï¼ˆæ³¨æ„è¿™ä¸ª clean æ˜¯ phaseï¼‰
- validate
- ...
- package

---

åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä½¿ç”¨çš„å‘½ä»¤æœ‰ï¼š

- `mvn clean`ï¼šæ¸…ç†æ‰€æœ‰ç”Ÿæˆçš„ class å’Œ jarï¼›

- `mvn clean compile`ï¼šå…ˆæ¸…ç†ï¼Œå†æ‰§è¡Œåˆ° `compile`ï¼›

- `mvn clean test`ï¼šå…ˆæ¸…ç†ï¼Œå†æ‰§è¡Œåˆ° `test`ï¼Œå› ä¸ºæ‰§è¡Œ `test` å‰å¿…é¡»æ‰§è¡Œ `compile`ï¼Œæ‰€ä»¥è¿™é‡Œä¸å¿…æŒ‡å®š `compile`ï¼›

- `mvn clean package`ï¼šå…ˆæ¸…ç†ï¼Œå†æ‰§è¡Œåˆ° `package`ã€‚

å¤§å¤šæ•° phase åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› ä¸ºæˆ‘ä»¬é€šå¸¸æ²¡æœ‰åœ¨ `pom.xml` ä¸­é…ç½®ç›¸å…³çš„è®¾ç½®ï¼Œæ‰€ä»¥è¿™äº› phase ä»€ä¹ˆäº‹æƒ…éƒ½ä¸åšã€‚

ç»å¸¸ç”¨åˆ°çš„ phase å…¶å®åªæœ‰å‡ ä¸ªï¼š

- cleanï¼šæ¸…ç†
- compileï¼šç¼–è¯‘
- testï¼šè¿è¡Œæµ‹è¯•
- packageï¼šæ‰“åŒ…

## ğŸ€ Goal

æ‰§è¡Œä¸€ä¸ª phase åˆä¼šè§¦å‘ä¸€ä¸ªæˆ–å¤šä¸ª goalï¼š

| æ‰§è¡Œçš„ Phase | å¯¹åº”æ‰§è¡Œçš„ Goal                    |
| :----------- | :--------------------------------- |
| compile      | compiler:compile                   |
| test         | compiler:testCompile surefire:test |

goal çš„å‘½åæ€»æ˜¯ `abc:xyz` è¿™ç§å½¢å¼ã€‚

çœ‹åˆ°è¿™é‡Œï¼Œç›¸ä¿¡å¤§å®¶å¯¹ lifecycleã€phase å’Œ goal å·²ç»æ˜ç™½äº†å§ï¼Ÿ

![](assets/l-20231130110230830.jpeg)

å…¶å®æˆ‘ä»¬ç±»æ¯”ä¸€ä¸‹å°±æ˜ç™½äº†ï¼š

- lifecycle ç›¸å½“äº Java çš„ packageï¼Œå®ƒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª phaseï¼›
- phase ç›¸å½“äº Java çš„ classï¼Œå®ƒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª goalï¼›
- goal ç›¸å½“äº class çš„ methodï¼Œå®ƒå…¶å®æ‰æ˜¯çœŸæ­£å¹²æ´»çš„ã€‚

å¤§å¤šæ•°æƒ…å†µï¼Œæˆ‘ä»¬åªè¦æŒ‡å®š phaseï¼Œå°±é»˜è®¤æ‰§è¡Œè¿™äº› phase é»˜è®¤ç»‘å®šçš„ goalï¼Œåªæœ‰å°‘æ•°æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŒ‡å®šè¿è¡Œä¸€ä¸ª goalï¼Œä¾‹å¦‚ï¼Œå¯åŠ¨ Tomcat æœåŠ¡å™¨ï¼š

```sh
mvn tomcat:run
```

## ğŸ€ å°ç»“

Maven é€šè¿‡ lifecycleã€phase å’Œ goal æ¥æä¾›æ ‡å‡†çš„æ„å»ºæµç¨‹ã€‚

æœ€å¸¸ç”¨çš„æ„å»ºå‘½ä»¤æ˜¯æŒ‡å®š phaseï¼Œç„¶åè®© Maven æ‰§è¡Œåˆ°æŒ‡å®šçš„ phaseï¼š

- mvn clean
- mvn clean compile
- mvn clean test
- mvn clean package

é€šå¸¸æƒ…å†µï¼Œæˆ‘ä»¬æ€»æ˜¯æ‰§è¡Œ phase é»˜è®¤ç»‘å®šçš„ goalï¼Œå› æ­¤ä¸å¿…æŒ‡å®š goalã€‚
