---
title: å‘å¸ƒ Artifact
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::


å½“æˆ‘ä»¬ä½¿ç”¨ `commons-logging` è¿™äº›ç¬¬ä¸‰æ–¹å¼€æºåº“çš„æ—¶å€™ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯é€šè¿‡ Maven è‡ªåŠ¨ä¸‹è½½å®ƒçš„ jar åŒ…ï¼Œå¹¶æ ¹æ®å…¶ `pom.xml` è§£æä¾èµ–ï¼Œè‡ªåŠ¨æŠŠç›¸å…³ä¾èµ–åŒ…éƒ½ä¸‹è½½ååŠ å…¥åˆ° classpathã€‚

é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šå½“æˆ‘ä»¬è‡ªå·±å†™äº†ä¸€ä¸ªç‰›é€¼çš„å¼€æºåº“æ—¶ï¼Œéå¸¸å¸Œæœ›åˆ«äººä¹Ÿèƒ½ä½¿ç”¨ï¼Œæ€»ä¸èƒ½ç›´æ¥æ”¾ä¸ª jar åŒ…çš„é“¾æ¥è®©åˆ«äººä¸‹è½½å§ï¼Ÿ

å¦‚æœæˆ‘ä»¬æŠŠè‡ªå·±çš„å¼€æºåº“æ”¾åˆ° Maven çš„ repo ä¸­ï¼Œé‚£ä¹ˆï¼Œåˆ«äººåªéœ€æŒ‰æ ‡å‡†å¼•ç”¨ `groupId:artifactId:version`ï¼Œå³å¯è‡ªåŠ¨ä¸‹è½½ jar åŒ…ä»¥åŠç›¸å…³ä¾èµ–ã€‚å› æ­¤ï¼Œæœ¬èŠ‚æˆ‘ä»¬ä»‹ç»å¦‚ä½•å‘å¸ƒä¸€ä¸ªåº“åˆ° Maven çš„ repo ä¸­ã€‚

æŠŠè‡ªå·±çš„åº“å‘å¸ƒåˆ° Maven çš„ repo ä¸­æœ‰å¥½å‡ ç§æ–¹æ³•ï¼Œæˆ‘ä»¬ä»‹ç» 3 ç§æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚

## ğŸ€ ä»¥é™æ€æ–‡ä»¶å‘å¸ƒ

å¦‚æœæˆ‘ä»¬è§‚å¯Ÿä¸€ä¸ªä¸­å¤®ä»“åº“çš„ Artifact ç»“æ„ï¼Œä¾‹å¦‚ [Commons Math](https://commons.apache.org/proper/commons-math/)ï¼Œå®ƒçš„ groupId æ˜¯ `org.apache.commons`ï¼ŒartifactId æ˜¯ `commons-math3`ï¼Œä»¥ç‰ˆæœ¬ `3.6.1` ä¸ºä¾‹ï¼Œå‘å¸ƒåœ¨ä¸­å¤®ä»“åº“çš„æ–‡ä»¶å¤¹è·¯å¾„å°±æ˜¯ https://repo1.maven.org/maven2/org/apache/commons/commons-math3/3.6.1/ ï¼Œåœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹ï¼Œ`commons-math3-3.6.1.jar` å°±æ˜¯å‘å¸ƒçš„ jar åŒ…ï¼Œ`commons-math3-3.6.1.pom` å°±æ˜¯å®ƒçš„ `pom.xml` æè¿°æ–‡ä»¶ï¼Œ`commons-math3-3.6.1-sources.jar` æ˜¯æºä»£ç ï¼Œ`commons-math3-3.6.1-javadoc.jar` æ˜¯æ–‡æ¡£ã€‚å…¶å®ƒä»¥ `.asc`ã€`.md5`ã€`.sha1` ç»“å°¾çš„æ–‡ä»¶åˆ†åˆ«æ˜¯ GPG ç­¾åã€MD5 æ‘˜è¦å’Œ SHA-1 æ‘˜è¦ã€‚

æˆ‘ä»¬åªè¦æŒ‰ç…§è¿™ç§ç›®å½•ç»“æ„ç»„ç»‡æ–‡ä»¶ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ Maven ä»“åº“ã€‚

æˆ‘ä»¬ä»¥å¹¿å—å¥½è¯„çš„å¼€æºé¡¹ç›® [how-to-become-rich](https://github.com/michaelliao/how-to-become-rich) ä¸ºä¾‹ï¼Œå…ˆåˆ›å»º Maven å·¥ç¨‹ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

![image-20231130111420548](assets/image-20231130111420548.png)

åœ¨ `pom.xml` ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```xml
<project ...>
    ...
    <distributionManagement>
        <repository>
            <id>local-repo-release</id>
            <name>GitHub Release</name>
            <url>file://${project.basedir}/maven-repo</url>
        </repository>
    </distributionManagement>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-source-plugin</artifactId>
                <executions>
                    <execution>
                        <id>attach-sources</id>
                        <phase>package</phase>
                        <goals>
                            <goal>jar-no-fork</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <artifactId>maven-javadoc-plugin</artifactId>
                <executions>
                    <execution>
                        <id>attach-javadocs</id>
                        <phase>package</phase>
                        <goals>
                            <goal>jar</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project>
```

æ³¨æ„åˆ° `<distributionManagement>`ï¼Œå®ƒæŒ‡ç¤ºäº†å‘å¸ƒçš„è½¯ä»¶åŒ…çš„ä½ç½®ï¼Œè¿™é‡Œçš„ `<url>` æ˜¯é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `maven-repo` ç›®å½•ï¼Œåœ¨ `<build>` ä¸­å®šä¹‰çš„ä¸¤ä¸ªæ’ä»¶ `maven-source-plugin` å’Œ `maven-javadoc-plugin` åˆ†åˆ«ç”¨æ¥åˆ›å»ºæºç å’Œ javadocï¼Œå¦‚æœä¸æƒ³å‘å¸ƒæºç ï¼Œå¯ä»¥æŠŠå¯¹åº”çš„æ’ä»¶å»æ‰ã€‚

æˆ‘ä»¬ç›´æ¥åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ Maven å‘½ä»¤ `mvn clean package deploy`ï¼Œå¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ `maven-repo` ç›®å½•ä¸‹æ‰¾åˆ°éƒ¨ç½²åçš„æ‰€æœ‰æ–‡ä»¶å¦‚ä¸‹ï¼š

![image-20231130111740548](assets/image-20231130111740548.png)

æœ€åä¸€æ­¥ï¼Œæ˜¯æŠŠè¿™ä¸ªå·¥ç¨‹æ¨åˆ° GitHub ä¸Šï¼Œå¹¶é€‰æ‹© `Settings`-`GitHub Pages`ï¼Œé€‰æ‹© `master branch` å¯ç”¨ Pages æœåŠ¡ï¼š

![enable-github-pages](assets/l-20231130111312772.png)

è¿™æ ·ï¼ŒæŠŠå…¨éƒ¨å†…å®¹æ¨é€è‡³ GitHub åï¼Œå³å¯ä½œä¸ºé™æ€ç½‘ç«™è®¿é—® Maven çš„ repoï¼Œå®ƒçš„åœ°å€æ˜¯ https://michaelliao.github.io/how-to-become-rich/maven-repo/ ã€‚ç‰ˆæœ¬ `1.0.0` å¯¹åº”çš„ jar åŒ…åœ°å€æ˜¯ï¼š


https://michaelliao.github.io/how-to-become-rich/maven-repo/com/itranswarp/rich/how-to-become-rich/1.0.0/how-to-become-rich-1.0.0.jar


ç°åœ¨ï¼Œå¦‚æœå…¶ä»–äººå¸Œæœ›å¼•ç”¨è¿™ä¸ª Maven åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥å‘ŠçŸ¥å¦‚ä¸‹ä¾èµ–å³å¯ï¼š

```xml
<dependency>
    <groupId>com.itranswarp.rich</groupId>
    <artifactId>how-to-become-rich</artifactId>
    <version>1.0.0</version>
</dependency>
```

ä½†æ˜¯ï¼Œé™¤äº†æ­£å¸¸å¯¼å…¥ä¾èµ–å¤–ï¼Œå¯¹æ–¹è¿˜éœ€è¦å†æ·»åŠ ä¸€ä¸ª `<repository>` çš„å£°æ˜ï¼Œå³ä½¿ç”¨æ–¹å®Œæ•´çš„ `pom.xml` å¦‚ä¸‹ï¼š

```xml
<project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>example</groupId>
    <artifactId>how-to-become-rich-usage</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>jar</packaging>

    <properties>
        <maven.compiler.source>11</maven.compiler.source>
        <maven.compiler.target>11</maven.compiler.target>
        <java.version>11</java.version>
    </properties>

    <repositories>
        <repository>
            <id>github-rich-repo</id>
            <name>The Maven Repository on Github</name>
            <url>https://michaelliao.github.io/how-to-become-rich/maven-repo/</url>
        </repository>
    </repositories>

    <dependencies>
        <dependency>
            <groupId>com.itranswarp.rich</groupId>
            <artifactId>how-to-become-rich</artifactId>
            <version>1.0.0</version>
        </dependency>
    </dependencies>
</project>
```

åœ¨ `<repository>` ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»å£°æ˜å‘å¸ƒçš„ Maven çš„ repo åœ°å€ï¼Œå…¶ä¸­ `<id>` å’Œ `<name>` å¯ä»¥ä»»æ„å¡«å†™ï¼Œ`<url>` å¡«å…¥ GitHub Pages æä¾›çš„åœ°å€ +`/maven-repo/` åç¼€ã€‚ç°åœ¨ï¼Œå³å¯æ­£å¸¸å¼•ç”¨è¿™ä¸ªåº“å¹¶ç¼–å†™ä»£ç å¦‚ä¸‹ï¼š

```java
Millionaire millionaire = new Millionaire();
System.out.println(millionaire.howToBecomeRich());
```

æœ‰çš„ç«¥é‹ä¼šé—®ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨ `commons-logging` ç­‰ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œå¹¶ä¸éœ€è¦å£°æ˜ repo åœ°å€ï¼Ÿè¿™æ˜¯å› ä¸ºè¿™äº›åº“éƒ½æ˜¯å‘å¸ƒåˆ° Maven ä¸­å¤®ä»“åº“çš„ï¼Œå‘å¸ƒåˆ°ä¸­å¤®ä»“åº“åï¼Œä¸éœ€è¦å‘Šè¯‰ Maven ä»“åº“åœ°å€ï¼Œå› ä¸ºå®ƒçŸ¥é“ä¸­å¤®ä»“åº“çš„åœ°å€é»˜è®¤æ˜¯ https://repo1.maven.org/maven2/ ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ `~/.m2/settings.xml` æŒ‡å®šä¸€ä¸ªä»£ç†ä»“åº“åœ°å€ä»¥æ›¿ä»£ä¸­å¤®ä»“åº“æ¥æé«˜é€Ÿåº¦ï¼ˆå‚è€ƒ [ä¾èµ–ç®¡ç†](2.md) çš„ Maven é•œåƒï¼‰ã€‚

å› ä¸º GitHub Pages å¹¶ä¸ä¼šæŠŠæˆ‘ä»¬å‘å¸ƒçš„ Maven åŒ…åŒæ­¥åˆ°ä¸­å¤®ä»“åº“ï¼Œæ‰€ä»¥è‡ªç„¶ä½¿ç”¨æ–¹å¿…é¡»æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªæˆ‘ä»¬æä¾›çš„ä»“åº“åœ°å€ã€‚

æ­¤å¤–ï¼Œé€šè¿‡ GitHub Pages å‘å¸ƒ Maven repo æ—¶éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œå³ä¸è¦æ”¹åŠ¨å·²å‘å¸ƒçš„ç‰ˆæœ¬ã€‚å› ä¸º Maven çš„ä»“åº“æ˜¯ä¸å…è®¸ä¿®æ”¹ä»»ä½•ç‰ˆæœ¬çš„ï¼Œå¯¹ä¸€ä¸ªåº“è¿›è¡Œä¿®æ”¹çš„å”¯ä¸€æ–¹æ³•æ˜¯å‘å¸ƒä¸€ä¸ªæ–°ç‰ˆæœ¬ã€‚ä½†æ˜¯é€šè¿‡é™æ€æ–‡ä»¶çš„æ–¹å¼å‘å¸ƒ repoï¼Œå®é™…ä¸Šæˆ‘ä»¬æ˜¯å¯ä»¥ä¿®æ”¹ jar æ–‡ä»¶çš„ï¼Œä½†æœ€å¥½éµå®ˆè§„èŒƒï¼Œä¸è¦ä¿®æ”¹å·²å‘å¸ƒç‰ˆæœ¬ã€‚

## ğŸ€ é€šè¿‡ Nexus å‘å¸ƒåˆ°ä¸­å¤®ä»“åº“

æœ‰çš„ç«¥é‹ä¼šé—®ï¼Œèƒ½ä¸èƒ½æŠŠè‡ªå·±çš„å¼€æºåº“å‘å¸ƒåˆ° Maven çš„ä¸­å¤®ä»“åº“ï¼Œè¿™æ ·ç”¨æˆ·å°±ä¸éœ€è¦å£°æ˜ repo åœ°å€ï¼Œå¯ä»¥ç›´æ¥å¼•ç”¨ï¼Œæ˜¾å¾—æ›´ä¸“ä¸šã€‚

å½“ç„¶å¯ä»¥ï¼Œä½†æˆ‘ä»¬ä¸èƒ½ç›´æ¥å‘å¸ƒåˆ° Maven ä¸­å¤®ä»“åº“ï¼Œè€Œæ˜¯é€šè¿‡æ›²çº¿æ•‘å›½çš„æ–¹å¼ï¼Œå‘å¸ƒåˆ° [central.sonatype.org](https://central.sonatype.org/)ï¼Œå®ƒä¼šå®šæœŸè‡ªåŠ¨åŒæ­¥åˆ° Maven çš„ä¸­å¤®ä»“åº“ã€‚[Nexus](https://www.sonatype.com/nexus-repository-oss) æ˜¯ä¸€ä¸ªæ”¯æŒ Maven ä»“åº“çš„è½¯ä»¶ï¼Œç”± Sonatype å¼€å‘ï¼Œæœ‰å…è´¹ç‰ˆå’Œä¸“ä¸šç‰ˆä¸¤ä¸ªç‰ˆæœ¬ï¼Œå¾ˆå¤šå¤§å…¬å¸å†…éƒ¨éƒ½ä½¿ç”¨ Nexus ä½œä¸ºè‡ªå·±çš„ç§æœ‰ Maven ä»“åº“ï¼Œè€Œè¿™ä¸ª [central.sonatype.org](https://central.sonatype.org/) ç›¸å½“äºé¢å‘å¼€æºçš„ä¸€ä¸ª Nexus å…¬å…±æœåŠ¡ã€‚

æ‰€ä»¥ï¼Œç¬¬ä¸€æ­¥æ˜¯åœ¨ [central.sonatype.org](https://central.sonatype.org/) ä¸Šæ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œæ³¨å†Œé“¾æ¥éå¸¸éšè”½ï¼Œå¯ä»¥è‡ªå·±å…ˆæ‰¾æ‰¾ï¼Œæ‰¾åŠå°æ—¶æ²¡æ‰¾åˆ°ç‚¹ [è¿™é‡Œ](javascript:showSonatypeSignUpLink()) æŸ¥çœ‹æ”»ç•¥ã€‚

å¦‚æœæ³¨å†Œé¡ºåˆ©å¹¶å®¡æ ¸é€šè¿‡ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªç™»å½•è´¦å·ï¼Œç„¶åï¼Œé€šè¿‡ [è¿™ä¸ªé¡µé¢](https://central.sonatype.org/pages/apache-maven.html) ä¸€æ­¥ä¸€æ­¥æ“ä½œå°±å¯ä»¥æˆåŠŸåœ°å°†è‡ªå·±çš„ Artifact å‘å¸ƒåˆ° Nexus ä¸Šï¼Œå†è€å¿ƒç­‰å¾…å‡ ä¸ªå°æ—¶åï¼Œä½ çš„ Artifact å°±ä¼šå‡ºç°åœ¨ Maven çš„ä¸­å¤®ä»“åº“ä¸­ã€‚

è¿™é‡Œç®€å•æä¸€ä¸‹å‘å¸ƒé‡ç‚¹ä¸éš¾ç‚¹ï¼š

- å¿…é¡»æ­£ç¡®åˆ›å»º GPG ç­¾åï¼ŒLinux å’Œ Mac ä¸‹æ¨èä½¿ç”¨ gnupg2ï¼›
- å¿…é¡»åœ¨ `~/.m2/settings.xml` ä¸­é…ç½®å¥½ç™»å½•ç”¨æˆ·åå’Œå£ä»¤ï¼Œä»¥åŠ GPG å£ä»¤ï¼š

```xml
<settings ...>
    ...
    <servers>
        <server>
            <id>ossrh</id>
            <username>OSSRH-USERNAME</username>
            <password>OSSRH-PASSWORD</password>
        </server>
    </servers>
    <profiles>
        <profile>
            <id>ossrh</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <properties>
                <gpg.executable>gpg2</gpg.executable>
                <gpg.passphrase>GPG-PASSWORD</gpg.passphrase>
            </properties>
        </profile>
    </profiles>
</settings>
```

åœ¨å¾…å‘å¸ƒçš„ Artifact çš„ `pom.xml` ä¸­æ·»åŠ  OSS çš„ Maven repo åœ°å€ï¼Œä»¥åŠ `maven-jar-plugin`ã€`maven-source-plugin`ã€`maven-javadoc-plugin`ã€`maven-gpg-plugin`ã€`nexus-staging-maven-plugin`ï¼š

```xml
<project ...>
    ...
    <distributionManagement>
        <snapshotRepository>
            <id>ossrh</id>
            <url>https://oss.sonatype.org/content/repositories/snapshots</url>
        </snapshotRepository>

        <repository>
            <id>ossrh</id>
            <name>Nexus Release Repository</name>
            <url>http://oss.sonatype.org/service/local/staging/deploy/maven2/</url>
        </repository>
    </distributionManagement>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>jar</goal>
                            <goal>test-jar</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-source-plugin</artifactId>
                <executions>
                    <execution>
                        <id>attach-sources</id>
                        <goals>
                            <goal>jar-no-fork</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-javadoc-plugin</artifactId>
                <executions>
                    <execution>
                        <id>attach-javadocs</id>
                        <goals>
                            <goal>jar</goal>
                        </goals>
                        <configuration>
                            <additionalOption>
                                <additionalOption>-Xdoclint:none</additionalOption>
                            </additionalOption>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-gpg-plugin</artifactId>
                <executions>
                    <execution>
                        <id>sign-artifacts</id>
                        <phase>verify</phase>
                        <goals>
                            <goal>sign</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.sonatype.plugins</groupId>
                <artifactId>nexus-staging-maven-plugin</artifactId>
                <version>1.6.3</version>
                <extensions>true</extensions>
                <configuration>
                    <serverId>ossrh</serverId>
                    <nexusUrl>https://oss.sonatype.org/</nexusUrl>
                    <autoReleaseAfterClose>true</autoReleaseAfterClose>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project>
```

æœ€åæ‰§è¡Œå‘½ä»¤ `mvn clean package deploy` å³å¯å‘å¸ƒè‡³ [central.sonatype.org](https://central.sonatype.org/)ã€‚

æ­¤æ–¹æ³•å‰æœŸéœ€è¦å¤æ‚çš„ç”³è¯·è´¦å·å’Œé¡¹ç›®çš„æµç¨‹ï¼ŒåæœŸéœ€è¦å®‰è£…è°ƒè¯• GPGï¼Œä½†åªè¦è·‘é€šæµç¨‹ï¼Œåç»­å‘å¸ƒéƒ½åªéœ€è¦ä¸€è¡Œå‘½ä»¤ã€‚

## ğŸ€ å‘å¸ƒåˆ°ç§æœ‰ä»“åº“

é€šè¿‡ `nexus-staging-maven-plugin` é™¤äº†å¯ä»¥å‘å¸ƒåˆ° [central.sonatype.org](https://central.sonatype.org/) å¤–ï¼Œä¹Ÿå¯ä»¥å‘å¸ƒåˆ°ç§æœ‰ä»“åº“ï¼Œä¾‹å¦‚ï¼Œå…¬å¸å†…éƒ¨è‡ªå·±æ­å»ºçš„ Nexus æœåŠ¡å™¨ã€‚

å¦‚æœæ²¡æœ‰ç§æœ‰ Nexus æœåŠ¡å™¨ï¼Œè¿˜å¯ä»¥å‘å¸ƒåˆ° [GitHub Packages](https://github.com/features/packages)ã€‚GitHub Packages æ˜¯ GitHub æä¾›çš„ä»“åº“æœåŠ¡ï¼Œæ”¯æŒ Mavenã€NPMã€Docker ç­‰ã€‚ä½¿ç”¨ GitHub Packages æ—¶ï¼Œæ— è®ºæ˜¯å‘å¸ƒ Artifactï¼Œè¿˜æ˜¯å¼•ç”¨å·²å‘å¸ƒçš„ Artifactï¼Œéƒ½éœ€è¦æ˜ç¡®çš„æˆæƒ Tokenï¼Œå› æ­¤ï¼ŒGitHub Packages åªèƒ½ä½œä¸ºç§æœ‰ä»“åº“ä½¿ç”¨ã€‚

åœ¨å‘å¸ƒå‰ï¼Œæˆ‘ä»¬å¿…é¡»é¦–å…ˆç™»å½•ååœ¨ç”¨æˆ·çš„ `Settings`-`Developer settings`-`Personal access tokens` ä¸­åˆ›å»ºä¸¤ä¸ª Tokenï¼Œä¸€ä¸ªç”¨äºå‘å¸ƒï¼Œä¸€ä¸ªç”¨äºä½¿ç”¨ã€‚å‘å¸ƒ Artifact çš„ Token å¿…é¡»æœ‰ `repo`ã€`write:packages` å’Œ `read:packages` æƒé™ï¼š

![token-scopes](assets/l-20231130111312760.png)

ä½¿ç”¨ Artifact çš„ Token åªéœ€è¦ `read:packages` æƒé™ã€‚

åœ¨å‘å¸ƒç«¯ï¼ŒæŠŠ GitHub çš„ç”¨æˆ·åå’Œå‘å¸ƒ Token å†™å…¥ `~/.m2/settings.xml` é…ç½®ä¸­ï¼š

```xml
<settings ...>
    ...
    <servers>
        <server>
            <id>github-release</id>
            <username>GITHUB-USERNAME</username>
            <password>f052...c21f</password>
        </server>
    </servers>
</settings>
```

ç„¶åï¼Œåœ¨éœ€è¦å‘å¸ƒçš„ Artifact çš„ `pom.xml` ä¸­ï¼Œæ·»åŠ ä¸€ä¸ª `<repository>` å£°æ˜ï¼š

```xml
<project ...>
    ...
    <distributionManagement>
        <repository>
            <id>github-release</id>
            <name>GitHub Release</name>
            <url>https://maven.pkg.github.com/michaelliao/complex</url>
        </repository>
    </distributionManagement>
</project>
```

æ³¨æ„åˆ° `<id>` å’Œ `~/.m2/settings.xml` é…ç½®ä¸­çš„ `<id>` è¦ä¿æŒä¸€è‡´ï¼Œå› ä¸ºå‘å¸ƒæ—¶ Maven æ ¹æ® id æ‰¾åˆ°ç”¨äºç™»å½•çš„ç”¨æˆ·åå’Œ Tokenï¼Œæ‰èƒ½æˆåŠŸä¸Šä¼ æ–‡ä»¶åˆ° GitHubã€‚æˆ‘ä»¬ç›´æ¥é€šè¿‡å‘½ä»¤ `mvn clean package deploy` éƒ¨ç½²ï¼ŒæˆåŠŸåï¼Œåœ¨ GitHub ç”¨æˆ·é¡µé¢å¯ä»¥çœ‹åˆ°è¯¥ Artifactï¼š

![github-packages](assets/l-20231130111312773.png)

å®Œæ•´çš„é…ç½®è¯·å‚è€ƒ [complex](https://github.com/michaelliao/complex/) é¡¹ç›®ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„æ”¯æŒå¤æ•°è¿ç®—çš„åº“ã€‚

ä½¿ç”¨è¯¥ Artifact æ—¶ï¼Œå› ä¸º GitHub çš„ Package åªèƒ½ä½œä¸ºç§æœ‰ä»“åº“ä½¿ç”¨ï¼Œæ‰€ä»¥é™¤äº†åœ¨ä½¿ç”¨æ–¹çš„ `pom.xml` ä¸­å£°æ˜ `<repository>` å¤–ï¼š

```xml
<project ...>
    ...
    <repositories>
        <repository>
            <id>github-release</id>
            <name>GitHub Release</name>
            <url>https://maven.pkg.github.com/michaelliao/complex</url>
        </repository>
    </repositories>

    <dependencies>
        <dependency>
            <groupId>com.itranswarp</groupId>
            <artifactId>complex</artifactId>
            <version>1.0.0</version>
        </dependency>
    </dependencies>
    ...
</project>
```

è¿˜éœ€è¦æŠŠæœ‰è¯»æƒé™çš„ Token é…ç½®åˆ° `~/.m2/settings.xml` æ–‡ä»¶ä¸­ã€‚

## ğŸ€ ç»ƒä¹ 

ä½¿ç”¨ maven-deploy-plugin æŠŠ Artifact å‘å¸ƒåˆ°æœ¬åœ°ã€‚

## ğŸ€ å°ç»“

ä½¿ç”¨ Maven å‘å¸ƒä¸€ä¸ª Artifact æ—¶ï¼š

- å¯ä»¥å‘å¸ƒåˆ°æœ¬åœ°ï¼Œç„¶åæ¨é€åˆ°è¿œç¨‹ Git åº“ï¼Œç”±é™æ€æœåŠ¡å™¨æä¾›åŸºäºç½‘é¡µçš„ repo æœåŠ¡ï¼Œä½¿ç”¨æ–¹å¿…é¡»å£°æ˜ repo åœ°å€ï¼›
- å¯ä»¥å‘å¸ƒåˆ° [central.sonatype.org](https://central.sonatype.org/)ï¼Œå¹¶è‡ªåŠ¨åŒæ­¥åˆ° Maven ä¸­å¤®ä»“åº“ï¼Œéœ€è¦å‰æœŸç”³è¯·è´¦å·ä»¥åŠæœ¬åœ°é…ç½®ï¼›
- å¯ä»¥å‘å¸ƒåˆ° GitHub Packages ä½œä¸ºç§æœ‰ä»“åº“ä½¿ç”¨ï¼Œå¿…é¡»æä¾› Token ä»¥åŠæ­£ç¡®çš„æƒé™æ‰èƒ½å‘å¸ƒå’Œä½¿ç”¨ã€‚

