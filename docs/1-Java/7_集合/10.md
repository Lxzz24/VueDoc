---
title: ä½¿ç”¨ Queue
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::

é˜Ÿåˆ—ï¼ˆQueueï¼‰æ˜¯ä¸€ç§ç»å¸¸ä½¿ç”¨çš„é›†åˆã€‚Queue å®é™…ä¸Šæ˜¯å®ç°äº†ä¸€ä¸ª **å…ˆè¿›å…ˆå‡º**ï¼ˆFIFOï¼šFirst In First Outï¼‰çš„æœ‰åºè¡¨ã€‚å®ƒå’Œ List çš„åŒºåˆ«åœ¨äºï¼ŒList å¯ä»¥åœ¨ä»»æ„ä½ç½®æ·»åŠ å’Œåˆ é™¤å…ƒç´ ï¼Œè€Œ Queue åªæœ‰ä¸¤ä¸ªæ“ä½œï¼š

1. æŠŠå…ƒç´ æ·»åŠ åˆ°é˜Ÿåˆ—æœ«å°¾ï¼›
2. ä»é˜Ÿåˆ—å¤´éƒ¨å–å‡ºå…ƒç´ ã€‚

è¶…å¸‚çš„æ”¶é“¶å°å°±æ˜¯ä¸€ä¸ªé˜Ÿåˆ—ï¼š

![queue](assets/queue.png)

åœ¨ Java çš„æ ‡å‡†åº“ä¸­ï¼Œé˜Ÿåˆ—æ¥å£ Queue å®šä¹‰äº†ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•ï¼š

- `int size()`ï¼šè·å–é˜Ÿåˆ—é•¿åº¦ï¼›
- `boolean add(E) / boolean offer(E)`ï¼šæ·»åŠ å…ƒç´ åˆ°é˜Ÿå°¾ï¼›
- `E remove() / E poll()`ï¼šè·å–é˜Ÿé¦–å…ƒç´ å¹¶ä»é˜Ÿåˆ—ä¸­åˆ é™¤ï¼›
- `E element() / E peek()`ï¼šè·å–é˜Ÿé¦–å…ƒç´ ä½†å¹¶ä¸ä»é˜Ÿåˆ—ä¸­åˆ é™¤ã€‚

å¯¹äºå…·ä½“çš„å®ç°ç±»ï¼Œæœ‰çš„ Queue æœ‰æœ€å¤§é˜Ÿåˆ—é•¿åº¦é™åˆ¶ï¼Œæœ‰çš„ Queue æ²¡æœ‰ã€‚

---

æ³¨æ„åˆ°æ·»åŠ ã€åˆ é™¤å’Œè·å–é˜Ÿåˆ—å…ƒç´ æ€»æ˜¯æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œè¿™æ˜¯å› ä¸ºåœ¨æ·»åŠ æˆ–è·å–å…ƒç´ å¤±è´¥æ—¶ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„è¡Œä¸ºæ˜¯ä¸åŒçš„ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªè¡¨æ ¼æ€»ç»“å¦‚ä¸‹ï¼š

|                        | throw Exception |  è¿”å› false æˆ– null  |
| ---------------------- | :-------------: | :------------------: |
| æ·»åŠ å…ƒç´ åˆ°é˜Ÿå°¾         |   `add(E e)`    | `boolean offer(E e)` |
| å–é˜Ÿé¦–å…ƒç´ å¹¶åˆ é™¤       |  `E remove()`   |      `E poll()`      |
| å–é˜Ÿé¦–å…ƒç´ ä½†**ä¸åˆ é™¤** |  `E element()`  |      `E peek()`      |

ä¸¾ä¸ªæ —å­ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¯¹å®ƒåšä¸€ä¸ªæ·»åŠ æ“ä½œï¼Œå¦‚æœè°ƒç”¨ `add()` æ–¹æ³•ï¼Œå½“æ·»åŠ å¤±è´¥æ—¶ï¼ˆå¯èƒ½è¶…è¿‡äº†é˜Ÿåˆ—çš„å®¹é‡ï¼‰ï¼Œå®ƒä¼šæŠ›å‡ºå¼‚å¸¸ï¼š

```java
Queue<String> q = ...
try {
    q.add("Apple");
    System.out.println("æ·»åŠ æˆåŠŸ");
} catch(IllegalStateException e) {
    System.out.println("æ·»åŠ å¤±è´¥");
}
```

å¦‚æœæˆ‘ä»¬è°ƒç”¨ `offer()` æ–¹æ³•æ¥æ·»åŠ å…ƒç´ ï¼Œå½“æ·»åŠ å¤±è´¥æ—¶ï¼Œå®ƒä¸ä¼šæŠ›å¼‚å¸¸ï¼Œè€Œæ˜¯è¿”å› `false`ï¼š

```java
Queue<String> q = ...
if (q.offer("Apple")) {
    System.out.println("æ·»åŠ æˆåŠŸ");
} else {
    System.out.println("æ·»åŠ å¤±è´¥");
}
```

å½“æˆ‘ä»¬éœ€è¦ä» Queue ä¸­å–å‡ºé˜Ÿé¦–å…ƒç´ æ—¶ï¼Œå¦‚æœå½“å‰ Queue æ˜¯ä¸€ä¸ªç©ºé˜Ÿåˆ—ï¼Œè°ƒç”¨ `remove()` æ–¹æ³•ï¼Œå®ƒä¼šæŠ›å‡ºå¼‚å¸¸ï¼š

```java
Queue<String> q = ...
try {
    String s = q.remove();
    System.out.println("è·å–æˆåŠŸ");
} catch(IllegalStateException e) {
    System.out.println("è·å–å¤±è´¥");
}
```

å¦‚æœæˆ‘ä»¬è°ƒç”¨ `poll()` æ–¹æ³•æ¥å–å‡ºé˜Ÿé¦–å…ƒç´ ï¼Œå½“è·å–å¤±è´¥æ—¶ï¼Œå®ƒä¸ä¼šæŠ›å¼‚å¸¸ï¼Œè€Œæ˜¯è¿”å› `null`ï¼š

```java
Queue<String> q = ...
String s = q.poll();
if (s != null) {
    System.out.println("è·å–æˆåŠŸ");
} else {
    System.out.println("è·å–å¤±è´¥");
}
```

å› æ­¤ï¼Œä¸¤å¥—æ–¹æ³•å¯ä»¥æ ¹æ®éœ€è¦æ¥é€‰æ‹©ä½¿ç”¨ã€‚

::: warning
ä¸è¦æŠŠ `null` æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ï¼Œå¦åˆ™ `poll()` æ–¹æ³•è¿”å› `null` æ—¶ï¼Œå¾ˆéš¾ç¡®å®šæ˜¯å–åˆ°äº† `null` å…ƒç´ è¿˜æ˜¯é˜Ÿåˆ—ä¸ºç©ºã€‚

:::

---

æ¥ä¸‹æ¥æˆ‘ä»¬ä»¥ `poll()` å’Œ `peek()` ä¸ºä¾‹æ¥è¯´è¯´ â€œè·å–å¹¶åˆ é™¤â€ ä¸â€œè·å–ä½†ä¸åˆ é™¤â€çš„åŒºåˆ«ã€‚å¯¹äº Queue æ¥è¯´ï¼Œæ¯æ¬¡è°ƒç”¨ `poll()`ï¼Œéƒ½ä¼šè·å–é˜Ÿé¦–å…ƒç´ ï¼Œå¹¶ä¸”è·å–åˆ°çš„å…ƒç´ å·²ç»ä»é˜Ÿåˆ—ä¸­è¢«åˆ é™¤äº†ï¼š

```java
import java.util.LinkedList;
import java.util.Queue;

public class Main {
    public static void main(String[] args) {
        Queue<String> q = new LinkedList<>();
        // æ·»åŠ  3 ä¸ªå…ƒç´ åˆ°é˜Ÿåˆ—:
        q.offer("apple");
        q.offer("pear");
        q.offer("banana");
        // ä»é˜Ÿåˆ—å–å‡ºå…ƒç´ :
        System.out.println(q.poll()); // apple
        System.out.println(q.poll()); // pear
        System.out.println(q.poll()); // banana
        System.out.println(q.poll()); // null, å› ä¸ºé˜Ÿåˆ—æ˜¯ç©ºçš„
    }
}
```

å¦‚æœç”¨ `peek()`ï¼Œå› ä¸ºè·å–é˜Ÿé¦–å…ƒç´ æ—¶ï¼Œå¹¶ä¸ä¼šä»é˜Ÿåˆ—ä¸­åˆ é™¤è¿™ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å¯ä»¥åå¤è·å–ï¼š

```java
import java.util.LinkedList;
import java.util.Queue;

public class Main {
    public static void main(String[] args) {
        Queue<String> q = new LinkedList<>();
        // æ·»åŠ  3 ä¸ªå…ƒç´ åˆ°é˜Ÿåˆ—:
        q.offer("apple");
        q.offer("pear");
        q.offer("banana");
        // é˜Ÿé¦–æ°¸è¿œéƒ½æ˜¯ appleï¼Œå› ä¸º peek() ä¸ä¼šåˆ é™¤å®ƒ:
        System.out.println(q.peek()); // apple
        System.out.println(q.peek()); // apple
        System.out.println(q.peek()); // apple
    }
}
```

ä»ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å‘ç°ï¼Œ_LinkedList å³å®ç°äº† List æ¥å£ï¼Œåˆå®ç°äº† Queue æ¥å£_ï¼Œä½†æ˜¯ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬æŠŠå®ƒå½“ä½œ Listï¼Œå°±è·å– List çš„å¼•ç”¨ï¼Œå¦‚æœæˆ‘ä»¬æŠŠå®ƒå½“ä½œ Queueï¼Œå°±è·å– Queue çš„å¼•ç”¨ï¼š

```java
// è¿™æ˜¯ä¸€ä¸ª List:
List<String> list = new LinkedList<>();
// è¿™æ˜¯ä¸€ä¸ª Queue:
Queue<String> queue = new LinkedList<>();
```

å§‹ç»ˆæŒ‰ç…§é¢å‘æŠ½è±¡ç¼–ç¨‹çš„åŸåˆ™ç¼–å†™ä»£ç ï¼Œå¯ä»¥å¤§å¤§æé«˜ä»£ç çš„è´¨é‡ã€‚

## ğŸ€ å°ç»“

1. é˜Ÿåˆ— Queue å®ç°äº†ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„æ•°æ®ç»“æ„ï¼š
   - é€šè¿‡ `add() / offer()` æ–¹æ³•å°†å…ƒç´ æ·»åŠ åˆ°é˜Ÿå°¾ï¼›
   - é€šè¿‡ `remove() / poll()` ä»é˜Ÿé¦–è·å–å…ƒç´ å¹¶åˆ é™¤ï¼›
   - é€šè¿‡ `element() / peek()` ä»é˜Ÿé¦–è·å–å…ƒç´ ä½†ä¸åˆ é™¤ã€‚
2. è¦é¿å…æŠŠ null æ·»åŠ åˆ°é˜Ÿåˆ—ã€‚
