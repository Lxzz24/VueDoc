---
title: ä½¿ç”¨ PriorityQueue
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::

æˆ‘ä»¬çŸ¥é“ï¼ŒQueue æ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„é˜Ÿåˆ—ã€‚

> åœ¨é“¶è¡ŒæŸœå°åŠä¸šåŠ¡æ—¶ï¼Œæˆ‘ä»¬å‡è®¾åªæœ‰ä¸€ä¸ªæŸœå°åœ¨åŠç†ä¸šåŠ¡ï¼Œä½†æ˜¯åŠç†ä¸šåŠ¡çš„äººå¾ˆå¤šï¼Œæ€ä¹ˆåŠï¼Ÿ

å¯ä»¥æ¯ä¸ªäººå…ˆå–ä¸€ä¸ªå·ï¼Œä¾‹å¦‚ï¼šA1ã€A2ã€A3ã€... ç„¶åï¼ŒæŒ‰ç…§å·ç é¡ºåºä¾æ¬¡åŠç†ï¼Œå®é™…ä¸Šè¿™å°±æ˜¯ä¸€ä¸ª Queueã€‚

å¦‚æœè¿™æ—¶æ¥äº†ä¸€ä¸ª VIP å®¢æˆ·ï¼Œä»–çš„å·ç æ˜¯ V1ï¼Œè™½ç„¶å½“å‰æ’é˜Ÿçš„æ˜¯ A10ã€A11ã€A12ã€... ä½†æ˜¯æŸœå°ä¸‹ä¸€ä¸ªå‘¼å«çš„å®¢æˆ·å·ç å´æ˜¯ V1ã€‚

è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å‘ç°ï¼Œè¦å®ç° â€œVIP æ’é˜Ÿâ€ çš„ä¸šåŠ¡ï¼Œç”¨ Queue å°±ä¸è¡Œäº†ï¼Œå› ä¸º Queue ä¼šä¸¥æ ¼æŒ‰ FIFO çš„åŸåˆ™å–å‡ºé˜Ÿé¦–å…ƒç´ ã€‚æˆ‘ä»¬éœ€è¦çš„æ˜¯ **ä¼˜å…ˆé˜Ÿåˆ—**ï¼šPriorityQueueã€‚

---

PriorityQueue å’Œ Queue çš„åŒºåˆ«åœ¨äºï¼Œå®ƒçš„å‡ºé˜Ÿé¡ºåºä¸å…ƒç´ çš„ä¼˜å…ˆçº§æœ‰å…³ï¼Œå¯¹ PriorityQueue è°ƒç”¨ `remove()` æˆ– `poll()` æ–¹æ³•ï¼Œè¿”å›çš„æ€»æ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ã€‚

è¦ä½¿ç”¨ PriorityQueueï¼Œæˆ‘ä»¬å°±å¿…é¡»ç»™æ¯ä¸ªå…ƒç´ å®šä¹‰ â€œ**ä¼˜å…ˆçº§**â€ã€‚æˆ‘ä»¬ä»¥å®é™…ä»£ç ä¸ºä¾‹ï¼Œå…ˆçœ‹çœ‹ PriorityQueue çš„è¡Œä¸ºï¼š

```java
import java.util.PriorityQueue;
import java.util.Queue;

public class Main {
    public static void main(String[] args) {
        Queue<String> q = new PriorityQueue<>();
        // æ·»åŠ  3 ä¸ªå…ƒç´ åˆ°é˜Ÿåˆ—:
        q.offer("apple");
        q.offer("pear");
        q.offer("banana");
        System.out.println(q.poll()); // apple
        System.out.println(q.poll()); // banana
        System.out.println(q.poll()); // pear
        System.out.println(q.poll()); // null, å› ä¸ºé˜Ÿåˆ—ä¸ºç©º
    }
}
```

- æˆ‘ä»¬æ”¾å…¥çš„é¡ºåºæ˜¯ "apple"ã€"pear"ã€"banana"ï¼Œ
- ä½†æ˜¯å–å‡ºçš„é¡ºåºå´æ˜¯ "apple"ã€"banana"ã€"pear"ï¼Œ

è¿™æ˜¯å› ä¸ºä»å­—ç¬¦ä¸²çš„æ’åºçœ‹ï¼Œ"apple" æ’åœ¨æœ€å‰é¢ï¼Œ"pear" æ’åœ¨æœ€åé¢ã€‚

å› æ­¤ï¼Œæ”¾å…¥ PriorityQueue çš„å…ƒç´ ï¼Œ_å¿…é¡»å®ç° Comparable æ¥å£_ï¼ŒPriorityQueue ä¼šæ ¹æ®å…ƒç´ çš„æ’åºé¡ºåºå†³å®šå‡ºé˜Ÿçš„ä¼˜å…ˆçº§ã€‚

> å¦‚æœæˆ‘ä»¬è¦æ”¾å…¥çš„å…ƒç´ å¹¶æ²¡æœ‰å®ç° Comparable æ¥å£æ€ä¹ˆåŠï¼Ÿ

PriorityQueue å…è®¸æˆ‘ä»¬æä¾›ä¸€ä¸ª `Comparator` å¯¹è±¡æ¥åˆ¤æ–­ä¸¤ä¸ªå…ƒç´ çš„é¡ºåºã€‚æˆ‘ä»¬ä»¥é“¶è¡Œæ’é˜Ÿä¸šåŠ¡ä¸ºä¾‹ï¼Œå®ç°ä¸€ä¸ª PriorityQueueï¼š

```java {7,21,24-26}
import java.util.Comparator;
import java.util.PriorityQueue;
import java.util.Queue;

public class Main {
    public static void main(String[] args) {
        Queue<User> q = new PriorityQueue<>(new UserComparator());
        // æ·»åŠ  3 ä¸ªå…ƒç´ åˆ°é˜Ÿåˆ—:
        q.offer(new User("Bob", "A1"));
        q.offer(new User("Alice", "A2"));
        q.offer(new User("Boss", "V1"));
        System.out.println(q.poll()); // Boss / V1
        System.out.println(q.poll()); // Bob / A1
        System.out.println(q.poll()); // Alice / A2
        System.out.println(q.poll()); // null, å› ä¸ºé˜Ÿåˆ—ä¸ºç©º
    }
}

class UserComparator implements Comparator<User> {
    public int compare(User u1, User u2) {
        if (u1.number.charAt(0) == u2.number.charAt(0)) {
            // å¦‚æœä¸¤äººçš„å·éƒ½æ˜¯ A å¼€å¤´æˆ–è€…éƒ½æ˜¯ V å¼€å¤´, æ¯”è¾ƒå·çš„å¤§å°:
            // TODOï¼š
            int i1 = Integer.parseInt(u1.number.substring(1));
            int i2 = Integer.parseInt(u2.number.substring(1));
            return Integer.compare(i1,i2);
            // return u1.number.compareTo(u2.number);
        }
        if (u1.number.charAt(0) == 'V') {
            // u1 çš„å·ç æ˜¯ V å¼€å¤´, ä¼˜å…ˆçº§é«˜:
            return -1;
        } else {
            return 1;
        }
    }
}

class User {
    public final String name;
    public final String number;

    public User(String name, String number) {
        this.name = name;
        this.number = number;
    }

    public String toString() {
        return name + "/" + number;
    }
}
```

å®ç° PriorityQueue çš„å…³é”®åœ¨äºæä¾›çš„ `UserComparator` å¯¹è±¡ï¼Œå®ƒè´Ÿè´£æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ çš„å¤§å°ï¼ˆè¾ƒå°çš„åœ¨å‰ï¼‰ã€‚`UserComparator` æ€»æ˜¯æŠŠ V å¼€å¤´çš„å·ç ä¼˜å…ˆè¿”å›ï¼Œåªæœ‰åœ¨å¼€å¤´ç›¸åŒçš„æ—¶å€™ï¼Œæ‰æ¯”è¾ƒå·ç å¤§å°ã€‚

::: warning TODO
ä¸Šé¢çš„ `UserComparator` çš„æ¯”è¾ƒé€»è¾‘å…¶å®è¿˜æ˜¯æœ‰é—®é¢˜çš„ï¼Œå®ƒä¼šæŠŠ `A10` æ’åœ¨ `A2` çš„å‰é¢ï¼Œè¯·å°è¯•ä¿®å¤è¯¥é”™è¯¯ã€‚ âœ…

:::

## ğŸ€ å°ç»“

1. PriorityQueue å®ç°äº†ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼šä»é˜Ÿé¦–è·å–å…ƒç´ æ—¶ï¼Œæ€»æ˜¯è·å–ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ã€‚

2. PriorityQueue é»˜è®¤æŒ‰å…ƒç´ æ¯”è¾ƒçš„é¡ºåºæ’åºï¼ˆå¿…é¡»å®ç° Comparable æ¥å£ï¼‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ Comparator è‡ªå®šä¹‰æ’åºç®—æ³•ï¼ˆå…ƒç´ å°±ä¸å¿…å®ç° Comparable æ¥å£ï¼‰ã€‚
