---
title: ä½¿ç”¨ Map
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::


æˆ‘ä»¬çŸ¥é“ï¼Œ `List` æ˜¯ä¸€ç§é¡ºåºåˆ—è¡¨ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå­˜å‚¨å­¦ç”Ÿ `Student` å®ä¾‹çš„ `List` ï¼Œè¦åœ¨ `List` ä¸­æ ¹æ® `name` æŸ¥æ‰¾æŸä¸ªæŒ‡å®šçš„ `Student` çš„åˆ†æ•°ï¼Œåº”è¯¥æ€ä¹ˆåŠï¼Ÿ

æœ€ç®€å•çš„æ–¹æ³•æ˜¯éå† `List` å¹¶åˆ¤æ–­ `name` æ˜¯å¦ç›¸ç­‰ï¼Œç„¶åè¿”å›æŒ‡å®šå…ƒç´ ï¼š

```java
List<Student> list = ...
Student target = null;
for (Student s : list) {
    if ("Xiao Ming".equals(s.name)) {
        target = s;
        break;
    }
}
System.out.println(target.score);
```


è¿™ç§éœ€æ±‚å…¶å®éå¸¸å¸¸è§ï¼Œå³é€šè¿‡ä¸€ä¸ªé”®å»æŸ¥è¯¢å¯¹åº”çš„å€¼ã€‚ä½¿ç”¨ `List` æ¥å®ç°å­˜åœ¨æ•ˆç‡éå¸¸ä½çš„é—®é¢˜ï¼Œå› ä¸ºå¹³å‡éœ€è¦æ‰«æä¸€åŠçš„å…ƒç´ æ‰èƒ½ç¡®å®šï¼Œè€Œ `Map` è¿™ç§é”®å€¼ï¼ˆkey-valueï¼‰æ˜ å°„è¡¨çš„æ•°æ®ç»“æ„ï¼Œä½œç”¨å°±æ˜¯èƒ½é«˜æ•ˆé€šè¿‡ `key` å¿«é€ŸæŸ¥æ‰¾ `value` ï¼ˆå…ƒç´ ï¼‰ã€‚

ç”¨ `Map` æ¥å®ç°æ ¹æ® `name` æŸ¥è¯¢æŸä¸ª `Student` çš„ä»£ç å¦‚ä¸‹ï¼š


```java
import java.util.HashMap;
import java.util.Map;

public class Main {
    public static void main(String[] args) {
        Student s = new Student("Xiao Ming", 99);
        Map<String, Student> map = new HashMap<>();
        map.put("Xiao Ming", s); // å°†"Xiao Ming"å’ŒStudentå®ä¾‹æ˜ å°„å¹¶å…³è”
        Student target = map.get("Xiao Ming"); // é€šè¿‡keyæŸ¥æ‰¾å¹¶è¿”å›æ˜ å°„çš„Studentå®ä¾‹
        System.out.println(target == s); // trueï¼ŒåŒä¸€ä¸ªå®ä¾‹
        System.out.println(target.score); // 99
        Student another = map.get("Bob"); // é€šè¿‡å¦ä¸€ä¸ªkeyæŸ¥æ‰¾
        System.out.println(another); // æœªæ‰¾åˆ°è¿”å›null
    }
}

class Student {
    public String name;
    public int score;
    public Student(String name, int score) {
        this.name = name;
        this.score = score;
    }
}
```

é€šè¿‡ä¸Šè¿°ä»£ç å¯çŸ¥ï¼š `Map<K, V>` æ˜¯ä¸€ç§ é”®-å€¼ æ˜ å°„è¡¨ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ `put(K key, V value)` æ–¹æ³•æ—¶ï¼Œå°±æŠŠ `key` å’Œ `value` åšäº†æ˜ å°„å¹¶æ”¾å…¥ `Map` ã€‚å½“æˆ‘ä»¬è°ƒç”¨ `V get(K key)` æ—¶ï¼Œå°±å¯ä»¥é€šè¿‡ `key` è·å–åˆ°å¯¹åº”çš„ `value` ã€‚å¦‚æœ `key` ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› `null` ã€‚å’Œ `List` ç±»ä¼¼ï¼Œ `Map` ä¹Ÿæ˜¯ä¸€ä¸ªæ¥å£ï¼Œæœ€å¸¸ç”¨çš„å®ç°ç±»æ˜¯ `HashMap` ã€‚

å¦‚æœåªæ˜¯æƒ³æŸ¥è¯¢æŸä¸ª `key` æ˜¯å¦å­˜åœ¨ï¼Œå¯ä»¥è°ƒç”¨ `boolean containsKey(K key)` æ–¹æ³•ã€‚

å¦‚æœæˆ‘ä»¬åœ¨å­˜å‚¨ `Map` æ˜ å°„å…³ç³»çš„æ—¶å€™ï¼Œå¯¹åŒä¸€ä¸ª `key` è°ƒç”¨ä¸¤æ¬¡ `put()` æ–¹æ³•ï¼Œåˆ†åˆ«æ”¾å…¥ä¸åŒçš„ `value` ï¼Œä¼šæœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿä¾‹å¦‚ï¼š

```java
import java.util.HashMap;
import java.util.Map;

public class Main {
    public static void main(String[] args) {
        Map<String, Integer> map = new HashMap<>();
        map.put("apple", 123);
        map.put("pear", 456);
        System.out.println(map.get("apple")); // 123
        map.put("apple", 789); // å†æ¬¡æ”¾å…¥appleä½œä¸ºkeyï¼Œä½†valueå˜ä¸º789
        System.out.println(map.get("apple")); // 789
    }
}
```

é‡å¤æ”¾å…¥ `key-value` å¹¶ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯ä¸€ä¸ª `key` åªèƒ½å…³è”ä¸€ä¸ª `value` ã€‚åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œä¸€å¼€å§‹æˆ‘ä»¬æŠŠ `key` å¯¹è±¡ `"apple"` æ˜ å°„åˆ° `Integer` å¯¹è±¡ `123` ï¼Œç„¶åå†æ¬¡è°ƒç”¨ `put()` æ–¹æ³•æŠŠ `"apple"` æ˜ å°„åˆ° `789` ï¼Œè¿™æ—¶ï¼ŒåŸæ¥å…³è”çš„ `value` å¯¹è±¡ `123` å°±è¢« â€œå†²æ‰â€ äº†ã€‚å®é™…ä¸Šï¼Œ `put()` æ–¹æ³•çš„ç­¾åæ˜¯ `V put(K key, V value)` ï¼Œå¦‚æœæ”¾å…¥çš„ `key` å·²ç»å­˜åœ¨ï¼Œ `put()` æ–¹æ³•ä¼šè¿”å›è¢«åˆ é™¤çš„æ—§çš„ `value` ï¼Œå¦åˆ™ï¼Œè¿”å› `null` ã€‚


> [!caution]
> å§‹ç»ˆç‰¢è®°ï¼š `Map` ä¸­ä¸å­˜åœ¨é‡å¤çš„ `key` ï¼Œå› ä¸ºæ”¾å…¥ç›¸åŒçš„ `key` ï¼Œåªä¼šæŠŠåŸæœ‰çš„ `key-value` å¯¹åº”çš„ `value` ç»™æ›¿æ¢æ‰ã€‚


æ­¤å¤–ï¼Œåœ¨ä¸€ä¸ª `Map` ä¸­ï¼Œè™½ç„¶ `key` ä¸èƒ½é‡å¤ï¼Œä½† `value` æ˜¯å¯ä»¥é‡å¤çš„ï¼š


```java
Map<String, Integer> map = new HashMap<>();
map.put("apple", 123);
map.put("pear", 123); // ok
```


## ğŸ€ éå† Map

å¯¹ `Map` æ¥è¯´ï¼Œè¦éå† `key` å¯ä»¥ä½¿ç”¨ `for each` å¾ªç¯éå† `Map` å®ä¾‹çš„ `keySet()` æ–¹æ³•è¿”å›çš„ `Set` é›†åˆï¼Œå®ƒåŒ…å«ä¸é‡å¤çš„ `key` çš„é›†åˆï¼š


```java
import java.util.HashMap;
import java.util.Map;

public class Main {
    public static void main(String[] args) {
        Map<String, Integer> map = new HashMap<>();
        map.put("apple", 123);
        map.put("pear", 456);
        map.put("banana", 789);
        for (String key : map.keySet()) {
            Integer value = map.get(key);
            System.out.println(key + " = " + value);
        }
    }
}
```


åŒæ—¶éå† `key` å’Œ `value` å¯ä»¥ä½¿ç”¨ `for each` å¾ªç¯éå† `Map` å¯¹è±¡çš„ `entrySet()` é›†åˆï¼Œå®ƒåŒ…å«æ¯ä¸€ä¸ª `key-value` æ˜ å°„ï¼š

```java
import java.util.HashMap;
import java.util.Map;

public class Main {
    public static void main(String[] args) {
        Map<String, Integer> map = new HashMap<>();
        map.put("apple", 123);
        map.put("pear", 456);
        map.put("banana", 789);
        for (Map.Entry<String, Integer> entry : map.entrySet()) {
            String key = entry.getKey();
            Integer value = entry.getValue();
            System.out.println(key + " = " + value);
        }
    }
}
```


`Map` å’Œ `List` ä¸åŒçš„æ˜¯ï¼Œ `Map` å­˜å‚¨çš„æ˜¯ `key-value` çš„æ˜ å°„å…³ç³»ï¼Œå¹¶ä¸”ï¼Œå®ƒ ***ä¸ä¿è¯é¡ºåº*** ã€‚åœ¨éå†çš„æ—¶å€™ï¼Œéå†çš„é¡ºåºæ—¢ä¸ä¸€å®šæ˜¯ `put()` æ—¶æ”¾å…¥çš„ `key` çš„é¡ºåºï¼Œä¹Ÿä¸ä¸€å®šæ˜¯ `key` çš„æ’åºé¡ºåºã€‚ä½¿ç”¨ `Map` æ—¶ï¼Œä»»ä½•ä¾èµ–é¡ºåºçš„é€»è¾‘éƒ½æ˜¯ä¸å¯é çš„ã€‚ä»¥ `HashMap` ä¸ºä¾‹ï¼Œå‡è®¾æˆ‘ä»¬æ”¾å…¥ `"A"` ï¼Œ `"B"` ï¼Œ `"C"` è¿™ 3 ä¸ª `key` ï¼Œéå†çš„æ—¶å€™ï¼Œæ¯ä¸ª `key` ä¼šä¿è¯è¢«éå†ä¸€æ¬¡ä¸”ä»…éå†ä¸€æ¬¡ï¼Œä½†é¡ºåºå®Œå…¨æ²¡æœ‰ä¿è¯ï¼Œç”šè‡³å¯¹äºä¸åŒçš„ JDK ç‰ˆæœ¬ï¼Œç›¸åŒçš„ä»£ç éå†çš„è¾“å‡ºé¡ºåºéƒ½æ˜¯ä¸åŒçš„ï¼

> [!WARNING]
> éå† `Map` æ—¶ï¼Œä¸å¯å‡è®¾è¾“å‡ºçš„ `key` æ˜¯æœ‰åºçš„ï¼


## ğŸ€ ç»ƒä¹ 

è¯·ç¼–å†™ä¸€ä¸ªæ ¹æ® `name` æŸ¥æ‰¾ `score` çš„ç¨‹åºï¼Œå¹¶åˆ©ç”¨ `Map` å……å½“ç¼“å­˜ï¼Œä»¥æé«˜æŸ¥æ‰¾æ•ˆç‡ï¼š


```java
import java.util.*;

public class Main {
	public static void main(String[] args) {
		List<Student> list = List.of(new Student("Bob", 78), new Student("Alice", 85), new Student("Brush", 66),
				new Student("Newton", 99));
		var holder = new Students(list);
		System.out.println(holder.getScore("Bob") == 78 ? "æµ‹è¯•æˆåŠŸ!" : "æµ‹è¯•å¤±è´¥!");
		System.out.println(holder.getScore("Alice") == 85 ? "æµ‹è¯•æˆåŠŸ!" : "æµ‹è¯•å¤±è´¥!");
		System.out.println(holder.getScore("Tom") == -1 ? "æµ‹è¯•æˆåŠŸ!" : "æµ‹è¯•å¤±è´¥!");
	}
}

class Students {
	List<Student> list;
	Map<String, Integer> cache;

	Students(List<Student> list) {
		this.list = list;
		cache = new HashMap<>();
	}

	int getScore(String name) {
		// å…ˆåœ¨Mapä¸­æŸ¥æ‰¾:
		Integer score = this.cache.get(name);
		if (score == null) {
			// TODO:
		}
		return score == null ? -1 : score.intValue();
	}

	Integer findInList(String name) {
		for (var ss : this.list) {
			if (ss.name.equals(name)) {
				return ss.score;
			}
		}
		return null;
	}
}

class Student {
	String name;
	int score;

	Student(String name, int score) {
		this.name = name;
		this.score = score;
	}
}
```


## ğŸ€ å°ç»“

- `Map` æ˜¯ä¸€ç§æ˜ å°„è¡¨ï¼Œå¯ä»¥é€šè¿‡ `key` å¿«é€ŸæŸ¥æ‰¾ `value` ã€‚

- å¯ä»¥é€šè¿‡ `for each` éå† `keySet()` ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ `for each` éå† `entrySet()` ï¼Œç›´æ¥è·å– `key-value` ã€‚

- æœ€å¸¸ç”¨çš„ä¸€ç§ `Map` å®ç°æ˜¯ `HashMap` ã€‚

