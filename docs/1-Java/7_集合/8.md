---
title: ä½¿ç”¨ Properties
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::

åœ¨ç¼–å†™åº”ç”¨ç¨‹åºçš„æ—¶å€™ï¼Œç»å¸¸éœ€è¦è¯»å†™é…ç½®æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·çš„è®¾ç½®ï¼š

```properties
# ä¸Šæ¬¡æœ€åæ‰“å¼€çš„æ–‡ä»¶:
last_open_file=/data/hello.txt
# è‡ªåŠ¨ä¿å­˜æ–‡ä»¶çš„æ—¶é—´é—´éš”:
auto_save_interval=60
```

é…ç½®æ–‡ä»¶çš„ç‰¹ç‚¹æ˜¯ï¼Œå®ƒçš„ Key-Value ä¸€èˆ¬éƒ½æ˜¯ `String-String` ç±»å‹çš„ï¼Œå› æ­¤æˆ‘ä»¬å®Œå…¨å¯ä»¥ç”¨ `Map<String, String>` æ¥è¡¨ç¤ºå®ƒã€‚

å› ä¸ºé…ç½®æ–‡ä»¶éå¸¸å¸¸ç”¨ï¼Œæ‰€ä»¥ Java é›†åˆåº“æä¾›äº†ä¸€ä¸ª `Properties` æ¥è¡¨ç¤ºä¸€ç»„ â€œé…ç½®â€ã€‚ç”±äºå†å²é—ç•™åŸå› ï¼Œ`Properties` å†…éƒ¨æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª `Hashtable`ï¼Œä½†æˆ‘ä»¬åªéœ€è¦ç”¨åˆ° `Properties` è‡ªèº«å…³äºè¯»å†™é…ç½®çš„æ¥å£ã€‚

## ğŸ€ è¯»å–é…ç½®æ–‡ä»¶

ç”¨ `Properties` è¯»å–é…ç½®æ–‡ä»¶éå¸¸ç®€å•ã€‚Java é»˜è®¤é…ç½®æ–‡ä»¶ä»¥ `.properties` ä¸ºæ‰©å±•åï¼Œæ¯è¡Œä»¥ `key = value` è¡¨ç¤ºï¼Œä»¥ `#` è¯¾å¼€å¤´çš„æ˜¯æ³¨é‡Šã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå…¸å‹çš„é…ç½®æ–‡ä»¶ï¼š

```properties
# setting.properties
last_open_file=/data/hello.txt
auto_save_interval=60
```

å¯ä»¥ä»æ–‡ä»¶ç³»ç»Ÿè¯»å–è¿™ä¸ª `.properties` æ–‡ä»¶ï¼š

```java
String f = "setting.properties";
Properties props = new Properties();
props.load(new java.io.FileInputStream(f));

String filepath = props.getProperty("last_open_file");
String interval = props.getProperty("auto_save_interval", "120");
```

å¯è§ï¼Œç”¨ `Properties` è¯»å–é…ç½®æ–‡ä»¶ï¼Œä¸€å…±æœ‰ä¸‰æ­¥ï¼š

1. åˆ›å»º `Properties` å®ä¾‹ï¼›
2. è°ƒç”¨ `load()` è¯»å–æ–‡ä»¶ï¼›
3. è°ƒç”¨ `getProperty()` è·å–é…ç½®ã€‚

è°ƒç”¨ `getProperty()` è·å–é…ç½®æ—¶ï¼Œå¦‚æœ key ä¸å­˜åœ¨ï¼Œå°†è¿”å› `null` ã€‚æˆ‘ä»¬è¿˜å¯ä»¥æä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œè¿™æ ·ï¼Œå½“ key ä¸å­˜åœ¨çš„æ—¶å€™ï¼Œå°±è¿”å›é»˜è®¤å€¼ã€‚

ä¹Ÿå¯ä»¥ä» classpath è¯»å– `.properties` æ–‡ä»¶ï¼Œå› ä¸º `load(InputStream)` æ–¹æ³•æ¥æ”¶ä¸€ä¸ª `InputStream` å®ä¾‹ï¼Œè¡¨ç¤ºä¸€ä¸ªå­—èŠ‚æµï¼Œå®ƒä¸ä¸€å®šæ˜¯æ–‡ä»¶æµï¼Œä¹Ÿå¯ä»¥æ˜¯ä» jar åŒ…ä¸­è¯»å–çš„èµ„æºæµï¼š

```java
Properties props = new Properties();
props.load(getClass().getResourceAsStream("/common/setting.properties"));
```

è¯•è¯•ä»å†…å­˜è¯»å–ä¸€ä¸ªå­—èŠ‚æµï¼š

```java
// properties
import java.io.*;
import java.util.Properties;

public class Main {
    public static void main(String[] args) throws IOException {
        String settings = "# test" + "\n" + "course=Java" + "\n" + "last_open_date=2019-08-07T12:35:01";
        ByteArrayInputStream input = new ByteArrayInputStream(settings.getBytes("UTF-8"));
        Properties props = new Properties();
        props.load(input);

        System.out.println("course: " + props.getProperty("course"));
        System.out.println("last_open_date: " + props.getProperty("last_open_date"));
        System.out.println("last_open_file: " + props.getProperty("last_open_file"));
        System.out.println("auto_save: " + props.getProperty("auto_save", "60"));
    }
}
```

å¦‚æœæœ‰å¤šä¸ª `.properties` æ–‡ä»¶ï¼Œå¯ä»¥åå¤è°ƒç”¨ `load()` è¯»å–ï¼Œåè¯»å–çš„ key-value ä¼šè¦†ç›–å·²è¯»å–çš„ key-value ï¼š

```java
Properties props = new Properties();
props.load(getClass().getResourceAsStream("/common/setting.properties"));
props.load(new FileInputStream("C:\\conf\\setting.properties"));
```

ä¸Šé¢çš„ä»£ç æ¼”ç¤ºäº† `Properties` çš„ä¸€ä¸ªå¸¸ç”¨ç”¨æ³•ï¼šå¯ä»¥æŠŠé»˜è®¤é…ç½®æ–‡ä»¶æ”¾åˆ° `classpath` ä¸­ï¼Œç„¶åï¼Œæ ¹æ®æœºå™¨çš„ç¯å¢ƒç¼–å†™å¦ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œè¦†ç›–æŸäº›é»˜è®¤çš„é…ç½®ã€‚

`Properties` è®¾è®¡çš„ç›®çš„æ˜¯å­˜å‚¨ `String` ç±»å‹çš„ keyï¼valueï¼Œä½† `Properties` å®é™…ä¸Šæ˜¯ä» `Hashtable` æ´¾ç”Ÿçš„ï¼Œå®ƒçš„è®¾è®¡å®é™…ä¸Šæ˜¯æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯ä¸ºäº†ä¿æŒå…¼å®¹æ€§ï¼Œç°åœ¨å·²ç»æ²¡æ³•ä¿®æ”¹äº†ã€‚é™¤äº† `getProperty()` å’Œ `setProperty()` æ–¹æ³•å¤–ï¼Œè¿˜æœ‰ä» `Hashtable` ç»§æ‰¿ä¸‹æ¥çš„ `get()` å’Œ `put()` æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•çš„å‚æ•°ç­¾åæ˜¯ `Object`ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ `Properties` çš„æ—¶å€™ï¼Œ**ä¸è¦**å»è°ƒç”¨è¿™äº›ä» `Hashtable` ç»§æ‰¿ä¸‹æ¥çš„æ–¹æ³•ã€‚

## ğŸ€ å†™å…¥é…ç½®æ–‡ä»¶

å¦‚æœé€šè¿‡ `setProperty()` ä¿®æ”¹äº† `Properties` å®ä¾‹ï¼Œå¯ä»¥æŠŠé…ç½®å†™å…¥æ–‡ä»¶ï¼Œä»¥ä¾¿ä¸‹æ¬¡å¯åŠ¨æ—¶è·å¾—æœ€æ–°é…ç½®ã€‚å†™å…¥é…ç½®æ–‡ä»¶ä½¿ç”¨ `store()` æ–¹æ³•ï¼š

```java
Properties props = new Properties();
props.setProperty("url", "http://www.liaoxuefeng.com");
props.setProperty("language", "Java");
props.store(new FileOutputStream("C:\\conf\\setting.properties"), "è¿™æ˜¯å†™å…¥çš„ properties æ³¨é‡Š");
```

## ğŸ€ ç¼–ç 

æ—©æœŸç‰ˆæœ¬çš„ Java è§„å®š `.properties` æ–‡ä»¶ç¼–ç æ˜¯ ASCII ç¼–ç ï¼ˆISO8859-1ï¼‰ï¼Œå¦‚æœæ¶‰åŠåˆ°ä¸­æ–‡å°±å¿…é¡»ç”¨ `name=\u4e2d\u6587` æ¥è¡¨ç¤ºï¼Œéå¸¸åˆ«æ‰­ã€‚ä» JDK9 å¼€å§‹ï¼ŒJava çš„ `.properties` æ–‡ä»¶å¯ä»¥ä½¿ç”¨ UTF-8 ç¼–ç äº†ã€‚

ä¸è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äº `load(InputStream)` é»˜è®¤æ€»æ˜¯ä»¥ ASCII ç¼–ç è¯»å–å­—èŠ‚æµï¼Œæ‰€ä»¥ä¼šå¯¼è‡´è¯»åˆ°ä¹±ç ã€‚æˆ‘ä»¬éœ€è¦ç”¨å¦ä¸€ä¸ªé‡è½½æ–¹æ³• `load(Reader)` è¯»å–ï¼š

```java
Properties props = new Properties();
props.load(new FileReader("settings.properties", StandardCharsets.UTF_8));
```

å°±å¯ä»¥æ­£å¸¸è¯»å–ä¸­æ–‡ã€‚`InputStream` å’Œ `Reader` çš„åŒºåˆ«æ˜¯ä¸€ä¸ªæ˜¯å­—èŠ‚æµï¼Œä¸€ä¸ªæ˜¯å­—ç¬¦æµã€‚å­—ç¬¦æµåœ¨å†…å­˜ä¸­å·²ç»ä»¥ `char` ç±»å‹è¡¨ç¤ºäº†ï¼Œä¸æ¶‰åŠç¼–ç é—®é¢˜ã€‚

## ğŸ€ å°ç»“

- Java é›†åˆåº“æä¾›çš„ `Properties` ç”¨äºè¯»å†™é…ç½®æ–‡ä»¶ `.properties`ã€‚`.properties` æ–‡ä»¶å¯ä»¥ä½¿ç”¨ UTF-8 ç¼–ç ã€‚

- å¯ä»¥ä»æ–‡ä»¶ç³»ç»Ÿã€classpath æˆ–å…¶ä»–ä»»ä½•åœ°æ–¹è¯»å– `.properties` æ–‡ä»¶ã€‚

- è¯»å†™ `Properties` æ—¶ï¼Œæ³¨æ„ä»…ä½¿ç”¨ `getProperty()` å’Œ `setProperty()` æ–¹æ³•ï¼Œä¸è¦è°ƒç”¨ç»§æ‰¿è€Œæ¥çš„ `get()` å’Œ `put()` ç­‰æ–¹æ³•ã€‚
