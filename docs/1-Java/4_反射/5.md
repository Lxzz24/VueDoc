---
title: è·å–ç»§æ‰¿å…³ç³»*
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::


å½“æˆ‘ä»¬è·å–åˆ°æŸä¸ª `Class` å¯¹è±¡æ—¶ï¼Œå®é™…ä¸Šå°±è·å–åˆ°äº†ä¸€ä¸ªç±»çš„ç±»å‹ï¼š

```java
Class cls = String.class; // è·å–åˆ° String çš„ Class
```

è¿˜å¯ä»¥ç”¨å®ä¾‹çš„ `getClass()` æ–¹æ³•è·å–ï¼š

```java
String s = "";
Class cls = s.getClass(); // s æ˜¯ Stringï¼Œå› æ­¤è·å–åˆ° String çš„ Class
```

æœ€åä¸€ç§è·å– `Class` çš„æ–¹æ³•æ˜¯é€šè¿‡ `Class.forName("")` ï¼Œä¼ å…¥ `Class` çš„å®Œæ•´ç±»åè·å–ï¼š

```java
Class s = Class.forName("java.lang.String");
```

è¿™ä¸‰ç§æ–¹å¼è·å–çš„ `Class` å®ä¾‹éƒ½æ˜¯åŒä¸€ä¸ªå®ä¾‹ï¼Œå› ä¸º JVM å¯¹æ¯ä¸ªåŠ è½½çš„ `Class` åªåˆ›å»ºä¸€ä¸ª `Class` å®ä¾‹æ¥è¡¨ç¤ºå®ƒçš„ç±»å‹ã€‚

## ğŸ€ è·å–çˆ¶ç±»çš„ Class

æœ‰äº† `Class` å®ä¾‹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è·å–å®ƒçš„çˆ¶ç±»çš„ `Class` ï¼š

```java
// reflection
public class Main {
    public static void main(String[] args) throws Exception {
        Class i = Integer.class;
        Class n = i.getSuperclass();
        System.out.println(n);
        Class o = n.getSuperclass();
        System.out.println(o);
        System.out.println(o.getSuperclass());
    }
}
```

è¿è¡Œä¸Šè¿°ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œ `Integer` çš„çˆ¶ç±»ç±»å‹æ˜¯ `Number` ï¼Œ `Number` çš„çˆ¶ç±»æ˜¯ `Object` ï¼Œ `Object` çš„çˆ¶ç±»æ˜¯ `null` ã€‚é™¤ `Object` å¤–ï¼Œå…¶ä»–ä»»ä½•é `interface` çš„ `Class` éƒ½å¿…å®šå­˜åœ¨ä¸€ä¸ªçˆ¶ç±»ç±»å‹ã€‚

## ğŸ€ è·å– interface

ç”±äºä¸€ä¸ªç±»å¯èƒ½å®ç°ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£ï¼Œé€šè¿‡ Class æˆ‘ä»¬å°±å¯ä»¥æŸ¥è¯¢åˆ°å®ç°çš„æ¥å£ç±»å‹ã€‚ä¾‹å¦‚ï¼ŒæŸ¥è¯¢ Integer å®ç°çš„æ¥å£ï¼š

```java
// reflection
import java.lang.reflect.Method;
public class Main {
    public static void main(String[] args) throws Exception {
        Class s = Integer.class;
        Class[] is = s.getInterfaces();
        for (Class i : is) {
            System.out.println(i);
        }
    }
}
```

è¿è¡Œä¸Šè¿°ä»£ç å¯çŸ¥ï¼Œ `Integer` å®ç°çš„æ¥å£æœ‰ï¼š

- java.lang.Comparable
- java.lang.constant.Constable
- java.lang.constant.ConstantDesc


è¦ç‰¹åˆ«æ³¨æ„ï¼š `getInterfaces()` åªè¿”å›å½“å‰ç±»ç›´æ¥å®ç°çš„æ¥å£ç±»å‹ï¼Œå¹¶ä¸åŒ…æ‹¬å…¶çˆ¶ç±»å®ç°çš„æ¥å£ç±»å‹ï¼š

```java
// reflection
import java.lang.reflect.Method;
public class Main {
    public static void main(String[] args) throws Exception {
        Class s = Integer.class.getSuperclass();
        Class[] is = s.getInterfaces();
        for (Class i : is) {
            System.out.println(i);
        }
    }
}
```

`Integer` çš„çˆ¶ç±»æ˜¯ `Number` ï¼Œ `Number` å®ç°çš„æ¥å£æ˜¯ `java.io.Serializable` ã€‚

æ­¤å¤–ï¼Œå¯¹æ‰€æœ‰ `interface` çš„ `Class` è°ƒç”¨ `getSuperclass()` è¿”å›çš„æ˜¯ `null` ï¼Œè·å–æ¥å£çš„çˆ¶æ¥å£è¦ç”¨ `getInterfaces()` ï¼š

```java
System.out.println(java.io.DataInputStream.class.getSuperclass()); // java.io.FilterInputStreamï¼Œå› ä¸º DataInputStream ç»§æ‰¿è‡ª FilterInputStream
System.out.println(java.io.Closeable.class.getSuperclass()); // nullï¼Œå¯¹æ¥å£è°ƒç”¨ getSuperclass() æ€»æ˜¯è¿”å› nullï¼Œè·å–æ¥å£çš„çˆ¶æ¥å£è¦ç”¨ getInterfaces()
```

å¦‚æœä¸€ä¸ªç±»æ²¡æœ‰å®ç°ä»»ä½• `interface` ï¼Œé‚£ä¹ˆ `getInterfaces()` è¿”å›ç©ºæ•°ç»„ã€‚

## ğŸ€ ç»§æ‰¿å…³ç³»*

å½“æˆ‘ä»¬åˆ¤æ–­ä¸€ä¸ªå®ä¾‹æ˜¯å¦æ˜¯æŸä¸ªç±»å‹æ—¶ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œä½¿ç”¨ `instanceof` æ“ä½œç¬¦ï¼š

```java
Object n = Integer.valueOf(123);
boolean isDouble = n instanceof Double; // false
boolean isInteger = n instanceof Integer; // true
boolean isNumber = n instanceof Number; // true
boolean isSerializable = n instanceof java.io.Serializable; // true
```

å¦‚æœæ˜¯ä¸¤ä¸ª `Class` å®ä¾‹ï¼Œè¦åˆ¤æ–­ä¸€ä¸ªå‘ä¸Šè½¬å‹æ˜¯å¦æˆç«‹ï¼Œå¯ä»¥è°ƒç”¨ `isAssignableFrom()` ï¼š

```java
// Integer i = ?
Integer.class.isAssignableFrom(Integer.class); // trueï¼Œå› ä¸º Integer å¯ä»¥èµ‹å€¼ç»™ Integer
// Number n = ?
Number.class.isAssignableFrom(Integer.class); // trueï¼Œå› ä¸º Integer å¯ä»¥èµ‹å€¼ç»™ Number
// Object o = ?
Object.class.isAssignableFrom(Integer.class); // trueï¼Œå› ä¸º Integer å¯ä»¥èµ‹å€¼ç»™ Object
// Integer i = ?
Integer.class.isAssignableFrom(Number.class); // falseï¼Œå› ä¸º Number ä¸èƒ½èµ‹å€¼ç»™ Integer
```


## ğŸ€ å°ç»“

é€šè¿‡ `Class` å¯¹è±¡å¯ä»¥è·å–ç»§æ‰¿å…³ç³»ï¼š
- `Class getSuperclass()` ï¼šè·å–çˆ¶ç±»ç±»å‹ï¼›
- `Class[] getInterfaces()` ï¼šè·å–å½“å‰ç±»å®ç°çš„æ‰€æœ‰æ¥å£ã€‚


é€šè¿‡ `Class` å¯¹è±¡çš„ `isAssignableFrom()` æ–¹æ³•å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå‘ä¸Šè½¬å‹æ˜¯å¦å¯ä»¥å®ç°ã€‚


