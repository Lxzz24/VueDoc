---
title: è°ƒç”¨æ„é€ æ–¹æ³•
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::


æˆ‘ä»¬é€šå¸¸ä½¿ç”¨ `new` æ“ä½œç¬¦åˆ›å»ºæ–°çš„å®ä¾‹ï¼š

```java
Person p = new Person();
```

å¦‚æœé€šè¿‡åå°„æ¥åˆ›å»ºæ–°çš„å®ä¾‹ï¼Œå¯ä»¥è°ƒç”¨ `Class` æä¾›çš„ `newInstance()` æ–¹æ³•ï¼š

```java
Person p = Person.class.newInstance();
```

è°ƒç”¨ `Class.newInstance()` çš„å±€é™æ˜¯ï¼Œå®ƒåªèƒ½è°ƒç”¨è¯¥ç±»çš„ `public` æ— å‚æ•°æ„é€ æ–¹æ³•ã€‚å¦‚æœæ„é€ æ–¹æ³•å¸¦æœ‰å‚æ•°ï¼Œæˆ–è€…ä¸æ˜¯ `public` ï¼Œå°±æ— æ³•ç›´æ¥é€šè¿‡ `Class.newInstance()` æ¥è°ƒç”¨ã€‚

ä¸ºäº†è°ƒç”¨ä»»æ„çš„æ„é€ æ–¹æ³•ï¼Œ Java çš„åå°„ API æä¾›äº† `Constructor` å¯¹è±¡ï¼Œå®ƒåŒ…å«ä¸€ä¸ªæ„é€ æ–¹æ³•çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚ `Constructor` å¯¹è±¡å’Œ `Method` éå¸¸ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„ä»…åœ¨äºå®ƒæ˜¯ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œå¹¶ä¸”ï¼Œè°ƒç”¨ç»“æœæ€»æ˜¯è¿”å›å®ä¾‹ï¼š

```java
import java.lang.reflect.Constructor;
public class Main {
    public static void main(String[] args) throws Exception {
        // è·å–æ„é€ æ–¹æ³• Integer(int):
        Constructor cons1 = Integer.class.getConstructor(int.class);
        // è°ƒç”¨æ„é€ æ–¹æ³•:
        Integer n1 = (Integer) cons1.newInstance(123);
        System.out.println(n1);

        // è·å–æ„é€ æ–¹æ³• Integer(String)
        Constructor cons2 = Integer.class.getConstructor(String.class);
        Integer n2 = (Integer) cons2.newInstance("456");
        System.out.println(n2);
    }
}
```

é€šè¿‡ `Class` å®ä¾‹è·å– `Constructor` çš„æ–¹æ³•å¦‚ä¸‹ï¼š

- `getConstructor(Class...)` ï¼šè·å–æŸä¸ª `public` çš„ `Constructor` ï¼›
- `getDeclaredConstructor(Class...)` ï¼šè·å–æŸä¸ª `Constructor` ï¼›
- `getConstructors()` ï¼šè·å–æ‰€æœ‰ `public` çš„ `Constructor` ï¼›
- `getDeclaredConstructors()` ï¼šè·å–æ‰€æœ‰ `Constructor` ã€‚


> [!warning]
> `Constructor` æ€»æ˜¯å½“å‰ç±»å®šä¹‰çš„æ„é€ æ–¹æ³•ï¼Œå’Œçˆ¶ç±»æ— å…³ï¼Œå› æ­¤ä¸å­˜åœ¨å¤šæ€çš„é—®é¢˜ã€‚

è°ƒç”¨é `public` çš„ `Constructor` æ—¶ï¼Œå¿…é¡»é¦–å…ˆé€šè¿‡ `setAccessible(true)` è®¾ç½®å…è®¸è®¿é—®ã€‚ `setAccessible(true)` å¯èƒ½ä¼šå¤±è´¥ã€‚

## ğŸ€ å°ç»“

`Constructor` å¯¹è±¡å°è£…äº†æ„é€ æ–¹æ³•çš„æ‰€æœ‰ä¿¡æ¯ï¼›

- é€šè¿‡ `Class` å®ä¾‹çš„æ–¹æ³•å¯ä»¥è·å– `Constructor` å®ä¾‹ï¼š `getConstructor()` ï¼Œ `getConstructors()` ï¼Œ `getDeclaredConstructor()` ï¼Œ `getDeclaredConstructors()` ï¼›
- é€šè¿‡ `Constructor` å®ä¾‹å¯ä»¥åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼š `newInstance(Object... parameters)` ï¼› é€šè¿‡è®¾ç½® `setAccessible(true)` æ¥è®¿é—®é `public` æ„é€ æ–¹æ³•ã€‚


