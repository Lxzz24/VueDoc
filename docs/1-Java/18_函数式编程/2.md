---
title: æ–¹æ³•å¼•ç”¨
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::

ä½¿ç”¨ Lambda è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸å¿…ç¼–å†™ `FunctionalInterface` æ¥å£çš„å®ç°ç±»ï¼Œä»è€Œç®€åŒ–ä»£ç ï¼š

```java
Arrays.sort(array, (s1, s2) -> {
    return s1.compareTo(s2);
});
```

å®é™…ä¸Šï¼Œé™¤äº† Lambda è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç›´æ¥ä¼ å…¥æ–¹æ³•å¼•ç”¨ã€‚ä¾‹å¦‚ï¼š

```java
import java.util.Arrays;

public class Main {
    public static void main(String[] args) {
        String[] array = new String[] { "Apple", "Orange", "Banana", "Lemon" };
        Arrays.sort(array, Main::cmp);
        System.out.println(String.join(", ", array));
    }

    static int cmp(String s1, String s2) {
        return s1.compareTo(s2);
    }
}
```


ä¸Šè¿°ä»£ç åœ¨ `Arrays.sort()` ä¸­ç›´æ¥ä¼ å…¥äº†é™æ€æ–¹æ³• `cmp` çš„å¼•ç”¨ï¼Œç”¨ `Main::cmp` è¡¨ç¤ºã€‚

å› æ­¤ï¼Œæ‰€è°“æ–¹æ³•å¼•ç”¨ï¼Œæ˜¯æŒ‡å¦‚æœæŸä¸ªæ–¹æ³•ç­¾åå’Œæ¥å£æ°å¥½ä¸€è‡´ï¼Œå°±å¯ä»¥ç›´æ¥ä¼ å…¥æ–¹æ³•å¼•ç”¨ã€‚

å› ä¸º `Comparator<String>` æ¥å£å®šä¹‰çš„æ–¹æ³•æ˜¯ `int compare(String, String)`ï¼Œå’Œé™æ€æ–¹æ³• `int cmp(String, String)` ç›¸æ¯”ï¼Œé™¤äº†æ–¹æ³•åå¤–ï¼Œæ–¹æ³•å‚æ•°ä¸€è‡´ï¼Œè¿”å›ç±»å‹ç›¸åŒï¼Œå› æ­¤ï¼Œæˆ‘ä»¬è¯´ä¸¤è€…çš„æ–¹æ³•ç­¾åä¸€è‡´ï¼Œå¯ä»¥ç›´æ¥æŠŠæ–¹æ³•åä½œä¸º Lambda è¡¨è¾¾å¼ä¼ å…¥ï¼š

```java
Arrays.sort(array, Main::cmp);
```

æ³¨æ„ï¼šåœ¨è¿™é‡Œï¼Œæ–¹æ³•ç­¾ååªçœ‹å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹ï¼Œä¸çœ‹æ–¹æ³•åç§°ï¼Œä¹Ÿä¸çœ‹ç±»çš„ç»§æ‰¿å…³ç³»ã€‚

æˆ‘ä»¬å†çœ‹çœ‹å¦‚ä½•å¼•ç”¨å®ä¾‹æ–¹æ³•ã€‚å¦‚æœæˆ‘ä»¬æŠŠä»£ç æ”¹å†™å¦‚ä¸‹ï¼š

```java
import java.util.Arrays;

public class Main {
    public static void main(String[] args) {
        String[] array = new String[] { "Apple", "Orange", "Banana", "Lemon" };
        Arrays.sort(array, String::compareTo);
        System.out.println(String.join(", ", array));
    }
}
```


ä¸ä½†å¯ä»¥ç¼–è¯‘é€šè¿‡ï¼Œè€Œä¸”è¿è¡Œç»“æœä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œè¿™è¯´æ˜ `String.compareTo()` æ–¹æ³•ä¹Ÿç¬¦åˆ Lambda å®šä¹‰ã€‚

è§‚å¯Ÿ `String.compareTo()` çš„æ–¹æ³•å®šä¹‰ï¼š

```java
public final class String {
    public int compareTo(String o) {
        ...
    }
}
```

è¿™ä¸ªæ–¹æ³•çš„ç­¾ååªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œä¸ºä»€ä¹ˆå’Œ `int Comparator<String>.compare(String, String)` èƒ½åŒ¹é…å‘¢ï¼Ÿ

å› ä¸ºå®ä¾‹æ–¹æ³•æœ‰ä¸€ä¸ªéšå«çš„ `this` å‚æ•°ï¼Œ`String` ç±»çš„ `compareTo()` æ–¹æ³•åœ¨å®é™…è°ƒç”¨çš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªéšå«å‚æ•°æ€»æ˜¯ä¼ å…¥ `this`ï¼Œç›¸å½“äºé™æ€æ–¹æ³•ï¼š

```java
public static int compareTo(String this, String o);
```

æ‰€ä»¥ï¼Œ`String.compareTo()` æ–¹æ³•ä¹Ÿå¯ä½œä¸ºæ–¹æ³•å¼•ç”¨ä¼ å…¥ã€‚

## ğŸ€ æ„é€ æ–¹æ³•å¼•ç”¨

é™¤äº†å¯ä»¥å¼•ç”¨é™æ€æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¼•ç”¨æ„é€ æ–¹æ³•ã€‚

æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼šå¦‚æœè¦æŠŠä¸€ä¸ª `List<String>` è½¬æ¢ä¸º `List<Person>`ï¼Œåº”è¯¥æ€ä¹ˆåŠï¼Ÿ

```java
class Person {
    String name;
    public Person(String name) {
        this.name = name;
    }
}

List<String> names = List.of("Bob", "Alice", "Tim");
List<Person> persons = ???
```

ä¼ ç»Ÿçš„åšæ³•æ˜¯å…ˆå®šä¹‰ä¸€ä¸ª `ArrayList<Person>`ï¼Œç„¶åç”¨ `for` å¾ªç¯å¡«å……è¿™ä¸ª `List`ï¼š

```java
List<String> names = List.of("Bob", "Alice", "Tim");
List<Person> persons = new ArrayList<>();
for (String name : names) {
    persons.add(new Person(name));
}
```

è¦æ›´ç®€å•åœ°å®ç° `String` åˆ° `Person` çš„è½¬æ¢ï¼Œæˆ‘ä»¬å¯ä»¥å¼•ç”¨ `Person` çš„æ„é€ æ–¹æ³•ï¼š

```java
// å¼•ç”¨æ„é€ æ–¹æ³•
import java.util.*;
import java.util.stream.*;

public class Main {
    public static void main(String[] args) {
        List<String> names = List.of("Bob", "Alice", "Tim");
        List<Person> persons = names.stream().map(Person::new).collect(Collectors.toList());
        System.out.println(persons);
    }
}

class Person {
    String name;
    public Person(String name) {
        this.name = name;
    }
    public String toString() {
        return "Person:" + this.name;
    }
}

```


åé¢æˆ‘ä»¬ä¼šè®²åˆ° `Stream` çš„ `map()` æ–¹æ³•ã€‚ç°åœ¨æˆ‘ä»¬çœ‹åˆ°ï¼Œè¿™é‡Œçš„ `map()` éœ€è¦ä¼ å…¥çš„ FunctionalInterface çš„å®šä¹‰æ˜¯ï¼š

```java
@FunctionalInterface
public interface Function<T, R> {
    R apply(T t);
}
```

æŠŠæ³›å‹å¯¹åº”ä¸Šå°±æ˜¯æ–¹æ³•ç­¾å `Person apply(String)`ï¼Œå³ä¼ å…¥å‚æ•° `String`ï¼Œè¿”å›ç±»å‹ `Person`ã€‚è€Œ `Person` ç±»çš„æ„é€ æ–¹æ³•æ°å¥½æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œå› ä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°æ˜¯ `String`ï¼Œè€Œæ„é€ æ–¹æ³•è™½ç„¶æ²¡æœ‰ `return` è¯­å¥ï¼Œä½†å®ƒä¼šéšå¼åœ°è¿”å› `this` å®ä¾‹ï¼Œç±»å‹å°±æ˜¯ `Person`ï¼Œå› æ­¤ï¼Œæ­¤å¤„å¯ä»¥å¼•ç”¨æ„é€ æ–¹æ³•ã€‚æ„é€ æ–¹æ³•çš„å¼•ç”¨å†™æ³•æ˜¯ ` ç±»å::new`ï¼Œå› æ­¤ï¼Œæ­¤å¤„ä¼ å…¥ `Person::new`ã€‚

## ğŸ€ ç»ƒä¹ 

ä½¿ç”¨æ–¹æ³•å¼•ç”¨å®ç°å¿½ç•¥å¤§å°å†™æ’åº

## ğŸ€ å°ç»“

`FunctionalInterface` å…è®¸ä¼ å…¥ï¼š

- æ¥å£çš„å®ç°ç±»ï¼ˆä¼ ç»Ÿå†™æ³•ï¼Œä»£ç è¾ƒç¹çï¼‰ï¼›
- Lambda è¡¨è¾¾å¼ï¼ˆåªéœ€åˆ—å‡ºå‚æ•°åï¼Œç”±ç¼–è¯‘å™¨æ¨æ–­ç±»å‹ï¼‰ï¼›
- ç¬¦åˆæ–¹æ³•ç­¾åçš„é™æ€æ–¹æ³•ï¼›
- ç¬¦åˆæ–¹æ³•ç­¾åçš„å®ä¾‹æ–¹æ³•ï¼ˆå®ä¾‹ç±»å‹è¢«çœ‹åšç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹ï¼‰ï¼›
- ç¬¦åˆæ–¹æ³•ç­¾åçš„æ„é€ æ–¹æ³•ï¼ˆå®ä¾‹ç±»å‹è¢«çœ‹åšè¿”å›ç±»å‹ï¼‰ã€‚

`FunctionalInterface` ä¸å¼ºåˆ¶ç»§æ‰¿å…³ç³»ï¼Œä¸éœ€è¦æ–¹æ³•åç§°ç›¸åŒï¼Œåªè¦æ±‚æ–¹æ³•å‚æ•°ï¼ˆç±»å‹å’Œæ•°é‡ï¼‰ä¸æ–¹æ³•è¿”å›ç±»å‹ç›¸åŒï¼Œå³è®¤ä¸ºæ–¹æ³•ç­¾åç›¸åŒã€‚


