---
title: Lambda åŸºç¡€
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::


åœ¨äº†è§£ Lambda ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹ Java çš„æ–¹æ³•ã€‚

Java çš„æ–¹æ³•åˆ†ä¸ºå®ä¾‹æ–¹æ³•ï¼Œä¾‹å¦‚ `Integer` å®šä¹‰çš„ `equals()` æ–¹æ³•ï¼š

```java
public final class Integer {
    boolean equals(Object o) {
        ...
    }
}
```

ä»¥åŠé™æ€æ–¹æ³•ï¼Œä¾‹å¦‚ `Integer` å®šä¹‰çš„ `parseInt()` æ–¹æ³•ï¼š

```java
public final class Integer {
    public static int parseInt(String s) {
        ...
    }
}
```

æ— è®ºæ˜¯å®ä¾‹æ–¹æ³•ï¼Œè¿˜æ˜¯é™æ€æ–¹æ³•ï¼Œæœ¬è´¨ä¸Šéƒ½ç›¸å½“äºè¿‡ç¨‹å¼è¯­è¨€çš„å‡½æ•°ã€‚ä¾‹å¦‚ C å‡½æ•°ï¼š

```c
char* strcpy(char* dest, char* src)
```

åªä¸è¿‡ Java çš„å®ä¾‹æ–¹æ³•éšå«åœ°ä¼ å…¥äº†ä¸€ä¸ª `this` å˜é‡ï¼Œå³å®ä¾‹æ–¹æ³•æ€»æ˜¯æœ‰ä¸€ä¸ªéšå«å‚æ•° `this`ã€‚

**å‡½æ•°å¼ç¼–ç¨‹**ï¼ˆFunctional Programmingï¼‰æ˜¯æŠŠå‡½æ•°ä½œä¸ºåŸºæœ¬è¿ç®—å•å…ƒï¼Œå‡½æ•°å¯ä»¥ä½œä¸ºå˜é‡ï¼Œå¯ä»¥æ¥æ”¶å‡½æ•°ï¼Œè¿˜å¯ä»¥è¿”å›å‡½æ•°ã€‚å†å²ä¸Šç ”ç©¶å‡½æ•°å¼ç¼–ç¨‹çš„ç†è®ºæ˜¯ Lambda æ¼”ç®—ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»å¸¸æŠŠæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹çš„ç¼–ç é£æ ¼ç§°ä¸º Lambda è¡¨è¾¾å¼ã€‚

## ğŸ€ Lambda è¡¨è¾¾å¼

åœ¨ Java ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ä¸€å¤§å †å•æ–¹æ³•æ¥å£ï¼Œå³ä¸€ä¸ªæ¥å£åªå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼š

- Comparator
- Runnable
- Callable

ä»¥ `Comparator` ä¸ºä¾‹ï¼Œæˆ‘ä»¬æƒ³è¦è°ƒç”¨ `Arrays.sort()` æ—¶ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ª `Comparator` å®ä¾‹ï¼Œä»¥åŒ¿åç±»æ–¹å¼ç¼–å†™å¦‚ä¸‹ï¼š

```java
String[] array = ...
Arrays.sort(array, new Comparator<String>() {
    public int compare(String s1, String s2) {
        return s1.compareTo(s2);
    }
});
```

ä¸Šè¿°å†™æ³•éå¸¸ç¹çã€‚ä» Java 8 å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ Lambda è¡¨è¾¾å¼æ›¿æ¢å•æ–¹æ³•æ¥å£ã€‚æ”¹å†™ä¸Šè¿°ä»£ç å¦‚ä¸‹ï¼š

```java
// Lambda
import java.util.Arrays;

public class Main {
    public static void main(String[] args) {
        String[] array = new String[] { "Apple", "Orange", "Banana", "Lemon" };
        Arrays.sort(array, (s1, s2) -> {
            return s1.compareTo(s2);
        });
        System.out.println(String.join(", ", array));
    }
}
```


è§‚å¯Ÿ Lambda è¡¨è¾¾å¼çš„å†™æ³•ï¼Œå®ƒåªéœ€è¦å†™å‡ºæ–¹æ³•å®šä¹‰ï¼š

```java
(s1, s2) -> {
    return s1.compareTo(s2);
}
```

å…¶ä¸­ï¼Œå‚æ•°æ˜¯ `(s1, s2)`ï¼Œå‚æ•°ç±»å‹å¯ä»¥çœç•¥ï¼Œå› ä¸ºç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨æ–­å‡º `String` ç±»å‹ã€‚`-> { ... }` è¡¨ç¤ºæ–¹æ³•ä½“ï¼Œæ‰€æœ‰ä»£ç å†™åœ¨å†…éƒ¨å³å¯ã€‚Lambda è¡¨è¾¾å¼æ²¡æœ‰ `class` å®šä¹‰ï¼Œå› æ­¤å†™æ³•éå¸¸ç®€æ´ã€‚

å¦‚æœåªæœ‰ä¸€è¡Œ `return xxx` çš„ä»£ç ï¼Œå®Œå…¨å¯ä»¥ç”¨æ›´ç®€å•çš„å†™æ³•ï¼š

```java
Arrays.sort(array, (s1, s2) -> s1.compareTo(s2));
```

è¿”å›å€¼çš„ç±»å‹ä¹Ÿæ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­çš„ï¼Œè¿™é‡Œæ¨æ–­å‡ºçš„è¿”å›å€¼æ˜¯ `int`ï¼Œå› æ­¤ï¼Œåªè¦è¿”å› `int`ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šæŠ¥é”™ã€‚

## ğŸ€ FunctionalInterface

æˆ‘ä»¬æŠŠåªå®šä¹‰äº†å•æ–¹æ³•çš„æ¥å£ç§°ä¹‹ä¸º `FunctionalInterface`ï¼Œç”¨æ³¨è§£ `@FunctionalInterface` æ ‡è®°ã€‚ä¾‹å¦‚ï¼Œ`Callable` æ¥å£ï¼š

```java
@FunctionalInterface
public interface Callable<V> {
    V call() throws Exception;
}
```

å†æ¥çœ‹ `Comparator` æ¥å£ï¼š

```java
@FunctionalInterface
public interface Comparator<T> {

    int compare(T o1, T o2);

    boolean equals(Object obj);

    default Comparator<T> reversed() {
        return Collections.reverseOrder(this);
    }

    default Comparator<T> thenComparing(Comparator<? super T> other) {
        ...
    }
    ...
}
```

è™½ç„¶ `Comparator` æ¥å£æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œä½†åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³• `int compare(T o1, T o2)`ï¼Œå…¶ä»–çš„æ–¹æ³•éƒ½æ˜¯ `default` æ–¹æ³•æˆ– `static` æ–¹æ³•ã€‚å¦å¤–æ³¨æ„åˆ° `boolean equals(Object obj)` æ˜¯ `Object` å®šä¹‰çš„æ–¹æ³•ï¼Œä¸ç®—åœ¨æ¥å£æ–¹æ³•å†…ã€‚å› æ­¤ï¼Œ`Comparator` ä¹Ÿæ˜¯ä¸€ä¸ª `FunctionalInterface`ã€‚

## ğŸ€ ç»ƒä¹ 

ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°å¿½ç•¥å¤§å°å†™æ’åº

## ğŸ€ å°ç»“

å•æ–¹æ³•æ¥å£è¢«ç§°ä¸º `FunctionalInterface`ã€‚

æ¥æ”¶ `FunctionalInterface` ä½œä¸ºå‚æ•°çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠå®ä¾‹åŒ–çš„åŒ¿åç±»æ”¹å†™ä¸º Lambda è¡¨è¾¾å¼ï¼Œèƒ½å¤§å¤§ç®€åŒ–ä»£ç ã€‚


