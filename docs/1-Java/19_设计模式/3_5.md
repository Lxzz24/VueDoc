---
title: ä¸­ä»‹
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---


> ç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ã€‚ä¸­ä»‹è€…ä½¿å„ä¸ªå¯¹è±¡ä¸éœ€è¦æ˜¾å¼åœ°ç›¸äº’å¼•ç”¨ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚

ä¸­ä»‹æ¨¡å¼ï¼ˆMediatorï¼‰åˆç§°è°ƒåœè€…æ¨¡å¼ï¼Œå®ƒçš„ç›®çš„æ˜¯æŠŠå¤šæ–¹ä¼šè°ˆå˜æˆåŒæ–¹ä¼šè°ˆï¼Œä»è€Œå®ç°å¤šæ–¹çš„æ¾è€¦åˆã€‚

æœ‰äº›ç«¥é‹å¬åˆ°ä¸­ä»‹ç«‹åˆ»æƒ³åˆ°æˆ¿äº§ä¸­ä»‹ï¼Œç«‹åˆ»æ°”ä¸æ‰“ä¸€å¤„æ¥ã€‚è¿™ä¸ªä¸­ä»‹æ¨¡å¼ä¸æˆ¿äº§ä¸­ä»‹è¿˜çœŸæœ‰ç‚¹åƒï¼Œæ‰€ä»¥æ¶ˆæ¶ˆæ°”ï¼Œå…ˆçœ‹ä¾‹å­ã€‚

è€ƒè™‘ä¸€ä¸ªç®€å•çš„ç‚¹é¤è¾“å…¥ï¼š

![image-20240104153806571](./assets/image-20240104153806571.png)

è¿™ä¸ªå°ç³»ç»Ÿæœ‰ 4 ä¸ªå‚ä¸å¯¹è±¡ï¼š

- å¤šé€‰æ¡†ï¼›
- â€œé€‰æ‹©å…¨éƒ¨â€ æŒ‰é’®ï¼›
- â€œå–æ¶ˆæ‰€æœ‰â€ æŒ‰é’®ï¼›
- â€œåé€‰â€ æŒ‰é’®ã€‚

å®ƒçš„å¤æ‚æ€§åœ¨äºï¼Œå½“å¤šé€‰æ¡†å˜åŒ–æ—¶ï¼Œå®ƒä¼šå½±å“ â€œé€‰æ‹©å…¨éƒ¨â€ å’Œâ€œå–æ¶ˆæ‰€æœ‰â€æŒ‰é’®çš„çŠ¶æ€ï¼ˆæ˜¯å¦å¯ç‚¹å‡»ï¼‰ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æŸä¸ªæŒ‰é’®æ—¶ï¼Œä¾‹å¦‚ â€œåé€‰â€ï¼Œé™¤äº†ä¼šå½±å“å¤šé€‰æ¡†çš„çŠ¶æ€ï¼Œå®ƒåˆå¯èƒ½å½±å“â€œé€‰æ‹©å…¨éƒ¨â€ å’Œâ€œå–æ¶ˆæ‰€æœ‰â€æŒ‰é’®çš„çŠ¶æ€ã€‚

æ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªå¤šæ–¹ä¼šè°ˆï¼Œé€»è¾‘å†™èµ·æ¥å¾ˆå¤æ‚ï¼š

![image-20231220110514683](./assets/image-20231220110514683.png)

å¦‚æœæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªä¸­ä»‹ï¼ŒæŠŠå¤šæ–¹ä¼šè°ˆå˜æˆå¤šä¸ªåŒæ–¹ä¼šè°ˆï¼Œè™½ç„¶å¤šäº†ä¸€ä¸ªå¯¹è±¡ï¼Œä½†å¯¹è±¡ä¹‹é—´çš„å…³ç³»å°±å˜ç®€å•äº†ï¼š

![image-20231220110530400](./assets/image-20231220110530400.png)

ä¸‹é¢æˆ‘ä»¬ç”¨ä¸­ä»‹æ¨¡å¼æ¥å®ç°å„ä¸ª UI ç»„ä»¶çš„äº¤äº’ã€‚é¦–å…ˆæŠŠ UI ç»„ä»¶ç»™ç”»å‡ºæ¥ï¼š

```java
public class Main {
    public static void main(String[] args) {
        new OrderFrame("Hanburger", "Nugget", "Chip", "Coffee");
    }
}

class OrderFrame extends JFrame {
    public OrderFrame(String... names) {
        setTitle("Order");
        setSize(460, 200);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Container c = getContentPane();
        c.setLayout(new FlowLayout(FlowLayout.LEADING, 20, 20));
        c.add(new JLabel("Use Mediator Pattern"));
        List<JCheckBox> checkboxList = addCheckBox(names);
        JButton selectAll = addButton("Select All");
        JButton selectNone = addButton("Select None");
        selectNone.setEnabled(false);
        JButton selectInverse = addButton("Inverse Select");
        new Mediator(checkBoxList, selectAll, selectNone, selectInverse);
        setVisible(true);
    }

    private List<JCheckBox> addCheckBox(String... names) {
        JPanel panel = new JPanel();
        panel.add(new JLabel("Menu:"));
        List<JCheckBox> list = new ArrayList<>();
        for (String name : names) {
            JCheckBox checkbox = new JCheckBox(name);
            list.add(checkbox);
            panel.add(checkbox);
        }
        getContentPane().add(panel);
        return list;
    }

    private JButton addButton(String label) {
        JButton button = new JButton(label);
        getContentPane().add(button);
        return button;
    }
}
```

ç„¶åï¼Œæˆ‘ä»¬è®¾è®¡ä¸€ä¸ª Mediator ç±»ï¼Œå®ƒå¼•ç”¨ 4 ä¸ª UI ç»„ä»¶ï¼Œå¹¶è´Ÿè´£è·Ÿå®ƒä»¬äº¤äº’ï¼š

```java
public class Mediator {
    // å¼•ç”¨ UI ç»„ä»¶:
    private List<JCheckBox> checkBoxList;
    private JButton selectAll;
    private JButton selectNone;
    private JButton selectInverse;

    public Mediator(List<JCheckBox> checkBoxList, JButton selectAll, JButton selectNone, JButton selectInverse) {
        this.checkBoxList = checkBoxList;
        this.selectAll = selectAll;
        this.selectNone = selectNone;
        this.selectInverse = selectInverse;
        // ç»‘å®šäº‹ä»¶:
        this.checkBoxList.forEach(checkBox -> {
            checkBox.addChangeListener(this::onCheckBoxChanged);
        });
        this.selectAll.addActionListener(this::onSelectAllClicked);
        this.selectNone.addActionListener(this::onSelectNoneClicked);
        this.selectInverse.addActionListener(this::onSelectInverseClicked);
    }

    // å½“ checkbox æœ‰å˜åŒ–æ—¶:
    public void onCheckBoxChanged(ChangeEvent event) {
        boolean allChecked = true;
        boolean allUnchecked = true;
        for (var checkBox : checkBoxList) {
            if (checkBox.isSelected()) {
                allUnchecked = false;
            } else {
                allChecked = false;
            }
        }
        selectAll.setEnabled(!allChecked);
        selectNone.setEnabled(!allUnchecked);
    }

    // å½“ç‚¹å‡» select all:
    public void onSelectAllClicked(ActionEvent event) {
        checkBoxList.forEach(checkBox -> checkBox.setSelected(true));
        selectAll.setEnabled(false);
        selectNone.setEnabled(true);
    }

    // å½“ç‚¹å‡» select none:
    public void onSelectNoneClicked(ActionEvent event) {
        checkBoxList.forEach(checkBox -> checkBox.setSelected(false));
        selectAll.setEnabled(true);
        selectNone.setEnabled(false);
    }

    // å½“ç‚¹å‡» select inverse:
    public void onSelectInverseClicked(ActionEvent event) {
        checkBoxList.forEach(checkBox -> checkBox.setSelected(!checkBox.isSelected()));
        onCheckBoxChanged(null);
    }
}
```

è¿è¡Œä¸€ä¸‹çœ‹çœ‹æ•ˆæœï¼š

![mediator](./assets/l-20231220105234509.png)

ä½¿ç”¨ Mediator æ¨¡å¼åï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä»¥ä¸‹å¥½å¤„ï¼š

- å„ä¸ª UI ç»„ä»¶äº’ä¸å¼•ç”¨ï¼Œè¿™æ ·å°±å‡å°‘äº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼›
- Mediator ç”¨äºå½“ä¸€ä¸ªç»„ä»¶å‘ç”ŸçŠ¶æ€å˜åŒ–æ—¶ï¼Œæ ¹æ®å½“å‰æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€å†³å®šæ›´æ–°æŸäº›ç»„ä»¶ï¼›
- å¦‚æœæ–°å¢ä¸€ä¸ª UI ç»„ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹ Mediator æ›´æ–°çŠ¶æ€çš„é€»è¾‘ï¼Œç°æœ‰çš„å…¶ä»– UI ç»„ä»¶ä»£ç ä¸å˜ã€‚

Mediator æ¨¡å¼ç»å¸¸ç”¨åœ¨æœ‰ä¼—å¤šäº¤äº’ç»„ä»¶çš„ UI ä¸Šã€‚ä¸ºäº†ç®€åŒ– UI ç¨‹åºï¼ŒMVC æ¨¡å¼ä»¥åŠ MVVM æ¨¡å¼éƒ½å¯ä»¥çœ‹ä½œæ˜¯ Mediator æ¨¡å¼çš„æ‰©å±•ã€‚

## ğŸ€ ç»ƒä¹ 

ä½¿ç”¨ Mediator æ¨¡å¼

## ğŸ€ å°ç»“

ä¸­ä»‹æ¨¡å¼æ˜¯é€šè¿‡å¼•å…¥ä¸€ä¸ªä¸­ä»‹å¯¹è±¡ï¼ŒæŠŠå¤šè¾¹å…³ç³»å˜æˆå¤šä¸ªåŒè¾¹å…³ç³»ï¼Œä»è€Œç®€åŒ–ç³»ç»Ÿç»„ä»¶çš„äº¤äº’è€¦åˆåº¦ã€‚





