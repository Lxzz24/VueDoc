---
title: ç­–ç•¥
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---


> å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ç›¸äº’æ›¿æ¢ã€‚æœ¬æ¨¡å¼ä½¿å¾—ç®—æ³•å¯ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·è€Œå˜åŒ–ã€‚

ç­–ç•¥æ¨¡å¼ï¼š`Strategy`ï¼Œæ˜¯æŒ‡ï¼Œå®šä¹‰ä¸€ç»„ç®—æ³•ï¼Œå¹¶æŠŠå…¶å°è£…åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚ç„¶ååœ¨è¿è¡Œæ—¶ï¼Œå¯ä»¥çµæ´»çš„ä½¿ç”¨å…¶ä¸­çš„ä¸€ä¸ªç®—æ³•ã€‚

ç­–ç•¥æ¨¡å¼åœ¨ Java æ ‡å‡†åº“ä¸­åº”ç”¨éå¸¸å¹¿æ³›ï¼Œæˆ‘ä»¬ä»¥æ’åºä¸ºä¾‹ï¼Œçœ‹çœ‹å¦‚ä½•é€šè¿‡ `Arrays.sort()` å®ç°å¿½ç•¥å¤§å°å†™æ’åºï¼š

```java
import java.util.Arrays;

public class Main {
    public static void main(String[] args) throws InterruptedException {
        String[] array = { "apple", "Pear", "Banana", "orange"};
        Arrays.sort(array, String::compareToIgnoreCase);
        System.out.println(Arrays.toString(array));
    }
}
```


å¦‚æœæˆ‘ä»¬æƒ³å¿½ç•¥å¤§å°å†™æ’åºï¼Œå°±ä¼ å…¥ `String::compareToIgnoreCase`ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å€’åºæ’åºï¼Œå°±ä¼ å…¥ `(s1, s2) -> -s1.compareTo(s2)`ï¼Œè¿™ä¸ªæ¯”è¾ƒä¸¤ä¸ªå…ƒç´ å¤§å°çš„ç®—æ³•å°±æ˜¯ç­–ç•¥ã€‚

æˆ‘ä»¬è§‚å¯Ÿ `Arrays.sort(T[] a, Comparator<? super T> c)` è¿™ä¸ªæ’åºæ–¹æ³•ï¼Œå®ƒåœ¨å†…éƒ¨å®ç°äº† TimSort æ’åºï¼Œä½†æ˜¯ï¼Œæ’åºç®—æ³•åœ¨æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ å¤§å°çš„æ—¶å€™ï¼Œéœ€è¦å€ŸåŠ©æˆ‘ä»¬ä¼ å…¥çš„ `Comparator` å¯¹è±¡ï¼Œæ‰èƒ½å®Œæˆæ¯”è¾ƒã€‚å› æ­¤ï¼Œè¿™é‡Œçš„ç­–ç•¥æ˜¯æŒ‡æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ å¤§å°çš„ç­–ç•¥ï¼Œå¯ä»¥æ˜¯å¿½ç•¥å¤§å°å†™æ¯”è¾ƒï¼Œå¯ä»¥æ˜¯å€’åºæ¯”è¾ƒï¼Œä¹Ÿå¯ä»¥æ ¹æ®å­—ç¬¦ä¸²é•¿åº¦æ¯”è¾ƒã€‚

å› æ­¤ï¼Œä¸Šè¿°æ’åºä½¿ç”¨åˆ°äº†ç­–ç•¥æ¨¡å¼ï¼Œå®ƒå®é™…ä¸ŠæŒ‡ï¼Œåœ¨ä¸€ä¸ªæ–¹æ³•ä¸­ï¼Œæµç¨‹æ˜¯ç¡®å®šçš„ï¼Œä½†æ˜¯ï¼ŒæŸäº›å…³é”®æ­¥éª¤çš„ç®—æ³•ä¾èµ–è°ƒç”¨æ–¹ä¼ å…¥çš„ç­–ç•¥ï¼Œè¿™æ ·ï¼Œä¼ å…¥ä¸åŒçš„ç­–ç•¥ï¼Œå³å¯è·å¾—ä¸åŒçš„ç»“æœï¼Œå¤§å¤§å¢å¼ºäº†ç³»ç»Ÿçš„çµæ´»æ€§ã€‚

å¦‚æœæˆ‘ä»¬è‡ªå·±å®ç°ç­–ç•¥æ¨¡å¼çš„æ’åºï¼Œç”¨å†’æ³¡æ³•ç¼–å†™å¦‚ä¸‹ï¼š

```java
import java.util.*;

public class Main {
    public static void main(String[] args) throws InterruptedException {
        String[] array = { "apple", "Pear", "Banana", "orange"};
        sort(array, String::compareToIgnoreCase);
        System.out.println(Arrays.toString(array));
    }

    static <T> void sort(T[] a, Comparator<? super T> c) {
        for (int i = 0; i < a.length - 1; i++) {
            for (int j = 0; j < a.length - 1 - i; j++) {
                if (c.compare(a[j], a[j + 1]) > 0) { // æ³¨æ„è¿™é‡Œæ¯”è¾ƒä¸¤ä¸ªå…ƒç´ çš„å¤§å°ä¾èµ–ä¼ å…¥çš„ç­–ç•¥
                    T temp = a[j];
                    a[j] = a[j + 1];
                    a[j + 1] = temp;
                }
            }
        }
    }
}
```


ä¸€ä¸ªå®Œæ•´çš„ç­–ç•¥æ¨¡å¼è¦å®šä¹‰ç­–ç•¥ä»¥åŠä½¿ç”¨ç­–ç•¥çš„ä¸Šä¸‹æ–‡ã€‚æˆ‘ä»¬ä»¥è´­ç‰©è½¦ç»“ç®—ä¸ºä¾‹ï¼Œå‡è®¾ç½‘ç«™é’ˆå¯¹æ™®é€šä¼šå‘˜ã€Prime ä¼šå‘˜æœ‰ä¸åŒçš„æŠ˜æ‰£ï¼ŒåŒæ—¶æ´»åŠ¨æœŸé—´è¿˜æœ‰ä¸€ä¸ªæ»¡ 100 å‡ 20 çš„æ´»åŠ¨ï¼Œè¿™äº›å°±å¯ä»¥ä½œä¸ºç­–ç•¥å®ç°ã€‚å…ˆå®šä¹‰æ‰“æŠ˜ç­–ç•¥æ¥å£ï¼š

```java
public interface DiscountStrategy {
    // è®¡ç®—æŠ˜æ‰£é¢åº¦:
    BigDecimal getDiscount(BigDecimal total);
}
```

æ¥ä¸‹æ¥ï¼Œå°±æ˜¯å®ç°å„ç§ç­–ç•¥ã€‚æ™®é€šç”¨æˆ·ç­–ç•¥å¦‚ä¸‹ï¼š

```java
public class UserDiscountStrategy implements DiscountStrategy {
    public BigDecimal getDiscount(BigDecimal total) {
        // æ™®é€šä¼šå‘˜æ‰“ä¹æŠ˜:
        return total.multiply(new BigDecimal("0.1")).setScale(2, RoundingMode.DOWN);
    }
}
```

æ»¡å‡ç­–ç•¥å¦‚ä¸‹ï¼š

```java
public class OverDiscountStrategy implements DiscountStrategy {
    public BigDecimal getDiscount(BigDecimal total) {
        // æ»¡ 100 å‡ 20 ä¼˜æƒ :
        return total.compareTo(BigDecimal.valueOf(100)) >= 0 ? BigDecimal.valueOf(20) : BigDecimal.ZERO;
    }
}
```

æœ€åï¼Œè¦åº”ç”¨ç­–ç•¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª `DiscountContext`ï¼š

```java
public class DiscountContext {
    // æŒæœ‰æŸä¸ªç­–ç•¥:
    private DiscountStrategy strategy = new UserDiscountStrategy();

    // å…è®¸å®¢æˆ·ç«¯è®¾ç½®æ–°ç­–ç•¥:
    public void setStrategy(DiscountStrategy strategy) {
        this.strategy = strategy;
    }

    public BigDecimal calculatePrice(BigDecimal total) {
        return total.subtract(this.strategy.getDiscount(total)).setScale(2);
    }
}
```

è°ƒç”¨æ–¹å¿…é¡»é¦–å…ˆåˆ›å»ºä¸€ä¸ª DiscountContextï¼Œå¹¶æŒ‡å®šä¸€ä¸ªç­–ç•¥ï¼ˆæˆ–è€…ä½¿ç”¨é»˜è®¤ç­–ç•¥ï¼‰ï¼Œå³å¯è·å¾—æŠ˜æ‰£åçš„ä»·æ ¼ï¼š

```java
DiscountContext ctx = new DiscountContext();

// é»˜è®¤ä½¿ç”¨æ™®é€šä¼šå‘˜æŠ˜æ‰£:
BigDecimal pay1 = ctx.calculatePrice(BigDecimal.valueOf(105));
System.out.println(pay1);

// ä½¿ç”¨æ»¡å‡æŠ˜æ‰£:
ctx.setStrategy(new OverDiscountStrategy());
BigDecimal pay2 = ctx.calculatePrice(BigDecimal.valueOf(105));
System.out.println(pay2);

// ä½¿ç”¨ Prime ä¼šå‘˜æŠ˜æ‰£:
ctx.setStrategy(new PrimeDiscountStrategy());
BigDecimal pay3 = ctx.calculatePrice(BigDecimal.valueOf(105));
System.out.println(pay3);
```

ä¸Šè¿°å®Œæ•´çš„ç­–ç•¥æ¨¡å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![image-20231220114317094](./assets/image-20231220114317094.png)

ç­–ç•¥æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯åœ¨ä¸€ä¸ªè®¡ç®—æ–¹æ³•ä¸­æŠŠå®¹æ˜“å˜åŒ–çš„ç®—æ³•æŠ½å‡ºæ¥ä½œä¸º â€œç­–ç•¥â€ å‚æ•°ä¼ è¿›å»ï¼Œä»è€Œä½¿å¾—æ–°å¢ç­–ç•¥ä¸å¿…ä¿®æ”¹åŸæœ‰é€»è¾‘ã€‚

## ğŸ€ ç»ƒä¹ 

ä½¿ç”¨ç­–ç•¥æ¨¡å¼æ–°å¢ä¸€ç§ç­–ç•¥ï¼Œå…è®¸åœ¨æ»¡ 100 å‡ 20 çš„åŸºç¡€ä¸Šå¯¹ Prime ä¼šå‘˜å†æ‰“ä¸ƒæŠ˜ã€‚


## ğŸ€ å°ç»“

ç­–ç•¥æ¨¡å¼æ˜¯ä¸ºäº†å…è®¸è°ƒç”¨æ–¹é€‰æ‹©ä¸€ä¸ªç®—æ³•ï¼Œä»è€Œé€šè¿‡ä¸åŒç­–ç•¥å®ç°ä¸åŒçš„è®¡ç®—ç»“æœã€‚

é€šè¿‡æ‰©å±•ç­–ç•¥ï¼Œä¸å¿…ä¿®æ”¹ä¸»é€»è¾‘ï¼Œå³å¯è·å¾—æ–°ç­–ç•¥çš„ç»“æœã€‚







