---
title: å‚æ•°åŒ–æµ‹è¯•
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::

::: tip
å¦‚æœå¾…æµ‹è¯•çš„è¾“å…¥å’Œè¾“å‡ºæ˜¯ä¸€ç»„æ•°æ®ï¼š  
å¯ä»¥æŠŠæµ‹è¯•æ•°æ®ç»„ç»‡èµ·æ¥ï¼Œç”¨ä¸åŒçš„æµ‹è¯•æ•°æ®è°ƒç”¨ç›¸åŒçš„æµ‹è¯•æ–¹æ³•

:::

å‚æ•°åŒ–æµ‹è¯•å’Œæ™®é€šæµ‹è¯•ç¨å¾®ä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œä¸€ä¸ªæµ‹è¯•æ–¹æ³•éœ€è¦æ¥æ”¶è‡³å°‘ä¸€ä¸ªå‚æ•°ï¼Œç„¶åï¼Œä¼ å…¥ä¸€ç»„å‚æ•°åå¤è¿è¡Œã€‚

JUnit æä¾›äº†ä¸€ä¸ª `@ParameterizedTest` æ³¨è§£ï¼Œç”¨æ¥è¿›è¡Œå‚æ•°åŒ–æµ‹è¯•ã€‚

å‡è®¾æˆ‘ä»¬æƒ³å¯¹ `Math.abs()` è¿›è¡Œæµ‹è¯•ï¼Œå…ˆç”¨ä¸€ç»„æ­£æ•°è¿›è¡Œæµ‹è¯•ï¼š

```java
@ParameterizedTest
@ValueSource(ints = { 0, 1, 5, 100})
void testAbs(int x) {
    assertEquals(x, Math.abs(x));
}
```

å†ç”¨ä¸€ç»„è´Ÿæ•°è¿›è¡Œæµ‹è¯•ï¼š

```java
@ParameterizedTest
@ValueSource(ints = { -1, -5, -100})
void testAbsNegative(int x) {
    assertEquals(-x, Math.abs(x));
}
```

æ³¨æ„åˆ°å‚æ•°åŒ–æµ‹è¯•çš„æ³¨è§£æ˜¯ `@ParameterizedTest`ï¼Œè€Œä¸æ˜¯æ™®é€šçš„ `@Test`ã€‚

å®é™…çš„æµ‹è¯•åœºæ™¯å¾€å¾€æ²¡æœ‰è¿™ä¹ˆç®€å•ã€‚å‡è®¾æˆ‘ä»¬è‡ªå·±ç¼–å†™äº†ä¸€ä¸ª `StringUtils.capitalize()` æ–¹æ³•ï¼Œå®ƒä¼šæŠŠå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—æ¯å˜ä¸ºå¤§å†™ï¼Œåç»­å­—æ¯å˜ä¸ºå°å†™ï¼š

```java
public class StringUtils {
    public static String capitalize(String s) {
        if (s.length() == 0) {
            return s;
        }
        return Character.toUpperCase(s.charAt(0)) + s.substring(1).toLowerCase();
    }
}
```

è¦ç”¨å‚æ•°åŒ–æµ‹è¯•çš„æ–¹æ³•æ¥æµ‹è¯•ï¼Œæˆ‘ä»¬ä¸ä½†è¦ç»™å‡ºè¾“å…¥ï¼Œè¿˜è¦ç»™å‡ºé¢„æœŸè¾“å‡ºã€‚å› æ­¤ï¼Œæµ‹è¯•æ–¹æ³•è‡³å°‘éœ€è¦æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š

```java
@ParameterizedTest
void testCapitalize(String input, String result) {
    assertEquals(result, StringUtils.capitalize(input));
}
```

> ç°åœ¨é—®é¢˜æ¥äº†ï¼šå‚æ•°å¦‚ä½•ä¼ å…¥ï¼Ÿ

æœ€ç®€å•çš„æ–¹æ³•æ˜¯é€šè¿‡ `@MethodSource` æ³¨è§£ï¼Œå®ƒå…è®¸æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªåŒåçš„é™æ€æ–¹æ³•æ¥æä¾›æµ‹è¯•å‚æ•°ï¼š

```java
@ParameterizedTest
@MethodSource
void testCapitalize(String input, String result) {
    assertEquals(result, StringUtils.capitalize(input));
}

static List<Arguments> testCapitalize() {
    return List.of( // arguments:
            Arguments.of("abc", "Abc"), //
            Arguments.of("APPLE", "Apple"), //
            Arguments.of("gooD", "Good"));
}
```

ä¸Šé¢çš„ä»£ç å¾ˆå®¹æ˜“ç†è§£ï¼šé™æ€æ–¹æ³• `testCapitalize()` è¿”å›äº†ä¸€ç»„æµ‹è¯•å‚æ•°ï¼Œæ¯ä¸ªå‚æ•°éƒ½åŒ…å«ä¸¤ä¸ª Stringï¼Œæ­£å¥½ä½œä¸ºæµ‹è¯•æ–¹æ³•çš„ä¸¤ä¸ªå‚æ•°ä¼ å…¥ã€‚

::: tip
å¦‚æœé™æ€æ–¹æ³•å’Œæµ‹è¯•æ–¹æ³•çš„åç§°ä¸åŒï¼Œ`@MethodSource` ä¹Ÿå…è®¸æŒ‡å®šæ–¹æ³•åã€‚ä½†ä½¿ç”¨é»˜è®¤åŒåæ–¹æ³•æœ€æ–¹ä¾¿ã€‚

:::

å¦ä¸€ç§ä¼ å…¥æµ‹è¯•å‚æ•°çš„æ–¹æ³•æ˜¯ä½¿ç”¨ `@CsvSource`ï¼Œå®ƒçš„æ¯ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºä¸€è¡Œï¼Œä¸€è¡ŒåŒ…å«çš„è‹¥å¹²å‚æ•°ç”¨, åˆ†éš”ï¼Œå› æ­¤ï¼Œä¸Šè¿°æµ‹è¯•åˆå¯ä»¥æ”¹å†™å¦‚ä¸‹ï¼š

```java
@ParameterizedTest
@CsvSource({"abc, Abc", "APPLE, Apple", "gooD, Good"})
void testCapitalize(String input, String result) {
    assertEquals(result, StringUtils.capitalize(input));
}
```

å¦‚æœæœ‰æˆç™¾ä¸Šåƒçš„æµ‹è¯•è¾“å…¥ï¼Œé‚£ä¹ˆï¼Œç›´æ¥å†™ `@CsvSource` å°±å¾ˆä¸æ–¹ä¾¿ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæµ‹è¯•æ•°æ®æåˆ°ä¸€ä¸ªç‹¬ç«‹çš„ CSV æ–‡ä»¶ä¸­ï¼Œç„¶åæ ‡æ³¨ä¸Š `@CsvFileSource`ï¼š

```java
@ParameterizedTest
@CsvFileSource(resources = { "/test-capitalize.csv"})
void testCapitalizeUsingCsvFile(String input, String result) {
    assertEquals(result, StringUtils.capitalize(input));
}
```

JUnit åªåœ¨ classpath ä¸­æŸ¥æ‰¾æŒ‡å®šçš„ CSV æ–‡ä»¶ï¼Œå› æ­¤ï¼Œ`test-capitalize.csv` è¿™ä¸ªæ–‡ä»¶è¦æ”¾åˆ° test ç›®å½•ä¸‹ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```
apple, Apple
HELLO, Hello
JUnit, Junit
reSource, Resource
```


## ğŸ€ å°ç»“

- ä½¿ç”¨å‚æ•°åŒ–æµ‹è¯•ï¼Œå¯ä»¥æä¾›ä¸€ç»„æµ‹è¯•æ•°æ®ï¼Œå¯¹ä¸€ä¸ªæµ‹è¯•æ–¹æ³•åå¤æµ‹è¯•ã€‚

- å‚æ•°æ—¢å¯ä»¥åœ¨æµ‹è¯•ä»£ç ä¸­å†™æ­»ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ `@CsvFileSource` æ”¾åˆ°å¤–éƒ¨çš„ CSV æ–‡ä»¶ä¸­ã€‚
