---
title: æ¡ä»¶æµ‹è¯•
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::


åœ¨è¿è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œæœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ’å‡ºæŸäº› @Test æ–¹æ³•ï¼Œä¸è¦è®©å®ƒè¿è¡Œï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»™å®ƒæ ‡è®°ä¸€ä¸ª @Disabledï¼š

```java
@Disabled
@Test
void testBug101() {
    // è¿™ä¸ªæµ‹è¯•ä¸ä¼šè¿è¡Œ
}
```

ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ç›´æ¥æ³¨é‡Šæ‰ @Testï¼Œè€Œæ˜¯è¦åŠ ä¸€ä¸ª @Disabledï¼Ÿè¿™æ˜¯å› ä¸ºæ³¨é‡Šæ‰ @Testï¼ŒJUnit å°±ä¸çŸ¥é“è¿™æ˜¯ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œè€ŒåŠ ä¸Š @Disabledï¼ŒJUnit ä»ç„¶è¯†åˆ«å‡ºè¿™æ˜¯ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œåªæ˜¯æš‚æ—¶ä¸è¿è¡Œã€‚å®ƒä¼šåœ¨æµ‹è¯•ç»“æœä¸­æ˜¾ç¤ºï¼š

```
Tests run: 68, Failures: 2, Errors: 0, Skipped: 5
```

ç±»ä¼¼ @Disabled è¿™ç§æ³¨è§£å°±ç§°ä¸ºæ¡ä»¶æµ‹è¯•ï¼ŒJUnit æ ¹æ®ä¸åŒçš„æ¡ä»¶æ³¨è§£ï¼Œå†³å®šæ˜¯å¦è¿è¡Œå½“å‰çš„ @Test æ–¹æ³•ã€‚

æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š

```java
public class Config {
    public String getConfigFile(String filename) {
        String os = System.getProperty("os.name").toLowerCase();
        if (os.contains("win")) {
            return "C:\\" + filename;
        }
        if (os.contains("mac") || os.contains("linux") || os.contains("unix")) {
            return "/usr/local/" + filename;
        }
        throw new UnsupportedOperationException();
    }
}
```

æˆ‘ä»¬æƒ³è¦æµ‹è¯• getConfigFile() è¿™ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯åœ¨ Windows ä¸Šè·‘ï¼Œå’Œåœ¨ Linux ä¸Šè·‘çš„ä»£ç è·¯å¾„ä¸åŒï¼Œå› æ­¤ï¼Œé’ˆå¯¹ä¸¤ä¸ªç³»ç»Ÿçš„æµ‹è¯•æ–¹æ³•ï¼Œå…¶ä¸­ä¸€ä¸ªåªèƒ½åœ¨ Windows ä¸Šè·‘ï¼Œå¦ä¸€ä¸ªåªèƒ½åœ¨ Mac/Linux ä¸Šè·‘ï¼š

```java
@Test
void testWindows() {
    assertEquals("C:\\test.ini", config.getConfigFile("test.ini"));
}

@Test
void testLinuxAndMac() {
    assertEquals("/usr/local/test.cfg", config.getConfigFile("test.cfg"));
}
```

å› æ­¤ï¼Œæˆ‘ä»¬ç»™ä¸Šè¿°ä¸¤ä¸ªæµ‹è¯•æ–¹æ³•åˆ†åˆ«åŠ ä¸Šæ¡ä»¶å¦‚ä¸‹ï¼š

```java
@Test
@EnabledOnOs(OS.WINDOWS)
void testWindows() {
    assertEquals("C:\\test.ini", config.getConfigFile("test.ini"));
}

@Test
@EnabledOnOs({OS.LINUX, OS.MAC})
void testLinuxAndMac() {
    assertEquals("/usr/local/test.cfg", config.getConfigFile("test.cfg"));
}
```

@EnableOnOs å°±æ˜¯ä¸€ä¸ªæ¡ä»¶æµ‹è¯•åˆ¤æ–­ã€‚

æˆ‘ä»¬æ¥çœ‹ä¸€äº›å¸¸ç”¨çš„æ¡ä»¶æµ‹è¯•ï¼š

ä¸åœ¨ Windows å¹³å°æ‰§è¡Œçš„æµ‹è¯•ï¼Œå¯ä»¥åŠ ä¸Š @DisabledOnOs(OS.WINDOWS)ï¼š

```java
@Test
@DisabledOnOs(OS.WINDOWS)
void testOnNonWindowsOs() {
    // TODO: this test is disabled on windows
}
```

åªèƒ½åœ¨ Java 9 æˆ–æ›´é«˜ç‰ˆæœ¬æ‰§è¡Œçš„æµ‹è¯•ï¼Œå¯ä»¥åŠ ä¸Š @DisabledOnJre(JRE.JAVA_8)ï¼š

```java
@Test
@DisabledOnJre(JRE.JAVA_8)
void testOnJava9OrAbove() {
    // TODO: this test is disabled on java 8
}
```

åªèƒ½åœ¨ 64 ä½æ“ä½œç³»ç»Ÿä¸Šæ‰§è¡Œçš„æµ‹è¯•ï¼Œå¯ä»¥ç”¨ @EnabledIfSystemProperty åˆ¤æ–­ï¼š

```java
@Test
@EnabledIfSystemProperty(named = "os.arch", matches = ".*64.*")
void testOnlyOn64bitSystem() {
    // TODO: this test is only run on 64 bit system
}
```


éœ€è¦ä¼ å…¥ç¯å¢ƒå˜é‡ DEBUG=true æ‰èƒ½æ‰§è¡Œçš„æµ‹è¯•ï¼Œå¯ä»¥ç”¨ @EnabledIfEnvironmentVariableï¼š

```java
@Test
@EnabledIfEnvironmentVariable(named = "DEBUG", matches = "true")
void testOnlyOnDebugMode() {
    // TODO: this test is only run on DEBUG=true
}
```


å½“æˆ‘ä»¬åœ¨ JUnit ä¸­è¿è¡Œæ‰€æœ‰æµ‹è¯•çš„æ—¶å€™ï¼ŒJUnit ä¼šç»™å‡ºæ‰§è¡Œçš„ç»“æœã€‚åœ¨ IDE ä¸­ï¼Œæˆ‘ä»¬èƒ½å¾ˆå®¹æ˜“åœ°çœ‹åˆ°æ²¡æœ‰æ‰§è¡Œçš„æµ‹è¯•ï¼š

![20221124101545](assets/20221124101545.png)

å¸¦æœ‰ âŠ˜ æ ‡è®°çš„æµ‹è¯•æ–¹æ³•è¡¨ç¤ºæ²¡æœ‰æ‰§è¡Œã€‚


## ğŸ€ ç»ƒä¹ 

## ğŸ€ å°ç»“

æ¡ä»¶æµ‹è¯•æ˜¯æ ¹æ®æŸäº›æ³¨è§£åœ¨è¿è¡ŒæœŸè®© JUnit è‡ªåŠ¨å¿½ç•¥æŸäº›æµ‹è¯•ã€‚

