---
title: JDBC æŸ¥è¯¢
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::

å‰é¢æˆ‘ä»¬è®²äº† Java ç¨‹åºè¦é€šè¿‡ JDBC æ¥å£æ¥æŸ¥è¯¢æ•°æ®åº“ã€‚JDBC æ˜¯ä¸€å¥—æ¥å£è§„èŒƒï¼Œå®ƒåœ¨å“ªå‘¢ï¼Ÿå°±åœ¨ Java çš„æ ‡å‡†åº“ `java.sql` é‡Œæ”¾ç€ï¼Œä¸è¿‡è¿™é‡Œé¢å¤§éƒ¨åˆ†éƒ½æ˜¯æ¥å£ã€‚æ¥å£å¹¶ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œè€Œæ˜¯å¿…é¡»å®ä¾‹åŒ–å¯¹åº”çš„å®ç°ç±»ï¼Œç„¶åé€šè¿‡æ¥å£å¼•ç”¨è¿™ä¸ªå®ä¾‹ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šJDBC æ¥å£çš„å®ç°ç±»åœ¨å“ªï¼Ÿ

å› ä¸º JDBC æ¥å£å¹¶ä¸çŸ¥é“æˆ‘ä»¬è¦ä½¿ç”¨å“ªä¸ªæ•°æ®åº“ï¼Œæ‰€ä»¥ï¼Œç”¨å“ªä¸ªæ•°æ®åº“ï¼Œæˆ‘ä»¬å°±å»ä½¿ç”¨å“ªä¸ªæ•°æ®åº“çš„ â€œå®ç°ç±»â€ï¼Œæˆ‘ä»¬æŠŠæŸä¸ªæ•°æ®åº“å®ç°äº† JDBC æ¥å£çš„ jar åŒ…ç§°ä¸º JDBC é©±åŠ¨ã€‚

å› ä¸ºæˆ‘ä»¬é€‰æ‹©äº† MySQL 5.x ä½œä¸ºæ•°æ®åº“ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆå¾—æ‰¾ä¸€ä¸ª MySQL çš„ JDBC é©±åŠ¨ã€‚æ‰€è°“ JDBC é©±åŠ¨ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹ jar åŒ…ï¼Œæˆ‘ä»¬ç›´æ¥æ·»åŠ ä¸€ä¸ª Maven ä¾èµ–å°±å¯ä»¥äº†ï¼š

```xml
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.47</version>
    <scope>runtime</scope>
</dependency>
```

æ³¨æ„åˆ°è¿™é‡Œæ·»åŠ ä¾èµ–çš„ `scope` æ˜¯ `runtime`ï¼Œå› ä¸ºç¼–è¯‘ Java ç¨‹åºå¹¶ä¸éœ€è¦ MySQL çš„è¿™ä¸ª jar åŒ…ï¼Œåªæœ‰åœ¨è¿è¡ŒæœŸæ‰éœ€è¦ä½¿ç”¨ã€‚å¦‚æœæŠŠ `runtime` æ”¹æˆ `compile`ï¼Œè™½ç„¶ä¹Ÿèƒ½æ­£å¸¸ç¼–è¯‘ï¼Œä½†æ˜¯åœ¨ IDE é‡Œå†™ç¨‹åºçš„æ—¶å€™ï¼Œä¼šå¤šå‡ºæ¥ä¸€å¤§å †ç±»ä¼¼ `com.mysql.jdbc.Connection` è¿™æ ·çš„ç±»ï¼Œéå¸¸å®¹æ˜“ä¸ Java æ ‡å‡†åº“çš„ JDBC æ¥å£æ··æ·†ï¼Œæ‰€ä»¥åšå†³ä¸è¦è®¾ç½®ä¸º `compile`ã€‚

æœ‰äº†é©±åŠ¨ï¼Œæˆ‘ä»¬è¿˜è¦ç¡®ä¿ MySQL åœ¨æœ¬æœºæ­£å¸¸è¿è¡Œï¼Œå¹¶ä¸”è¿˜éœ€è¦å‡†å¤‡ä¸€ç‚¹æ•°æ®ã€‚è¿™é‡Œæˆ‘ä»¬ç”¨ä¸€ä¸ªè„šæœ¬åˆ›å»ºæ•°æ®åº“å’Œè¡¨ï¼Œç„¶åæ’å…¥ä¸€äº›æ•°æ®ï¼š

```sql
-- åˆ›å»ºæ•°æ®åº“ learjdbc:
DROP DATABASE IF EXISTS learnjdbc;
CREATE DATABASE learnjdbc;

-- åˆ›å»ºç™»å½•ç”¨æˆ· learn / å£ä»¤ learnpassword
CREATE USER IF NOT EXISTS learn@'%' IDENTIFIED BY 'learnpassword';
GRANT ALL PRIVILEGES ON learnjdbc.* TO learn@'%' WITH GRANT OPTION;
FLUSH PRIVILEGES;

-- åˆ›å»ºè¡¨ students:
USE learnjdbc;
CREATE TABLE students (
  id BIGINT AUTO_INCREMENT NOT NULL,
  name VARCHAR(50) NOT NULL,
  gender TINYINT(1) NOT NULL,
  grade INT NOT NULL,
  score INT NOT NULL,
  PRIMARY KEY(id)
) Engine=INNODB DEFAULT CHARSET=UTF8;

-- æ’å…¥åˆå§‹æ•°æ®:
INSERT INTO students (name, gender, grade, score) VALUES ('å°æ˜', 1, 1, 88);
INSERT INTO students (name, gender, grade, score) VALUES ('å°çº¢', 1, 1, 95);
INSERT INTO students (name, gender, grade, score) VALUES ('å°å†›', 0, 1, 93);
INSERT INTO students (name, gender, grade, score) VALUES ('å°ç™½', 0, 1, 100);
INSERT INTO students (name, gender, grade, score) VALUES ('å°ç‰›', 1, 2, 96);
INSERT INTO students (name, gender, grade, score) VALUES ('å°å…µ', 1, 2, 99);
INSERT INTO students (name, gender, grade, score) VALUES ('å°å¼º', 0, 2, 86);
INSERT INTO students (name, gender, grade, score) VALUES ('å°ä¹”', 0, 2, 79);
INSERT INTO students (name, gender, grade, score) VALUES ('å°é’', 1, 3, 85);
INSERT INTO students (name, gender, grade, score) VALUES ('å°ç‹', 1, 3, 90);
INSERT INTO students (name, gender, grade, score) VALUES ('å°æ—', 0, 3, 91);
INSERT INTO students (name, gender, grade, score) VALUES ('å°è´', 0, 3, 77);
```

åœ¨æ§åˆ¶å°è¾“å…¥ `mysql -u root -p`ï¼Œè¾“å…¥ `root` å£ä»¤åä»¥ `root` èº«ä»½ï¼ŒæŠŠä¸Šè¿° SQL è´´åˆ°æ§åˆ¶å°æ‰§è¡Œä¸€éå°±è¡Œã€‚å¦‚æœä½ è¿è¡Œçš„æ˜¯æœ€æ–°ç‰ˆ MySQL 8.xï¼Œéœ€è¦è°ƒæ•´ä¸€ä¸‹ `CREATE USER` è¯­å¥ã€‚

## ğŸ€ JDBC è¿æ¥

ä½¿ç”¨ JDBC æ—¶ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä»€ä¹ˆæ˜¯ Connectionã€‚Connection ä»£è¡¨ä¸€ä¸ª JDBC è¿æ¥ï¼Œå®ƒç›¸å½“äº Java ç¨‹åºåˆ°æ•°æ®åº“çš„è¿æ¥ï¼ˆé€šå¸¸æ˜¯ TCP è¿æ¥ï¼‰ã€‚æ‰“å¼€ä¸€ä¸ª Connection æ—¶ï¼Œéœ€è¦å‡†å¤‡ URLã€ç”¨æˆ·åå’Œå£ä»¤ï¼Œæ‰èƒ½æˆåŠŸè¿æ¥åˆ°æ•°æ®åº“ã€‚

URL æ˜¯ç”±æ•°æ®åº“å‚å•†æŒ‡å®šçš„æ ¼å¼ï¼Œä¾‹å¦‚ï¼ŒMySQL çš„ URL æ˜¯ï¼š

```
jdbc:mysql://<hostname>:<port>/<db>?key1=value1&key2=value2
```

å‡è®¾æ•°æ®åº“è¿è¡Œåœ¨æœ¬æœº `localhost`ï¼Œç«¯å£ä½¿ç”¨æ ‡å‡†çš„ `3306`ï¼Œæ•°æ®åº“åç§°æ˜¯ `learnjdbc`ï¼Œé‚£ä¹ˆ URL å¦‚ä¸‹ï¼š

```
jdbc:mysql://localhost:3306/learnjdbc?useSSL=false&characterEncoding=utf8
```

åé¢çš„ä¸¤ä¸ªå‚æ•°è¡¨ç¤ºä¸ä½¿ç”¨ SSL åŠ å¯†ï¼Œä½¿ç”¨ UTF-8 ä½œä¸ºå­—ç¬¦ç¼–ç ï¼ˆæ³¨æ„ MySQL çš„ UTF-8 æ˜¯ `utf8`ï¼‰ã€‚

è¦è·å–æ•°æ®åº“è¿æ¥ï¼Œä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š

```java
// JDBC è¿æ¥çš„ URL, ä¸åŒæ•°æ®åº“æœ‰ä¸åŒçš„æ ¼å¼:
String JDBC_URL = "jdbc:mysql://localhost:3306/learnjdbc";
String JDBC_USER = "root";
String JDBC_PASSWORD = "password";
// è·å–è¿æ¥:
Connection conn = DriverManager.getConnection(JDBC_URL, JDBC_USER, JDBC_PASSWORD);
// TODO: è®¿é—®æ•°æ®åº“...
// å…³é—­è¿æ¥:
conn.close();
```

æ ¸å¿ƒä»£ç æ˜¯ `DriverManager` æä¾›çš„é™æ€æ–¹æ³• `getConnection()`ã€‚`DriverManager` ä¼šè‡ªåŠ¨æ‰«æ classpathï¼Œæ‰¾åˆ°æ‰€æœ‰çš„ JDBC é©±åŠ¨ï¼Œç„¶åæ ¹æ®æˆ‘ä»¬ä¼ å…¥çš„ URL è‡ªåŠ¨æŒ‘é€‰ä¸€ä¸ªåˆé€‚çš„é©±åŠ¨ã€‚

å› ä¸º JDBC è¿æ¥æ˜¯ä¸€ç§æ˜‚è´µçš„èµ„æºï¼Œæ‰€ä»¥ä½¿ç”¨åè¦åŠæ—¶é‡Šæ”¾ã€‚ä½¿ç”¨ `try (resource)` æ¥è‡ªåŠ¨é‡Šæ”¾ JDBC è¿æ¥æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ï¼š

```java
try (Connection conn = DriverManager.getConnection(JDBC_URL, JDBC_USER, JDBC_PASSWORD)) {
    ...
}
```

## ğŸ€ JDBC æŸ¥è¯¢

è·å–åˆ° JDBC è¿æ¥åï¼Œä¸‹ä¸€æ­¥æˆ‘ä»¬å°±å¯ä»¥æŸ¥è¯¢æ•°æ®åº“äº†ã€‚æŸ¥è¯¢æ•°æ®åº“åˆ†ä»¥ä¸‹å‡ æ­¥ï¼š

ç¬¬ä¸€æ­¥ï¼Œé€šè¿‡ `Connection` æä¾›çš„ `createStatement()` æ–¹æ³•åˆ›å»ºä¸€ä¸ª `Statement` å¯¹è±¡ï¼Œç”¨äºæ‰§è¡Œä¸€ä¸ªæŸ¥è¯¢ï¼›

ç¬¬äºŒæ­¥ï¼Œæ‰§è¡Œ `Statement` å¯¹è±¡æä¾›çš„ `executeQuery("SELECT * FROM students")` å¹¶ä¼ å…¥ SQL è¯­å¥ï¼Œæ‰§è¡ŒæŸ¥è¯¢å¹¶è·å¾—è¿”å›çš„ç»“æœé›†ï¼Œä½¿ç”¨ `ResultSet` æ¥å¼•ç”¨è¿™ä¸ªç»“æœé›†ï¼›

ç¬¬ä¸‰æ­¥ï¼Œåå¤è°ƒç”¨ `ResultSet` çš„ `next()` æ–¹æ³•å¹¶è¯»å–æ¯ä¸€è¡Œç»“æœã€‚

å®Œæ•´æŸ¥è¯¢ä»£ç å¦‚ä¸‹ï¼š

```java
try (Connection conn = DriverManager.getConnection(JDBC_URL, JDBC_USER, JDBC_PASSWORD)) {
    try (Statement stmt = conn.createStatement()) {
        try (ResultSet rs = stmt.executeQuery("SELECT id, grade, name, gender FROM students WHERE gender=1")) {
            while (rs.next()) {
                long id = rs.getLong(1); // æ³¨æ„ï¼šç´¢å¼•ä» 1 å¼€å§‹
                long grade = rs.getLong(2);
                String name = rs.getString(3);
                int gender = rs.getInt(4);
            }
        }
    }
}
```

æ³¨æ„è¦ç‚¹ï¼š

- `Statement` å’Œ `ResultSet` éƒ½æ˜¯éœ€è¦å…³é—­çš„èµ„æºï¼Œå› æ­¤åµŒå¥—ä½¿ç”¨ `try (resource)` ç¡®ä¿åŠæ—¶å…³é—­ï¼›

- `rs.next()` ç”¨äºåˆ¤æ–­æ˜¯å¦æœ‰ä¸‹ä¸€è¡Œè®°å½•ï¼Œå¦‚æœæœ‰ï¼Œå°†è‡ªåŠ¨æŠŠå½“å‰è¡Œç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œï¼ˆä¸€å¼€å§‹è·å¾— `ResultSet` æ—¶å½“å‰è¡Œä¸æ˜¯ç¬¬ä¸€è¡Œï¼‰ï¼›

- `ResultSet` è·å–åˆ—æ—¶ï¼Œç´¢å¼•ä» `1` å¼€å§‹è€Œä¸æ˜¯ `0`ï¼›

- å¿…é¡»æ ¹æ® `SELECT` çš„åˆ—çš„å¯¹åº”ä½ç½®æ¥è°ƒç”¨ `getLong(1)`ï¼Œ`getString(2)` è¿™äº›æ–¹æ³•ï¼Œå¦åˆ™å¯¹åº”ä½ç½®çš„æ•°æ®ç±»å‹ä¸å¯¹ï¼Œå°†æŠ¥é”™ã€‚

## ğŸ€ SQL æ³¨å…¥

ä½¿ç”¨ `Statement` æ‹¼å­—ç¬¦ä¸²éå¸¸å®¹æ˜“å¼•å‘ SQL æ³¨å…¥çš„é—®é¢˜ï¼Œè¿™æ˜¯å› ä¸º SQL å‚æ•°å¾€å¾€æ˜¯ä»æ–¹æ³•å‚æ•°ä¼ å…¥çš„ã€‚

æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼šå‡è®¾ç”¨æˆ·ç™»å½•çš„éªŒè¯æ–¹æ³•å¦‚ä¸‹ï¼š

```java
User login(String name, String pass) {
    ...
    stmt.executeQuery("SELECT * FROM user WHERE login='" + name + "'AND pass='" + pass + "'");
    ...
}
```

å…¶ä¸­ï¼Œå‚æ•° `name` å’Œ `pass` é€šå¸¸éƒ½æ˜¯ Web é¡µé¢è¾“å…¥åç”±ç¨‹åºæ¥æ”¶åˆ°çš„ã€‚

å¦‚æœç”¨æˆ·çš„è¾“å…¥æ˜¯ç¨‹åºæœŸå¾…çš„å€¼ï¼Œå°±å¯ä»¥æ‹¼å‡ºæ­£ç¡®çš„ SQLã€‚ä¾‹å¦‚ï¼šname = `"bob"`ï¼Œpass = `"1234"`ï¼š

```sql
SELECT * FROM user WHERE login='bob' AND pass='1234'
```

ä½†æ˜¯ï¼Œå¦‚æœç”¨æˆ·çš„è¾“å…¥æ˜¯ä¸€ä¸ªç²¾å¿ƒæ„é€ çš„å­—ç¬¦ä¸²ï¼Œå°±å¯ä»¥æ‹¼å‡ºæ„æƒ³ä¸åˆ°çš„ SQLï¼Œè¿™ä¸ª SQL ä¹Ÿæ˜¯æ­£ç¡®çš„ï¼Œä½†å®ƒæŸ¥è¯¢çš„æ¡ä»¶ä¸æ˜¯ç¨‹åºè®¾è®¡çš„æ„å›¾ã€‚ä¾‹å¦‚ï¼šname = `"bob' OR pass="`, pass = `" OR pass='"`ï¼š

```sql
SELECT * FROM user WHERE login='bob' OR pass='AND pass=' OR pass=''
```

è¿™ä¸ª SQL è¯­å¥æ‰§è¡Œçš„æ—¶å€™ï¼Œæ ¹æœ¬ä¸ç”¨åˆ¤æ–­å£ä»¤æ˜¯å¦æ­£ç¡®ï¼Œè¿™æ ·ä¸€æ¥ï¼Œç™»å½•å°±å½¢åŒè™šè®¾ã€‚

è¦é¿å… SQL æ³¨å…¥æ”»å‡»ï¼Œä¸€ä¸ªåŠæ³•æ˜¯é’ˆå¯¹æ‰€æœ‰å­—ç¬¦ä¸²å‚æ•°è¿›è¡Œè½¬ä¹‰ï¼Œä½†æ˜¯è½¬ä¹‰å¾ˆéº»çƒ¦ï¼Œè€Œä¸”éœ€è¦åœ¨ä»»ä½•ä½¿ç”¨ SQL çš„åœ°æ–¹å¢åŠ è½¬ä¹‰ä»£ç ã€‚

è¿˜æœ‰ä¸€ä¸ªåŠæ³•å°±æ˜¯ä½¿ç”¨ `PreparedStatement`ã€‚ä½¿ç”¨ `PreparedStatement` å¯ä»¥ _å®Œå…¨é¿å… SQL æ³¨å…¥_ çš„é—®é¢˜ï¼Œå› ä¸º `PreparedStatement` å§‹ç»ˆä½¿ç”¨ `?` ä½œä¸ºå ä½ç¬¦ï¼Œå¹¶ä¸”æŠŠæ•°æ®è¿åŒ SQL æœ¬èº«ä¼ ç»™æ•°æ®åº“ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æ¯æ¬¡ä¼ ç»™æ•°æ®åº“çš„ SQL è¯­å¥æ˜¯ç›¸åŒçš„ï¼Œåªæ˜¯å ä½ç¬¦çš„æ•°æ®ä¸åŒï¼Œè¿˜èƒ½é«˜æ•ˆåˆ©ç”¨æ•°æ®åº“æœ¬èº«å¯¹æŸ¥è¯¢çš„ç¼“å­˜ã€‚ä¸Šè¿°ç™»å½• SQL å¦‚æœç”¨ `PreparedStatement` å¯ä»¥æ”¹å†™å¦‚ä¸‹ï¼š

```java
User login(String name, String pass) {
    ...
    String sql = "SELECT * FROM user WHERE login=? AND pass=?";
    PreparedStatement ps = conn.prepareStatement(sql);
    ps.setObject(1, name);
    ps.setObject(2, pass);
    ...
}
```

æ‰€ä»¥ï¼Œ`PreparedStatement` æ¯” `Statement` æ›´å®‰å…¨ï¼Œè€Œä¸”æ›´å¿«ã€‚

::: warning
ä½¿ç”¨ Java å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œæ—¶ï¼Œå¿…é¡»ä½¿ç”¨ PreparedStatementï¼Œä¸¥ç¦ä»»ä½•é€šè¿‡å‚æ•°æ‹¼å­—ç¬¦ä¸²çš„ä»£ç ï¼

:::

æˆ‘ä»¬æŠŠä¸Šé¢ä½¿ç”¨ `Statement` çš„ä»£ç æ”¹ä¸ºä½¿ç”¨ `PreparedStatement`ï¼š

```java
try (Connection conn = DriverManager.getConnection(JDBC_URL, JDBC_USER, JDBC_PASSWORD)) {
    try (PreparedStatement ps = conn.prepareStatement("SELECT id, grade, name, gender FROM students WHERE gender=? AND grade=?")) {
        ps.setObject(1, "M"); // æ³¨æ„ï¼šç´¢å¼•ä» 1 å¼€å§‹
        ps.setObject(2, 3);
        try (ResultSet rs = ps.executeQuery()) {
            while (rs.next()) {
                long id = rs.getLong("id");
                long grade = rs.getLong("grade");
                String name = rs.getString("name");
                String gender = rs.getString("gender");
            }
        }
    }
}
```

ä½¿ç”¨ `PreparedStatement` å’Œ `Statement` ç¨æœ‰ä¸åŒï¼Œå¿…é¡»é¦–å…ˆè°ƒç”¨ `setObject()` è®¾ç½®æ¯ä¸ªå ä½ç¬¦ `?` çš„å€¼ï¼Œæœ€åè·å–çš„ä»ç„¶æ˜¯ `ResultSet` å¯¹è±¡ã€‚

å¦å¤–æ³¨æ„åˆ°ä»ç»“æœé›†è¯»å–åˆ—æ—¶ï¼Œ_ä½¿ç”¨ `String` ç±»å‹çš„åˆ—åæ¯”ç´¢å¼•è¦æ˜“è¯»ï¼Œè€Œä¸”ä¸æ˜“å‡ºé”™_ã€‚

æ³¨æ„åˆ° JDBC æŸ¥è¯¢çš„è¿”å›å€¼æ€»æ˜¯ `ResultSet`ï¼Œå³ä½¿æˆ‘ä»¬å†™è¿™æ ·çš„èšåˆæŸ¥è¯¢ `SELECT SUM(score) FROM ...`ï¼Œä¹Ÿéœ€è¦æŒ‰ç»“æœé›†è¯»å–ï¼š

```java
ResultSet rs = ...
if (rs.next()) {
    double sum = rs.getDouble(1);
}
```

## ğŸ€ æ•°æ®ç±»å‹

æœ‰çš„ç«¥é‹å¯èƒ½æ³¨æ„åˆ°äº†ï¼Œä½¿ç”¨ JDBC çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Java æ•°æ®ç±»å‹å’Œ SQL æ•°æ®ç±»å‹ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚JDBC åœ¨ `java.sql.Types` å®šä¹‰äº†ä¸€ç»„å¸¸é‡æ¥è¡¨ç¤ºå¦‚ä½•æ˜ å°„ SQL æ•°æ®ç±»å‹ï¼Œä½†æ˜¯å¹³æ—¶æˆ‘ä»¬ä½¿ç”¨çš„ç±»å‹é€šå¸¸ä¹Ÿå°±ä»¥ä¸‹å‡ ç§ï¼š

| SQL æ•°æ®ç±»å‹  | Java æ•°æ®ç±»å‹            |
| :------------ | :----------------------- |
| BIT, BOOL     | boolean                  |
| INTEGER       | int                      |
| BIGINT        | long                     |
| REAL          | float                    |
| FLOAT, DOUBLE | double                   |
| CHAR, VARCHAR | String                   |
| DECIMAL       | BigDecimal               |
| DATE          | java.sql.Date, LocalDate |
| TIME          | java.sql.Time, LocalTime |

> æ³¨æ„ï¼šåªæœ‰æœ€æ–°çš„ JDBC é©±åŠ¨æ‰æ”¯æŒ `LocalDate` å’Œ `LocalTime`ã€‚

## ğŸ€ ç»ƒä¹ 

ä½¿ç”¨ JDBC æŸ¥è¯¢æ•°æ®åº“

```java
public class Main {
    public static void main(String[] args) throws Exception {
        // JDBC è¿æ¥çš„ URL, ä¸åŒæ•°æ®åº“æœ‰ä¸åŒçš„æ ¼å¼:
        String JDBC_URL = "jdbc:mysql://localhost:3306/learnjdbc";
        String JDBC_USER = "root";
        String JDBC_PASSWORD = "*******";

        // åµŒå¥—ä½¿ç”¨ `try (resource)` ç¡®ä¿åŠæ—¶å…³é—­
        try (Connection conn = DriverManager.getConnection(JDBC_URL, JDBC_USER, JDBC_PASSWORD)) {
            try(PreparedStatement ps = conn.prepareStatement("SELECT id, grade, name, gender, score FROM students WHERE gender=? AND grade=?")) {
                ps.setObject(1, "M"); // æ³¨æ„ï¼šç´¢å¼•ä»1å¼€å§‹
                ps.setObject(2, 3);
                try(ResultSet rs = ps.executeQuery()) {
                    // ç”¨äºåˆ¤æ–­æ˜¯å¦æœ‰ä¸‹ä¸€è¡Œè®°å½•ï¼Œå¦‚æœæœ‰ï¼Œå°†è‡ªåŠ¨æŠŠå½“å‰è¡Œç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œ
                    while (rs.next()) {
//                        long id = rs.getLong(1); // æ³¨æ„ï¼šç´¢å¼•ä» 1 å¼€å§‹
//                        long grade = rs.getLong(2);
//                        String name = rs.getString(3);
//                        int gender = rs.getInt(4);
//                        String score = rs.getString(5);
                        // æ¨èä½¿ç”¨ String ç±»å‹çš„åˆ—åï¼Œæ˜“è¯»ä¸”ä¸æ˜“å‡ºé”™
                        long id = rs.getLong("id");
                        long grade = rs.getLong("grade");
                        String name = rs.getString("name");
                        String gender = rs.getString("gender");
                        String score = rs.getString("score");
                        // è¾“å‡ºè¡Œæ•°æ®
                        System.out.println("ID: " + id + ", grade: " + grade
                                + ", nameï¼š" + name + ", genderï¼š" + gender
                                + ", scoreï¼š" + score);
                    }
                }
            }
        }
    }
}

```

## ğŸ€ å°ç»“

- JDBC æ¥å£çš„ `Connection` ä»£è¡¨ä¸€ä¸ª JDBC è¿æ¥ï¼›

- ä½¿ç”¨ JDBC æŸ¥è¯¢æ—¶ï¼Œæ€»æ˜¯ä½¿ç”¨ `PreparedStatement` è¿›è¡ŒæŸ¥è¯¢è€Œä¸æ˜¯ `Statement`ï¼›

- æŸ¥è¯¢ç»“æœæ€»æ˜¯ `ResultSet`ï¼Œå³ä½¿ä½¿ç”¨èšåˆæŸ¥è¯¢ä¹Ÿä¸ä¾‹å¤–ã€‚
