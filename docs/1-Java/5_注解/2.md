---
title: å®šä¹‰æ³¨è§£
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::

Java è¯­è¨€ä½¿ç”¨ `@interface` è¯­æ³•æ¥å®šä¹‰æ³¨è§£ï¼ˆAnnotationï¼‰ï¼Œå®ƒçš„æ ¼å¼å¦‚ä¸‹ï¼š

```java
public @interface Report {
    int type() default 0;
    String level() default "info";
    String value() default "";
}
```

æ³¨è§£çš„å‚æ•°ç±»ä¼¼æ— å‚æ•°æ–¹æ³•ï¼Œå¯ä»¥ç”¨ `default` è®¾å®šä¸€ä¸ªé»˜è®¤å€¼ï¼ˆå¼ºçƒˆæ¨èï¼‰ã€‚æœ€å¸¸ç”¨çš„å‚æ•°åº”å½“å‘½åä¸º `value` ã€‚

## ğŸ€ å…ƒæ³¨è§£

æœ‰ä¸€äº›æ³¨è§£å¯ä»¥ä¿®é¥°å…¶ä»–æ³¨è§£ï¼Œè¿™äº›æ³¨è§£å°±ç§°ä¸ºå…ƒæ³¨è§£ï¼ˆmeta annotationï¼‰ã€‚Java æ ‡å‡†åº“å·²ç»å®šä¹‰äº†ä¸€äº›å…ƒæ³¨è§£ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨å…ƒæ³¨è§£ï¼Œé€šå¸¸ä¸éœ€è¦è‡ªå·±å»ç¼–å†™å…ƒæ³¨è§£ã€‚


## ğŸ€ @Target

æœ€å¸¸ç”¨çš„å…ƒæ³¨è§£æ˜¯ `@Target` ã€‚ä½¿ç”¨ `@Target` å¯ä»¥å®šä¹‰ `Annotation` èƒ½å¤Ÿè¢«åº”ç”¨äºæºç çš„å“ªäº›ä½ç½®ï¼š

- ç±»æˆ–æ¥å£ï¼š `ElementType.TYPE` ï¼›
- å­—æ®µï¼š `ElementType.FIELD` ï¼›
- æ–¹æ³•ï¼š `ElementType.METHOD` ï¼›
- æ„é€ æ–¹æ³•ï¼š `ElementType.CONSTRUCTOR` ï¼›
- æ–¹æ³•å‚æ•°ï¼š `ElementType.PARAMETER` ã€‚


ä¾‹å¦‚ï¼Œå®šä¹‰æ³¨è§£ `@Report` å¯ç”¨åœ¨æ–¹æ³•ä¸Šï¼Œæˆ‘ä»¬å¿…é¡»æ·»åŠ ä¸€ä¸ª `@Target(ElementType.METHOD)` ï¼š

```java
@Target(ElementType.METHOD)
public @interface Report {
    int type() default 0;
    String level() default "info";
    String value() default "";
}
```

å®šä¹‰æ³¨è§£ `@Report` å¯ç”¨åœ¨æ–¹æ³•æˆ–å­—æ®µä¸Šï¼Œå¯ä»¥æŠŠ `@Target` æ³¨è§£å‚æ•°å˜ä¸ºæ•°ç»„ `{ElementType.METHOD, ElementType.FIELD}` ï¼š

```java
@Target({
    ElementType.METHOD,
    ElementType.FIELD
})
public @interface Report {
    ...
}
```

å®é™…ä¸Š `@Target` å®šä¹‰çš„ `value` æ˜¯ `ElementType[]` æ•°ç»„ï¼Œåªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå¯ä»¥çœç•¥æ•°ç»„çš„å†™æ³•ã€‚


## ğŸ€ @Retention

å¦ä¸€ä¸ªé‡è¦çš„å…ƒæ³¨è§£ `@Retention` å®šä¹‰äº† `Annotation` çš„ç”Ÿå‘½å‘¨æœŸï¼š

- ä»…ç¼–è¯‘æœŸï¼š `RetentionPolicy.SOURCE` ï¼›
- ä»… class æ–‡ä»¶ï¼š `RetentionPolicy.CLASS` ï¼›
- è¿è¡ŒæœŸï¼š `RetentionPolicy.RUNTIME` ã€‚


å¦‚æœ `@Retention` ä¸å­˜åœ¨ï¼Œåˆ™è¯¥ `Annotation` é»˜è®¤ä¸º `CLASS` ã€‚å› ä¸ºé€šå¸¸æˆ‘ä»¬è‡ªå®šä¹‰çš„ `Annotation` éƒ½æ˜¯ `RUNTIME` ï¼Œæ‰€ä»¥ï¼ŒåŠ¡å¿…è¦åŠ ä¸Š `@Retention(RetentionPolicy.RUNTIME)` è¿™ä¸ªå…ƒæ³¨è§£ï¼š

```java
@Retention(RetentionPolicy.RUNTIME)
public @interface Report {
    int type() default 0;
    String level() default "info";
    String value() default "";
}
```

## ğŸ€ @Repeatable*

ä½¿ç”¨ `@Repeatable` è¿™ä¸ªå…ƒæ³¨è§£å¯ä»¥å®šä¹‰ `Annotation` æ˜¯å¦å¯é‡å¤ã€‚*è¿™ä¸ªæ³¨è§£åº”ç”¨ä¸æ˜¯ç‰¹åˆ«å¹¿æ³›*ã€‚

```java
@Repeatable(Reports.class)
@Target(ElementType.TYPE)
public @interface Report {
    int type() default 0;
    String level() default "info";
    String value() default "";
}

@Target(ElementType.TYPE)
public @interface Reports {
    Report[] value();
}
```

ç»è¿‡ `@Repeatable` ä¿®é¥°åï¼Œåœ¨æŸä¸ªç±»å‹å£°æ˜å¤„ï¼Œå°±å¯ä»¥æ·»åŠ å¤šä¸ª `@Report` æ³¨è§£ï¼š

```java
@Report(type=1, level="debug")
@Report(type=2, level="warning")
public class Hello {
}
```


## ğŸ€ @Inherited

ä½¿ç”¨ `@Inherited` å®šä¹‰å­ç±»æ˜¯å¦å¯ç»§æ‰¿çˆ¶ç±»å®šä¹‰çš„ `Annotation` ã€‚ `@Inherited` ä»…é’ˆå¯¹ `@Target(ElementType.TYPE)` ç±»å‹çš„ `annotation` æœ‰æ•ˆï¼Œå¹¶ä¸”ä»…é’ˆå¯¹ `class` çš„ç»§æ‰¿ï¼Œå¯¹ `interface` çš„ç»§æ‰¿æ— æ•ˆï¼š


```java
@Inherited
@Target(ElementType.TYPE)
public @interface Report {
    int type() default 0;
    String level() default "info";
    String value() default "";
}
```

åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå¦‚æœä¸€ä¸ªç±»ç”¨åˆ°äº† `@Report` ï¼š

```java
@Report(type=1)
public class Person {
}
```

åˆ™å®ƒçš„å­ç±»é»˜è®¤ä¹Ÿå®šä¹‰äº†è¯¥æ³¨è§£ï¼š

```java
public class Student extends Person {
}
```


## ğŸ€ å¦‚ä½•å®šä¹‰ Annotation

æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹å®šä¹‰ `Annotation` çš„æ­¥éª¤ï¼š

1. ç¬¬ä¸€æ­¥ï¼Œç”¨ `@interface` å®šä¹‰æ³¨è§£ï¼š

```java
public @interface Report {
}
```

2. ç¬¬äºŒæ­¥ï¼Œæ·»åŠ å‚æ•°ã€é»˜è®¤å€¼ï¼š

```java
public @interface Report {
    int type() default 0;
    String level() default "info";
    String value() default "";
}
```

æŠŠæœ€å¸¸ç”¨çš„å‚æ•°å®šä¹‰ä¸º `value()` ï¼Œæ¨èæ‰€æœ‰å‚æ•°éƒ½å°½é‡è®¾ç½®é»˜è®¤å€¼ã€‚

3. ç¬¬ä¸‰æ­¥ï¼Œç”¨å…ƒæ³¨è§£é…ç½®æ³¨è§£ï¼š

```java
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
public @interface Report {
    int type() default 0;
    String level() default "info";
    String value() default "";
}
```

å…¶ä¸­ï¼Œå¿…é¡»è®¾ç½® `@Target` å’Œ `@Retention` ï¼Œ `@Retention` ä¸€èˆ¬è®¾ç½®ä¸º `RUNTIME` ï¼Œå› ä¸ºæˆ‘ä»¬è‡ªå®šä¹‰çš„æ³¨è§£é€šå¸¸è¦æ±‚åœ¨è¿è¡ŒæœŸè¯»å–ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸å¿…å†™ `@Inherited` å’Œ `@Repeatable` ã€‚

## ğŸ€ å°ç»“

Java ä½¿ç”¨ `@interface` å®šä¹‰æ³¨è§£ï¼š

- å¯å®šä¹‰å¤šä¸ªå‚æ•°å’Œé»˜è®¤å€¼ï¼Œæ ¸å¿ƒå‚æ•°ä½¿ç”¨ `value` åç§°ï¼›
- å¿…é¡»è®¾ç½® `@Target` æ¥æŒ‡å®š `Annotation` å¯ä»¥åº”ç”¨çš„èŒƒå›´ï¼›
- åº”å½“è®¾ç½® `@Retention(RetentionPolicy.RUNTIME)` ä¾¿äºè¿è¡ŒæœŸè¯»å–è¯¥ `Annotation` ã€‚

