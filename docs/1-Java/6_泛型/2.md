---
title: ä½¿ç”¨æ³›å‹
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::

ä½¿ç”¨ `ArrayList` æ—¶ï¼Œå¦‚æœä¸å®šä¹‰æ³›å‹ç±»å‹æ—¶ï¼Œæ³›å‹ç±»å‹å®é™…ä¸Šå°±æ˜¯ `Object` ï¼š

```java
// ç¼–è¯‘å™¨è­¦å‘Š:
List list = new ArrayList();
list.add("Hello");
list.add("World");
String first = (String) list.get(0);
String second = (String) list.get(1);
```

æ­¤æ—¶ï¼Œåªèƒ½æŠŠ `<T>` å½“ä½œ `Object` ä½¿ç”¨ï¼Œæ²¡æœ‰å‘æŒ¥æ³›å‹çš„ä¼˜åŠ¿ã€‚

å½“æˆ‘ä»¬å®šä¹‰æ³›å‹ç±»å‹ `<String>` åï¼Œ `List<T>` çš„æ³›å‹æ¥å£å˜ä¸ºå¼ºç±»å‹ `List<String>` ï¼š

```java
// æ— ç¼–è¯‘å™¨è­¦å‘Š:
List<String> list = new ArrayList<String>();
list.add("Hello");
list.add("World");
// æ— å¼ºåˆ¶è½¬å‹:
String first = list.get(0);
String second = list.get(1);
```

å½“æˆ‘ä»¬å®šä¹‰æ³›å‹ç±»å‹ `<Number>` åï¼Œ `List<T>` çš„æ³›å‹æ¥å£å˜ä¸ºå¼ºç±»å‹ `List<Number>` ï¼š

```java
List<Number> list = new ArrayList<Number>();
list.add(new Integer(123));
list.add(new Double(12.34));
Number first = list.get(0);
Number second = list.get(1);
```

ç¼–è¯‘å™¨å¦‚æœèƒ½è‡ªåŠ¨æ¨æ–­å‡ºæ³›å‹ç±»å‹ï¼Œå°±å¯ä»¥çœç•¥åé¢çš„æ³›å‹ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸‹é¢çš„ä»£ç ï¼š

```java
List<Number> list = new ArrayList<Number>();
```

ç¼–è¯‘å™¨çœ‹åˆ°æ³›å‹ç±»å‹ `List<Number>` å°±å¯ä»¥è‡ªåŠ¨æ¨æ–­å‡ºåé¢çš„ `ArrayList<T>` çš„æ³›å‹ç±»å‹å¿…é¡»æ˜¯ `ArrayList<Number>` ï¼Œå› æ­¤ï¼Œå¯ä»¥æŠŠä»£ç ç®€å†™ä¸ºï¼š

```java
// å¯ä»¥çœç•¥åé¢çš„ Numberï¼Œç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨æ–­æ³›å‹ç±»å‹ï¼š
List<Number> list = new ArrayList<>();
```


## ğŸ€ æ³›å‹æ¥å£

é™¤äº† `ArrayList<T>` ä½¿ç”¨äº†æ³›å‹ï¼Œè¿˜å¯ä»¥åœ¨æ¥å£ä¸­ä½¿ç”¨æ³›å‹ã€‚ä¾‹å¦‚ï¼Œ `Arrays.sort(Object[])` å¯ä»¥å¯¹ä»»æ„æ•°ç»„è¿›è¡Œæ’åºï¼Œä½†å¾…æ’åºçš„å…ƒç´ å¿…é¡»å®ç° `Comparable<T>` è¿™ä¸ªæ³›å‹æ¥å£ï¼š

```java
public interface Comparable<T> {
    /**
     * è¿”å›è´Ÿæ•°: å½“å‰å®ä¾‹æ¯”å‚æ•° o å°
     * è¿”å› 0: å½“å‰å®ä¾‹ä¸å‚æ•° o ç›¸ç­‰
     * è¿”å›æ­£æ•°: å½“å‰å®ä¾‹æ¯”å‚æ•° o å¤§
     */
    int compareTo(T o);
}
```

å¯ä»¥ç›´æ¥å¯¹ `String` æ•°ç»„è¿›è¡Œæ’åºï¼š

```java
// sort
import java.util.Arrays;

public class Main {
    public static void main(String[] args) {
        String[] ss = new String[] { "Orange", "Apple", "Pear" };
        Arrays.sort(ss);
        System.out.println(Arrays.toString(ss));
    }
}
```


è¿™æ˜¯å› ä¸º `String` æœ¬èº«å·²ç»å®ç°äº† `Comparable<String>` æ¥å£ã€‚å¦‚æœæ¢æˆæˆ‘ä»¬è‡ªå®šä¹‰çš„ `Person` ç±»å‹è¯•è¯•ï¼š

```java
// sort
import java.util.Arrays;

public class Main {
    public static void main(String[] args) {
        Person[] ps = new Person[] {
            new Person("Bob", 61),
            new Person("Alice", 88),
            new Person("Lily", 75),
        };
        Arrays.sort(ps);
        System.out.println(Arrays.toString(ps));
    }
}

class Person {
    String name;
    int score;
    Person(String name, int score) {
        this.name = name;
        this.score = score;
    }
    public String toString() {
        return this.name + "," + this.score;
    }
}
```

è¿è¡Œç¨‹åºï¼Œæˆ‘ä»¬ä¼šå¾—åˆ° `ClassCastException` ï¼Œå³æ— æ³•å°† `Person` è½¬å‹ä¸º `Comparable` ã€‚æˆ‘ä»¬ä¿®æ”¹ä»£ç ï¼Œè®© `Person` å®ç° `Comparable<T>` æ¥å£ï¼š

```java
// sort
import java.util.Arrays;

public class Main {
    public static void main(String[] args) {
        Person[] ps = new Person[] {
            new Person("Bob", 61),
            new Person("Alice", 88),
            new Person("Lily", 75),
        };
        Arrays.sort(ps);
        System.out.println(Arrays.toString(ps));
    }
}

class Person implements Comparable<Person> {
    String name;
    int score;
    Person(String name, int score) {
        this.name = name;
        this.score = score;
    }
    public int compareTo(Person other) {
        return this.name.compareTo(other.name);
    }
    public String toString() {
        return this.name + "," + this.score;
    }
}
```

è¿è¡Œä¸Šè¿°ä»£ç ï¼Œå¯ä»¥æ­£ç¡®å®ç°æŒ‰ `name` è¿›è¡Œæ’åºã€‚

ä¹Ÿå¯ä»¥ä¿®æ”¹æ¯”è¾ƒé€»è¾‘ï¼Œä¾‹å¦‚ï¼ŒæŒ‰ `score` ä»é«˜åˆ°ä½æ’åºã€‚è¯·è‡ªè¡Œä¿®æ”¹æµ‹è¯•ã€‚

## ğŸ€ å°ç»“

- ä½¿ç”¨æ³›å‹æ—¶ï¼ŒæŠŠæ³›å‹å‚æ•° `<T>` æ›¿æ¢ä¸ºéœ€è¦çš„ `class` ç±»å‹ï¼Œä¾‹å¦‚ï¼š `ArrayList<String>` ï¼Œ `ArrayList<Number>` ç­‰ï¼›
- å¯ä»¥çœç•¥ç¼–è¯‘å™¨èƒ½è‡ªåŠ¨æ¨æ–­å‡ºçš„ç±»å‹ï¼Œä¾‹å¦‚ï¼š `List<String> list = new ArrayList<>();` ï¼›
- ä¸æŒ‡å®šæ³›å‹å‚æ•°ç±»å‹æ—¶ï¼Œç¼–è¯‘å™¨ä¼šç»™å‡ºè­¦å‘Šï¼Œä¸”åªèƒ½å°† `<T>` è§†ä¸º `Object` ç±»å‹ï¼›
- å¯ä»¥åœ¨æ¥å£ä¸­å®šä¹‰æ³›å‹ç±»å‹ï¼Œå®ç°æ­¤æ¥å£çš„ç±»å¿…é¡»å®ç°æ­£ç¡®çš„æ³›å‹ç±»å‹ã€‚

