---
title: Instant
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::

æˆ‘ä»¬å·²ç»è®²è¿‡ï¼Œè®¡ç®—æœºå­˜å‚¨çš„å½“å‰æ—¶é—´ï¼Œæœ¬è´¨ä¸Šåªæ˜¯ä¸€ä¸ªä¸æ–­é€’å¢çš„æ•´æ•°ã€‚Java æä¾›çš„ `System.currentTimeMillis()` è¿”å›çš„å°±æ˜¯ä»¥æ¯«ç§’è¡¨ç¤ºçš„å½“å‰æ—¶é—´æˆ³ã€‚

è¿™ä¸ªå½“å‰æ—¶é—´æˆ³åœ¨ java.time ä¸­ä»¥ `Instant` ç±»å‹è¡¨ç¤ºï¼Œæˆ‘ä»¬ç”¨ `Instant.now()` è·å–å½“å‰æ—¶é—´æˆ³ï¼Œæ•ˆæœå’Œ `System.currentTimeMillis()` ç±»ä¼¼ï¼š

```java
import java.time.*;

public class Main {
    public static void main(String[] args) {
        Instant now = Instant.now();
        System.out.println(now.getEpochSecond()); // ç§’
        System.out.println(now.toEpochMilli()); // æ¯«ç§’
    }
}
```

æ‰“å°çš„ç»“æœç±»ä¼¼ï¼š

```
1568568760
1568568760316
```

å®é™…ä¸Šï¼Œ`Instant` å†…éƒ¨åªæœ‰ä¸¤ä¸ªæ ¸å¿ƒå­—æ®µï¼š

```java
public final class Instant implements ... {
    private final long seconds;
    private final int nanos;
}
```

ä¸€ä¸ªæ˜¯ä»¥ç§’ä¸ºå•ä½çš„æ—¶é—´æˆ³ï¼Œä¸€ä¸ªæ˜¯æ›´ç²¾ç¡®çš„çº³ç§’ç²¾åº¦ã€‚å®ƒå’Œ `System.currentTimeMillis()` è¿”å›çš„ long ç›¸æ¯”ï¼Œåªæ˜¯å¤šäº†æ›´é«˜ç²¾åº¦çš„çº³ç§’ã€‚

æ—¢ç„¶ `Instant` å°±æ˜¯æ—¶é—´æˆ³ï¼Œé‚£ä¹ˆï¼Œç»™å®ƒé™„åŠ ä¸Šä¸€ä¸ªæ—¶åŒºï¼Œå°±å¯ä»¥åˆ›å»ºå‡º `ZonedDateTime` ï¼š

```java
// ä»¥æŒ‡å®šæ—¶é—´æˆ³åˆ›å»º Instant:
Instant ins = Instant.ofEpochSecond(1568568760);
ZonedDateTime zdt = ins.atZone(ZoneId.systemDefault());
System.out.println(zdt); // 2019-09-16T01:32:40+08:00[Asia/Shanghai]
```

å¯è§ï¼Œå¯¹äºæŸä¸€ä¸ªæ—¶é—´æˆ³ï¼Œç»™å®ƒå…³è”ä¸ŠæŒ‡å®šçš„ `ZoneId`ï¼Œå°±å¾—åˆ°äº† `ZonedDateTime`ï¼Œç»§è€Œå¯ä»¥è·å¾—äº†å¯¹åº”æ—¶åŒºçš„ `LocalDateTime` ã€‚

æ‰€ä»¥ï¼Œ`LocalDateTime`ï¼Œ`ZoneId`ï¼Œ`Instant`ï¼Œ`ZonedDateTime` å’Œ `long` éƒ½å¯ä»¥äº’ç›¸è½¬æ¢ï¼š

![20221124092901](assets/20221124092901.png)

è½¬æ¢çš„æ—¶å€™ï¼Œåªéœ€è¦ç•™æ„ `long` ç±»å‹ä»¥æ¯«ç§’è¿˜æ˜¯ç§’ä¸ºå•ä½å³å¯ã€‚

## ğŸ€ å°ç»“

`Instant` è¡¨ç¤ºé«˜ç²¾åº¦æ—¶é—´æˆ³ï¼Œå®ƒå¯ä»¥å’Œ `ZonedDateTime` ä»¥åŠ `long` äº’ç›¸è½¬æ¢ã€‚
