---
title: Writer
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::

Reader æ˜¯å¸¦ç¼–ç è½¬æ¢å™¨çš„ InputStreamï¼Œå®ƒæŠŠ byte è½¬æ¢ä¸º charï¼Œè€Œ Writer å°±æ˜¯å¸¦ç¼–ç è½¬æ¢å™¨çš„ OutputStreamï¼Œå®ƒæŠŠ char è½¬æ¢ä¸º byte å¹¶è¾“å‡ºã€‚

Writer å’Œ OutputStream çš„åŒºåˆ«å¦‚ä¸‹ï¼š

| OutputStream                           | Writer                                   |
| -------------------------------------- | ---------------------------------------- |
| å­—èŠ‚æµï¼Œä»¥ **byte** ä¸ºå•ä½             | å­—ç¬¦æµï¼Œä»¥ **char** ä¸ºå•ä½               |
| å†™å…¥å­—èŠ‚ï¼ˆ0~255ï¼‰ï¼š`void write(int b)` | å†™å…¥å­—ç¬¦ï¼ˆ0~65535ï¼‰ï¼š`void write(int c)` |
| å†™å…¥å­—èŠ‚æ•°ç»„ï¼š`void write(byte[] b)`   | å†™å…¥å­—ç¬¦æ•°ç»„ï¼š`void write(char[] c)`     |
| æ— å¯¹åº”æ–¹æ³•                             | å†™å…¥ Stringï¼š`void write(String s)`      |

Writer æ˜¯æ‰€æœ‰å­—ç¬¦è¾“å‡ºæµçš„è¶…ç±»ï¼Œå®ƒæä¾›çš„æ–¹æ³•ä¸»è¦æœ‰ï¼š

- å†™å…¥ä¸€ä¸ªå­—ç¬¦ï¼ˆ0~65535ï¼‰ï¼š`void write(int c)`ï¼›
- å†™å…¥å­—ç¬¦æ•°ç»„çš„æ‰€æœ‰å­—ç¬¦ï¼š`void write(char[] c)`ï¼›
- å†™å…¥ String è¡¨ç¤ºçš„æ‰€æœ‰å­—ç¬¦ï¼š`void write(String s)`ã€‚

## ğŸ€ FileWriter

FileWriter å°±æ˜¯å‘æ–‡ä»¶ä¸­å†™å…¥å­—ç¬¦æµçš„ Writerã€‚å®ƒçš„ä½¿ç”¨æ–¹æ³•å’Œ FileReader ç±»ä¼¼ï¼š

```java
try (Writer writer = new FileWriter("readme.txt", StandardCharsets.UTF_8)) {
    writer.write('H'); // å†™å…¥å•ä¸ªå­—ç¬¦
    writer.write("Hello".toCharArray()); // å†™å…¥ char[]
    writer.write("Hello"); // å†™å…¥ String
}
```

## ğŸ€ CharArrayWriter

CharArrayWriter å¯ä»¥åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ª Writerï¼Œå®ƒçš„ä½œç”¨å®é™…ä¸Šæ˜¯æ„é€ ä¸€ä¸ªç¼“å†²åŒºï¼Œå¯ä»¥å†™å…¥ charï¼Œæœ€åå¾—åˆ°å†™å…¥çš„ `char[]` æ•°ç»„ï¼Œè¿™å’Œ ByteArrayOutputStream éå¸¸ç±»ä¼¼ï¼š

```java
try (CharArrayWriter writer = new CharArrayWriter()) {
    writer.write(65);
    writer.write(66);
    writer.write(67);
    char[] data = writer.toCharArray(); // { 'A', 'B', 'C' }
}
```

## ğŸ€ StringWriter

StringWriter ä¹Ÿæ˜¯ä¸€ä¸ªåŸºäºå†…å­˜çš„ Writerï¼Œå®ƒå’Œ CharArrayWriter ç±»ä¼¼ã€‚å®é™…ä¸Šï¼ŒStringWriter åœ¨å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª StringBufferï¼Œå¹¶å¯¹å¤–æä¾›äº† Writer æ¥å£ã€‚

## ğŸ€ OutputStreamWriter

é™¤äº† CharArrayWriter å’Œ StringWriter å¤–ï¼Œæ™®é€šçš„ Writer å®é™…ä¸Šæ˜¯åŸºäº OutputStream æ„é€ çš„ï¼Œå®ƒæ¥æ”¶ charï¼Œç„¶ååœ¨å†…éƒ¨è‡ªåŠ¨è½¬æ¢æˆä¸€ä¸ªæˆ–å¤šä¸ª byteï¼Œå¹¶å†™å…¥ OutputStreamã€‚å› æ­¤ï¼ŒOutputStreamWriter å°±æ˜¯ä¸€ä¸ªå°†ä»»æ„çš„ OutputStream è½¬æ¢ä¸º Writer çš„è½¬æ¢å™¨ï¼š

```java
try (Writer writer = new OutputStreamWriter(new FileOutputStream("readme.txt"), "UTF-8")) {
    // TODO:
}
```

ä¸Šè¿°ä»£ç å®é™…ä¸Šå°±æ˜¯ FileWriter çš„ä¸€ç§å®ç°æ–¹å¼ã€‚è¿™å’Œä¸Šä¸€èŠ‚çš„ InputStreamReader æ˜¯ä¸€æ ·çš„ã€‚

## ğŸ€ å°ç»“

- Writer å®šä¹‰äº†æ‰€æœ‰å­—ç¬¦è¾“å‡ºæµçš„è¶…ç±»ï¼š

  - FileWriter å®ç°äº†æ–‡ä»¶å­—ç¬¦æµè¾“å‡ºï¼›
  - CharArrayWriter å’Œ StringWriter åœ¨å†…å­˜ä¸­æ¨¡æ‹Ÿä¸€ä¸ªå­—ç¬¦æµè¾“å‡ºã€‚

- ä½¿ç”¨ `try(resource)` ä¿è¯ Writer æ­£ç¡®å…³é—­ã€‚

- Writer æ˜¯åŸºäº OutputStream æ„é€ çš„ï¼Œå¯ä»¥é€šè¿‡ OutputStreamWriter å°† OutputStream è½¬æ¢ä¸º Writerï¼Œè½¬æ¢æ—¶éœ€è¦æŒ‡å®šç¼–ç ã€‚
