---
title: File å¯¹è±¡
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::


åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œæ–‡ä»¶æ˜¯éå¸¸é‡è¦çš„å­˜å‚¨æ–¹å¼ã€‚Java çš„æ ‡å‡†åº“ java.io æä¾›äº† File å¯¹è±¡æ¥æ“ä½œæ–‡ä»¶å’Œç›®å½•ã€‚

è¦æ„é€ ä¸€ä¸ª File å¯¹è±¡ï¼Œéœ€è¦ä¼ å…¥æ–‡ä»¶è·¯å¾„ï¼š

```java
import java.io.*;
public class Main {
    public static void main(String[] args) {
        File f = new File("C:\\Windows\\notepad.exe");
        System.out.println(f);
    }
}
```

æ„é€  File å¯¹è±¡æ—¶ï¼Œæ—¢å¯ä»¥ä¼ å…¥ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ç›¸å¯¹è·¯å¾„ã€‚ç»å¯¹è·¯å¾„æ˜¯ä»¥æ ¹ç›®å½•å¼€å¤´çš„å®Œæ•´è·¯å¾„ï¼Œä¾‹å¦‚ï¼š

```java
File f = new File("C:\\Windows\\notepad.exe");
```

æ³¨æ„ Windows å¹³å°ä½¿ç”¨ \ ä½œä¸ºè·¯å¾„åˆ†éš”ç¬¦ï¼Œåœ¨ Java å­—ç¬¦ä¸²ä¸­éœ€è¦ç”¨ \\ è¡¨ç¤ºä¸€ä¸ª \ã€‚Linux å¹³å°ä½¿ç”¨ / ä½œä¸ºè·¯å¾„åˆ†éš”ç¬¦ï¼š

```java
File f = new File("/usr/bin/javac");
```

ä¼ å…¥ç›¸å¯¹è·¯å¾„æ—¶ï¼Œç›¸å¯¹è·¯å¾„å‰é¢åŠ ä¸Šå½“å‰ç›®å½•å°±æ˜¯ç»å¯¹è·¯å¾„ï¼š


```java
// å‡è®¾å½“å‰ç›®å½•æ˜¯ C:\Docs
File f1 = new File("sub\\javac"); // ç»å¯¹è·¯å¾„æ˜¯ C:\Docs\sub\javac
File f3 = new File(".\\sub\\javac"); // ç»å¯¹è·¯å¾„æ˜¯ C:\Docs\sub\javac
File f3 = new File("..\\sub\\javac"); // ç»å¯¹è·¯å¾„æ˜¯ C:\sub\javac
```

å¯ä»¥ç”¨. è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œ.. è¡¨ç¤ºä¸Šçº§ç›®å½•ã€‚

File å¯¹è±¡æœ‰ 3 ç§å½¢å¼è¡¨ç¤ºçš„è·¯å¾„ï¼Œä¸€ç§æ˜¯ getPath()ï¼Œè¿”å›æ„é€ æ–¹æ³•ä¼ å…¥çš„è·¯å¾„ï¼Œä¸€ç§æ˜¯ getAbsolutePath()ï¼Œè¿”å›ç»å¯¹è·¯å¾„ï¼Œä¸€ç§æ˜¯ getCanonicalPathï¼Œå®ƒå’Œç»å¯¹è·¯å¾„ç±»ä¼¼ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯è§„èŒƒè·¯å¾„ã€‚

ä»€ä¹ˆæ˜¯è§„èŒƒè·¯å¾„ï¼Ÿæˆ‘ä»¬çœ‹ä»¥ä¸‹ä»£ç ï¼š

```java
import java.io.*;
public class Main {
    public static void main(String[] args) throws IOException {
        File f = new File("..");
        System.out.println(f.getPath());
        System.out.println(f.getAbsolutePath());
        System.out.println(f.getCanonicalPath());
    }
}
```

ç»å¯¹è·¯å¾„å¯ä»¥è¡¨ç¤ºæˆ C:\Windows\System32\..\notepad.exeï¼Œè€Œè§„èŒƒè·¯å¾„å°±æ˜¯æŠŠ. å’Œ.. è½¬æ¢æˆæ ‡å‡†çš„ç»å¯¹è·¯å¾„åçš„è·¯å¾„ï¼šC:\Windows\notepad.exeã€‚

å› ä¸º Windows å’Œ Linux çš„è·¯å¾„åˆ†éš”ç¬¦ä¸åŒï¼ŒFile å¯¹è±¡æœ‰ä¸€ä¸ªé™æ€å˜é‡ç”¨äºè¡¨ç¤ºå½“å‰å¹³å°çš„ç³»ç»Ÿåˆ†éš”ç¬¦ï¼š


```java
System.out.println(File.separator); // æ ¹æ®å½“å‰å¹³å°æ‰“å° "\" æˆ– "/"
```


## ğŸ€ æ–‡ä»¶å’Œç›®å½•

File å¯¹è±¡æ—¢å¯ä»¥è¡¨ç¤ºæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºç›®å½•ã€‚ç‰¹åˆ«è¦æ³¨æ„çš„æ˜¯ï¼Œæ„é€ ä¸€ä¸ª File å¯¹è±¡ï¼Œå³ä½¿ä¼ å…¥çš„æ–‡ä»¶æˆ–ç›®å½•ä¸å­˜åœ¨ï¼Œä»£ç ä¹Ÿä¸ä¼šå‡ºé”™ï¼Œå› ä¸ºæ„é€ ä¸€ä¸ª File å¯¹è±¡ï¼Œå¹¶ä¸ä¼šå¯¼è‡´ä»»ä½•ç£ç›˜æ“ä½œã€‚åªæœ‰å½“æˆ‘ä»¬è°ƒç”¨ File å¯¹è±¡çš„æŸäº›æ–¹æ³•çš„æ—¶å€™ï¼Œæ‰çœŸæ­£è¿›è¡Œç£ç›˜æ“ä½œã€‚

ä¾‹å¦‚ï¼Œè°ƒç”¨ isFile()ï¼Œåˆ¤æ–­è¯¥ File å¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªå·²å­˜åœ¨çš„æ–‡ä»¶ï¼Œè°ƒç”¨ isDirectory()ï¼Œåˆ¤æ–­è¯¥ File å¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªå·²å­˜åœ¨çš„ç›®å½•ï¼š


```java
import java.io.*;
public class Main {
    public static void main(String[] args) throws IOException {
        File f1 = new File("C:\\Windows");
        File f2 = new File("C:\\Windows\\notepad.exe");
        File f3 = new File("C:\\Windows\\nothing");
        System.out.println(f1.isFile());
        System.out.println(f1.isDirectory());
        System.out.println(f2.isFile());
        System.out.println(f2.isDirectory());
        System.out.println(f3.isFile());
        System.out.println(f3.isDirectory());
    }
}
```

ç”¨ File å¯¹è±¡è·å–åˆ°ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œè¿˜å¯ä»¥è¿›ä¸€æ­¥åˆ¤æ–­æ–‡ä»¶çš„æƒé™å’Œå¤§å°ï¼š

- boolean canRead()ï¼šæ˜¯å¦å¯è¯»ï¼›
- boolean canWrite()ï¼šæ˜¯å¦å¯å†™ï¼›
- boolean canExecute()ï¼šæ˜¯å¦å¯æ‰§è¡Œï¼›
- long length()ï¼šæ–‡ä»¶å­—èŠ‚å¤§å°ã€‚

å¯¹ç›®å½•è€Œè¨€ï¼Œæ˜¯å¦å¯æ‰§è¡Œè¡¨ç¤ºèƒ½å¦åˆ—å‡ºå®ƒåŒ…å«çš„æ–‡ä»¶å’Œå­ç›®å½•ã€‚



## ğŸ€ åˆ›å»ºå’Œåˆ é™¤æ–‡ä»¶

å½“ File å¯¹è±¡è¡¨ç¤ºä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œå¯ä»¥é€šè¿‡ createNewFile() åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œç”¨ delete() åˆ é™¤è¯¥æ–‡ä»¶ï¼š

```java
File file = new File("/path/to/file");
if (file.createNewFile()) {
    // æ–‡ä»¶åˆ›å»ºæˆåŠŸ:
    // TODO:
    if (file.delete()) {
        // åˆ é™¤æ–‡ä»¶æˆåŠŸ:
    }
}
```

æœ‰äº›æ—¶å€™ï¼Œç¨‹åºéœ€è¦è¯»å†™ä¸€äº›ä¸´æ—¶æ–‡ä»¶ï¼ŒFile å¯¹è±¡æä¾›äº† createTempFile() æ¥åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œä»¥åŠ deleteOnExit() åœ¨ JVM é€€å‡ºæ—¶è‡ªåŠ¨åˆ é™¤è¯¥æ–‡ä»¶ã€‚

```java
import java.io.*;
public class Main {
    public static void main(String[] args) throws IOException {
        File f = File.createTempFile("tmp-", ".txt"); // æä¾›ä¸´æ—¶æ–‡ä»¶çš„å‰ç¼€å’Œåç¼€
        f.deleteOnExit(); // JVMé€€å‡ºæ—¶è‡ªåŠ¨åˆ é™¤
        System.out.println(f.isFile());
        System.out.println(f.getAbsolutePath());
    }
}
```


éå†æ–‡ä»¶å’Œç›®å½•

å½“ File å¯¹è±¡è¡¨ç¤ºä¸€ä¸ªç›®å½•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ list() å’Œ listFiles() åˆ—å‡ºç›®å½•ä¸‹çš„æ–‡ä»¶å’Œå­ç›®å½•åã€‚listFiles() æä¾›äº†ä¸€ç³»åˆ—é‡è½½æ–¹æ³•ï¼Œå¯ä»¥è¿‡æ»¤ä¸æƒ³è¦çš„æ–‡ä»¶å’Œç›®å½•ï¼š

```java
import java.io.*;
public class Main {
    public static void main(String[] args) throws IOException {
        File f = new File("C:\\Windows");
        File[] fs1 = f.listFiles(); // åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•
        printFiles(fs1);
        File[] fs2 = f.listFiles(new FilenameFilter() { // ä»…åˆ—å‡º.exeæ–‡ä»¶
            public boolean accept(File dir, String name) {
                return name.endsWith(".exe"); // è¿”å›trueè¡¨ç¤ºæ¥å—è¯¥æ–‡ä»¶
            }
        });
        printFiles(fs2);
    }

    static void printFiles(File[] files) {
        System.out.println("==========");
        if (files != null) {
            for (File f : files) {
                System.out.println(f);
            }
        }
        System.out.println("==========");
    }
}
```


å’Œæ–‡ä»¶æ“ä½œç±»ä¼¼ï¼ŒFile å¯¹è±¡å¦‚æœè¡¨ç¤ºä¸€ä¸ªç›®å½•ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•åˆ›å»ºå’Œåˆ é™¤ç›®å½•ï¼š

- `boolean mkdir()`ï¼šåˆ›å»ºå½“å‰ File å¯¹è±¡è¡¨ç¤ºçš„ç›®å½•ï¼›
- `boolean mkdirs()`ï¼šåˆ›å»ºå½“å‰ File å¯¹è±¡è¡¨ç¤ºçš„ç›®å½•ï¼Œå¹¶åœ¨å¿…è¦æ—¶å°†ä¸å­˜åœ¨çš„çˆ¶ç›®å½•ä¹Ÿåˆ›å»ºå‡ºæ¥ï¼›
- `boolean delete()`ï¼šåˆ é™¤å½“å‰ File å¯¹è±¡è¡¨ç¤ºçš„ç›®å½•ï¼Œå½“å‰ç›®å½•å¿…é¡»ä¸ºç©ºæ‰èƒ½åˆ é™¤æˆåŠŸã€‚


## ğŸ€ Path

Java æ ‡å‡†åº“è¿˜æä¾›äº†ä¸€ä¸ª Path å¯¹è±¡ï¼Œå®ƒä½äº java.nio.file åŒ…ã€‚Path å¯¹è±¡å’Œ File å¯¹è±¡ç±»ä¼¼ï¼Œä½†æ“ä½œæ›´åŠ ç®€å•ï¼š


```java
import java.io.*;
import java.nio.file.*;

public class Main {
    public static void main(String[] args) throws IOException {
        Path p1 = Paths.get(".", "project", "study"); // æ„é€ ä¸€ä¸ªPathå¯¹è±¡
        System.out.println(p1);
        Path p2 = p1.toAbsolutePath(); // è½¬æ¢ä¸ºç»å¯¹è·¯å¾„
        System.out.println(p2);
        Path p3 = p2.normalize(); // è½¬æ¢ä¸ºè§„èŒƒè·¯å¾„
        System.out.println(p3);
        File f = p3.toFile(); // è½¬æ¢ä¸ºFileå¯¹è±¡
        System.out.println(f);
        for (Path p : Paths.get("..").toAbsolutePath()) { // å¯ä»¥ç›´æ¥éå†Path
            System.out.println("  " + p);
        }
    }
}
```


å¦‚æœéœ€è¦å¯¹ç›®å½•è¿›è¡Œå¤æ‚çš„æ‹¼æ¥ã€éå†ç­‰æ“ä½œï¼Œä½¿ç”¨ Path å¯¹è±¡æ›´æ–¹ä¾¿ã€‚



## ğŸ€ ç»ƒä¹ 

è¯·åˆ©ç”¨ File å¯¹è±¡åˆ—å‡ºæŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰å­ç›®å½•å’Œæ–‡ä»¶ï¼Œå¹¶æŒ‰å±‚æ¬¡æ‰“å°ã€‚

ä¾‹å¦‚ï¼Œè¾“å‡ºï¼š

```
Documents/
  word/
    1.docx
    2.docx
    work/
      abc.doc
  ppt/
  other/
```

å¦‚æœä¸æŒ‡å®šå‚æ•°ï¼Œåˆ™ä½¿ç”¨å½“å‰ç›®å½•ï¼Œå¦‚æœæŒ‡å®šå‚æ•°ï¼Œåˆ™ä½¿ç”¨æŒ‡å®šç›®å½•ã€‚


```java
import java.io.File;
import java.io.IOException;

public class Main {

	public static void main(String[] args) throws IOException {
		File currentDir = new File(".");
		listDir(currentDir.getCanonicalFile());
	}

	static void listDir(File dir) {
		// TODO: é€’å½’æ‰“å°æ‰€æœ‰æ–‡ä»¶å’Œå­æ–‡ä»¶å¤¹çš„å†…å®¹
		File[] fs = dir.listFiles();
		if (fs != null) {
			for (File f : fs) {
				System.out.println(f.getName());
			}
		}
	}
}
```


## ğŸ€ å°ç»“

Java æ ‡å‡†åº“çš„ java.io.File å¯¹è±¡è¡¨ç¤ºä¸€ä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•ï¼š

- åˆ›å»º File å¯¹è±¡æœ¬èº«ä¸æ¶‰åŠ IO æ“ä½œï¼›
- å¯ä»¥è·å–è·¯å¾„ï¼ç»å¯¹è·¯å¾„ï¼è§„èŒƒè·¯å¾„ï¼š`getPath()` / `getAbsolutePath()` / `getCanonicalPath()`ï¼›
- å¯ä»¥è·å–ç›®å½•çš„æ–‡ä»¶å’Œå­ç›®å½•ï¼š`list()` / `listFiles()`ï¼›
- å¯ä»¥åˆ›å»ºæˆ–åˆ é™¤æ–‡ä»¶å’Œç›®å½•ã€‚


