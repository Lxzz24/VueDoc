---
title: æ¥å£
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::


åœ¨æŠ½è±¡ç±»ä¸­ï¼ŒæŠ½è±¡æ–¹æ³•æœ¬è´¨ä¸Šæ˜¯ ***å®šä¹‰æ¥å£è§„èŒƒ*** ï¼šå³è§„å®šé«˜å±‚ç±»çš„æ¥å£ï¼Œä»è€Œä¿è¯æ‰€æœ‰å­ç±»éƒ½æœ‰ç›¸åŒçš„æ¥å£å®ç°ï¼Œè¿™æ ·ï¼Œå¤šæ€å°±èƒ½å‘æŒ¥å‡ºå¨åŠ›ã€‚

å¦‚æœä¸€ä¸ªæŠ½è±¡ç±»æ²¡æœ‰å­—æ®µï¼Œæ‰€æœ‰æ–¹æ³•å…¨éƒ¨éƒ½æ˜¯æŠ½è±¡æ–¹æ³•ï¼š

```java
abstract class Person {
    public abstract void run();
    public abstract String getName();
}
```

å°±å¯ä»¥æŠŠè¯¥æŠ½è±¡ç±»æ”¹å†™ä¸ºæ¥å£ï¼š `interface` ã€‚

åœ¨ Java ä¸­ï¼Œä½¿ç”¨ `interface` å¯ä»¥å£°æ˜ä¸€ä¸ªæ¥å£ï¼š

```java
interface Person {
    void run();
    String getName();
}
```

æ‰€è°“ `interface` ï¼Œå°±æ˜¯æ¯”æŠ½è±¡ç±»è¿˜è¦æŠ½è±¡çš„çº¯æŠ½è±¡æ¥å£ï¼Œå› ä¸ºå®ƒè¿å­—æ®µéƒ½ä¸èƒ½æœ‰ã€‚å› ä¸ºæ¥å£å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•é»˜è®¤éƒ½æ˜¯ `public abstract` çš„ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªä¿®é¥°ç¬¦ *ä¸éœ€è¦å†™å‡ºæ¥* ï¼ˆå†™ä¸å†™æ•ˆæœéƒ½ä¸€æ ·ï¼‰ã€‚

å½“ä¸€ä¸ªå…·ä½“çš„ `class` å»å®ç°ä¸€ä¸ª `interface` æ—¶ï¼Œéœ€è¦ä½¿ç”¨ `implements` å…³é”®å­—ã€‚ä¸¾ä¸ªä¾‹å­ï¼š

```java
class Student implements Person {
    private String name;

    public Student(String name) {
        this.name = name;
    }

    @Override
    public void run() {
        System.out.println(this.name + "run");
    }

    @Override
    public String getName() {
        return this.name;
    }
}
```

æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ Java ä¸­ï¼Œä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿è‡ªå¦ä¸€ä¸ªç±»ï¼Œä¸èƒ½ä»å¤šä¸ªç±»ç»§æ‰¿ã€‚ä½†æ˜¯ï¼Œä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ª `interface` ï¼Œä¾‹å¦‚ï¼š

```java
class Student implements Person, Hello { // å®ç°äº†ä¸¤ä¸ª interface
    ...
}
```


## ğŸ€ æœ¯è¯­


æ³¨æ„åŒºåˆ†æœ¯è¯­ï¼š

Java çš„æ¥å£ç‰¹æŒ‡ `interface` çš„å®šä¹‰ï¼Œè¡¨ç¤ºä¸€ä¸ªæ¥å£ç±»å‹å’Œä¸€ç»„æ–¹æ³•ç­¾åï¼Œè€Œç¼–ç¨‹æ¥å£æ³›æŒ‡æ¥å£è§„èŒƒï¼Œå¦‚æ–¹æ³•ç­¾åï¼Œæ•°æ®æ ¼å¼ï¼Œç½‘ç»œåè®®ç­‰ã€‚

æŠ½è±¡ç±»å’Œæ¥å£çš„å¯¹æ¯”å¦‚ä¸‹ï¼š

![](assets/202206091511898.png)


## ğŸ€ æ¥å£ç»§æ‰¿


ä¸€ä¸ª `interface` å¯ä»¥ç»§æ‰¿è‡ªå¦ä¸€ä¸ª `interface` ã€‚ `interface` ç»§æ‰¿è‡ª `interface` ä½¿ç”¨ `extends` ï¼Œå®ƒç›¸å½“äºæ‰©å±•äº†æ¥å£çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š

```java
interface Hello {
    void hello();
}

interface Person extends Hello {
    void run();
    String getName();
}
```

æ­¤æ—¶ï¼Œ `Person` æ¥å£ç»§æ‰¿è‡ª `Hello` æ¥å£ï¼Œå› æ­¤ï¼Œ `Person` æ¥å£ç°åœ¨å®é™…ä¸Šæœ‰ 3 ä¸ªæŠ½è±¡æ–¹æ³•ç­¾åï¼Œå…¶ä¸­ä¸€ä¸ªæ¥è‡ªç»§æ‰¿çš„ `Hello` æ¥å£ã€‚


## ğŸ€ ç»§æ‰¿å…³ç³»


åˆç†è®¾è®¡ `interface` å’Œ `abstract class` çš„ç»§æ‰¿å…³ç³»ï¼Œå¯ä»¥å……åˆ†å¤ç”¨ä»£ç ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå…¬å…±é€»è¾‘é€‚åˆæ”¾åœ¨ `abstract class` ä¸­ï¼Œå…·ä½“é€»è¾‘æ”¾åˆ°å„ä¸ªå­ç±»ï¼Œè€Œæ¥å£å±‚æ¬¡ä»£è¡¨æŠ½è±¡ç¨‹åº¦ã€‚å¯ä»¥å‚è€ƒ Java çš„é›†åˆç±»å®šä¹‰çš„ä¸€ç»„æ¥å£ã€æŠ½è±¡ç±»ä»¥åŠå…·ä½“å­ç±»çš„ç»§æ‰¿å…³ç³»ï¼š

![](assets/202206091512078.png)

åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå®ä¾‹åŒ–çš„å¯¹è±¡æ°¸è¿œåªèƒ½æ˜¯æŸä¸ªå…·ä½“çš„å­ç±»ï¼Œä½†æ€»æ˜¯é€šè¿‡æ¥å£å»å¼•ç”¨å®ƒï¼Œå› ä¸ºæ¥å£æ¯”æŠ½è±¡ç±»æ›´æŠ½è±¡ï¼š

```java
List list = new ArrayList(); // ç”¨ List æ¥å£å¼•ç”¨å…·ä½“å­ç±»çš„å®ä¾‹
Collection coll = list; // å‘ä¸Šè½¬å‹ä¸º Collection æ¥å£
Iterable it = coll; // å‘ä¸Šè½¬å‹ä¸º Iterable æ¥å£
```


## ğŸ€ default æ–¹æ³•

åœ¨æ¥å£ä¸­ï¼Œå¯ä»¥å®šä¹‰ `default` æ–¹æ³•ã€‚ä¾‹å¦‚ï¼ŒæŠŠ `Person` æ¥å£çš„ `run()` æ–¹æ³•æ”¹ä¸º `default` æ–¹æ³•ï¼š

```java
public class Main {
    public static void main(String[] args) {
        Person p = new Student("Xiao Ming");
        p.run();
    }
}

interface Person {
    String getName();
    default void run() {
        System.out.println(getName() + "run");
    }
}

class Student implements Person {
    private String name;

    public Student(String name) {
        this.name = name;
    }

    public String getName() {
        return this.name;
    }
}
```

å®ç°ç±»å¯ä»¥ä¸å¿…é‡å†™ `default` æ–¹æ³•ã€‚ `default` æ–¹æ³•çš„ç›®çš„æ˜¯ï¼Œå½“æˆ‘ä»¬éœ€è¦ç»™æ¥å£æ–°å¢ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œä¼šæ¶‰åŠåˆ°ä¿®æ”¹å…¨éƒ¨å­ç±»ã€‚å¦‚æœæ–°å¢çš„æ˜¯ `default` æ–¹æ³•ï¼Œé‚£ä¹ˆå­ç±»å°±ä¸å¿…å…¨éƒ¨ä¿®æ”¹ï¼Œåªéœ€è¦åœ¨éœ€è¦é‡å†™çš„åœ°æ–¹å»é‡å†™æ–°å¢æ–¹æ³•ã€‚

`default` æ–¹æ³•å’ŒæŠ½è±¡ç±»çš„æ™®é€šæ–¹æ³•æ˜¯æœ‰æ‰€ä¸åŒçš„ã€‚å› ä¸º `interface` æ²¡æœ‰å­—æ®µï¼Œ `default` æ–¹æ³•æ— æ³•è®¿é—®å­—æ®µï¼Œè€ŒæŠ½è±¡ç±»çš„æ™®é€šæ–¹æ³•å¯ä»¥è®¿é—®å®ä¾‹å­—æ®µã€‚

## ğŸ€ ç»ƒä¹ 


ç”¨æ¥å£ç»™ä¸€ä¸ªæœ‰å·¥èµ„æ”¶å…¥å’Œç¨¿è´¹æ”¶å…¥çš„å°ä¼™ä¼´ç®—ç¨ã€‚


```java
public class PolymorphicTest {
    public static void main(String[] args) {
        // ç»™ä¸€ä¸ªæœ‰å·¥èµ„æ”¶å…¥å’Œç¨¿è´¹æ”¶å…¥çš„å°ä¼™ä¼´ç®—ç¨:
        Income[] incomes = new Income[] {
                new Salary(8000),
                new RoyaltyIncome(2000)
        };

        Person p = new Person("Frank");
        p.setIncome(incomes);
        double totalTax = p.getTotalTax();
        System.out.printf("%s's total tax is: %.2f", p.getName(), p.getTotalTax());
    }

    public static double totalTax(Income... incomes) {
        double total = 0;
        for (Income income: incomes) {
            total = total + income.getTax();
        }
        return total;
    }
}

class Person {
    protected Income[] incomes;
    protected String name;

    public Person(String name) {
        this.name = name;
    }

    public String getName() {
        return this.name;
    }

    public void setIncome(Income... incomes) {
        this.incomes = incomes;
    }

    public double getTotalTax() {
        double totalTax = 0;

        for (Income income : this.incomes) {
            totalTax += income.getTax();
        }

        return totalTax;
    }
}

interface Income {
    double getTax();
}

class Salary implements Income {
    protected double income;

    public Salary(double income) {
        this.income = income;
    }

    @Override
    public double getTax() {
        if (income <= 5000) {
            return 0;
        }
        return (income - 5000) * 0.2;
    }
}

class RoyaltyIncome implements Income {
    protected double income;

    public RoyaltyIncome(double income) {
        this.income = income;
    }

    @Override
    public double getTax() {
        return income * 0.2;//ç¨¿è´¹æ”¶å…¥ç¨ç‡æ˜¯20%
    }
}
```

## ğŸ€ å°ç»“

- Java çš„æ¥å£ï¼ˆ*interface*ï¼‰å®šä¹‰äº†çº¯æŠ½è±¡è§„èŒƒï¼Œä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼›
- æ¥å£ä¹Ÿæ˜¯æ•°æ®ç±»å‹ï¼Œé€‚ç”¨äºå‘ä¸Šè½¬å‹å’Œå‘ä¸‹è½¬å‹ï¼›
- æ¥å£çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œæ¥å£ä¸èƒ½å®šä¹‰å®ä¾‹å­—æ®µï¼›
- æ¥å£å¯ä»¥å®šä¹‰ `default` æ–¹æ³•ï¼ˆJDK >= 1.8ï¼‰ã€‚


