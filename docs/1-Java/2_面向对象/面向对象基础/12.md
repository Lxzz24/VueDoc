---
title: å†…éƒ¨ç±»*
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::

åœ¨ Java ç¨‹åºä¸­ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æŠŠä¸åŒçš„ç±»ç»„ç»‡åœ¨ä¸åŒçš„åŒ…ä¸‹é¢ï¼Œå¯¹äºä¸€ä¸ªåŒ…ä¸‹é¢çš„ç±»æ¥è¯´ï¼Œå®ƒä»¬æ˜¯åœ¨åŒä¸€å±‚æ¬¡ï¼Œæ²¡æœ‰çˆ¶å­å…³ç³»ï¼š

    java.lang
    â”œâ”€â”€ Math
    â”œâ”€â”€ Runnable
    â”œâ”€â”€ String
    â””â”€â”€ ...

è¿˜æœ‰ä¸€ç§ç±»ï¼Œå®ƒè¢«å®šä¹‰åœ¨å¦ä¸€ä¸ªç±»çš„å†…éƒ¨ï¼Œæ‰€ä»¥ç§°ä¸ºå†…éƒ¨ç±»ï¼ˆ_Nested Class_ï¼‰ã€‚Java çš„å†…éƒ¨ç±»åˆ†ä¸ºå¥½å‡ ç§ï¼Œé€šå¸¸æƒ…å†µç”¨å¾—ä¸å¤šï¼Œä½†ä¹Ÿéœ€è¦äº†è§£å®ƒä»¬æ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚

## ğŸ€ Inner Class

å¦‚æœä¸€ä¸ªç±»å®šä¹‰åœ¨å¦ä¸€ä¸ªç±»çš„å†…éƒ¨ï¼Œè¿™ä¸ªç±»å°±æ˜¯ `Inner Class` ï¼š

```java
class Outer {
    class Inner {
        // å®šä¹‰äº†ä¸€ä¸ª Inner Class
    }
}
```

ä¸Šè¿°å®šä¹‰çš„ `Outer` æ˜¯ä¸€ä¸ªæ™®é€šç±»ï¼Œè€Œ `Inner` æ˜¯ä¸€ä¸ª Inner Classï¼Œå®ƒä¸æ™®é€šç±»æœ‰ä¸ªæœ€å¤§çš„ä¸åŒï¼Œå°±æ˜¯ Inner Class çš„å®ä¾‹ä¸èƒ½å•ç‹¬å­˜åœ¨ï¼Œå¿…é¡»ä¾é™„äºä¸€ä¸ª Outer Class çš„å®ä¾‹ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```java
public class Main {
    public static void main(String[] args) {
        Outer outer = new Outer("Nested"); // å®ä¾‹åŒ–ä¸€ä¸ª Outer
        Outer.Inner inner = outer.new Inner(); // å®ä¾‹åŒ–ä¸€ä¸ª Inner
        inner.hello();
    }
}

class Outer {
    private String name;

    Outer(String name) {
        this.name = name;
    }

    class Inner {
        void hello() {
            System.out.println("Hello," + Outer.this.name);
        }
    }
}
```

è§‚å¯Ÿä¸Šè¿°ä»£ç ï¼Œè¦å®ä¾‹åŒ–ä¸€ä¸ª `Inner`ï¼Œæˆ‘ä»¬å¿…é¡»é¦–å…ˆåˆ›å»ºä¸€ä¸ª `Outer` çš„å®ä¾‹ï¼Œç„¶åï¼Œè°ƒç”¨ `Outer` å®ä¾‹çš„ `new` æ¥åˆ›å»º `Inner` å®ä¾‹ï¼š

```java
Outer.Inner inner = outer.new Inner();
```

è¿™æ˜¯å› ä¸º Inner Class é™¤äº†æœ‰ä¸€ä¸ª `this` æŒ‡å‘å®ƒè‡ªå·±ï¼Œè¿˜éšå«åœ°æŒæœ‰ä¸€ä¸ª Outer Class å®ä¾‹ï¼Œå¯ä»¥ç”¨ `Outer.this` è®¿é—®è¿™ä¸ªå®ä¾‹ã€‚æ‰€ä»¥ï¼Œå®ä¾‹åŒ–ä¸€ä¸ª Inner Class ä¸èƒ½è„±ç¦» Outer å®ä¾‹ã€‚

Inner Class å’Œæ™®é€š Class ç›¸æ¯”ï¼Œé™¤äº†èƒ½å¼•ç”¨ Outer å®ä¾‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„ â€œç‰¹æƒâ€ï¼Œå°±æ˜¯å¯ä»¥ä¿®æ”¹ Outer Class çš„ `private` å­—æ®µï¼Œå› ä¸º Inner Class çš„ä½œç”¨åŸŸåœ¨ Outer Class å†…éƒ¨ï¼Œæ‰€ä»¥èƒ½è®¿é—® Outer Class çš„ `private` å­—æ®µå’Œæ–¹æ³•ã€‚

è§‚å¯Ÿ Java ç¼–è¯‘å™¨ç¼–è¯‘åçš„ `.class` æ–‡ä»¶å¯ä»¥å‘ç°ï¼ŒOuter ç±»è¢«ç¼–è¯‘ä¸º `Outer.class`ï¼Œè€Œ Inner ç±»è¢«ç¼–è¯‘ä¸º `Outer$Inner.class` ã€‚

## ğŸ€ Anonymous Class åŒ¿åç±»

è¿˜æœ‰ä¸€ç§å®šä¹‰ Inner Class çš„æ–¹æ³•ï¼Œå®ƒä¸éœ€è¦åœ¨ Outer Class ä¸­æ˜ç¡®åœ°å®šä¹‰è¿™ä¸ª Classï¼Œè€Œæ˜¯*åœ¨æ–¹æ³•å†…éƒ¨ï¼Œé€šè¿‡åŒ¿åç±»ï¼ˆAnonymous Classï¼‰æ¥å®šä¹‰*ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```java
public class Main {
    public static void main(String[] args) {
        Outer outer = new Outer("Nested");
        outer.asyncHello();
    }
}

class Outer {
    private String name;

    Outer(String name) {
        this.name = name;
    }

    void asyncHello() {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                System.out.println("Hello," + Outer.this.name);
            }
        };
        new Thread(r).start();
    }
}
```

è§‚å¯Ÿ `asyncHello()` æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨æ–¹æ³•å†…éƒ¨å®ä¾‹åŒ–äº†ä¸€ä¸ª `Runnable` ã€‚`Runnable` æœ¬èº«æ˜¯æ¥å£ï¼Œæ¥å£æ˜¯ä¸èƒ½å®ä¾‹åŒ–çš„ï¼Œæ‰€ä»¥è¿™é‡Œå®é™…ä¸Šæ˜¯å®šä¹‰äº†ä¸€ä¸ªå®ç°äº† `Runnable` æ¥å£çš„åŒ¿åç±»ï¼Œå¹¶ä¸”é€šè¿‡ `new` å®ä¾‹åŒ–è¯¥åŒ¿åç±»ï¼Œç„¶åè½¬å‹ä¸º `Runnable` ã€‚åœ¨å®šä¹‰åŒ¿åç±»çš„æ—¶å€™å°±å¿…é¡»å®ä¾‹åŒ–å®ƒï¼Œå®šä¹‰åŒ¿åç±»çš„å†™æ³•å¦‚ä¸‹ï¼š

```java
Runnable r = new Runnable() {
    // å®ç°å¿…è¦çš„æŠ½è±¡æ–¹æ³•...
};
```

åŒ¿åç±»å’Œ Inner Class ä¸€æ ·ï¼Œå¯ä»¥è®¿é—® Outer Class çš„ `private` å­—æ®µå’Œæ–¹æ³•ã€‚ä¹‹æ‰€ä»¥æˆ‘ä»¬è¦å®šä¹‰åŒ¿åç±»ï¼Œæ˜¯å› ä¸ºåœ¨è¿™é‡Œæˆ‘ä»¬é€šå¸¸ä¸å…³å¿ƒç±»åï¼Œæ¯”ç›´æ¥å®šä¹‰ Inner Class å¯ä»¥å°‘å†™å¾ˆå¤šä»£ç ã€‚

è§‚å¯Ÿ Java ç¼–è¯‘å™¨ç¼–è¯‘åçš„ `.class` æ–‡ä»¶å¯ä»¥å‘ç°ï¼Œ`Outer` ç±»è¢«ç¼–è¯‘ä¸º `Outer.class`ï¼Œè€ŒåŒ¿åç±»è¢«ç¼–è¯‘ä¸º `Outer$1.class` ã€‚å¦‚æœæœ‰å¤šä¸ªåŒ¿åç±»ï¼ŒJava ç¼–è¯‘å™¨ä¼šå°†æ¯ä¸ªåŒ¿åç±»ä¾æ¬¡å‘½åä¸º `Outer$1`ã€`Outer$2`ã€`Outer$3` â€¦â€¦

é™¤äº†æ¥å£å¤–ï¼Œ_åŒ¿åç±»ä¹Ÿå®Œå…¨å¯ä»¥ç»§æ‰¿è‡ªæ™®é€šç±»_ã€‚è§‚å¯Ÿä»¥ä¸‹ä»£ç ï¼š

```java
import java.util.HashMap;

public class Main {
    public static void main(String[] args) {
        HashMap<String, String> map1 = new HashMap<>();
        HashMap<String, String> map2 = new HashMap<>() {}; // åŒ¿åç±»!
        HashMap<String, String> map3 = new HashMap<>() {
            {
                put("A", "1");
                put("B", "2");
            }
        };
        System.out.println(map3.get("A"));
    }
}
```

`map1` æ˜¯ä¸€ä¸ªæ™®é€šçš„ `HashMap` å®ä¾‹ï¼Œä½† `map2` æ˜¯ä¸€ä¸ªåŒ¿åç±»å®ä¾‹ï¼Œåªæ˜¯è¯¥åŒ¿åç±»ç»§æ‰¿è‡ª `HashMap` ã€‚`map3` ä¹Ÿæ˜¯ä¸€ä¸ªç»§æ‰¿è‡ª `HashMap` çš„åŒ¿åç±»å®ä¾‹ï¼Œå¹¶ä¸”æ·»åŠ äº† `static` ä»£ç å—æ¥åˆå§‹åŒ–æ•°æ®ã€‚è§‚å¯Ÿç¼–è¯‘è¾“å‡ºå¯å‘ç° `Main$1.class` å’Œ `Main$2.class` ä¸¤ä¸ªåŒ¿åç±»æ–‡ä»¶ã€‚

## ğŸ€ Static Nested Class

æœ€åä¸€ç§å†…éƒ¨ç±»å’Œ Inner Class ç±»ä¼¼ï¼Œä½†æ˜¯ä½¿ç”¨ `static` ä¿®é¥°ï¼Œç§°ä¸ºé™æ€å†…éƒ¨ç±»ï¼ˆStatic Nested Classï¼‰ï¼š

```java
public class Main {
    public static void main(String[] args) {
        Outer.StaticNested sn = new Outer.StaticNested();
        sn.hello();
    }
}

class Outer {
    private static String NAME = "OUTER";

    private String name;

    Outer(String name) {
        this.name = name;
    }

    static class StaticNested {
        void hello() {
            System.out.println("Hello," + Outer.NAME);
        }
    }
}
```

ç”¨ `static` ä¿®é¥°çš„å†…éƒ¨ç±»å’Œ Inner Class æœ‰å¾ˆå¤§çš„ä¸åŒï¼Œå®ƒä¸å†ä¾é™„äº `Outer` çš„å®ä¾‹ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„ç±»ï¼Œå› æ­¤æ— æ³•å¼•ç”¨ `Outer.this`ï¼Œä½†å®ƒå¯ä»¥è®¿é—® `Outer` çš„ `private` é™æ€å­—æ®µå’Œé™æ€æ–¹æ³•ã€‚å¦‚æœæŠŠ `StaticNested` ç§»åˆ° `Outer` ä¹‹å¤–ï¼Œå°±å¤±å»äº†è®¿é—® `private` çš„æƒé™ã€‚

## ğŸ€ å°ç»“

Java çš„å†…éƒ¨ç±»å¯åˆ†ä¸º Inner Class ã€ Anonymous Class å’Œ Static Nested Class ä¸‰ç§ï¼š

- Inner Class å’Œ Anonymous Class æœ¬è´¨ä¸Šæ˜¯ç›¸åŒçš„ï¼Œéƒ½å¿…é¡»ä¾é™„äº Outer Class çš„å®ä¾‹ï¼Œå³éšå«åœ°æŒæœ‰ `Outer.this` å®ä¾‹ï¼Œå¹¶æ‹¥æœ‰ Outer Class çš„ `private` è®¿é—®æƒé™ï¼›
- Static Nested Class æ˜¯ç‹¬ç«‹ç±»ï¼Œä½†æ‹¥æœ‰ Outer Class çš„ `private` è®¿é—®æƒé™ã€‚
