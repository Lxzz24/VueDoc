---
title: BigDecimal*
sidebarDepth: 1
category: Java æ•™ç¨‹
tag: Java
---

::: details ç›®å½•
[[toc]]
:::

å’Œ `BigInteger` ç±»ä¼¼ï¼Œ`BigDecimal` å¯ä»¥ **_è¡¨ç¤ºä¸€ä¸ªä»»æ„å¤§å°ä¸”ç²¾åº¦å®Œå…¨å‡†ç¡®çš„æµ®ç‚¹æ•°_** ã€‚

```java
BigDecimal bd = new BigDecimal("123.4567");
System.out.println(bd.multiply(bd)); // 15241.55677489
```

`BigDecimal` ç”¨ `scale()` è¡¨ç¤ºå°æ•°ä½æ•°ï¼Œä¾‹å¦‚ï¼š

```java
BigDecimal d1 = new BigDecimal("123.45");
BigDecimal d2 = new BigDecimal("123.4500");
BigDecimal d3 = new BigDecimal("1234500");
System.out.println(d1.scale()); // 2, ä¸¤ä½å°æ•°
System.out.println(d2.scale()); // 4
System.out.println(d3.scale()); // 0
```

é€šè¿‡ `BigDecimal` çš„ `stripTrailingZeros()` æ–¹æ³•ï¼Œå¯ä»¥å°†ä¸€ä¸ª `BigDecimal` æ ¼å¼åŒ–ä¸ºä¸€ä¸ªç›¸ç­‰çš„ï¼Œä½†å»æ‰äº†æœ«å°¾ `0` çš„ `BigDecimal` ï¼š

```java
BigDecimal d1 = new BigDecimal("123.4500");
BigDecimal d2 = d1.stripTrailingZeros();
System.out.println(d1.scale()); // 4
System.out.println(d2.scale()); // 2, å› ä¸ºå»æ‰äº† 00

BigDecimal d3 = new BigDecimal("1234500");
BigDecimal d4 = d3.stripTrailingZeros();
System.out.println(d3.scale()); // 0
System.out.println(d4.scale()); // -2
```

å¦‚æœä¸€ä¸ª `BigDecimal` çš„ `scale()` è¿”å›è´Ÿæ•°ï¼Œä¾‹å¦‚ï¼Œ`-2`ï¼Œè¡¨ç¤ºè¿™ä¸ªæ•°æ˜¯ä¸ªæ•´æ•°ï¼Œå¹¶ä¸”æœ«å°¾æœ‰ 2 ä¸ª `0` ã€‚

å¯ä»¥å¯¹ä¸€ä¸ª `BigDecimal` è®¾ç½®å®ƒçš„ `scale`ï¼Œå¦‚æœç²¾åº¦æ¯”åŸå§‹å€¼ä½ï¼Œé‚£ä¹ˆæŒ‰ç…§æŒ‡å®šçš„æ–¹æ³•è¿›è¡Œå››èˆäº”å…¥æˆ–è€…ç›´æ¥æˆªæ–­ï¼š

```java
import java.math.BigDecimal;
import java.math.RoundingMode;
public class Main {
    public static void main(String[] args) {
        BigDecimal d1 = new BigDecimal("123.456789");
        BigDecimal d2 = d1.setScale(4, RoundingMode.HALF_UP); // å››èˆäº”å…¥ï¼Œ123.4568
        BigDecimal d3 = d1.setScale(4, RoundingMode.DOWN); // ç›´æ¥æˆªæ–­ï¼Œ123.4567
        System.out.println(d2);
        System.out.println(d3);
    }
}
```

å¯¹ `BigDecimal` åšåŠ ã€å‡ã€ä¹˜æ—¶ï¼Œç²¾åº¦ä¸ä¼šä¸¢å¤±ï¼Œä½†æ˜¯åšé™¤æ³•æ—¶ï¼Œå­˜åœ¨æ— æ³•é™¤å°½çš„æƒ…å†µï¼Œè¿™æ—¶ï¼Œå°±å¿…é¡»æŒ‡å®šç²¾åº¦ä»¥åŠå¦‚ä½•è¿›è¡Œæˆªæ–­ï¼š

```java
BigDecimal d1 = new BigDecimal("123.456");
BigDecimal d2 = new BigDecimal("23.456789");
BigDecimal d3 = d1.divide(d2, 10, RoundingMode.HALF_UP); // ä¿ç•™ 10 ä½å°æ•°å¹¶å››èˆäº”å…¥
BigDecimal d4 = d1.divide(d2); // æŠ¥é”™ï¼šArithmeticExceptionï¼Œå› ä¸ºé™¤ä¸å°½
```

è¿˜å¯ä»¥å¯¹ `BigDecimal` åšé™¤æ³•çš„åŒæ—¶æ±‚ä½™æ•°ï¼š

```java
import java.math.BigDecimal;
public class Main {
    public static void main(String[] args) {
        BigDecimal n = new BigDecimal("12.345");
        BigDecimal m = new BigDecimal("0.12");
        BigDecimal[] dr = n.divideAndRemainder(m);
        System.out.println(dr[0]); // 102
        System.out.println(dr[1]); // 0.105
    }
}
```

è°ƒç”¨ `divideAndRemainder()` æ–¹æ³•æ—¶ï¼Œè¿”å›çš„æ•°ç»„åŒ…å«ä¸¤ä¸ª `BigDecimal`ï¼Œåˆ†åˆ«æ˜¯å•†å’Œä½™æ•°ï¼Œå…¶ä¸­å•†æ€»æ˜¯æ•´æ•°ï¼Œä½™æ•°ä¸ä¼šå¤§äºé™¤æ•°ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ–¹æ³•åˆ¤æ–­ä¸¤ä¸ª `BigDecimal` æ˜¯å¦æ˜¯æ•´æ•°å€æ•°ï¼š

```java
BigDecimal n = new BigDecimal("12.75");
BigDecimal m = new BigDecimal("0.15");
BigDecimal[] dr = n.divideAndRemainder(m);
if (dr[1].signum() == 0) {
    // n æ˜¯ m çš„æ•´æ•°å€
}
```

## ğŸ€ æ¯”è¾ƒ BigDecimal

åœ¨æ¯”è¾ƒä¸¤ä¸ª `BigDecimal` çš„å€¼æ˜¯å¦ç›¸ç­‰æ—¶ï¼Œè¦ç‰¹åˆ«æ³¨æ„ï¼Œ**_ä½¿ç”¨ `equals()` æ–¹æ³•ä¸ä½†è¦æ±‚ä¸¤ä¸ª `BigDecimal` çš„å€¼ç›¸ç­‰ï¼Œè¿˜è¦æ±‚å®ƒä»¬çš„ `scale()` ç›¸ç­‰_** ï¼š

```java
BigDecimal d1 = new BigDecimal("123.456");
BigDecimal d2 = new BigDecimal("123.45600");
System.out.println(d1.equals(d2)); // false, å› ä¸º scale ä¸åŒ
System.out.println(d1.equals(d2.stripTrailingZeros())); // true, å› ä¸º d2 å»é™¤å°¾éƒ¨ 0 å scale å˜ä¸º 2
System.out.println(d1.compareTo(d2)); // 0
```

å¿…é¡»ä½¿ç”¨ `compareTo()` æ–¹æ³•æ¥æ¯”è¾ƒï¼Œå®ƒæ ¹æ®ä¸¤ä¸ªå€¼çš„å¤§å°åˆ†åˆ«è¿”å›è´Ÿæ•°ã€æ­£æ•°å’Œ `0`ï¼Œåˆ†åˆ«è¡¨ç¤ºå°äºã€å¤§äºå’Œç­‰äºã€‚

> [!caution]
> æ€»æ˜¯ä½¿ç”¨ `compareTo()` æ¯”è¾ƒä¸¤ä¸ª `BigDecimal` çš„å€¼ï¼Œä¸è¦ä½¿ç”¨ `equals()`ï¼

å¦‚æœæŸ¥çœ‹ `BigDecimal` çš„æºç ï¼Œå¯ä»¥å‘ç°ï¼Œå®é™…ä¸Šä¸€ä¸ª `BigDecimal` æ˜¯é€šè¿‡ä¸€ä¸ª `BigInteger` å’Œä¸€ä¸ª `scale` æ¥è¡¨ç¤ºçš„ï¼Œå³ `BigInteger` è¡¨ç¤ºä¸€ä¸ªå®Œæ•´çš„æ•´æ•°ï¼Œè€Œ `scale` è¡¨ç¤ºå°æ•°ä½æ•°ï¼š

```java
public class BigDecimal extends Number implements Comparable<BigDecimal> {
    private final BigInteger intVal;
    private final int scale;
}
```

`BigDecimal` ä¹Ÿæ˜¯ä» `Number` ç»§æ‰¿çš„ï¼Œä¹Ÿæ˜¯ä¸å¯å˜å¯¹è±¡ã€‚

## ğŸ€ å°ç»“

- `BigDecimal` ç”¨äºè¡¨ç¤ºç²¾ç¡®çš„å°æ•°ï¼Œå¸¸ç”¨äºè´¢åŠ¡è®¡ç®—ï¼›
- æ¯”è¾ƒ `BigDecimal` çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¿…é¡»ä½¿ç”¨ `compareTo()` è€Œä¸èƒ½ä½¿ç”¨ `equals()` ã€‚
