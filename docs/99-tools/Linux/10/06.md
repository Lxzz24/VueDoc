---
title: 
sidebarDepth: 0 
category: Tools 
tag: Linux
---
# ç®¡çº¿å‘½ä»¤ï¼ˆpipeï¼‰

bash å‘½ä»¤æ‰§è¡Œçš„æ—¶å€™æœ‰è¾“å‡ºæ•°æ®ï¼Œå¦‚æœè¿™ç¾¤æ•°æ®å¿…é¡»ç»è¿‡å‡ é“æ‰‹ç»­ä¹‹åæ‰èƒ½å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„æ ¼å¼ï¼Œè¿™å°±å¯ä»¥ä½¿ç”¨ç®¡çº¿å‘½ä»¤ï¼ˆpipeï¼‰æ¥å®Œæˆäº†

å‡è®¾æˆ‘ä»¬æƒ³çŸ¥é“ `/etc/` ä¸‹æœ‰å¤šå°‘æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ `ls /etc/` æ¥æŸ¥è¯¢ï¼Œä¸è¿‡å› ä¸ºæ–‡ä»¶å¤ªå¤šäº†ï¼Œè¾“å‡ºå æ»¡æ•´ä¸ªå±å¹•ï¼Œå¯¼è‡´æœ€å¼€å§‹æ˜¯ä»€ä¹ˆæ–‡ä»¶çœ‹ä¸åˆ°äº†ï¼Œè¿™å°±å¯ä»¥é€šè¿‡ç®¡çº¿å‘½ä»¤ç»“åˆ less æŒ‡ä»¤æ¥è¾¾æˆ

```bash
[mrcode@study ~]$ ls -al | less
```

å¦‚æ­¤ä¸€æ¥ï¼Œ `ls -al` æŒ‡ä»¤è¾“å‡ºåçš„å†…å®¹ï¼Œèƒ½å¤Ÿè¢« less è¯»å–ï¼Œå¹¶ä¸”åˆ©ç”¨ less çš„åŠŸèƒ½ï¼Œå¯ä»¥å‰åç¿»åŠ¨ç›¸å…³ä¿¡æ¯

ç®¡çº¿å‘½ä»¤**ä»…èƒ½å¤„ç†**ç”±å‰ä¸€ä¸ªæŒ‡ä»¤ä¼ æ¥çš„**æ­£ç¡®ä¿¡æ¯**ï¼ˆstandard outputï¼‰ï¼Œå¯¹äº standard error æ²¡æœ‰ç›´æ¥å¤„ç†çš„èƒ½åŠ›ï¼Œæ•´ä½“ç®¡çº¿å‘½ä»¤å¯ä»¥ä½¿ç”¨ä¸‹å›¾è¡¨ç¤º

![image-20191204232521041](./assets/image-20191204232521041.png)

åœ¨æ¯ä¸ªç®¡çº¿åé¢æ¥çš„ç¬¬ä¸€ä¸ªæ•°æ®å¿…å®šæ˜¯ã€ŒæŒ‡ä»¤ã€ï¼Œè€Œä¸”è¿™ä¸ªæŒ‡ä»¤å¿…é¡»èƒ½æ¥å— standard input çš„æ•°æ®æ‰å¯ä»¥ï¼Œè¿™æ ·çš„æŒ‡ä»¤åˆ™æ˜¯ã€Œç®¡çº¿å‘½ä»¤ã€ï¼Œä¾‹å¦‚ lessã€moreã€headã€tail ç­‰éƒ½æ˜¯å¯ä»¥æ¥å— standard input çš„ç®¡çº¿å‘½ä»¤ã€‚è€Œ lsã€cpã€mv ç­‰å°±ä¸æ˜¯ç®¡çº¿å‘½ä»¤äº†ï¼Œå› ä¸ºä»–ä»¬ä¸ä¸ä¼šæ¥å—æ¥è‡ª stdin çš„æ•°æ®ã€‚ç®¡çº¿å‘½ä»¤ä¸»è¦æœ‰ä¸¤ä¸ªæ¯”è¾ƒéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š

- ç®¡çº¿å‘½ä»¤ä»…ä¼šå¤„ç† standard output ï¼Œå¯¹äº standard error output ä¼šå¿½ç•¥
- ç®¡çº¿å‘½ä»¤å¿…é¡»è¦èƒ½æ¥å—æ¥è‡ªå‰ä¸€ä¸ªæŒ‡ä»¤çš„æ•°æ®æˆä¸º standard input ç»§ç»­å¤„ç†æ‰è¡Œ

å¦‚æœç¡¬è¦ standard error å¯ä»¥è¢«ç®¡çº¿å‘½ä»¤æ‰€ä½¿ç”¨å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼

```bash
2>&1   è®©æ ‡å‡†é”™è¯¯è¾“å‡ºè½¬æˆæ ‡å‡†è¾“å‡º
```

é‚£ä¹ˆä¸‹é¢æ¥ç©ä¸€äº›ç®¡çº¿å‘½ä»¤ï¼Œä»¥ä¸‹çŸ¥è¯†ç‚¹å¯¹ç³»ç»Ÿç®¡ç†è´¹ç”¨æœ‰ç”¨

## ğŸ€ æˆªå–å‘½ä»¤ cutã€grep

ç®€å•è¯´ï¼šå°†ä¸€æ®µæ—¶é—´ç»è¿‡åˆ†æåï¼Œå–å‡ºæˆ‘ä»¬æƒ³è¦çš„ã€‚æˆ–åˆ™æ˜¯ç»è¿‡ç”±åˆ†æå…³é”®è¯ï¼Œå–å¾—æˆ‘ä»¬æ‰€æƒ³è¦çš„é‚£ä¸€è¡Œã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆªå–ä¿¡æ¯é€šå¸¸æ˜¯é’ˆå¯¹ä¸€è¡Œä¸€è¡Œæ¥åˆ†æçš„ã€‚

### cut

```bash
cut -d 'åˆ†å‰²å­—ç¬¦' -f fields  # ç”¨äºæœ‰ç‰¹å®šåˆ†å‰²å­—ç¬¦
cut -c å­—ç¬¦åŒºé—´							 # ç”¨äºæ’åˆ—æ•´é½çš„ä¿¡æ¯
```

é€‰é¡¹ä¸å‚æ•°ï¼š

- dï¼šåé¢æ¥åˆ†å‰²å­—ç¬¦ã€‚ä¸ `-f` ä¸€èµ·ä½¿ç”¨
- fï¼šä¾æ® -d çš„åˆ†å‰²å­—ç¬¦å°†ä¸€æ®µä¿¡æ¯åˆ†åŒºæˆæ•°æ®µï¼Œç”¨ -f å–å‡ºç¬¬å‡ æ®µçš„æ„æ€
- cï¼šä»¥å­—ç¬¦ï¼ˆcharactersï¼‰çš„å•ä½å–å‡ºå›ºå®šå­—ç¬¦åŒºé—´

```bash
# èŒƒä¾‹ 1ï¼šå°† PATH å˜é‡å–å‡ºï¼Œæˆ‘è¦æ‰¾å‡ºç¬¬ 5 ä¸ªè·¯å¾„
[mrcode@study ~]$ echo ${PATH}
/usr/lib64/qt-3.3/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/mrcode/.local/bin:/home/mrcode/bin
# æ•°é‡æ˜¯ä» 1 å¼€å§‹ï¼Œä¸æ˜¯ä» 0 å“Ÿ
[mrcode@study ~]$ echo ${PATH} | cut -d ':' -f 5
/usr/sbin

# å–å‡ºç¬¬ 5 ä¸ªå’Œç¬¬ 6 ä¸ª
[mrcode@study ~]$ echo ${PATH} | cut -d ':' -f 5,6
/usr/sbin:/home/mrcode/.local/bin


# èŒƒä¾‹ 2 ï¼šå°† export è¾“å‡ºçš„ä¿¡æ¯ï¼Œå–å¾—ç¬¬ 12 å­—ç¬¦ä»¥åçš„æ‰€æœ‰å­—ç¬¦ä¸²
[mrcode@study ~]$ export
declare -x HISTCONTROL="ignoredups"
declare -x HISTSIZE="1000"
declare -x HOME="/home/mrcode"
declare -x HOSTNAME="study.centos.mrcode"
...

# ä»¥ä¸Šæ•°æ®æ¯ä¸ªéƒ½æ˜¯æ’åˆ—æ•´é½çš„ï¼Œæœ‰ç€ declare -x å‰ç¼€
# é‚£ä¹ˆæƒ³è¦æŠŠå‰ç¼€å»æ‰ï¼Œå°±å¯ä»¥è¿™æ ·åš
[mrcode@study ~]$ export | cut -c 12-
HISTCONTROL="ignoredups"
HISTSIZE="1000"
HOME="/home/mrcode"
# ä½¿ç”¨ 12-15 åˆ™æ˜¯æˆªå–å‡ºè¿™ä¸ªåŒºé—´çš„å­—ç¬¦
# ä½¿ç”¨ 12 åˆ™åªæˆªå– 12 è¿™ä¸ªå­—ç¬¦

# èŒƒä¾‹ 3 ï¼šç”¨ last å°†æ˜¾ç¤ºçš„ç™»é™†è€…ä¿¡æ¯ï¼Œä»…ç•™ä¸‹ç”¨æˆ·å
[mrcode@study ~]$ last
# è´¦æˆ· 		ç»ˆç«¯æœº					ç™»å½• IP					æ—¥æœŸæ—¶é—´						
mrcode   pts/1        192.168.0.105    Mon Dec  2 01:25   still logged in   
mrcode   pts/0        192.168.0.105    Mon Dec  2 01:25   still logged in   
mrcode   pts/1        192.168.0.105    Mon Dec  2 00:21 - 01:12  (00:51)  
# ç”¨ç©ºæ ¼åˆ†éš”çš„æ•°æ®ï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·åš
[mrcode@study ~]$ last | cut -d ' ' -f 1
mrcode
mrcode
mrcode
# å…¶å® è´¦æˆ·å’Œç»ˆç«¯æœºä¹‹é—´çš„ç©ºæ ¼æœ‰å¥½å‡ ä¸ªï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªæ‰€ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¹¶ä¸èƒ½æŠŠ ç»ˆç«¯æœºä¸€åˆ—ä¹Ÿæå–å‡ºæ¥
last | cut -d ' ' -f 1,2
```

cut ä¸»è¦çš„ç”¨é€”ï¼šå°†åŒä¸€è¡Œé‡Œé¢çš„æ•°æ®è¿›è¡Œåˆ†è§£

å¸¸ä½¿ç”¨åœ¨åˆ†æä¸€äº›æ•°æ®æˆ–æ–‡å­—æ•°æ®çš„æ—¶å€™ï¼Œå› ä¸ºæœ‰æ—¶å€™ä¼šä»¥æŸäº›å­—ç¬¦å½“åšåˆ†åŒºçš„å‚æ•°ï¼Œç„¶åå°†æ•°æ®åˆ‡å‰²ï¼Œä»¥å–å¾—æˆ‘ä»¬æ‰€éœ€è¦çš„æ•°æ®ï¼Œä½œè€…å¸¸å¸¸åœ¨åˆ†æ log æ–‡ä»¶çš„æ—¶å€™ï¼Œä½†æ˜¯ cut åœ¨å¤„ç†å¤šç©ºæ ¼ç›¸è¿çš„æ•°æ®æ—¶ï¼Œå°±æ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥æŸäº›å¸¸è§å¯èƒ½éœ€è¦ä½¿ç”¨ä¸‹ä¸€ç« èŠ‚è¦è®²è§£çš„ awk æ¥å–ä»£

### grep

cut æ˜¯å°†ä¸€è¡Œä¿¡æ¯ä¸­ï¼Œå–å‡ºæŸéƒ¨åˆ†æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ï¼Œè€Œ grep åˆ™æ˜¯åˆ†æä¸€å †ä¿¡æ¯ï¼Œè‹¥ä¸€è¡Œå½“ä¸­æœ‰åŒ¹é…çš„æ•°æ®ï¼Œåˆ™å°†è¿™ä¸€è¡Œæ•°æ®æ‹¿å‡ºæ¥

```bash
grep [-acinv] [--color=auto] 'æœç´¢çš„å­—ç¬¦ä¸²' filename
```

é€‰é¡¹ä¸å‚æ•°ï¼š

- aï¼šå°† binary æ–‡ä»¶ä»¥ text æ–‡ä»¶çš„æ–¹å¼æœç´¢æ•°æ®
- cï¼šè®¡ç®—æ‰¾åˆ°ã€Œæœç´¢å­—ç¬¦ã€çš„æ¬¡æ•°
- iï¼šå¿½ç•¥å¤§å°å†™
- nï¼šè¾“å‡ºè¡Œå·
- vï¼šåå‘é€‰æ‹©ï¼Œæ˜¾ç¤ºå‡ºæ²¡æœ‰æœç´¢å­—ç¬¦ä¸²çš„é‚£ä¸€è¡Œæ•°æ®
- `--color`ï¼šå¯ä»¥å°†æ‰¾åˆ°çš„å…³é”®è¯éƒ¨åˆ†åŠ ä¸Šé¢œè‰²æ˜¾ç¤º

```bash
# èŒƒä¾‹ 1ï¼šå°† last ä¸­ï¼Œæœ‰å‡ºç° root çš„é‚£ä¸€è¡Œæ‰¾å‡ºæ¥
[mrcode@study ~]$ last | grep 'root'
root     tty3                          Sun Oct  6 23:16 - crash  (22:40)    
root     tty4                          Fri Oct  4 22:48 - 22:48  (00:00)  
# ä¼šå‘ç° root è¢«é«˜äº®é¢œè‰²äº†ï¼Œæˆ‘ä»¬æ—¶å€™ type å‘½ä»¤æŸ¥çœ‹ï¼Œå‘ç°è¢«è‡ªåŠ¨åŠ ä¸Šäº† color å‚æ•°
[mrcode@study ~]$ type grep
grep is aliased to 'grep --color=auto'

# èŒƒä¾‹ 2ï¼šä¸ èŒƒä¾‹ 1 ç›¸åï¼Œä¸è¦ root çš„æ•°æ®
[mrcode@study ~]$ last | grep -v 'root'
mrcode   pts/1        192.168.0.105    Mon Dec  2 01:25   still logged in   
mrcode   pts/0        192.168.0.105    Mon Dec  2 01:25   still logged in   
mrcode   pts/1        192.168.0.105    Mon Dec  2 00:21 - 01:12  (00:51)
reboot   system boot  3.10.0-1062.el7. Fri Oct  4 18:47 - 03:43  (08:56)

# èŒƒä¾‹ 3ï¼šåœ¨ last çš„è¾“å‡ºä¿¡æ¯ä¸­ï¼Œåªè¦æœ‰ root å°±å–å‡ºï¼Œå¹¶ä¸”åªå–ç¬¬ä¸€æ 
# ç»“åˆ cut å‘½ä»¤å–å‡ºç¬¬ä¸€æ 
[mrcode@study ~]$ last | grep 'root' | cut -d ' ' -f 1
root
root

# èŒƒä¾‹ 4ï¼šå–å‡º /etc/man_db.conf å†…æ¶µ MANPATH çš„é‚£å‡ è¡Œ
[mrcode@study ~]$ grep 'MANPATH' /etc/man_db.conf
# MANDATORY_MANPATH                     manpath_element
# MANPATH_MAP           path_element    manpath_element

```

grep æ”¯æŒçš„è¯­æ³•å¾ˆå¤šï¼Œç”¨åœ¨æ­£è§„è¡¨ç¤ºæ³•é‡Œï¼Œèƒ½å¤Ÿå¤„ç†çš„æ•°æ®å¤ªå¤šã€‚ä½†æ˜¯è¿™é‡Œå…ˆä¸äº†è§£æ­£è§„è¡¨ç¤ºæ³•ï¼Œä¸‹ä¸€ç« å†æ¥è®²è§£

è¿™é‡Œåªéœ€è¦äº†è§£ä¸‹ï¼Œgrep å¯ä»¥è§£æä¸€è¡Œæ–‡å­—ï¼Œå–å¾—å…³é”®è¯ï¼Œè‹¥æ”¹è¡Œæœ‰å­˜åœ¨å…³é”®è¯ï¼Œå°±ä¼šæ•´è¡Œå–å‡ºæ¥

## ğŸ€ æ’åºå‘½ä»¤ï¼šsortã€wcã€uniq

### sort

å¯ä»¥ä¾æ®ä¸åŒçš„æ•°æ®å½¢æ€æ¥æ’åºã€‚ä¾‹å¦‚æ•°å­—ä¸æ–‡å­—çš„æ’åºä¸ä¸€æ ·ï¼Œå¦å¤–ï¼Œæ’åºçš„å­—ç¬¦ä¸è¯­ç³»çš„ç¼–ç æœ‰å…³ï¼Œå› æ­¤ï¼Œå¦‚æœéœ€è¦æ’åºæ—¶ï¼Œå»ºè®®ä½¿ç”¨ LANG=C æ¥è®©è¯­ç³»ç»Ÿä¸€ï¼Œæ•°æ®æ’åºæ¯”è¾ƒå¥½ä¸€äº›

```bash
sort [-fbMnrtuk] [file or stdin]
```

é€‰é¡¹ä¸å‚æ•°ï¼š

- fï¼šå¿½ç•¥å¤§å°å†™çš„å·®å¼‚
- bï¼šå¿½ç•¥æœ€å‰é¢çš„ç©ºæ ¼ç¬¦
- Mï¼šä»¥æœˆä»½çš„åå­—æ¥æ’åºï¼Œä¾‹å¦‚ JANã€DEC ç­‰æ’åºæ–¹æ³•
- nï¼šä½¿ç”¨çº¯æ•°å­—è¿›è¡Œæ’åºï¼Œé»˜è®¤æ˜¯ä»¥æ–‡å­—å½¢æ€æ¥æ’åº
- rï¼šåå‘æ’åº
- uï¼šuniqï¼Œç›¸åŒçš„æ•°æ®ä¸­ï¼Œä»…å‡ºç°ä¸€è¡Œä»£è¡¨ï¼Œä¹Ÿå°±æ˜¯å»é‡
- tï¼šåˆ†éš”ç¬¦ï¼Œé¢„è®¾ä½¿ç”¨ ã€Œtabã€æ¥åˆ†å‰²
- kï¼šä»¥é‚£ä¸ªåŒºé—´ï¼ˆfieldï¼‰æ¥è¿›è¡Œæ’åº

```bash
# èŒƒä¾‹ 1ï¼šä¸ªäººè´¦æˆ·éƒ½è®°å½•åœ¨ /etc/passwd ä¸‹ï¼Œå°†è´¦æˆ·è¿›è¡Œæ’åº
[mrcode@study ~]$ cat /etc/passwd | sort
abrt:x:173:173::/etc/abrt:/sbin/nologin
adm:x:3:4:adm:/var/adm:/sbin/nologin
avahi:x:70:70:Avahi mDNS/DNS-SD Stack:/var/run/avahi-daemon:/sbin/nologin
bin:x:1:1:bin:/bin:/sbin/nologin
chrony:x:993:990::/var/lib/chrony:/sbin/nologin
# å¯ä»¥çœ‹åˆ°æŒ‰å­—ç¬¦æ’åºäº†

# èŒƒä¾‹ 2ï¼š/etc/passwd å†…å®¹æ˜¯ä»¥ : æ¥åˆ†å‰²çš„ï¼Œæƒ³ä½¿ç”¨ç¬¬ä¸‰æ è¿›è¡Œæ’åº
[mrcode@study ~]$ cat /etc/passwd | sort -t ':' -k 3
root:x:0:0:root:/root:/bin/bash
mrcode:x:1000:1000:mrcode:/home/mrcode:/bin/bash
qemu:x:107:107:qemu user:/:/sbin/nologin
operator:x:11:0:operator:/root:/sbin/nologin
# ç¬¬ä¸‰æ æ˜¯æ•°å­—ï¼Œä½†æ˜¯è¿™é‡Œå¹¶æ²¡æœ‰æŒ‰æ•°å­—å¤§å°æ¥æ’åºï¼Œå› ä¸ºé»˜è®¤ä½¿ç”¨æ–‡å­—æ’åº
# ä¸æ•°å€¼å¤§å°è¿›è¡Œæ’åº
[mrcode@study ~]$ cat /etc/passwd | sort -t ':' -k 3 -n
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin
adm:x:3:4:adm:/var/adm:/sbin/nologin
lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin

# èŒƒä¾‹ 3ï¼šåˆ©ç”¨ last ï¼Œå°†è¾“å‡ºçš„æ•°æ®ä»…å–è´¦æˆ·ï¼Œå¹¶æ’åº
[mrcode@study ~]$ last | cut -d ' ' -f 1 | sort

mrcode
mrcode

```

### uniq

```bash
uniq [-ic]
- iï¼šå¿½ç•¥å¤§å°å†™
- cï¼šè¿›è¡Œè®¡æ•°
```

å®è·µç»ƒä¹ 

```bash
# èŒƒä¾‹ 1ï¼š ä½¿ç”¨ last å°†è´¦æˆ·åˆ—å‡ºï¼Œä»…å–å‡ºè´¦æˆ·ï¼Œæ’åºåå»é‡
[mrcode@study ~]$ last | cut -d ' ' -f 1 | sort | uniq

mrcode
reboot
root
wtmp

# èŒƒä¾‹ 2ï¼šä»¥ä¸Šé¢˜ï¼Œç»Ÿè®¡æ¯ä¸ªè´¦æˆ·ç™»å½•çš„æ€»æ¬¡æ•°
[mrcode@study ~]$ last | cut -d ' ' -f 1 | sort | uniq -c
      1
    136 mrcode
     19 reboot
      2 root
      1 wtmp

# ç¬¬ä¸€è¡Œå’Œ wtmp æ˜¯ last çš„é»˜è®¤å­—ç¬¦ï¼Œå¯ä»¥å¿½ç•¥
```

### wc

wc å¯ä»¥è®¡ç®—è¾“å‡ºçš„ä¿¡æ¯ã€‚æ¯”å¦‚ï¼š/etc/man_db.conf è¿™ä¸ªæ–‡ä»¶é‡Œé¢æœ‰å¤šå°‘å­—ï¼Ÿå¤šå°‘è¡Œï¼Ÿ

```bash
wc [-lwm]

-lï¼šä»…åˆ—å‡ºè¡Œ
-wï¼šä»…åˆ—å‡ºå¤šå°‘å­—ï¼ˆè‹±æ–‡å•å­—ï¼‰
-mï¼šå¤šå°‘å­—ç¬¦
```

```bash
# èŒƒä¾‹ 1ï¼š/etc/man_db.conf è¿™ä¸ªæ–‡ä»¶é‡Œé¢æœ‰å¤šå°‘å­—
[mrcode@study ~]$ cat  /etc/man_db.conf | wc
	   è¡Œ     å­—æ•°	   å­—ç¬¦æ•°
    131     723    5171

# èŒƒä¾‹ 2ï¼šlast å¯ä»¥è¾“å‡ºç™»é™†è€…ï¼Œä½†æ˜¯ last æœ€åä¸¤è¡Œå¹¶éè´¦æˆ·å†…å®¹ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•ä»¥ä¸€è¡ŒæŒ‡ä»¤å–å¾—ç™»å½•ç³»ç»Ÿçš„æ€»äººæ¬¡ï¼Ÿ
last | grep [a-zA-Z] | grep -v 'wtmp' | grep -v 'reboot' | grep -v 'unknown' | wc -l
138
# grep æ­£åˆ™åŒ¹é…ï¼Œæ’é™¤äº†éè‹±æ–‡å­—ç¬¦çš„è´¦æˆ·
# grep -v åå‘é€‰æ‹©ï¼Œç›¸å½“äºæ’é™¤äº†æŒ‡å®šçš„è´¦æˆ·
# æœ€åä½¿ç”¨ wc ç»Ÿè®¡è¡Œæ•°
```

## ğŸ€ åŒå‘é‡å¯¼å‘ï¼štee

å‰ä¸€èŠ‚è®²è§£åˆ° > ä¼šå°†æ•°æ®æµæ•´ä¸ªæ “é€ç»™æ–‡ä»¶æˆ–è£…ç½®ï¼Œå› æ­¤é™¤éå»è¯»å–è¯¥æ–‡ä»¶æˆ–è£…ç½®ï¼Œé‚£ä¹ˆå¦‚æœæƒ³è¦å°†æ•´ä¸ªæš‘å‡æµçš„å¤„ç†è¿‡ç¨‹ä¸­å°†æŸæ®µä¿¡æ¯å­˜ä¸‹æ¥è¯¥æ€ä¹ˆåšï¼Ÿå°±å¯ä»¥ä½¿ç”¨ tree

```bash
Standard input   ------> tee --------> Screen
												  â†“
												 file
# æµç¨‹å¦‚ä¸Š
```

tee ä¼šåŒæ—¶å°†æ•°æ®æµåˆ†é€åˆ°æ–‡ä»¶ä¸å±å¹•ï¼Œè€Œè¾“å‡ºåˆ°å±å¹•çš„å…¶å®å°±æ˜¯ stdoutï¼Œé‚£ä¹ˆå°±å¯ä»¥è®©æŒ‡ä»¤ç»§ç»­å¤„ç†

```bash
tee [-a] file
- aï¼šä»¥ç´¯åŠ ï¼ˆappendï¼‰çš„æ–¹å¼ï¼Œå°†æ•°æ®åŠ å…¥ file ä¸­
```

```bash
# å°† last å†…å®¹è¾“å‡ºåˆ° last.list æ–‡ä»¶ä¸­ï¼Œå¹¶ç»§ç»­å¤„ç†
[mrcode@study ~]$ last | tee last.list | cut -d " " -f 1

# å°† ls æ•°æ®å­˜ä¸€åˆ†åˆ° ~/homefile åŒæ—¶å±å¹•ä¹Ÿè¾“å‡ºä¿¡æ¯
[mrcode@study ~]$ ls -l /home/ | tee ~/hoefile | more

```

## ğŸ€ å­—ç¬¦è½¬æ¢å‘½ä»¤ï¼štrã€colã€joinã€pasteã€expand

åœ¨ vim ç¨‹åºç¼–è¾‘å™¨ä¸­æåˆ°è¿‡ DOS æ¢è¡Œç¬¦ä¸ Unix ä¸ä¸€æ ·ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨ dos2unix ä¸ unix2dos æ¥å®Œæˆè½¬æ¢ã€‚

é‚£ä¹ˆæ€è€ƒä¸‹ï¼Œæ˜¯å¦è¿˜æœ‰å…¶ä»–çš„å­—ç¬¦è½¬æ¢å‘½ä»¤ï¼Œæ¯”å¦‚ï¼šå°†å¤§å†™æ”¹æˆå°å†™ã€å°†æ•°æ®ä¸­çš„ tab è½¬æˆç©ºæ ¼ã€å¦‚ä½•å°†ä¸¤ç¯‡ä¿¡æ¯æ•´åˆæˆä¸€ç¯‡ï¼Ÿ

### trï¼šæ­£åˆ™æ›¿æ¢æˆ–åˆ é™¤å­—ç¬¦

tr å¯ä»¥ç”¨æ¥åˆ é™¤ä¸€æ®µä¿¡æ¯ä¸­çš„æ–‡å­—ï¼Œæˆ–åˆ™æ˜¯è¿›è¡Œæ–‡å­—ä¿¡æ¯çš„æ›¿æ¢

```bash
tr [-ds] SET1 ...

-dï¼šåˆ é™¤ä¿¡æ¯å½“ä¸­çš„ SET1 è¿™ä¸ªå­—ç¬¦ä¸²
-sï¼šæ›¿æ¢é‡å¤çš„å­—ç¬¦
```

```bash
# èŒƒä¾‹ 1ï¼šå°† last è¾“å‡ºçš„ä¿¡æ¯ä¸­ï¼ŒåŸæœ‰çš„å°å†™å˜æˆå¤§å†™å­—ç¬¦
[mrcode@study ~]$ last | tr '[a-z]' '[A-Z]'
MRCODE   PTS/1        192.168.0.105    MON DEC  2 07:00   STILL LOGGED IN

# èŒƒä¾‹ 2ï¼šå°† /etc/passwd è¾“å‡ºçš„ä¿¡æ¯ä¸­ï¼Œå°†å†’å· : åˆ é™¤
[mrcode@study ~]$ cat /etc/passwd | tr -d ':'
rootx00root/root/bin/bash

# èŒƒä¾‹ 3ï¼šå°† /etc/passwd è½¬æˆ dos æ¢è¡Œåˆ° ~/passwd ä¸­ï¼Œå†å°† ^M ç¬¦å·åˆ é™¤
# ç”±äºæˆ‘è¿™é‡Œæ²¡æœ‰å®‰è£… unix2dos è¿™é‡Œæ— æ³•å®é™…æ¼”ç¤º
cp /etc/passwd ~/passwd && unix2dos ~/passwd
file /etc/passwd ~/passwd
cat ~/passwd | tr -d '\r' > ~/passwd.linux
# \r æ˜¯ dos çš„æ¢è¡Œç¬¦
ll /etc/passwd ~/passwd*
# å°±ä¼šå‘ç°å¤„ç†ä¹‹åå’Œæºæ–‡ä»¶ä¸€æ ·å¤§å°äº†
# æœ¬ä¾‹å­æ˜¯ï¼šå°† unix è½¬æˆ dosï¼Œ/n è½¬æˆäº† /r/n ï¼Œç„¶åä½¿ç”¨ tr å‘½ä»¤å°† /r åˆ é™¤äº†ï¼Œç›¸å½“äºåˆè¿˜åŸäº†

#é‚£ä¹ˆç»è¿‡ä¸Šé¢çš„åˆ†æä¹‹åï¼Œå…¶å®è½¬æ¢ç¨‹åºå°±æ˜¯è½¬æ¢äº†æ¢è¡Œç¬¦ï¼Œé‚£ä¹ˆå¯ä»¥åˆ©ç”¨ tr æ‰‹åŠ¨æ¥å®Œæˆè½¬æ¢
[mrcode@study ~]$ cp /etc/passwd ~/passwd
[mrcode@study ~]$ file /etc/passwd ~/passwd
/etc/passwd:         ASCII text
/home/mrcode/passwd: ASCII text
# å°† unix æ¢è¡Œç¬¦ \n æ›¿æ¢æˆ dos æ¢è¡Œç¬¦ \r\n
[mrcode@study ~]$ cat passwd | tr '\n' '\r\n' > passwd.dos
[mrcode@study ~]$ file passwd*
passwd:     ASCII text
passwd.dos: ASCII text, with CR line terminators		# å¯ä»¥çœ‹åˆ°å·²ç»å˜äº†
# å†å°† \r åˆ æ‰
[mrcode@study ~]$ cat passwd | tr -d '\r' > passwd.linux
[mrcode@study ~]$ file passwd*
passwd:       ASCII text
passwd.dos:   ASCII text, with CR line terminators
passwd.linux: ASCII text

```

è¯¥æŒ‡ä»¤ä¹Ÿå¯ä»¥å†™åœ¨æ­£è§„è¡¨ç¤ºæ³•é‡Œé¢ï¼Œå› ä¸ºä»–ä¹Ÿæ˜¯ç”±æ­£è§„è¡¨ç¤ºæ³•çš„æ–¹å¼æ¥å–ä»£æ•°æ®çš„ï¼Œæ¯”å¦‚ä¸Šé¢ä½¿ç”¨ `[]` æ¥è®¾ç½®å­—ç¬¦ï¼Œé€šå¸¸ç”¨æ¥å–ä»£æ–‡ä»¶ä¸­çš„æ€ªå¼‚ç¬¦å·ã€‚

### colï¼šå°† tab è½¬æ¢æˆå¯¹ç­‰çš„ç©ºæ ¼

```bash
col [-xb]

-x:å°† tab é”®è½¬æ¢æˆå¯¹ç­‰çš„ç©ºæ ¼é”®
```

```bash
# èŒƒä¾‹ ï¼š åˆ©ç”¨ cat -A æ˜¾ç¤ºå‡ºæ‰€æœ‰çš„ç‰¹æ®ŠæŒ‰é”®ï¼Œæœ€åä»¥ col å°† tab è½¬æˆç©ºç™½
[mrcode@study ~]$ cat -A /etc/man_db.conf
MANDATORY_MANPATH^I^I^Imanpath_element$		# ^I çš„ç¬¦å·å°±æ˜¯ tab

[mrcode@study ~]$ cat /etc/man_db.conf | col -x | cat -A | more
MANDATORY_MANPATH                      /usr/src/pvm3/man$

```

è™½ç„¶ col æœ‰ç‰¹æ®Šçš„ç”¨é€”ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™å¯ä»¥ç”¨æ¥ç®€å•çš„å°† tab å–ä»£ä¸ºç©ºæ ¼é”®ï¼Œå¹¶ä¸”å¯ä»¥å–ä»£ä¼šå¯¹ç­‰å®½åº¦çš„ç©ºæ ¼

### joinï¼šåˆå¹¶ä¸¤ä¸ªæ–‡ä»¶ä¸­ç›¸åŒè¡Œçš„æ•°æ®

```bash
join [-ti12] file1 file2
```

é€‰é¡¹ä¸å‚æ•°ï¼š

- tï¼šjoin é»˜è®¤ä»¥ç©ºæ ¼ç¬¦åˆ†å‰²æ•°æ®ï¼Œå¹¶ä¸”æ¯”å¯¹ã€Œç¬¬ä¸€ä¸ªå­—æ®µã€çš„æ•°æ®ï¼Œå¦‚æœä¸¤ä¸ªæ–‡ä»¶ç›¸åŒï¼Œåˆ™å°†ä¸¤ç¬”æ•°æ®è¿åŸä¸€è¡Œï¼Œä¸”ç¬¬ä¸€ä¸ªå­—æ®µæ”¾åœ¨ç¬¬ä¸€ä¸ª
- iï¼šå¿½ç•¥å¤§å°å†™
- 1ï¼šæ•°å€¼ 1ï¼Œä»£è¡¨ã€Œç¬¬ä¸€ä¸ªæ–‡ä»¶è¦ç”¨å“ªä¸ªå­—æ®µæ¥åˆ†æã€
- 2ï¼šæ•°å€¼ 2ï¼Œä»£è¡¨ã€Œç¬¬äºŒä¸ªæ–‡ä»¶è¦ç”¨å“ªä¸ªå­—æ®µæ¥åˆ†æã€

```bash
# èŒƒä¾‹ 1ï¼šç”¨ root èº«ä»½ï¼Œå°† /etc/passwd ä¸ /etc/shadow ç›¸å…³æ•°æ®æ•´åˆæˆä¸€æ 
[root@study ~]# head -n 3 /etc/passwd /etc/shadow
==> /etc/passwd <==
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin

==> /etc/shadow <==
root:$6$oTg/fYGfv9/GIl6h$UEcmYlRZacV757rHtXlvmu5xH5TWGfqd3eDOEotB3CAc5mcW5UEoMTSg0pDICd/sYGrEScsHQY9tYZY0FGkKS1::0:99999:7:::
bin:*:17834:0:99999:7:::
daemon:*:17834:0:99999:7:::
# è¾“å‡ºçš„ä¿¡æ¯æ¥çœ‹ï¼Œæœ€å·¦è¾¹çš„çš„è´¦æˆ·æœ‰ç›¸åŒçš„è´¦æˆ·ï¼Œä¸”ä»¥ : åˆ†å‰²

[root@study ~]# join -t ':' /etc/passwd /etc/shadow | head -n 3
# çœ‹åˆ°äº†å—ï¼Œä½œç”¨å°±æ˜¯å°†æŸä¸ªå­—æ®µçš„æ•°æ®åˆå¹¶æˆä¸€æ®µ
root:x:0:0:root:/root:/bin/bash:$6$oTg/fYGfv9/GIl6h$UEcmYlRZacV757rHtXlvmu5xH5TWGfqd3eDOEotB3CAc5mcW5UEoMTSg0pDICd/sYGrEScsHQY9tYZY0FGkKS1::0:99999:7:::
bin:x:1:1:bin:/bin:/sbin/nologin:*:17834:0:99999:7:::
daemon:x:2:2:daemon:/sbin:/sbin/nologin:*:17834:0:99999:7:::

# èŒƒä¾‹ 2ï¼š/etc/passwd ç¬¬å››ä¸ªå­—æ®µæ˜¯ GIDï¼Œ/etc.group çš„ç¬¬ä¸‰ä¸ªå­—æ®µæ˜¯ GID ,é‚£ä¹ˆå¦‚ä½•å°†ä¸¤ä¸ªæ–‡ä»¶åˆå¹¶ï¼Ÿ
[root@study ~]# head -n 3 /etc/passwd /etc/group
==> /etc/passwd <==
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin

==> /etc/group <==
root:x:0:
bin:x:1:
daemon:x:2:

# ä¸‹é¢ä¸¤ç§å†™æ³•ä¸€è‡´
join -t ':' -1 4 -2 3 /etc/passwd /etc/group | head -n 3
join -t ':' -1 4 /etc/passwd -2 3 /etc/group | head -n
# æŠ¥é”™äº†ï¼Œæç¤ºæ²¡æœ‰æ’åºè¿‡ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨æ—¶è¦å…ˆå¯¹å†…å®¹æ’åºï¼Œè¿™æ ·æ‰èƒ½åˆå¹¶ä¸¤è¡Œæ•°æ®
join: /etc/passwd:6: is not sorted: sync:x:5:0:sync:/sbin:/bin/sync
join: /etc/group:11: is not sorted: wheel:x:10:mrcode
# çœ‹ä¸‹é¢è¢«æ•´åˆçš„å†…å®¹
0:root:x:0:root:/root:/bin/bash:root:x:
1:bin:x:1:bin:/bin:/sbin/nologin:bin:x:
2:daemon:x:2:daemon:/sbin:/sbin/nologin:daemon:x:

```

### pasteï¼šå°†ä¸¤è¡Œè´´åœ¨ä¸€èµ·

å°†ä¸¤è¡Œè´´åœ¨ä¸€èµ·ï¼Œä¸”ä¸­é—´ä»¥ tab éš”å¼€

```bash
paste [-d] file1 file2

-dï¼šåé¢å¯ä»¥æ¥åˆ†å‰²ç¬¦ã€‚é»˜è®¤ä»¥ tab æ¥åˆ†å‰²
- ï¼šå¦‚æœ file éƒ¨åˆ†å†™æˆ -ï¼Œè¡¨ç¤ºæ¥è‡ª standard input
```

```bash
# èŒƒä¾‹ 1ï¼šç”¨ root èº«ä»½ï¼Œå°† /etc/passwd ä¸ /etc/shadow åŒä¸€è¡Œè´´åœ¨ä¸€èµ·
[root@study ~]# paste /etc/passwd /etc/shadow | head -n 3
root:x:0:0:root:/root:/bin/bash root:$6$oTg/fYGfv9/GIl6h$UEcmYlRZacV757rHtXlvmu5xH5TWGfqd3eDOEotB3CAc5mcW5UEoMTSg0pDICd/sYGrEScsHQY9tYZY0FGkKS1::0:99999:7:::
bin:x:1:1:bin:/bin:/sbin/nologin        bin:*:17834:0:99999:7:::
daemon:x:2:2:daemon:/sbin:/sbin/nologin daemon:*:17834:0:99999:7:::

# èŒƒä¾‹ 2ï¼šå…ˆå°† /etc/group ç”¨ cat è¯»å‡ºï¼Œç„¶åä¸èŒƒä¾‹ 1 è´´åœ¨ä¸€èµ·ï¼Œä¸”ä»…å–å‡ºå‰ä¸‰è¡Œ
# paset æ–‡ä»¶éƒ¨åˆ†å¯ä»¥æ˜¯å¤šä¸ªï¼Œè¿™é‡Œæœ€åä¸€ä¸ªæ–‡ä»¶ä½¿ç”¨äº† -ï¼Œä¹Ÿå°±æ˜¯ cat /cat/etc/group
[root@study ~]# cat /etc/group | paste /etc/passwd /etc/shadow - | head -n 3
root:x:0:0:root:/root:/bin/bash root:$6$oTg/fYGfv9/GIl6h$UEcmYlRZacV757rHtXlvmu5xH5TWGfqd3eDOEotB3CAc5mcW5UEoMTSg0pDICd/sYGrEScsHQY9tYZY0FGkKS1::0:99999:7:::       root:x:0:
bin:x:1:1:bin:/bin:/sbin/nologin        bin:*:17834:0:99999:7:::        bin:x:1:
daemon:x:2:2:daemon:/sbin:/sbin/nologin daemon:*:17834:0:99999:7:::     daemon:x:2:

```

### expandï¼šå°† tab è½¬æˆç©ºæ ¼

```bash
expand [-t] file

-tï¼šåé¢å¯ä»¥æ¥æ•°å­—ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ª tab å¯ä»¥ç”¨ 8 ä¸ªç©ºæ ¼å–ä»£ï¼Œè¿™é‡Œè‡ªå®šä¹‰å‡ ä¸ªç©ºæ ¼å–ä»£
```

```bash
# èŒƒä¾‹ 1ï¼šå°† /etc/man_db.conf å†…è¡Œé¦–ä¸º MANPATH çš„å­—æ ·å–å‡ºï¼Œä»…å–å‰ä¸‰è¡Œ
[root@study ~]# grep '^MANPATH' /etc/man_db.conf | head -n 3
MANPATH_MAP     /bin                    /usr/share/man
MANPATH_MAP     /usr/bin                /usr/share/man
MANPATH_MAP     /sbin                   /usr/share/man
# è¡Œé¦–æ­£åˆ™ä¸º ^,ä¸‹æ¥è®²è§£

# èŒƒä¾‹ 2ï¼šæ‰¿ä¸Šï¼Œå°†æ‰€æœ‰çš„ç¬¦å·éƒ½åˆ—å‡ºæ¥
[root@study ~]# grep '^MANPATH' /etc/man_db.conf | head -n 3 | cat -A
MANPATH_MAP^I/bin^I^I^I/usr/share/man$
MANPATH_MAP^I/usr/bin^I^I/usr/share/man$
MANPATH_MAP^I/sbin^I^I^I/usr/share/man$
# ^I æ˜¯ tab

# èŒƒä¾‹ 3ï¼šæ‰¿ä¸Šï¼Œå°† tab è½¬æˆ 6 ä¸ªç©ºæ ¼
[root@study ~]# grep '^MANPATH' /etc/man_db.conf | head -n 3 | expand -t 6 | cat -A
MANPATH_MAP /bin              /usr/share/man$
MANPATH_MAP /usr/bin          /usr/share/man$
MANPATH_MAP /sbin             /usr/share/man$
# å¯ä»¥çœ‹åˆ° tab è¢«æ›¿æ¢æˆç©ºæ ¼äº†
```

æœ‰ä¸€ä¸ªéœ€è¦ç‰¹åˆ«æ³¨æ„ï¼štab æœ€å¤§åŠŸèƒ½å°±æ˜¯æ ¼å¼æ’åˆ—æ•´é½ï¼Œä½†æ˜¯æ¢æˆç©ºæ ¼ä¹‹åï¼Œå°±ä¸ä¸€å®šæ˜¯æ’åˆ—æ•´é½çš„äº†ï¼Œä¹Ÿå¯ä»¥å‚è€ƒä¸€ä¸‹  unexpand è¿™ä¸ªå°†ç©ºç™½è½¬æˆ tab çš„æŒ‡ä»¤

```bash
[root@study ~]# grep '^MANPATH' /etc/man_db.conf | head -n 3 | expand -t 6 | unexpand -t 6 | cat -A
MANPATH_MAP /bin^I^I^I/usr/share/man$
MANPATH_MAP /usr/bin^I^I/usr/share/man$
MANPATH_MAP /sbin^I^I^I/usr/share/man$
# å¯ä»¥çœ‹åˆ°ï¼ŒèŒƒä¾‹ 3 çš„è¿˜å¯ä»¥è¢« unexpand ç»™è½¬æ¢å›æ¥
```

## ğŸ€ åˆ†åŒºå‘½ä»¤ï¼šsplit

split å¯ä»¥åˆ†å‰²æ–‡ä»¶ï¼ŒæŒ‰æ–‡ä»¶å¤§å°æˆ–è¡Œæ•°æ¥åˆ†å‰²

```bash
split [-bl] file PREFIX

-bï¼šåé¢å¯æ¥è¦åˆ†åŒºçš„å¤§å°ï¼Œå¯åŠ å•ä½ï¼Œå¦‚ bã€kã€m ç­‰
-lï¼šä»¥è¡Œæ•°è¿›è¡Œåˆ†åŒº

PREFIXï¼šè¡¨ç¤ºåˆ†åŒºæ–‡ä»¶å‘½åå‰ç¼€
```

```bash
# èŒƒä¾‹ 1ï¼š/etc/services æœ‰ 600 å¤š kï¼Œè‹¥æƒ³è¦åˆ†æˆ 300k ä¸€ä¸ªæ–‡ä»¶
[mrcode@study ~]$ cd /tmp; split -b 300k /etc/services servers
[mrcode@study tmp]$ ll servers*
-rw-rw-r--. 1 mrcode mrcode 307200 Dec  2 09:53 serversaa
-rw-rw-r--. 1 mrcode mrcode 307200 Dec  2 09:53 serversab
-rw-rw-r--. 1 mrcode mrcode  55893 Dec  2 09:53 serversac

# èŒƒä¾‹ 2ï¼šå¦‚ä½•å°†ä¸Šé¢ä¸‰ä¸ªæ–‡ä»¶åˆæˆä¸€ä¸ªæ–‡ä»¶ï¼Ÿ
[mrcode@study tmp]$ cat serversa* > servicesback
[mrcode@study tmp]$ ll serv*
-rw-rw-r--. 1 mrcode mrcode 307200 Dec  2 09:53 serversaa
-rw-rw-r--. 1 mrcode mrcode 307200 Dec  2 09:53 serversab
-rw-rw-r--. 1 mrcode mrcode  55893 Dec  2 09:53 serversac
-rw-rw-r--. 1 mrcode mrcode 670293 Dec  2 09:54 servicesback

# èŒƒä¾‹ 3ï¼šä½¿ç”¨ ls -al / è¾“å‡ºçš„ä¿¡æ¯ä¸­ï¼Œæ¯ 10 è¡Œè®°å½•æˆä¸€ä¸ªæ–‡ä»¶
# è¿™é‡Œæ–‡ä»¶ä½¿ç”¨äº† - ï¼Œè¡¨ç¤ºä½¿ç”¨æ ‡å‡†è¾“å…¥ï¼Œå‰é¢è®²è¿‡çš„
[mrcode@study tmp]$ ls -al / | split -l 10 - lsroot
[mrcode@study tmp]$ ll lsroot*
-rw-rw-r--. 1 mrcode mrcode 456 Dec  2 09:57 lsrootaa
-rw-rw-r--. 1 mrcode mrcode 523 Dec  2 09:57 lsrootab
-rw-rw-r--. 1 mrcode mrcode 192 Dec  2 09:57 lsrootac
[mrcode@study tmp]$ wc -l lsroot*
  10 lsrootaa
  10 lsrootab
   4 lsrootac
  24 total
# - ä¸€èˆ¬ç”¨åœ¨ï¼ŒæŒ‡ä»¤ stdout/stdin æ—¶ï¼Œä½†åååˆæ²¡æœ‰æ–‡ä»¶ï¼Œå°±ç”¨ - æ¥è¡¨ç¤º stdout/stdin
```

## ğŸ€ å‚æ•°ä»£æ¢ï¼šxargs

äº§ç”ŸæŸä¸ªæŒ‡ä»¤çš„å‚æ•°ã€‚xargs å¯ä»¥è¯»å…¥ stdin çš„æ•°æ®ï¼Œå¹¶ä¸”ä»¥ç©ºæ ¼ç¬¦æˆ–æ¢è¡Œç¬¦å·ä½œä¸ºåˆ†è¾¨ï¼Œå°† stdin çš„æ•°æ®åˆ†å‰²æˆä¸º argumentsã€‚

```bash
xargs [-0epn] command
```

- 0ï¼šæ•°å€¼ 0ï¼Œå¦‚æœè¾“å…¥çš„ stdin å«æœ‰ç‰¹æ®Šå­—ç¬¦ï¼Œä¾‹å¦‚ \`ã€\\ã€ç©ºæ ¼ç­‰æ—¶ï¼Œå¯ä»¥å°†ä»–è½¬ä¹‰ä¸ºä¸€ä¸ªæ™®é€šå­—ç¬¦
- eï¼šEOFï¼ˆend of fileï¼‰ã€‚åé¢å¯ä»¥æ¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå½“ xargs åˆ†æåˆ°è¿™ä¸ªå­—ç¬¦ä¸²æ—¶ï¼Œä¼šåœæ­¢ç»§ç»­å·¥ä½œï¼›æ³¨æ„ï¼š`-e'sync'` é€‰é¡¹ä¸åé¢çš„ eof å­—ç¬¦ä¸­é—´æ²¡æœ‰ç©ºæ ¼
- pï¼šåœ¨æ‰§è¡Œæ¯ä¸ªæŒ‡ä»¤çš„ argument æ—¶ï¼Œéƒ½ä¼šè¯¢é—®ä½¿ç”¨è€…
- nï¼šåé¢æ¥æ¬¡æ•°ï¼Œæ¯æ¬¡ command æŒ‡ä»¤æ‰§è¡Œæ—¶ï¼Œè¦ä½¿ç”¨å‡ ä¸ªå‚æ•°

å½“ xargs åé¢æ²¡æœ‰æ¥ä»»ä½•æŒ‡ä»¤æ—¶ï¼Œé»˜è®¤æ˜¯ä»¥ echo æ¥è¿›è¡Œè¾“å‡ºçš„

å®è·µç»ƒä¹ 

```bash
# èŒƒä¾‹ 1ï¼šå°† /etc/passwd å†…ç¬¬ä¸€æ å–å‡ºï¼Œä»…å–ä¸‰è¡Œï¼Œä½¿ç”¨ id è¿™ä¸ªæŒ‡ä»¤å°†æ¯ä¸ªè´¦æˆ·å†…å®¹ç§€å‡ºæ¥
# id å¯ä»¥æŸ¥è¯¢ç”¨æˆ·çš„ UID/GID ç­‰ä¿¡æ¯
[mrcode@study tmp]$ id root
uid=0(root) gid=0(root) groups=0(root)

# é€šè¿‡ä¹‹å‰çš„æŒ‡ä»¤æŠŠå‰ä¸‰è¡Œçš„ç¬¬ä¸€æ ç”¨æˆ·åæå–å‡ºæ¥
[mrcode@study tmp]$ cat /etc/passwd | head -n 3 | cut -d ':' -f 1
root
bin
daemon

# é€šè¿‡ $(cmd) å¯ä»¥é¢„å…ˆå–å¾—å‚æ•°ï¼Œä½†å¯æƒœçš„æ—¶å€™ï¼Œid è¿™ä¸ªæŒ‡ä»¤åªèƒ½æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå¯¼è‡´æŠ¥é”™äº†
[mrcode@study tmp]$ id $(cat /etc/passwd | head -n 3 | cut -d ':' -f 1)
id: extra operand â€˜binâ€™
Try 'id --help' for more information.

# å› ä¸º ID ä¸æ˜¯ç®¡çº¿å‘½ä»¤ï¼Œç®¡çº¿å‰çš„è¾“å‡ºéƒ½æ²¡æœ‰ç”¨ï¼Œç›¸å½“äºåªè¾“å‡ºäº† id çš„å†…å®¹
[mrcode@study tmp]$ cat /etc/passwd | head -n 3 | cut -d ':' -f 1 | id
uid=1000(mrcode) gid=1000(mrcode) groups=1000(mrcode),10(wheel) context=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023

# xargs å°† 3 ä¸ªè´¦æˆ·å¤„ç†åç»™ idï¼Œä¸€æ ·çš„ä¼šæŠ¥é”™
[mrcode@study tmp]$ cat /etc/passwd | head -n 3 | cut -d ':' -f 1 | xargs id
id: extra operand â€˜binâ€™
Try 'id --help' for more information.

# é€šè¿‡ -n æ¥æŒ‡å®šæ¯æ¬¡æŒ‡ä»¤å‘½ä»¤ä½¿ç”¨å‡ ä¸ªå‚æ•°
# å› ä¸ºå‰é¢è¾“å‡ºæ˜¯ä¸‰è¡Œï¼Œåœ¨ xargs ä¸­ä¼šè¢«å½“æˆ 3 ä¸ªå‚æ•°
[mrcode@study tmp]$ cat /etc/passwd | head -n 3 | cut -d ':' -f 1 | xargs -n 1 id
uid=0(root) gid=0(root) groups=0(root)
uid=1(bin) gid=1(bin) groups=1(bin)
uid=2(daemon) gid=2(daemon) groups=2(daemon)

# èŒƒä¾‹ 2ï¼šåŒä¸Šï¼Œä½†æ˜¯æ¯æ¬¡æ‰§è¡Œ id æ—¶ï¼Œéƒ½è¦è¯¢é—®ä½¿ç”¨è€…æ˜¯å¦åŠ¨ä½œ
[mrcode@study tmp]$ cat /etc/passwd | head -n 3 | cut -d ':' -f 1 | xargs -n 1 -p id
id root ?...			# è¿™é‡Œæ²¡æœ‰è¾“å…¥ y è¢«åˆ¤å®šä¸ºä¸æ‰§è¡Œäº†
id bin ?...y
uid=1(bin) gid=1(bin) groups=1(bin)
id daemon ?...

# èŒƒä¾‹ 3ï¼šå°†æ‰€æœ‰çš„ /etc/passwd å†…çš„è´¦æˆ·éƒ½ä»¥ id æŸ¥è¯¢ï¼Œä½†å·®åˆ° sync å°±ç»“æŸæŒ‡ä»¤ä¸²
[mrcode@study tmp]$ cat /etc/passwd | cut -d ':' -f 1 | xargs -e'sync' -n 1 id
uid=0(root) gid=0(root) groups=0(root)
uid=1(bin) gid=1(bin) groups=1(bin)
uid=2(daemon) gid=2(daemon) groups=2(daemon)
uid=3(adm) gid=4(adm) groups=4(adm)
uid=4(lp) gid=7(lp) groups=7(lp)

```

xargs æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„æŒ‡ä»¤ï¼Œä¸€èˆ¬ä½¿ç”¨å®ƒçš„åŸå› æ˜¯ï¼Œå¾ˆå¤šæŒ‡ä»¤å…¶å®å¹¶ä¸æ”¯æŒç®¡çº¿å‘½ä»¤ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ xargs æ¥æä¾›è¯¥æŒ‡ä»¤å¼•ç”¨ standard input ã€‚å¦‚æœè¿˜ä¸å¤ªæ˜ç™½ï¼Œä¸‹é¢åœ¨æ¥çœ‹ä¸€ä¸ªä¾‹å­

```bash
# èŒƒä¾‹ 4ï¼šæ‰¾å‡º /usr/sbin ä¸‹å…·æœ‰ç‰¹æ®Šæƒé™çš„æ–‡ä»¶åï¼Œå¹¶ä½¿ç”¨ ls -l åˆ—å‡ºè¯¦ç»†å±æ€§
# ä½†æ˜¯ ls ä¸æ˜¯ç®¡çº¿å‘½ä»¤
[mrcode@study tmp]$ find /usr/bin/ -perm /7000 | ls
# å¯ä»¥ä½¿ç”¨ $(cmd) è¯­æ³•
[mrcode@study tmp]$ ls -l $(find /usr/bin/ -perm /7000)

# ä½¿ç”¨ xargs
[mrcode@study tmp]$ find /usr/bin/ -perm /7000 | xargs -n 1 ls -l
-r-xr-sr-x. 1 root tty 15344 Jun 10  2014 /usr/bin/wall
-rwsr-xr-x. 1 root root 32096 Oct 31  2018 /usr/bin/fusermount
```

## ğŸ€ å…³äºå‡å· `-` çš„ç”¨é€”

ç®¡çº¿å‘½ä»¤åœ¨ bash çš„è¿ç»­çš„å¤„ç†ç¨‹åºä¸­æ˜¯ç›¸å½“é‡è¦çš„ã€‚å¦å¤–ï¼Œåœ¨ log file çš„åˆ†æä¸­ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ä¸€ç¯ã€‚

å¦å¤–ï¼Œåœ¨ç®¡çº¿å‘½ä»¤ä¸­ï¼Œå¸¸å¸¸ä¼šä½¿ç”¨åˆ°å‰ä¸€ä¸ªæŒ‡ä»¤çš„ stdout ä½œä¸ºè¿™æ¬¡çš„ stdinï¼ŒæŸäº›æŒ‡ä»¤éœ€è¦ç”¨åˆ°æ–‡ä»¶åï¼ˆä¾‹å¦‚ tarï¼‰æ¥è¿›è¡Œå¤„ç†æ—¶ï¼Œè¯¥ stdin ä¸ stdout å¯ä»¥åˆ©ç”¨å‡å· `-`æ¥æ›¿ä»£

```bash
# å°† /home é‡Œçš„æ–‡ä»¶æ‰“åŒ…ï¼Œä½†æ‰“åŒ…çš„æ•°æ®ä¸æ˜¯è®°å½•åˆ°æ–‡ä»¶ï¼Œè€Œæ˜¯ä¼ é€åˆ° stdout
# ç»è¿‡ç®¡çº¿åï¼Œå°† tar -cvf - /home ä¼ é€ç»™åé¢çš„ tar -xvf - ï¼Œ
# è¿™é‡Œçš„ - å°±æ˜¯å–ç”¨å‰ä¸€ä¸ªæŒ‡ä»¤çš„ stdout
mkdir /tmp/homeback
[mrcode@study tmp]$ tar -cvf - /home/ | tar -xvf - -C /tmp/homeback/
```
