---
title: 
sidebarDepth: 0 
category: Tools 
tag: Linux
---
# Linux ä¸»æœºä¸Šçš„ç”¨æˆ·ä¿¡æ¯ä¼ é€’

å¦‚ä½•é’ˆå¯¹ç³»ç»Ÿä¸Šçš„ç”¨æˆ·è¿›è¡ŒæŸ¥è¯¢ï¼Ÿå¦‚æœåœ¨ Linux ä¸Šæ“ä½œæ—¶ï¼Œæœ‰å…¶ä»–ç”¨æˆ·ä¹Ÿç™»å½•ä¸»æœºï¼Œå¦‚ä½•ä¸å®ƒè°ˆè¯ï¼Ÿæƒ³çŸ¥é“æŸä¸ªè´¦æˆ·çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ä½•æŸ¥é˜…ï¼Ÿ

## ğŸ€ æŸ¥è¯¢ä½¿ç”¨è€…ï¼šwã€whoã€lastã€lastlog

ä¹‹å‰æåˆ°è¿‡çš„ idã€finger ç­‰æŒ‡ä»¤å¯ä»¥æŸ¥è¯¢ä¸€ä¸ªç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯ã€‚è€Œ last å¯ä»¥çŸ¥é“ä½¿ç”¨è€…åˆé€‚ç™»å½•çš„ç³»ç»Ÿï¼Œå‰é¢ç¬¬ 10 ç« èŠ‚ bash ä¸­è®²è§£è¿‡çš„

å¯ä»¥é€šè¿‡ w æˆ– who æ¥æŸ¥è¯¢å½“å‰å·²ç™»å½•ç³»ç»Ÿçš„ç”¨æˆ·ï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äºåœ¨çº¿ç”¨æˆ·åˆ—è¡¨

```bash
[root@study ~]# w
# å½“å‰æ—¶é—´ã€å¼€æœº(up)å¤šä¹…ã€å‡ ä¸ªç”¨æˆ·åœ¨çº¿
 22:20:50 up  1:37,  2 users,  load average: 0.18, 0.14, 0.17
# ä¸€ä¸ªè¡¨æ ¼è¯´æ˜ï¼Œæ¯ä¸€è¡Œè¡¨ç¤ºä¸€ä¸ªä½¿ç”¨è€…
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
mrcode   pts/0    192.168.0.105    21:11    2.00s  0.19s  3.27s sshd: mrcode [priv]
mrcode   pts/1    192.168.0.105    21:11    1:09m  8.52s  8.50s top

[root@study ~]# who
mrcode   pts/0        2020-02-25 21:11 (192.168.0.105)
mrcode   pts/1        2020-02-25 21:11 (192.168.0.105)
```

é€šè¿‡ lastlog è·å¾—æ¯ä¸ªè´¦æˆ·çš„æœ€è¿‘ç™»å½•æ—¶é—´ï¼Œlastlog ä¼šè¯»å– `/var/log/lastlog` æ–‡ä»¶

```bash
[root@study ~]# lastlog
# ç”¨æˆ·å           ç«¯å£     æ¥è‡ª             æœ€åç™»é™†æ—¶é—´
Username         Port     From             Latest
root             pts/0                     äºŒ 2æœˆ 25 21:23:43 +0800 2020
bin                                        **ä»æœªç™»å½•è¿‡**
daemon                                     **ä»æœªç™»å½•è¿‡**
adm                                        **ä»æœªç™»å½•è¿‡**
lp                                         **ä»æœªç™»å½•è¿‡**
mrcode           pts/1    192.168.0.105    äºŒ 2æœˆ 25 21:11:00 +0800 2020
mrcode1          pts/0                     äºŒ 2æœˆ 25 22:05:37 +0800 2020

```

## ğŸ€ ä½¿ç”¨è€…è°ˆè¯ï¼šwriteã€mesgã€wall

### write å¯¹è¯

ä¸ç³»ç»Ÿä¸Šåœ¨çº¿ç”¨æˆ·è¿›è¡Œè°ˆè¯ï¼Œé€šè¿‡ write å°†ä¿¡æ¯ä¼ ç»™æ¥æ”¶è€…

```bash
write ä½¿ç”¨è€…è´¦æˆ· [ç”¨æˆ·æ‰€åœ¨ç»ˆç«¯æ¥å£]
```

```bash
[root@study ~]# who
mrcode   pts/0        2020-02-25 22:28 (192.168.0.105)
mrcode   pts/1        2020-02-25 22:28 (192.168.0.105)
root     pts/4        2020-02-25 22:28 (192.168.0.105)
root     pts/5        2020-02-25 22:28 (192.168.0.105)
# ç¬”è€…ä½¿ç”¨çš„æ˜¯ ssh è½¯ä»¶é“¾æ¥çš„ã€‚ç±»ä¼¼ xshell è½¯ä»¶ï¼Œæ‰€ä»¥å¯èƒ½æ˜¾ç¤ºçš„ä¸æ˜¯ tty æ¥å£æŠŠ
# å¼€å¯äº†ä¸¤ä¸ªé“¾æ¥ï¼Œå¹¶ä¸”ä½¿ç”¨ su åˆ‡æ¢çš„è´¦æˆ·ï¼Œæ˜¯é€šè¿‡è¿™ä¸ª who çœ‹ä¸å‡ºæ¥çš„
# åªä¼šæ˜¾ç¤ºæœ€åˆç™»å½•ç³»ç»Ÿçš„è´¦æˆ·ä¿¡æ¯
# ç¬”è€…è¿™é‡Œå¼€å¯äº†ä¸¤ä¸ªçª—å£ï¼Œä¸€ä¸ªç™»å½• mrcode è´¦æˆ·ï¼Œä¸€ä¸ªç™»å½• root è´¦æˆ·

[root@study ~]# write mrcode pts/0
Hello,there:
Please dont't do anything wrong...
# åœ¨ root çª—å£ä¸Šï¼Œå¯¹ mrcode pts/0 çš„ç»ˆç«¯æ¥å£å†™ä¿¡æ¯
# ä¸Šé¢ä¸¤è¡Œæ˜¯ root ä¼ é€’çš„æ–‡å­—ä¿¡æ¯
# è¦ç»“æŸä¼ é€’çš„è¯ï¼Œéœ€è¦é€šè¿‡ç»„åˆé”® ctrl + d ç»“æŸ


# åœ¨ mrcode è¿™è¾¹å°±ä¼šçœ‹åˆ°ä¼ é€’è¿‡æ¥çš„ä¿¡æ¯äº†
[mrcode@study ~]$
Message from root@study.centos.mrcode on pts/2 at 22:33 ...
Hello,there:
Please dont't do anything wrong...
EOF

è¿™ä¸¤ä¸ªäº¤äº’å¼è¿™æ ·çš„ï¼Œå½“ root æ•²å…¥ write mrcode pts/0 æŒ‡ä»¤æ—¶ï¼Œmrcode è¿™è¾¹å°±ç›¸å½“äºè¿›å…¥äº†ä¸€ä¸ªèŠå¤©çª—å£ï¼Œè¾“å…¥ä¸€è¡ŒæŒ‰ä¸‹å›è½¦é”®ï¼Œä¿¡æ¯å°±ä¼šæ˜¾ç¤ºåˆ°å¯¹æ–¹é‚£è¾¹å»ã€‚æ‰€ä»¥ä»–ä»¬ä¸¤ä¸ªå°±å¯ä»¥è°ˆè¯äº†
```

### mesg å¯ç”¨æˆ–å…³é—­å¯¹è¯åŠŸèƒ½

å› ä¸ºè¿™ç§æ–¹å¼æ˜¯åŠæ—¶èŠå¤©ï¼Œå¦‚æœ mrcode æ­¤æ—¶æ­£åœ¨æŸ¥è¯¢èµ„æ–™ï¼Œé‚£ä¹ˆå°±ä¼šæ‰“æ–­ä»–åŸæœ¬çš„å·¥ä½œï¼Œå¦‚æœ mrode ä¸æƒ³æ¥å—ä»»ä½•äººçš„ä¿¡æ¯ï¼Œå¯ä»¥ä¸‹è¾¾è¯¥æŒ‡ä»¤

```bash
[mrcode@study ~]$ mesg n	# å…³é—­ä¿¡æ¯
[mrcode@study ~]$ mesg
is n
```

ä¸è¿‡è¯¥æŒ‡ä»¤å¯¹ root ä¼ æ¥çš„ä¿¡æ¯æ˜¯æ— æ•ˆçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å…³é—­ root çš„ï¼Œä½¿ç”¨ mrcode å¯¹ root å‘é€

```bash
# å½“ç„¶è¦å…ˆæ‰“å¼€ mesg çš„åŠŸèƒ½ï¼Œæ‰èƒ½å¯¹åˆ«äººå‘é€ä¿¡æ¯
[mrcode@study ~]$ mesg y	# æ‰“å¼€
[mrcode@study ~]$ write root pts/2
write: root has messages disabled on pts/2
# å‘ç°æ— æ³•å¯¹ root å‘é€ä¿¡æ¯
```

### wall å¹¿æ’­ä¿¡æ¯

è¿˜å¯ä»¥é€šè¿‡ wall å¯¹æ‰€æœ‰åœ¨çº¿ç”¨æˆ·å¹¿æ’­ä¿¡æ¯

```bash
[mrcode@study ~]$ wall "I will shutdown my linux server..."
[mrcode@study ~]$
Broadcast message from mrcode@study.centos.mrcode (pts/0) (Tue Feb 25 22:45:41 2020):

I will shutdown my linux server...

# æ‰€æœ‰åœ¨çº¿ç”¨æˆ·éƒ½èƒ½æ”¶åˆ°ï¼ŒåŒ…æ‹¬ rootï¼Œå½“ç„¶å‰ææ˜¯å¯¹æ–¹ mesg y æ‰“å¼€æ—¶
```

## ğŸ€ ä½¿ç”¨è€…ä¿¡ç®±ï¼šmail

wallã€write éœ€è¦ç”¨æˆ·åœ¨çº¿æ‰èƒ½å¤Ÿä½¿ç”¨äº¤è°ˆï¼Œå¯ä»¥ä½¿ç”¨ mail å¯„ä¿¡ç»™ç”¨æˆ·ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½å…·æœ‰ä¸€ä¸ª mailboxï¼Œå¯ä»¥å¯„ã€æ”¶ mailbox å†…çš„ä¿¡ä»¶ã€‚ä¸€èˆ¬æ¥è¯´ mailbox ä¼šæ”¾ç½®åœ¨ `/var/spool/mail` ä¸­ï¼Œä¸€ä¸ªè´¦å·ä¸€ä¸ª mailbox æ–‡ä»¶ã€‚æ¯”å¦‚ mrcode1 å°±å…·æœ‰ `/var/spool/mail/mrcode1` è¿™ä¸ª mailbox

### å¯„ä¿¡

```bash
mail -s "é‚®ä»¶æ ‡é¢˜" username@localhost
```

```bash
# root ç”¨æˆ·ç»™ mrcode å¯„ä¿¡
# æŒ‡ä»¤ä¸‹è¾¾ä¹‹åä¼šè¿›å…¥å†™åšæ¨¡å¼ï¼Œä¸è¿‡è¯¥æ¨¡å¼ä¸‹æ— æ³•ä½¿ç”¨é€€æ ¼é”®ï¼Œåªèƒ½æƒ³å¥½å†å†™
[root@study ~]# mail -s "nice to meet you" mrcode
Hello,D.m tsai
Nice to meet you in the network.
You are so nice. bybye!
.					# æœ€åä¸€è¡Œè¾“å…¥å°æ•°ç‚¹ï¼Œå†æ¬¡å›è½¦ä¼šå®Œæˆå¯„ä¿¡æ“ä½œ
EOT		
[root@study ~]#
```

ä¼šå‘ç° mail ä¸­çš„ç¼–è¾‘å™¨ä¸å¥½ç”¨ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æµæ¥å®Œæˆå†…å®¹çš„å¯¼å…¥

```bash
[root@study ~]# mail -s "nice to meet you" mrcode  < filename
# å…ˆæŠŠä¿¡æ¯å†™åœ¨æ–‡ä»¶ä¸­ï¼Œç„¶åä½¿ç”¨ < ä¼ è¾“
```

```bash
# èŒƒä¾‹ ï¼šå°†ä½ çš„å®¶ç›®å½•ä¸‹çš„ç¯å¢ƒå˜é‡æ–‡ä»¶ ~/.bashrc å¯„ç»™è‡ªå·±
mail -s "bashrc file content" mrcode < ~/.bashrc
# èŒƒä¾‹ ï¼šé€šè¿‡ç®¡çº¿å‘½ä»¤å°† `ls -al ~` å†…å®¹ä¼ ç»™ root è‡ªå·±
ls -al ~ | mail -s "myfile" root
```

## ğŸ€ æ”¶ä¿¡

æ”¶ä¿¡ä¹Ÿæ˜¯ä½¿ç”¨ mail æŒ‡ä»¤ï¼Œå¦‚ä¸Šé¢å¯„ç»™äº† mrcode

```bash
[mrcode@study ~]$ mail
Heirloom Mail version 12.5 7/5/10.  Type ? for help.
"/var/spool/mail/mrcode": 1 message 1 new
>N  1 root                  Tue Feb 25 22:52  19/700   "nice to meet you"
& 		# è¿™é‡Œå¯ä»¥è¾“å…¥å¾ˆå¤šæŒ‡ä»¤ï¼Œå¯ä»¥é€šè¿‡è¾“å…¥ ï¼Ÿ æŸ¥è¯¢

# > ï¼šæ˜¯è¡¨ç¤ºç›®å‰å¤„ç†çš„ä¿¡ä»¶æ˜¯å“ªä¸€å°
# N ï¼šè¡¨ç¤ºè¯¥ä¿¡ä»¶è¿˜æœªè¯»è¿‡

# å°è¯•è¾“å…¥ ? ä¼šå‡ºç°ä»¥ä¸‹çš„æç¤º
& ?
               mail commands
type <message list>             type messages
next                            goto and type next message
from <message list>             give head lines of messages
headers                         print out active message headers
delete <message list>           delete messages
undelete <message list>         undelete messages
save <message list> folder      append messages to folder and mark as saved
copy <message list> folder      append messages to folder without marking them
write <message list> file       append message texts to file, save attachments
preserve <message list>         keep incoming messages in mailbox even if saved
Reply <message list>            reply to message senders
reply <message list>            reply to message senders and all recipients
mail addresses                  mail to specific recipients
file folder                     change to another folder
quit                            quit and apply changes to folder
xit                             quit and discard changes made to folder
!                               shell escape
cd <directory>                  chdir to directory or home if none given
list                            list names of all available commands

A <message list> consists of integers, ranges of same, or other criteria
separated by spaces.  If omitted, mail uses the last message typed.
&
```

ä¸Šé¢ä¿¡æ¯ä¸­çš„ ã€Œmessage listã€æ˜¯è¡¨ç¤ºæ¯å°é‚®ä»¶å·¦è¾¹é‚£ä¸ªæ•°æ®åºå·

æŒ‡ä»¤ | å«ä¹‰
-----|-----------------------------------------------------------------------------------------
h    | åˆ—å‡ºä¿¡ä»¶æ¯”å¥¥æ‹“ï¼›å¦‚æŸ¥è¯¢ 40 å°å·¦å³çš„ä¿¡ä»¶ï¼Œåˆ™è¾“å…¥ `h 40`
d    | åˆ é™¤åç»­æ¥çš„ä¿¡ä»¶å·ç ï¼Œåˆ é™¤å•å°æ˜¯ `d10`ï¼ŒèŒƒå›´åˆ é™¤æ˜¯ `d10-20`ï¼Œè¯¥åŠ¨ä½œç”Ÿæ•ˆéœ€è¦é…åˆ q æŒ‡ä»¤
s    | å°†ä¿¡ä»¶å­˜å‚¨æˆæ–‡ä»¶ã€‚æ¯”å¦‚å°†ç¬¬ 5 å°çš„å†…å®¹å­˜å‚¨åˆ°æ–‡ä»¶ `~/mail.file` å¯ä»¥ä½¿ç”¨ `s 5 ~/mail.file`
x    | åªç¦»å¼€ï¼Œä¸ç”Ÿæ•ˆï¼›æˆ–è€…è¾“å…¥ exit ä¹Ÿå¯ä»¥ï¼›æ¯”å¦‚åˆšåˆšç”¨ h åˆ é™¤äº†ä¿¡ä»¶ï¼Œä½¿ç”¨ x ç¦»å¼€ï¼Œå°±ä¼šæ’¤é”€åˆ é™¤
q    | ç”Ÿæ•ˆå¹¶ç¦»å¼€ï¼›å°¤å…¶æ˜¯åˆ é™¤

å¯¹äº h æ“ä½œæ¥è¯´ï¼Œåªæœ‰ 5 å°é‚®ä»¶çš„æ—¶å€™ï¼Œä½¿ç”¨ h 6 ä¼šæŠ¥é”™ï¼Œä½¿ç”¨ h 2ï¼ŒåŒæ ·ä¼šæ˜¾ç¤ºæ‰€æœ‰çš„ï¼Œä¸çŸ¥é“æ˜¯å’‹å›äº‹
