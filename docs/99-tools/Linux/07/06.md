---
title: æ–‡ä»¶ç³»ç»Ÿçš„ç‰¹æ®Šè§‚å¯Ÿä¸æ“ä½œ
sidebarDepth: 0 
category: Tools 
tag: Linux
---


æ–‡ä»¶ç³»ç»Ÿæ˜¯åœ¨æ˜¯éå¸¸æœ‰è¶£çš„ä¸œè¥¿ï¼Œé¸Ÿå“¥å­¦äº†å¥½å‡ å¹´å¾ˆå¤šä¸œè¥¿éƒ½ä¸æ‡‚ï¼Œè¿™é‡Œæœ‰ä¸€äº›ç»éªŒä»¥ä¾›å‚è€ƒ

## ğŸ€ ç£ç›˜ç©ºé—´ä¹‹æµªè´¹é—®é¢˜

å‰é¢ ext2 data block ä¸­è°ˆåˆ°ä¸€ä¸ª block åªèƒ½æ”¾ç½®ä¸€ä¸ªæ–‡ä»¶ï¼Œå› æ­¤å¤ªå¤šå°æ–‡ä»¶ä¼šæµªè´¹å¾ˆå¤šçš„ç£ç›˜å®¹é‡ã€‚

```bash
[root@study ~]# ll -sh
æ€»ç”¨é‡ 16K
4.0K -rw-------. 1 root   root   2.2K 10æœˆ  4 18:32 anaconda-ks.cfg
4.0K -rw-r--r--. 2 root   root    451 6æœˆ  10 2014 crontab
   0 lrwxrwxrwx. 1 root   root     12 10æœˆ 22 00:00 crontab2 -> /etc/crontab
4.0K -rw-r--r--. 1 root   root   2.2K 10æœˆ  4 18:42 initial-setup-ks.cfg
4.0K -rwxr-xrwx. 1 mrcode mrcode 2.2K 10æœˆ  7 23:30 initial-setup-ks-mrcode.cfg
```

ä¸Šè¿°çš„æ€»ç”¨é‡æ˜¯æ¯ä¸ªæ–‡ä»¶æ‰€ä½¿æ‰ blcok çš„å®¹é‡çš„æ±‡æ€»ï¼Œä½†æ˜¯ å“ªä¸ª crontab æ–‡ä»¶å®é™…åªæœ‰ç”¨ 451bytesï¼Œä½†æ˜¯ä»–å´å ç”¨äº†æ•´ä¸ª block ï¼ˆæ¯ä¸ª block ä¸º 4kï¼‰ã€‚æ‰€ä»¥æ€»å…±å ç”¨äº† 16k çš„å®¹é‡ï¼Œä½†æ˜¯å®é™…è¿™é‡Œçš„æ–‡ä»¶æ€»å®¹é‡ä¸åˆ° 7k

å½“è®¨è®ºç£ç›˜ç©ºé—´æµªè´¹é—®é¢˜çš„æ—¶å€™ï¼Œéœ€è¦è€ƒè™‘åˆ°æ–‡ä»¶å®¹é‡çš„æŸè€—

## ğŸ€ åˆ©ç”¨ GNU çš„ parted è¿›è¡Œåˆ†åŒºè¡Œä¸ºï¼ˆOptionalï¼‰

parted åŒæ—¶æ”¯æŒ gdisk å’Œ fdisk åˆ†åŒº

```bash
parted [è£…ç½®][æŒ‡ä»¤][å‚æ•°]

é€‰é¡¹ä¸å‚æ•°ï¼ŒæŒ‡ä»¤åŠŸèƒ½ï¼š
	æ–°å¢åˆ†åŒºï¼šmkpart [primary|logical|extended][ext4|vfat|xfs] å¼€å§‹ ç»“æŸ
	æ˜¾ç¤ºåˆ†åŒºï¼šprint
	åˆ é™¤åˆ†åŒºï¼šrm [partition]
```

å®è·µç»ƒä¹ 

```bash
# åˆ—å‡ºç›®å‰æœ¬æœºçš„åˆ†åŒºè¡¨èµ„æ–™
[root@study ~]# parted /dev/sda print
Model: ATA VBOX HARDDISK (scsi)				# ç£ç›˜æ¥å£ä¸å‹å·
Disk /dev/sda: 43.8GB									# ç£ç›˜æ–‡ä»¶åä¸å®¹é‡
Sector size (logical/physical): 512B/512B		#æ¯ä¸ªæ‰‡åŒºå¤§å°
Partition Table: gpt		# åˆ†åŒºè¡¨ gpt
Disk Flags: pmbr_boot

Number  Start   End     Size    File system     Name                  æ ‡å¿—
 1      1049kB  3146kB  2097kB                                        bios_grub
 2      3146kB  1077MB  1074MB  xfs
 3      1077MB  33.3GB  32.2GB                                        lvm
 4      33.3GB  34.4GB  1074MB  xfs             Linux filesystem
 5      34.4GB  35.4GB  1074MB  ext4            Microsoft basic data
 6      35.4GB  36.0GB  537MB   linux-swap(v1)  Linux swap

```

ä¸Šé¢æ˜¯æœ€ç®€å•çš„ parted æŒ‡ä»¤åŠŸèƒ½ç®€ä»‹ï¼Œå¯ä»¥ä½¿ç”¨ man parted æˆ–åˆ™ `parted /dev/sda help mkpart`æŸ¥è¯¢æ›´è¯¦ç»†çš„æ•°æ®ã€‚ä¸‹é¢è§£é‡Šä¸‹æ¯ä¸ªå­—æ®µæ˜¯å•¥æ„æ€

- Numberï¼šåˆ†åŒºæ§½å·ç ï¼Œæ¯”å¦‚ 1 è¡¨ç¤º /dev/sda1
- Startï¼šåˆ†åŒºçš„å…¶å®ä½ç½®åœ¨è¿™é¢—ç£ç›˜çš„å¤šå°‘ MB å¤„ï¼Ÿè¿™é‡Œä»¥å®¹é‡ä½œä¸ºå•ä½
- Endï¼šæ­¤åˆ†åŒºçš„ç»“æŸä½ç½®åœ¨è¿™é¢—ç£ç›˜çš„å¤šå°‘ MB å¤„ï¼Ÿ
- Sizeï¼šç”±ä¸Šè¿°æ•°æ®åˆ†æï¼Œå¾—åˆ°è¿™ä¸ªåˆ†åŒºæ§½æœ‰å¤šå°‘å®¹é‡
- File systemï¼šåˆ†æå¯èƒ½çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹
- Nameï¼šå¦‚åŒ gdisk çš„ System ID çš„æ„æ€

ä¸è¿‡è¿™é‡Œä½ å‘ç°æ²¡æœ‰ï¼Œstart ä¸ end çš„å•ä½éƒ½ä¸ä¸€æ ·ï¼Œçœ‹èµ·æ¥å¾ˆè´¹åŠ²ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æŒ‡ä»¤å›ºå®š

```bash
[root@study ~]# parted /dev/sda unit mb print
Model: ATA VBOX HARDDISK (scsi)
Disk /dev/sda: 43772MB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
Disk Flags: pmbr_boot

Number  Start    End      Size     File system     Name                  æ ‡å¿—
 1      1.05MB   3.15MB   2.10MB                                         bios_grub
 2      3.15MB   1077MB   1074MB   xfs
 3      1077MB   33293MB  32216MB                                        lvm
 4      33293MB  34367MB  1074MB   xfs             Linux filesystem
 5      34367MB  35441MB  1074MB   ext4            Microsoft basic data
 6      35441MB  35978MB  537MB    linux-swap(v1)  Linux swap

```

å¦‚æœæƒ³å°†åŸæœ¬çš„ MBR å’Œ GPT åˆ†åŒºè¡¨äº’ç›¸æ¢ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ partedï¼Œä¸è¿‡ä¸è¦ç”¨æœ¬æ¬¡çš„ sda æ¥æµ‹è¯•ï¼Œå› ä¸ºåˆ†åŒºè¡¨æ ¼å¼ä¸èƒ½è½¬æ¢ï¼Œè¯¥ç£ç›˜ä¸Šçš„ç³»ç»Ÿä¼šæŸåçš„ã€‚

ä¸‹é¢æµ‹è¯•ï¼Œç¬”è€…å°±æ²¡æœ‰æ¡ä»¶æµ‹è¯•äº†ï¼Œç›´æ¥è®°å½•ç¬”è®°

```bash
# å°† /dev/sda åŸæœ¬æ˜¯ MBR åˆ†åŒºå˜æˆ GPT åˆ†åŒºè¡¨
parted /dev/sda print
...
Partition Table: msdos  # MBR å°±æ˜¯ç°å® msdos æ ¼å¼

# æ”¹å˜æˆ gpt åˆ†åŒº
parted /dev/sda mklabel gpt
```

æ–°çš„ç¤ºä¾‹ï¼šå»ºç«‹ä¸€ä¸ªå…¨æ–°çš„åˆ†åŒºæ§½ï¼Œæ ¼å¼åŒ–ä¸º vfat æ ¼å¼ï¼Œä¸”æŒ‚è½½åˆ° /data/win ç›®å½•

```bash
# æŸ¥çœ‹åˆ†åŒºè¡¨æƒ…å†µ
[root@study ~]# parted /dev/sda print
Model: ATA VBOX HARDDISK (scsi)
Disk /dev/sda: 43.8GB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
Disk Flags: pmbr_boot

Number  Start   End     Size    File system     Name                  æ ‡å¿—
 1      1049kB  3146kB  2097kB                                        bios_grub
 2      3146kB  1077MB  1074MB  xfs
 3      1077MB  33.3GB  32.2GB                                        lvm
 4      33.3GB  34.4GB  1074MB  xfs             Linux filesystem
 5      34.4GB  35.4GB  1074MB  ext4            Microsoft basic data
 6      35.4GB  36.0GB  537MB   linux-swap(v1)  Linux swap
# æ‰¾åˆ°æœ€åä¸€ä¸ªåˆ†åŒºçš„ end ä½ç½®ï¼Œä½œä¸ºä¸‹ä¸€ä¸ªåˆ†åŒºçš„èµ·å§‹ä½ç½®
[root@study ~]# parted /dev/sda mkpart primary fat32 36.0GB 36.5GB
ä¿¡æ¯: You may need to update /etc/fstab.
# å†æ¬¡æŸ¥çœ‹ï¼Œå°±çœ‹åˆ°ç¬¬ 7 ä¸ªäº†
[root@study ~]# parted /dev/sda print
 7      36.0GB  36.5GB  522MB                   primary
 
 # ç¡®è®¤çœŸçš„å­˜åœ¨
[root@study ~]# partprobe 
Warning: æ— æ³•ä»¥è¯»å†™æ–¹å¼æ‰“å¼€ /dev/sr0 (åªè¯»æ–‡ä»¶ç³»ç»Ÿ)ã€‚/dev/sr0 å·²æŒ‰ç…§åªè¯»æ–¹å¼æ‰“å¼€ã€‚
[root@study ~]# lsblk /dev/sda7
NAME MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda7   8:7    0  498M  0 part 

# æ ¼å¼åŒ–åˆ†åŒºä¸º vfat æ ¼å¼
[root@study ~]# mkfs -t vfat /dev/sda7
mkfs.fat 3.0.20 (12 Jun 2013)
[root@study ~]# blkid /dev/sda7
/dev/sda7: SEC_TYPE="msdos" UUID="72BE-0556" TYPE="vfat" PARTLABEL="primary" PARTUUID="3a31eca1-2f5d-4960-8d61-739c4461b30f" 

# æ·»åŠ åˆ°è‡ªåŠ¨æŒ‚è½½
nano /etc/fstab
UUID="72BE-0556" /data/win vfat defaults 0 0

[root@study ~]# mkdir /data/win
[root@study ~]# mount -a
[root@study ~]# df /data/win/
æ–‡ä»¶ç³»ç»Ÿ        1K-å—  å·²ç”¨   å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹
/dev/sda7      509672     0 509672    0% /data/win

```

äº‹å®ä¸Šï¼Œä½ åº”è¯¥ä½¿ç”¨ gdisk æ¥å¤„ç† GPT åˆ†åŒºï¼Œä¸è¿‡ parted éå¸¸é€‚åˆé€šè¿‡è„šæœ¬æ¥ä¸€å£æ°”å°†åˆ†åŒºå…¨éƒ¨å»ºç«‹ï¼Œå› ä¸º parted å¯ä»¥ä¸ç”¨ä¸ç”¨æˆ·äº¤äº’