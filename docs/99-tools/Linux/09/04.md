---
title: 
sidebarDepth: 0 
category: Tools 
tag: Linux
---
# å…¶ä»– vim ä½¿ç”¨æ³¨æ„äº‹é¡¹

vim åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯ä¸Šæ‰‹ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“ï¼Œä¸‹é¢åˆ†äº«ä¸€äº›éœ€è¦æ³¨æ„åœ°æ–¹

## ðŸ€ ä¸­æ–‡ç¼–ç çš„é—®é¢˜

åœ¨ vim é‡Œé¢æ— æ³•æ˜¾ç¤ºä¸­æ–‡ï¼Œé‚£ä¹ˆä½ éœ€è¦è€ƒè™‘ï¼š

1. Linux ç³»ç»Ÿé»˜è®¤æ”¯æŒçš„è¯­ç³»æ•°æ®ï¼Œä¸Ž /etc/locale.conf æœ‰å…³
2. ç»ˆç«¯ç•Œé¢ï¼ˆbashï¼‰çš„è¯­ç³»ï¼›ä¸Ž LANGã€LC_ALL å‡ ä¸ªå‚æ•°æœ‰å…³
3. æ–‡ä»¶åŽŸæœ¬çš„ç¼–ç 
4. å¼€æœºç»ˆç«¯æœºçš„è½¯ä»¶ï¼Œä¾‹å¦‚åœ¨ GNOME ä¸‹çš„çª—å£

ä¸Šé¢æœ€é‡è¦çš„æ˜¯ç¬¬ 3 å’Œ 4 ç‚¹ï¼Œåªè¦è¿™ä¸¤ç‚¹ç¼–ç ä¸€è‡´ï¼Œå°±èƒ½ä¸ä¹±ç ï¼›

å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„æ–¹å¼æ¥æš‚æ—¶ä¿®æ”¹ tty çš„è¯­ç³»ï¼ˆå‰é¢éƒ½è®²è¿‡çš„ï¼‰

```bash
LANG=zh_CN.UTF-8
export LC_ALL=zh_CN.UTF-8
```

## ðŸ€ DOS ä¸Ž Linux çš„æ–­è¡Œå­—ç¬¦
[cat å‘½ä»¤](../06/03.md) ä¸­è®²è§£è¿‡ DOSï¼ˆwindows ç³»ç»Ÿï¼‰å»ºç«‹çš„æ–‡ä»¶çš„ç‰¹æ®Šæ ¼å¼ï¼Œå‘çŽ° DOS ä¸º `^M$`ï¼Œè€Œ linux æ˜¯ `$`ï¼Œwindows æ˜¯ CRï¼ˆ^Mï¼‰ ä¸Ž LFï¼ˆ$ï¼‰ ä¸¤ä¸ªç¬¦å·ç»„æˆçš„ï¼ŒLinux æ˜¯ LF ï¼›å¯¹äºŽ Linux çš„å½±å“å¾ˆå¤§

åœ¨ Linux æŒ‡ä»¤å¼€å§‹æ‰§è¡Œçš„æ—¶å€™ï¼Œåˆ¤æ–­ä¾æ®æ˜¯ Enter æŒ‰é”®ï¼ˆä¹Ÿå°±æ˜¯æ¢è¡Œç¬¦ï¼Œå›žè½¦ä¸€ä¸‹å°±ä¼šå‡ºçŽ°æ¢è¡Œç¬¦ï¼‰ï¼Œç”±äºŽä¸¤ä¸ªç³»ç»Ÿçš„æ¢è¡Œç¬¦ä¸ä¸€è‡´ï¼Œä¼šå¯¼è‡´ shell script ç¨‹åºæ–‡ä»¶æ— æ³•æ‰§è¡Œ

å¯ä»¥ä½¿ç”¨ dos2unix æŒ‡ä»¤æ¥ä¸€é”®è½¬æ¢ï¼Œä½†æ˜¯ç›®å‰ä¸ºæ­¢ï¼Œè™šæ‹Ÿæœºè¿˜æ²¡æœ‰ç½‘ç»œï¼Œæ— æ³•å®‰è£…ï¼Œç¬”è€…è¿™é‡Œåªè®°å½•ç”¨æ³•

```bash
dos2unix [-kn] file [newfile]
unix2dos [-kn] file [newfile]

-kï¼šä¿ç•™è¯¥æ–‡ä»¶åŽŸæœ¬çš„ mtime æ—¶é—´æ ¼å¼ï¼ˆä¸æ›´æ–°æ–‡ä»¶ä¸Šæ¬¡å†…å®¹ç»è¿‡ä¿®è®¢çš„æ—¶é—´ï¼‰
-nï¼šä¿ç•™åŽŸæœ¬çš„æ—§æ–‡ä»¶ï¼Œå°†è½¬æ¢åŽçš„å†…å®¹è¾“å‡ºåˆ°æ–°æ–‡ä»¶ï¼Œå¦‚ï¼šdos2unix -n old new
```

ç»ƒä¹ 

```bash
# å°† /etc/man_db_conf é‡æ–°å¤åˆ¶åˆ° /tmp/vitest ä¸‹ï¼Œå¹¶å°†å…¶ä¿®æ”¹ä¸º dos æ–­è¡Œ
cd /tmp/vitest
cp -a /etc/man_db_conf .
ll man_db.conf
unix2dos -k man_db.conf

# å°†ä¸Šè¿°çš„ man_db.conf è½¬æˆ linux æ¢è¡Œç¬¦ï¼Œå¹¶ä¿ç•™æ—§æ–‡ä»¶ï¼Œæ–°æ–‡ä»¶é˜²å¾¡ man_db.conf.linux
dos2unix -k -n man_db.conf man_db.conf.linux
ll man_db.conf*
file man_db.conf*
man_db.conf:	ASCII text,with CRLF line terminators   # è¯´æ˜Žäº†æ˜¯ CRLF æ¢è¡Œ
man_db.conf.linux: ASCII text
```

## ðŸ€ è¯­ç³»ç¼–ç è½¬æ¢

æ–‡ä»¶ç¼–ç è½¬æ¢ï¼Œå¯ä»¥ä½¿ç”¨ iconv æŒ‡ä»¤æ¥åšï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸€æ®µæ–‡å­—å†…å®¹ï¼ˆæ²¡æœ‰ç½‘ç»œä¸‹è½½ä¸äº†ï¼Œç›´æŽ¥ç²˜è´´å¤åˆ¶ä¿å­˜æŠŠï¼‰

```bash
æ¯å€‹ç³»çµ±ç®¡ç†å“¡éƒ½æ‡‰è©²è‡³å°‘è¦å­¸æœƒä¸€ç¨®æ–‡å­—ä»‹é¢çš„æ–‡æ›¸è™•ç†å™¨ï¼Œä»¥æ–¹ä¾¿ç³»çµ±æ—¥å¸¸çš„ç®¡ç†è¡Œç‚ºã€‚
åœ¨ Linux ä¸Šé ­çš„æ–‡æ›¸è™•ç†è»Ÿé«”éžå¸¸çš„å¤šï¼Œä¸éŽï¼Œé³¥å“¥é‚„æ˜¯å»ºè­°ä½¿ç”¨ vi é€™å€‹æ­£è¦çš„æ–‡æ›¸è™•ç†å™¨ã€‚
é€™æ˜¯å› ç‚º vi å¹¾ä¹Žåœ¨ä»»ä½•ä¸€å€‹ Unix Like çš„æ©Ÿå™¨éƒ½å­˜åœ¨ï¼Œå­¸æœƒä»–ï¼Œè¼•é¬†å¾ˆå¤šå•Šï¼
è€Œä¸”å¾Œä¾†çš„è¨ˆç•«ä¹Ÿæœ‰æŽ¨å‡º vim é€™å€‹ vi çš„é€²éšŽç‰ˆæœ¬ï¼Œå¯ä»¥ç”¨çš„é¡å¤–åŠŸèƒ½æ›´å¤šäº†ï¼
vi æ˜¯æœªä¾†æˆ‘å€‘é€²è¡Œ shell script ç¨‹å¼çš„ç·¨å¯«èˆ‡ä¼ºæœå™¨è¨­å®šçš„é‡è¦å·¥å…·å–”ï¼
è€Œä¸”æ˜¯éžå¸¸éžå¸¸é‡è¦çš„å·¥å…·ï¼Œä¸€å®šè¦å­¸æœƒæ‰è¡Œå•Šï¼ ^_^

ç„¡è«–å¦‚ä½•ï¼Œè¦ç®¡ç†å¥½ Linux ç³»çµ±æ™‚ï¼Œç´”æ–‡å­—çš„æ‰‹å·¥è¨­å®šä»æ˜¯éœ€è¦çš„ï¼é‚£éº¼åœ¨ Linux åº•ä¸‹æœ‰å“ªäº›æ–‡æ›¸ç·¨è¼¯å™¨å‘¢ï¼Ÿ
å¯å¤šäº†ï½žä¾‹å¦‚ vi, emacs, xemacs, joe, e3, xedit, kedit, pico .... å¤šçš„å¾ˆï½ž
å„å®¶è™•ç†å™¨å„æœ‰å…¶å„ªç¼ºé»žï¼Œæ‚¨ç•¶ç„¶å¯ä»¥é¸æ“‡ä»»ä½•ä¸€å€‹æ‚¨è¦ºå¾—é©ç”¨çš„æ–‡æ›¸è™•ç†å™¨ä¾†ä½¿ç”¨ã€‚ä¸éŽï¼Œé³¥å“¥é‚„æ˜¯æ¯”è¼ƒå»ºè­°ä½¿ç”¨ vi 
å•¦ï¼é€™æ˜¯å› ç‚º vi æ˜¯ Unix Like çš„æ©Ÿå™¨ä¸Šé¢é è¨­éƒ½æœ‰å®‰è£çš„è»Ÿé«”ï¼Œä¹Ÿå°±æ˜¯èªªï¼Œæ‚¨ä¸€å®šå¯ä»¥æŽ¥è§¸åˆ°é€™å€‹è»Ÿé«”å°±æ˜¯äº†ã€‚
å¦å¤–ï¼Œåœ¨è¼ƒæ–°çš„ distributions ä¸Šï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨è¼ƒæ–°è¼ƒå…ˆé€²çš„ vim é€™å€‹æ–‡æ›¸è™•ç†å™¨ï¼
vim å¯ä»¥çœ‹åšæ˜¯ vi çš„é€²éšŽè»Ÿé«”ï¼Œä»–å¯ä»¥å…·æœ‰é¡è‰²é¡¯ç¤ºï¼Œå¾ˆæ–¹ä¾¿ç¨‹å¼é–‹ç™¼äººå“¡åœ¨é€²è¡Œç¨‹å¼çš„æ’°å¯«å‘¢ï¼

ç°¡å–®çš„ä¾†èªªï¼Œ vi æ˜¯è€å¼çš„æ–‡æ›¸è™•ç†å™¨ï¼Œä¸éŽåŠŸèƒ½å·²ç¶“å¾ˆé½Šå…¨äº†ï¼Œä½†æ˜¯é‚„æ˜¯æœ‰å¯ä»¥é€²æ­¥çš„åœ°æ–¹ã€‚
vim å‰‡å¯ä»¥èªªæ˜¯ç¨‹å¼é–‹ç™¼è€…çš„ä¸€é …å¾ˆå¥½ç”¨çš„å·¥å…·ï¼Œå°±é€£ vim çš„å®˜æ–¹ç¶²ç«™ (http://www.vim.org) 
è‡ªå·±ä¹Ÿèªª vim æ˜¯ä¸€å€‹ã€Žç¨‹å¼é–‹ç™¼å·¥å…·ã€è€Œä¸æ˜¯æ–‡æ›¸è™•ç†è»Ÿé«”ï½ž^_^ã€‚
å› ç‚º vim è£¡é¢åŠ å…¥äº†å¾ˆå¤šé¡å¤–çš„åŠŸèƒ½ï¼Œä¾‹å¦‚æ”¯æ´æ­£è¦è¡¨ç¤ºæ³•çš„æœå°‹æž¶æ§‹ã€å¤šæª”æ¡ˆç·¨è¼¯ã€å€å¡Šè¤‡è£½ç­‰ç­‰ã€‚
é€™å°æ–¼æˆ‘å€‘åœ¨ Linux ä¸Šé¢é€²è¡Œä¸€äº›è¨­å®šæª”çš„ä¿®è¨‚å·¥ä½œæ™‚ï¼Œæ˜¯å¾ˆæ£’çš„ä¸€é …åŠŸèƒ½å‘¢ï¼

åº•ä¸‹é³¥å“¥æœƒå…ˆå°±ç°¡å–®çš„ vi åšå€‹ä»‹ç´¹ï¼Œç„¶å¾Œå†è·Ÿå¤§å®¶å ±å‘Šä¸€ä¸‹ vim çš„é¡å¤–åŠŸèƒ½èˆ‡ç”¨æ³•å‘¢ï¼
```

```bash
[root@study ~]# cd /tmp/
[root@study tmp]# vi big5.txt
# æŠŠä¸Šé¢çš„å†…å®¹ä¿å­˜åˆ°è¯¥æ–‡ä»¶ä¸­ï¼Œç„¶åŽä½¿ç”¨è¿™ä¸ªæ–‡ä»¶æ¥ç»ƒä¹ 
```

è¯­æ³•

```bash
iconv --list
iconv -f åŽŸæœ¬ç¼–ç  -t æ–°ç¼–ç  filename [-o newfile]

--listï¼šåˆ—å‡º iconv æ”¯æŒçš„è¯­ç³»æ•°æ®
-fï¼šfrom æ¥æºï¼ŒåŽŸæœ¬çš„ç¼–ç æ ¼å¼
-tï¼štoï¼Œå³è¦è½¬æ¢çš„ç¼–ç æ ¼å¼
-o fileï¼šå¦‚æžœè¦ä¿ç•™åŽŸæœ¬çš„æ–‡ä»¶ï¼Œä½¿ç”¨ -o æ–°æ–‡ä»¶åï¼Œå¯ä»¥å»ºç«‹æ–°ç¼–ç æ–‡ä»¶
```

å®žè·µç»ƒä¹ 

```bash
# æŸ¥çœ‹åŽŸæœ¬æ–‡ä»¶ç¼–ç ï¼Œè¿™é‡Œç”±äºŽåˆšåˆšç»ˆç«¯æœºæ˜¯ utf-8 çš„ï¼Œä¿å­˜åŽå°±æ˜¯ utf-8 äº†
[root@study tmp]# file big5.txt 
big5.txt: UTF-8 Unicode text
# é‚£ä¹ˆå°† UTF8 è½¬æˆ big5
[root@study tmp]# iconv -f utf8 -t big5 big5.txt -o big5.txt.big5
[root@study tmp]# file big5.*
big5.txt:      UTF-8 Unicode text
big5.txt.big5: ISO-8859 text
# ä¸è¿‡ç¬”è€…æµ‹è¯•ï¼Œç”± utf8 è½¬æˆ big5 ä¼šä¹±ç ï¼Œä½†æ˜¯è¿˜å¯ä»¥è½¬å›žæ¥

# ä¸‹é¢çš„æŒ‡ä»¤å¯ä»¥å°†ä¸Šé¢ç¹ä½“ä¸­æ–‡ï¼Œè½¬ä¸ºç®€ä½“ä¸­æ–‡ï¼Œå¹¶ä¸”è¿˜æ˜¯ utf8 æ ¼å¼
# çœ‹æŒ‡ä»¤æ˜¯å§ utf8 è½¬æˆ big5ï¼Œå†è½¬æˆ gb2312ï¼Œå†è½¬æˆ utf8
[root@study tmp]# iconv -f utf8 -t big5 big5.txt | \
> iconv -f big5 -t gb2312 | iconv -f gb2312 -t utf8 -o vi.gb.utf8

```

